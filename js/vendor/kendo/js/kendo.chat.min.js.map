{"version":3,"file":"kendo.chat.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendochat","js","this","$","undefined$1","kendo","window","Widget","ui","extend","NS","keys","ChatMessageBox","init","element","options","fn","call","_wrapper","_attachEvents","_typing","events","messages","placeholder","toggleButton","sendButton","destroy","input","off","remove","empty","styles","inputId","guid","inputWrapper","addClass","appendTo","attr","inputSuffix","toolbar","toggleable","buttons","length","html","renderButton","icon","buttonToggleIcon","fillMode","size","buttonSendIcon","on","_keydown","bind","_input","_inputFocusout","buttonSend","_buttonClick","buttonToggle","_toggleToolbar","start","val","_triggerTyping","e","keyCode","ENTER","preventDefault","_sendMessage","F10","trigger","value","args","text","ev","originalEvent","button","buttonFlat","iconButton","buttonIcon","hidden","chat","jQuery","DATA_K_BUTTON_NAME","SCROLL_LEFT_NAME","SCROLL_RIGHT_NAME","VISIBLE","TABINDEX","DEFAULT_ANIMATION","effects","duration","NO_ANIMATION","expand","show","collapse","hide","ChatToolBar","toolbarOptions","name","buttonsDefined","_createButtonList","scrollable","buttonsWidth","width","_initScrolling","_setupAnimation","toggle","_onClick","_onKeydown","buttonList","i","_createButton","append","first","removeAttr","btnOptions","attributes","buttonElm","title","type","tabindex","data","buttonDefaults","iconClass","prepend","renderIcon","target","closest","is","scrollButton","_scrolling","_scroll","key","LEFT","_focusButton","RIGHT","dir","current","not","candidate","index","removeAttribute","focus","scrollButtonLeft","scrollButtonLeftIcon","class","scrollButtonRight","scrollButtonRightIcon","_refreshScrollButtons","commandName","that","buttonWidth","maxScrollSize","scrollAmmount","scrollValue","currentScrollLeft","Math","min","max","scrollLeft","isNaN","parseInt","animation","defaultExpandAnimation","defaultCollapseAnimation","reverse","_animationComplete","_animationCompleteExpand","round","scrollWidth","clientWidth","children","last","outerWidth","skipAnimation","complete","kendoStop","kendoAnimate","encode","htmlEncode","DOT","AVATAR_TEMPLATE","ref","url","IMG_TEMPLATE","MESSAGE_GROUP_TEMPLATE","noAvatar","SELF_MESSAGE_GROUP_TEMPLATE","TEXT_MESSAGE_TEMPLATE","timestamp","toString","parseDate","TYPING_INDICATOR_TEMPLATE","CARD_ACTIONS_TEMPLATE","map","CARD_ACTION_BUTTON_TEMPLATE","join","HERO_CARD_TEMPLATE","images","subtitle","HERO_IMG_TEMPLATE","Templates","Components","registerTemplate","templateName","template","getTemplate","suggestedActions","action","SUGGESTED_ACTION_TEMPLATE","registerComponent","componentName","component","getComponent","Component","Class","view","Calendar","kendoCalendar","change","viewStyles","wrapper","messageList","messageListContent","messageTime","messageGroup","message","only","middle","author","avatar","buttonPrimary","scrollButtonIconLeft","scrollButtonIconRight","typingIndicator","typingIndicatorBubble","bubble","suggestedAction","cardWrapper","cardDeckScrollWrap","cardDeck","cardList","card","cardRich","cardBody","cardImage","cardTitle","cardSubtitle","cardActions","cardActionsVertical","cardAction","selected","ChatView","_list","_lastSender","typingParticipants","_scrollable","isTyping","areTyping","and","_scrollDraggable","list","messageListLabel","_listClick","_messageClick","_suggestedActionClick","_cardActionClick","_suggestedActionKeydown","_scrollButtonClick","currentTarget","scrollToLeft","find","scrollContainer","siblings","cardWidth","renderMessage","sender","Date","bubbleElement","_renderTemplate","_renderBubble","_removeTypingParticipant","id","renderSuggestedActions","_removeSuggestedActions","_scrollToBottom","renderAttachments","_renderAttachmentWrapper","attachmentLayout","cardContainer","attachments","cardElement","contentType","content","_removeTypingIndicator","renderComponent","layout","buttonLeft","_renderScrollButton","buttonRight","directionClass","targetElement","hasClass","parents","_clearSelection","SPACEBAR","messageType","group","_getMessageGroup","_appendToGroup","componentType","templateOptions","_getMessageGroupTemplate","appendTarget","iconUrl","user","messageElement","childrenCount","filter","removeClass","_renderTypingIndicator","participants","indicator","_addTypingParticipant","_composeTypingParticipantsText","found","push","splice","typingAction","typingText","replace","trimRight","selectedClass","scrollTop","prop","chatStyles","canvas","viewWrapper","messageBoxWrapper","toolbarBoxWrapper","Chat","_events","_user","_view","_toolbar","_messageBox","notify","setOptions","_setEvents","messageBox","unbind","_resetToolbarButtons","getUser","height","uiElements","toolbarElement","css","postMessage","toggleToolbar","toolbarId","postArgs","from","renderUserTypingIndicator","clearUserTypingIndicator","removeTypingIndicator","plugin"],"sources":["kendo.chat.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.html.button.js'), require('kendo.icons.js'), require('kendo.draganddrop.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.html.button', 'kendo.icons', 'kendo.draganddrop'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendochat = global.kendochat || {}, global.kendochat.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var NS = \".kendoChat\";\n        var keys = kendo.keys;\n\n        var messageBoxStyles = {\n            input: \"k-input-inner\",\n            inputWrapper: \"k-textbox k-input k-input-lg k-input-solid\",\n            button: \"k-button\",\n            buttonFlat: \"k-button-lg k-button-flat k-button-flat-base\",\n            iconButton: \"k-icon-button\",\n            buttonIcon: \"k-button-icon\",\n            buttonSend: \"k-chat-send\",\n            buttonSendIcon: \"paper-plane\",\n            buttonToggle: \"k-button-toggle\",\n            buttonToggleIcon: \"more-horizontal\",\n            hidden: \"k-hidden\",\n            inputSuffix: \"k-input-suffix\"\n        };\n\n        var ChatMessageBox = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._wrapper();\n\n                this._attachEvents();\n\n                this._typing = false;\n            },\n\n            events: [\n                \"focusToolbar\",\n                \"sendMessage\",\n                \"toggleToolbar\",\n                \"typingEnd\",\n                \"typingStart\"\n            ],\n\n            options: {\n                messages: {\n                    placeholder: \"Type a message...\",\n                    toggleButton: \"Toggle toolbar\",\n                    sendButton: \"Send message\"\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.input) {\n                    this.input.off(NS);\n                    this.input.remove();\n                    this.input = null;\n                }\n\n                this.element.off(NS);\n                this.element.empty();\n            },\n\n            _wrapper: function() {\n                var styles = ChatMessageBox.styles;\n                var options = this.options;\n                var messages = options.messages;\n                var inputId = \"inputId_\" + kendo.guid();\n\n                this.inputWrapper = this.element\n                    .addClass(styles.inputWrapper)\n                    .appendTo(this.element);\n\n                this.input = $(\"<input type='text'>\")\n                    .addClass(styles.input)\n                    .attr(\"id\", inputId)\n                    .attr(\"aria-label\", messages.placeholder)\n                    .attr(\"placeholder\", messages.placeholder)\n                    .appendTo(this.inputWrapper);\n\n                this.inputSuffix = $(\"<span></span>\")\n                    .addClass(styles.inputSuffix)\n                    .appendTo(this.inputWrapper);\n\n                if (options.toolbar && options.toolbar.toggleable && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    $(kendo.html.renderButton((\"<button class=\\\"\" + (styles.buttonToggle) + \"\\\" title=\\\"\" + (messages.toggleButton) + \"\\\" aria-label=\\\"\" + (messages.toggleButton) + \"\\\" aria-controls=\\\"\" + (options.toolbarId) + \"\\\"></button>\"),\n                        {\n                            icon: styles.buttonToggleIcon,\n                            fillMode: \"flat\",\n                            size: \"large\"\n                        }))\n                    .appendTo(this.inputSuffix);\n                }\n\n                $(kendo.html.renderButton((\"<button class=\\\"\" + (styles.buttonSend) + \"\\\" title=\\\"\" + (messages.sendButton) + \"\\\" aria-label=\\\"\" + (messages.sendButton) + \"\\\"></button>\"),\n                    {\n                        icon: styles.buttonSendIcon,\n                        fillMode: \"flat\",\n                        size: \"large\"\n                    }))\n                .appendTo(this.inputSuffix);\n            },\n\n            _attachEvents: function() {\n                var styles = ChatMessageBox.styles;\n\n                this.input\n                    .on(\"keydown\" + NS, this._keydown.bind(this))\n                    .on(\"input\" + NS, this._input.bind(this))\n                    .on(\"focusout\" + NS, this._inputFocusout.bind(this));\n\n                this.element\n                    .on(\"click\" + NS, DOT + styles.buttonSend, this._buttonClick.bind(this));\n\n                this.element\n                    .on(\"click\" + NS, DOT + styles.buttonToggle, this._toggleToolbar.bind(this));\n            },\n\n            _input: function() {\n                var currentValue = this.input.val();\n                var start = currentValue.length > 0;\n\n                this._triggerTyping(start);\n            },\n\n            _keydown: function(e) {\n                var key = e.keyCode;\n\n                switch (key) {\n                    case keys.ENTER:\n                        e.preventDefault();\n\n                        this._sendMessage();\n                        break;\n                    case keys.F10:\n                        e.preventDefault();\n\n                        this.trigger(\"focusToolbar\");\n                        break;\n                }\n            },\n\n            _buttonClick: function(e) {\n                e.preventDefault();\n\n                this._sendMessage();\n            },\n\n            _sendMessage: function() {\n                var value = this.input.val();\n\n                if (!value.length) {\n                    return;\n                }\n\n                this._triggerTyping(false);\n\n                var args = {\n                    text: value\n                };\n\n                this.trigger(\"sendMessage\", args);\n\n                this.input.val(\"\");\n            },\n\n            _inputFocusout: function() {\n                this._triggerTyping(false);\n            },\n\n            _triggerTyping: function(start) {\n                if (start) {\n                    if (!this._typing) {\n                        this.trigger(\"typingStart\", {});\n                        this._typing = true;\n                    }\n                } else {\n                    if (this._typing) {\n                        this.trigger(\"typingEnd\", {});\n                        this._typing = false;\n                    }\n                }\n            },\n\n            _toggleToolbar: function(ev) {\n                this.trigger(\"toggleToolbar\", { originalEvent: ev });\n            }\n        });\n\n        extend(true, ChatMessageBox, { styles: messageBoxStyles });\n        extend(kendo, {\n            chat: {\n                ChatMessageBox: ChatMessageBox\n            }\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var NS = \".kendoChat\";\n\n        var DATA_K_BUTTON_NAME = \"kButtonName\";\n        var SCROLL_LEFT_NAME = \"chatToolbarScrollLeft\";\n        var SCROLL_RIGHT_NAME = \"chatToolbarScrollRight\";\n        var VISIBLE = \":visible\";\n        var TABINDEX = \"tabindex\";\n\n        var DEFAULT_ANIMATION = {\n            effects: \"expand:vertical\",\n            duration: 200\n        };\n        var NO_ANIMATION = {\n            expand: {\n                show: true\n            },\n            collapse: {\n                hide: true\n            }\n        };\n\n        var toolbarStyles = {\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            buttonList: \"k-button-list k-toolbar-group\",\n            scrollButton: \"k-scroll-button\",\n            scrollButtonLeft: \"k-scroll-button-left\",\n            scrollButtonRight: \"k-scroll-button-right\",\n            scrollButtonLeftIcon: \"chevron-left\",\n            scrollButtonRightIcon: \"chevron-right\",\n            iconButton: \"k-icon-button\"\n        };\n\n        var ChatToolBar = Widget.extend({\n            init: function(element, options) {\n                options = extend({}, options, { name: \"ChatToolbar\" });\n                var toolbarOptions = options.toolbar;\n                var buttonsDefined = toolbarOptions.buttons && toolbarOptions.buttons.length;\n\n                Widget.fn.init.call(this, element, options);\n\n                if (buttonsDefined) {\n                    this._createButtonList();\n                }\n\n                if (buttonsDefined && toolbarOptions.scrollable &&\n                        this.buttonsWidth() > this.element.width()) {\n                    this._initScrolling();\n                }\n\n                this._setupAnimation();\n\n                if (buttonsDefined && toolbarOptions.toggleable) {\n                    this.toggle(true);\n                }\n\n                this.element\n                    .on(\"click\" + NS, this._onClick.bind(this))\n                    .on(\"keydown\" + NS, this._onKeydown.bind(this));\n            },\n\n            events: [\n                \"click\"\n            ],\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                this.element.off(NS);\n                this.element.empty();\n            },\n\n            _createButtonList: function() {\n                var that = this;\n                var styles = ChatToolBar.styles;\n                var buttons = that.options.toolbar.buttons;\n                var buttonList = $(\"<div class='\" + styles.buttonList + \"'></div>\");\n\n                for (var i = 0; i < buttons.length; i++) {\n                    var button = that._createButton(buttons[i]);\n                    buttonList.append(button);\n                }\n\n                buttonList.appendTo(this.element);\n\n                this.buttonList = buttonList;\n                this.buttons().first().removeAttr(TABINDEX);\n            },\n\n            _createButton: function(btnOptions) {\n                var styles = ChatToolBar.styles;\n                var buttonElm = $(\"<button>\");\n                var attributes;\n\n                if (typeof btnOptions === \"string\") {\n                    btnOptions = {\n                        name: btnOptions\n                    };\n                }\n\n                attributes = $.extend({}, btnOptions.attr || {}, {\n                    title: btnOptions.text || btnOptions.name,\n                    \"aria-label\": btnOptions.text || btnOptions.name,\n                    type: \"button\",\n                    tabindex: -1\n                });\n\n                buttonElm\n                    .attr(attributes)\n                    .addClass(btnOptions.name)\n                    .data(DATA_K_BUTTON_NAME, btnOptions.name)\n                    .addClass(styles.button)\n                    .addClass(styles.buttonDefaults);\n\n                if (btnOptions.icon || btnOptions.iconClass) {\n                    buttonElm.addClass(styles.iconButton);\n                    buttonElm.prepend(kendo.html.renderIcon({ icon: btnOptions.icon, iconClass: \"k-button-icon\" + (btnOptions.iconClass ? (\" \" + (btnOptions.iconClass)) : \"\") }));\n                }\n\n                return buttonElm;\n            },\n\n            _onClick: function(ev) {\n                var styles = ChatToolBar.styles;\n                var target = $(ev.target).closest(DOT + styles.button);\n\n                if (target.is(DOT + styles.scrollButton) && !this._scrolling) {\n                    this._scroll(target.data(DATA_K_BUTTON_NAME));\n                }\n\n                if (target.data(DATA_K_BUTTON_NAME)) {\n                    this.buttons().attr(TABINDEX, -1);\n                    target.removeAttr(TABINDEX);\n\n                    this.trigger(\"click\", {\n                        button: target[0],\n                        name: target.data(DATA_K_BUTTON_NAME),\n                        originalEvent: ev\n                    });\n                }\n            },\n\n            _onKeydown: function(e) {\n                var key = e.keyCode,\n                    keys = kendo.keys;\n\n                switch (key) {\n                    case keys.LEFT:\n                        this._focusButton(-1);\n                        break;\n                    case keys.RIGHT:\n                        this._focusButton(1);\n                        break;\n                }\n            },\n\n            _focusButton: function(dir) {\n                var buttons = this.buttons(),\n                    current = buttons.not(\"[tabindex=-1]\"),\n                    candidateIndex = current.index() + dir,\n                    candidate = buttons[candidateIndex];\n\n                if (candidate) {\n                    current.attr(TABINDEX, -1);\n                    candidate.removeAttribute(TABINDEX);\n                    candidate.focus();\n                }\n            },\n\n            _initScrolling: function() {\n                var styles = ChatToolBar.styles;\n\n                this.scrollButtonLeft = this._createButton({\n                    name: SCROLL_LEFT_NAME,\n                    icon: styles.scrollButtonLeftIcon,\n                    attr: {\n                        \"class\": styles.scrollButton + \" \" + styles.scrollButtonLeft\n                    }\n                });\n\n                this.scrollButtonRight = this._createButton({\n                    name: SCROLL_RIGHT_NAME,\n                    icon: styles.scrollButtonRightIcon,\n                    attr: {\n                        \"class\": styles.scrollButton + \" \" + styles.scrollButtonRight\n                    }\n                });\n\n                this.element.prepend(this.scrollButtonLeft);\n                this.element.append(this.scrollButtonRight);\n                this._refreshScrollButtons();\n\n                this.element.on(\"keydown\" + NS, this._refreshScrollButtons.bind(this));\n            },\n\n            _scroll: function(commandName) {\n                var that = this;\n                var buttonWidth = that.buttonWidth();\n                var maxScrollSize = this.maxScrollSize();\n                var scrollAmmount = commandName === SCROLL_LEFT_NAME ? buttonWidth * -1 : buttonWidth;\n                var currentScroll = this.currentScrollLeft();\n                var scrollValue = currentScroll + scrollAmmount;\n                scrollValue = Math.min(Math.max(scrollValue, 0), maxScrollSize);\n\n                if (commandName !== SCROLL_LEFT_NAME && commandName !== SCROLL_RIGHT_NAME) {\n                    return;\n                }\n\n                kendo.scrollLeft(that.buttonList, scrollValue);\n                that._refreshScrollButtons(scrollValue);\n            },\n\n            _refreshScrollButtons: function(value) {\n                var maxScrollSize = this.maxScrollSize();\n                var currentScrollLeft = value === undefined$1 || isNaN(parseInt(value, 10)) ? this.currentScrollLeft() : value;\n\n                if (!this.scrollButtonLeft && !this.scrollButtonRight) {\n                    return;\n                }\n\n                this.scrollButtonLeft.toggle(currentScrollLeft !== 0);\n                this.scrollButtonRight.toggle(currentScrollLeft !== maxScrollSize);\n            },\n\n            _setupAnimation: function() {\n                var animation = this.options.toolbar.animation;\n                var defaultExpandAnimation = extend({}, DEFAULT_ANIMATION);\n                var defaultCollapseAnimation = extend({\n                    reverse: true,\n                    hide: true\n                }, DEFAULT_ANIMATION);\n\n                if (animation === false) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                } else {\n                    animation = extend(true, {\n                        expand: defaultExpandAnimation,\n                        collapse: defaultCollapseAnimation\n                    }, animation);\n                }\n\n                this.options.toolbar.animation = animation;\n            },\n\n            _animationComplete: function() {\n                this._refreshScrollButtons();\n            },\n\n            _animationCompleteExpand: function() {\n                this._animationComplete();\n                this.buttons().not(\"[tabindex=-1]\").trigger(\"focus\");\n            },\n\n            currentScrollLeft: function() {\n                return Math.round(kendo.scrollLeft(this.buttonList));\n            },\n\n            maxScrollSize: function() {\n                return Math.round(this.buttonList[0].scrollWidth - this.buttonList[0].clientWidth);\n            },\n\n            buttons: function() {\n                var styles = ChatToolBar.styles;\n                return this.buttonList ? this.buttonList.children(DOT + styles.button) : null;\n            },\n\n            buttonWidth: function() {\n                return Math.round(this.buttons().last().outerWidth(true));\n            },\n\n            buttonsWidth: function() {\n                var width = 0;\n\n                if (this.buttons()) {\n                    width = this.buttonWidth() * this.buttons().length;\n                }\n\n                return width;\n            },\n\n            toggle: function(skipAnimation) {\n                var animation = this.options.toolbar.animation;\n\n                if (skipAnimation) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                }\n\n                animation.expand.complete = this._animationCompleteExpand.bind(this);\n                animation.collapse.complete = this._animationComplete.bind(this);\n\n                if (this.element.is(VISIBLE)) {\n                    this.element.kendoStop().kendoAnimate(animation.collapse);\n                } else {\n                    this.element.kendoStop().kendoAnimate(animation.expand);\n                }\n\n            },\n\n            focus: function() {\n                if (!this.element.is(VISIBLE)) {\n                    this.toggle();\n                } else {\n                    this.buttons().not(\"[tabindex=-1]\").trigger(\"focus\");\n                }\n            }\n        });\n\n        extend(true, ChatToolBar, { styles: toolbarStyles });\n        extend(kendo.chat, {\n            ChatToolBar: ChatToolBar\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var encode = kendo.htmlEncode;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var SPACE = \" \";\n        var NS = \".kendoChat\";\n\n        var IMG_TEMPLATE = function (ref) {\n            var url = ref.url;\n            var text = ref.text;\n            var styles = ref.styles;\n\n            return (\"<img src=\\\"\" + url + \"\\\" alt=\\\"\" + (encode(text)) + \"\\\">\");\n        };\n\n        var AVATAR_TEMPLATE = function (ref) {\n            var url = ref.url;\n            var text = ref.text;\n            var styles = ref.styles;\n\n            return \"<div class=\\\"k-avatar k-avatar-md k-avatar-solid k-avatar-solid-primary k-rounded-full\\\">\" +\n                                    \"<span class=\\\"k-avatar-image\\\">\" +\n                                        IMG_TEMPLATE({ url: url, text: text, styles: styles }) +\n                                    \"</span>\" +\n                                \"</div>\";\n        };\n\n        var MESSAGE_GROUP_TEMPLATE = function (ref) {\n            var text = ref.text;\n            var url = ref.url;\n            var styles = ref.styles;\n\n            return (\"<div \" + (encode(text)) + \" class=\\\"\" + (styles.messageGroup) + \" \" + (url ? \"\" : styles.noAvatar) + \"\\\">\\n            <p class=\\\"\" + (styles.author) + \"\\\">\" + (encode(text)) + \"</p>\\n            \" + (url ? AVATAR_TEMPLATE({ url: url, text: text, styles: styles }) : '') + \"\\n        </div>\");\n        };\n\n        var SELF_MESSAGE_GROUP_TEMPLATE = function (ref) {\n            var url = ref.url;\n            var text = ref.text;\n            var styles = ref.styles;\n\n            return (\"<div me class=\\\"\" + (styles.messageGroup) + \" \" + (styles.self) + \" \" + (url ? \"\" : styles.noAvatar) + \"\\\">\\n        \" + (url ? AVATAR_TEMPLATE({ url: url, text: text, styles: styles }) : '') + \"\\n    </div>\");\n        };\n\n        var TEXT_MESSAGE_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var text = ref.text;\n            var timestamp = ref.timestamp;\n\n            return (\"<div class=\\\"\" + (styles.message) + \"\\\">\\n        <time class=\\\"\" + (styles.messageTime) + \"\\\">\" + (kendo.toString(kendo.parseDate(timestamp), \"HH:mm:ss\")) + \"</time>\\n        <div class=\\\"\" + (styles.bubble) + \"\\\">\" + (encode(text)) + \"</div>\\n    </div>\");\n        };\n\n        var TYPING_INDICATOR_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var text = ref.text;\n\n            return (\"<div class=\\\"\" + (styles.messageListContent) + \" \" + (styles.typingIndicatorBubble) + \"\\\">\\n        <p class=\\\"\" + (styles.author) + \"\\\">\" + (encode(text)) + \"</p>\\n        <div class=\\\"\" + (styles.message) + \"\\\">\\n            <div class=\\\"\" + (styles.bubble) + \"\\\">\\n                <div class=\\\"\" + (styles.typingIndicator) + \"\\\">\\n                    <span></span><span></span><span></span>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\");\n        };\n\n        var SUGGESTED_ACTION_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var action = ref.action;\n\n            return (\"<span role=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"\" + (styles.suggestedAction) + \"\\\" data-value=\\\"\" + (encode(action.value)) + \"\\\">\" + (encode(action.title)) + \"</span>\");\n        };\n\n        var SUGGESTED_ACTIONS_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var suggestedActions = ref.suggestedActions;\n\n            return (\"<div class=\\\"\" + (styles.suggestedActions) + \"\\\">\\n        \" + (suggestedActions.map(function (action) { return SUGGESTED_ACTION_TEMPLATE({ styles: styles, action: action }); }).join('')) + \"\\n    </div>\");\n        };\n\n        var HERO_IMG_TEMPLATE = function (ref) {\n            var images = ref.images;\n            var styles = ref.styles;\n\n            return (\"<img src=\\\"\" + (encode(images[0].url)) + \"\\\" alt=\\\"\" + (images[0].alt) + \"\\\" class=\\\"\" + (styles.cardImage) + \"\\\" />\");\n        };\n\n        var CARD_ACTION_BUTTON_TEMPLATE = function (ref) {\n            var button = ref.button;\n            var styles = ref.styles;\n\n            return (\"<span class=\\\"\" + (styles.cardAction) + \"\\\"><span class=\\\"\" + (styles.button) + \" \" + (styles.buttonPrimary) + \"\\\" data-value=\\\"\" + (encode(button.value)) + \"\\\">\" + (encode(button.title)) + \"</span></span>\");\n        };\n\n        var CARD_ACTIONS_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var buttons = ref.buttons;\n\n            return (\"<div class=\\\"\" + (styles.cardActions) + \" \" + (styles.cardActionsVertical) + \"\\\">\\n        \" + (buttons.map(function (button) { return CARD_ACTION_BUTTON_TEMPLATE({ styles: styles, button: button }); }).join('')) + \"\\n    </div>\");\n        };\n\n        var HERO_CARD_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var images = ref.images;\n            var buttons = ref.buttons;\n            var title = ref.title;\n            var subtitle = ref.subtitle;\n            var text = ref.text;\n\n            return (\"<div class=\\\"\" + (styles.card) + \" \" + (styles.cardRich) + \"\\\">\\n        \" + ((typeof images !== \"undefined\" && images.length > 0) ? HERO_IMG_TEMPLATE({ images: images, styles: styles }) : '') + \"\\n        <div class=\\\"\" + (styles.cardBody) + \"\\\">\\n            \" + (typeof title !== \"undefined\" ? (function () { return (\"<h5 class=\\\"\" + (styles.cardTitle) + \"\\\">\" + (encode(title)) + \"</h5>\"); })() : '') + \"\\n            \" + (typeof subtitle !== \"undefined\" ? (function () { return (\"<h6 class=\\\"\" + (styles.cardSubtitle) + \"\\\">\" + (encode(subtitle)) + \"</h6>\"); })() : '') + \"\\n            \" + (typeof text !== \"undefined\" ? (function () { return (\"<p>\" + (encode(text)) + \"</p>\"); })() : '') + \"\\n        </div>\\n        \" + ((typeof buttons !== \"undefined\" && buttons.length > 0) ? CARD_ACTIONS_TEMPLATE({ buttons: buttons, styles: styles }) : '') + \"\\n    </div>\");\n        };\n\n        extend(kendo.chat, {\n            Templates: {},\n            Components: {}\n        });\n\n        kendo.chat.registerTemplate = function(templateName, template) {\n            kendo.chat.Templates[templateName] = kendo.template(template);\n        };\n\n        kendo.chat.getTemplate = function(templateName) {\n            return kendo.chat.Templates[templateName] || TEXT_MESSAGE_TEMPLATE;\n        };\n\n        kendo.chat.registerTemplate(\"text\", TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate(\"message\", TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate(\"typing\", TYPING_INDICATOR_TEMPLATE);\n        kendo.chat.registerTemplate(\"suggestedAction\", SUGGESTED_ACTIONS_TEMPLATE);\n        kendo.chat.registerTemplate(\"heroCard\", HERO_CARD_TEMPLATE);\n        kendo.chat.registerTemplate(\"application/vnd.microsoft.card.hero\", HERO_CARD_TEMPLATE);\n\n        kendo.chat.registerComponent = function(componentName, component) {\n            kendo.chat.Components[componentName] = component;\n        };\n\n        kendo.chat.getComponent = function(componentName) {\n            return kendo.chat.Components[componentName] || null;\n        };\n\n        var Component = kendo.chat.Component = kendo.Class.extend({\n            init: function(options, view) {\n                this.element = $('<div></div>');\n                this.options = options;\n                this.view = view;\n            },\n\n            destroy: function() {\n                kendo.destroy(this.element);\n            }\n        });\n\n        var Calendar = Component.extend({\n            init: function(options, view) {\n                Component.fn.init.call(this, options, view);\n\n                this.element.kendoCalendar({\n                    change: function() {\n                        view.trigger(\"suggestedAction\", { text: kendo.toString(this.value(), 'd'), type: \"message\" });\n                    }\n                });\n            },\n\n            destroy: function() {\n            }\n        });\n        kendo.chat.registerComponent(\"calendar\", Calendar);\n\n        var viewStyles = {\n            wrapper: \"k-chat\",\n            messageList: \"k-avatars\",\n            messageListContent: \"k-message-list-content\",\n            messageTime: \"k-message-time\",\n            messageGroup: \"k-message-group\",\n            message: \"k-message\",\n            only: \"k-only\",\n            first: \"k-first\",\n            middle: \"k-middle\",\n            last: \"k-last\",\n            author: \"k-author\",\n            avatar: \"k-avatar\",\n            noAvatar: \"k-no-avatar\",\n            self: \"k-alt\",\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            iconButton: \"k-icon-button\",\n            buttonIcon: \"k-button-icon\",\n            buttonPrimary: \"k-button-md k-rounded-md k-button-flat k-button-flat-primary\",\n            scrollButtonIconLeft: \"chevron-left\",\n            scrollButtonIconRight: \"chevron-right\",\n            typingIndicator: \"k-typing-indicator\",\n            typingIndicatorBubble: \"k-typing-indicator-bubble\",\n            bubble: \"k-chat-bubble\",\n            suggestedActions: \"k-quick-replies\",\n            suggestedAction: \"k-quick-reply\",\n            cardWrapper: \"k-card-container\",\n            cardDeckScrollWrap: \"k-card-deck-scrollwrap\",\n            cardDeck: \"k-card-deck\",\n            cardList: \"k-card-list\",\n            card: \"k-card\",\n            cardRich: \"k-card-type-rich\",\n            cardBody: \"k-card-body\",\n            cardImage: \"k-card-image\",\n            cardTitle: \"k-card-title\",\n            cardSubtitle: \"k-card-subtitle\",\n            cardActions: \"k-card-actions\",\n            cardActionsVertical: \"k-card-actions-vertical\",\n            cardAction: \"k-card-action\",\n            selected: \"k-selected\"\n        };\n\n        var ChatView = kendo.chat.ChatView = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._list();\n\n                this._lastSender = null;\n\n                this.typingParticipants = [];\n\n                this._attachEvents();\n\n                this._scrollable();\n            },\n\n            events: [\n            ],\n\n            options: {\n                messages: {\n                    isTyping: \" is typing.\",\n                    areTyping: \" are typing.\",\n                    and: \" and \"\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this._scrollDraggable) {\n                    this._scrollDraggable.destroy();\n                }\n\n                this.element.empty();\n                this.element.off(NS);\n\n                this.list = null;\n                this._lastSender = null;\n            },\n\n            _list: function() {\n                var viewStyles = ChatView.styles;\n\n                this.element\n                    .addClass(viewStyles.messageList)\n                    .attr(\"role\", \"log\")\n                    .attr(\"aria-label\", this.options.messages.messageListLabel);\n\n                this.list = $(\"<div>\")\n                    .addClass(viewStyles.messageListContent)\n                    .appendTo(this.element);\n            },\n\n            _attachEvents: function() {\n                var styles = ChatView.styles;\n\n                this.element\n                    .on(\"click\" + NS, this._listClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.message, this._messageClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.suggestedAction, this._suggestedActionClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.cardAction + SPACE + DOT + styles.button, this._cardActionClick.bind(this));\n\n                this.element.on(\"keydown\" + NS, DOT + styles.suggestedAction, this._suggestedActionKeydown.bind(this));\n            },\n\n            _scrollable: function() {\n                var viewStyles = ChatView.styles;\n\n                this.element\n                    .on(\"click\" + NS, DOT + viewStyles.cardDeckScrollWrap + SPACE + DOT + viewStyles.button, this._scrollButtonClick.bind(this));\n            },\n\n            _scrollButtonClick: function(e) {\n                var viewStyles = ChatView.styles;\n                var button = $(e.currentTarget);\n                var scrollToLeft = button.find(((DOT + viewStyles.buttonIcon) + \"[class*=\" + (viewStyles.scrollButtonIconLeft) + \"]\")).length !== 0;\n                var scrollContainer = button.siblings(DOT + viewStyles.cardDeck);\n                var lastCard = scrollContainer.find(DOT + viewStyles.card).last();\n                var cardWidth = lastCard.outerWidth(true);\n\n                if (scrollToLeft) {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) - cardWidth);\n                } else {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) + cardWidth);\n                }\n            },\n\n            getTemplate: function(templateName) {\n                return kendo.chat.getTemplate(templateName);\n            },\n\n            getComponent: function(type) {\n               return kendo.chat.getComponent(type);\n            },\n\n            renderMessage: function(message, sender) {\n                if (!message.timestamp) {\n                    message.timestamp = new Date();\n                }\n\n                if (!message.text) {\n                    message.text = \"\";\n                }\n\n                var bubbleElement = this._renderTemplate(message.type, message);\n\n                this._renderBubble(message.type, bubbleElement, sender);\n\n                if (message.type == \"typing\") {\n                    if (this.typingParticipants.length > 0) {\n                        this._removeTypingParticipant(sender);\n                    }\n                } else {\n                    this._lastSender = sender.id;\n                }\n            },\n\n            renderSuggestedActions: function(suggestedActions) {\n                this._removeSuggestedActions();\n\n                var element = this._renderTemplate(\"suggestedAction\", { suggestedActions: suggestedActions });\n\n                this.list.append(element);\n\n                this._scrollToBottom();\n            },\n\n            renderAttachments: function(options) {\n                var wrapper = this._renderAttachmentWrapper(options.attachmentLayout);\n                var cardContainer = options.attachmentLayout === \"carousel\" ? wrapper.find(DOT + ChatView.styles.cardDeck) : wrapper;\n                var attachments = options.attachments;\n\n                if (!attachments.length) {\n                    return;\n                }\n\n                for (var i = 0; i < attachments.length; i++) {\n                    var cardElement = this._renderTemplate(attachments[i].contentType, attachments[i].content);\n\n                    cardContainer.append(cardElement);\n                }\n\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n\n                this.list.append(wrapper);\n\n                this._lastSender = null;\n            },\n\n            renderComponent: function(type) {\n                var componentType = this.getComponent(type);\n                var component = new componentType({}, this);\n\n                this.list.append(component.element);\n\n                this._scrollToBottom();\n            },\n\n            _renderAttachmentWrapper: function(layout) {\n                var viewStyles = ChatView.styles;\n                var wrapper = $(\"<div>\");\n\n                if (layout === \"carousel\") {\n                    wrapper.addClass(viewStyles.cardDeckScrollWrap);\n\n                    var buttonLeft = this._renderScrollButton(viewStyles.scrollButtonIconLeft);\n                    wrapper.append(buttonLeft);\n\n                    wrapper.append($(\"<div>\").addClass(viewStyles.cardDeck));\n\n                    var buttonRight = this._renderScrollButton(viewStyles.scrollButtonIconRight);\n                    wrapper.append(buttonRight);\n                } else {\n                    wrapper.addClass(viewStyles.cardList);\n                }\n\n                return wrapper;\n            },\n\n            _renderScrollButton: function(directionClass) {\n                var viewStyles = ChatView.styles;\n\n                return $(\"<button>\")\n                    .addClass(viewStyles.button)\n                    .addClass(viewStyles.buttonDefaults)\n                    .addClass(viewStyles.iconButton)\n                    .append(kendo.html.renderIcon({ icon: directionClass, iconClass: viewStyles.buttonIcon }));\n            },\n\n            _removeSuggestedActions: function() {\n                this.list.find(DOT + ChatView.styles.suggestedActions).remove();\n            },\n\n            _listClick: function(e) {\n                var styles = ChatView.styles;\n                var targetElement = $(e.target);\n\n                if (targetElement.hasClass(styles.message) || targetElement.parents(DOT + styles.message).length) {\n                    return;\n                }\n\n                this._clearSelection();\n            },\n\n            _messageClick: function(e) {\n                this._clearSelection();\n\n                $(e.currentTarget).addClass(ChatView.styles.selected);\n            },\n\n            _suggestedActionClick: function(e) {\n                var text = $(e.target).data(\"value\") || \"\";\n\n                this.trigger(\"actionClick\", { text: text });\n\n                this._removeSuggestedActions();\n            },\n\n            _suggestedActionKeydown: function(e) {\n                if (e.keyCode === kendo.keys.SPACEBAR || e.keyCode === kendo.keys.ENTER) {\n                    this._suggestedActionClick(e);\n                }\n            },\n\n            _cardActionClick: function(e) {\n                var text = $(e.target).data(\"value\") || \"\";\n\n                this.trigger(\"actionClick\", { text: text });\n            },\n\n            _renderBubble: function(messageType, bubbleElement, sender) {\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n\n                var group = this._getMessageGroup(sender, messageType);\n\n                this._appendToGroup(group, bubbleElement, messageType);\n\n                this._scrollToBottom();\n            },\n\n            _renderTemplate: function(type, options) {\n                var componentType = this.getComponent(type);\n                var element;\n\n                if (componentType) {\n                    var component = new componentType(options, this);\n\n                    element = component.element;\n                } else {\n                    var template = this.getTemplate(type);\n                    var templateOptions = extend(true, {}, options, { styles: ChatView.styles });\n\n                    element = $(template(templateOptions));\n                }\n\n                return element;\n            },\n\n            _getMessageGroup: function(sender, messageType) {\n                var viewStyles = ChatView.styles;\n                var template = this._getMessageGroupTemplate(sender, messageType);\n                var appendTarget = messageType == \"typing\" ? this.element : this.list;\n                var group;\n\n                if (sender.id === this._lastSender && this._lastSender !== null && messageType !== \"typing\") {\n                    group = this.list.find(DOT + viewStyles.messageGroup).last();\n\n                    if (group.length) {\n                        return group;\n                    }\n                }\n\n                return $(template({ text: sender.name, url: sender.iconUrl, styles: viewStyles })).appendTo(appendTarget);\n            },\n\n            _getMessageGroupTemplate: function(sender, messageType) {\n                var isOwnMessage = sender.id === this.options.user.id;\n                var template = isOwnMessage ?\n                    SELF_MESSAGE_GROUP_TEMPLATE :\n                    MESSAGE_GROUP_TEMPLATE;\n\n                if (messageType == \"typing\") {\n                    template = TYPING_INDICATOR_TEMPLATE;\n                }\n\n                return template;\n            },\n\n            _appendToGroup: function(group, messageElement, messageType) {\n                var viewStyles = ChatView.styles;\n                var children = group.find(DOT + viewStyles.message);\n                var childrenCount = children.length;\n                var indicator = this.element.find(DOT + viewStyles.typingIndicator);\n\n                if (indicator.length && messageType == \"typing\") {\n                    return;\n                }\n\n                messageElement.addClass(childrenCount === 0 ? viewStyles.only : viewStyles.last);\n\n                children.filter(DOT + viewStyles.only)\n                    .removeClass(viewStyles.only)\n                    .addClass(viewStyles.first);\n\n                children.filter(DOT + viewStyles.last)\n                    .removeClass(viewStyles.last)\n                    .addClass(viewStyles.middle);\n\n                group.append(messageElement);\n            },\n\n            _renderTypingIndicator: function(sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble),\n                    indicatorList,\n                    participants;\n\n                this._addTypingParticipant(sender);\n\n                if (indicator.length) {\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n\n                    indicatorList = indicator.find(DOT + viewStyles.author).first();\n                    indicatorList.text(participants);\n\n                } else {\n                    $(TYPING_INDICATOR_TEMPLATE({\n                        text: sender.name + this.options.messages.isTyping,\n                        styles: viewStyles\n                    })).appendTo(this.element);\n                }\n\n                this._scrollToBottom();\n            },\n\n            _addTypingParticipant: function(sender) {\n                var found = false;\n                for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                    if (this.typingParticipants[i].id == sender.id) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found) {\n                    this.typingParticipants.push(sender);\n                }\n            },\n\n            _removeTypingParticipant: function(sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble),\n                    indicatorList,\n                    participants;\n\n                if (indicator.length) {\n                    for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                        if (this.typingParticipants[i].id == sender.id) {\n                            this.typingParticipants.splice(i, 1);\n                        }\n                    }\n\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n\n                    if (participants === \"\") {\n                        indicator.remove();\n                    } else {\n                        indicatorList = indicator.find(DOT + viewStyles.author).first();\n                        indicatorList.text(participants);\n                    }\n                }\n            },\n\n            _composeTypingParticipantsText: function(participants) {\n                var messages = this.options.messages,\n                    typingAction = participants.length == 1 ? messages.isTyping : messages.areTyping,\n                    typingText = \"\";\n\n                if (participants.length === 0) {\n                    return typingText;\n                }\n\n                typingText = this.typingParticipants.map(function(author) {\n                    return author.name;\n                }).join(', ').replace(/,(?!.*,)/gmi, messages.and.trimRight()) + typingAction;\n\n                return typingText;\n            },\n\n            _removeTypingIndicator: function() {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble);\n\n                if (indicator.length) {\n                    this.typingParticipants = [];\n                    indicator.remove();\n                }\n            },\n\n            _clearSelection: function() {\n                var selectedClass = ChatView.styles.selected;\n\n                this.element.find(DOT + selectedClass).removeClass(selectedClass);\n            },\n\n            _scrollToBottom: function() {\n                this.element.scrollTop(this.element.prop(\"scrollHeight\"));\n            }\n        });\n\n        extend(true, ChatView, { styles: viewStyles });\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"chat\",\n        name: \"Chat\",\n        category: \"web\",\n        description: \"The Chat component.\",\n        depends: [ \"core\", \"draganddrop\", \"html.button\" ]\n    };\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n\n        var chatStyles = {\n            wrapper: \"k-chat\",\n            canvas: \"k-chat-canvas\",\n            viewWrapper: \"k-message-list\",\n            messageBoxWrapper: \"k-message-box\",\n            toolbarBoxWrapper: \"k-toolbar-box\"\n        };\n\n        var Chat = Widget.extend({\n            init: function(element, options, events) {\n                Widget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                this._user();\n\n                this._wrapper();\n\n                this._view();\n\n                if (options && options.toolbar && options.toolbar.buttons) {\n                    this._toolbar();\n                }\n\n                this._messageBox();\n\n                kendo.notify(this);\n            },\n\n            events: [\n                \"typingStart\",\n                \"typingEnd\",\n                \"post\",\n                \"sendMessage\",\n                \"actionClick\",\n                \"toolClick\"\n            ],\n\n            options: {\n                user: {\n                    name: \"User\",\n                    iconUrl: \"\"\n                },\n                name: \"Chat\",\n                messages: {\n                    messageListLabel: \"Message list\",\n                    placeholder: \"Type a message...\",\n                    toggleButton: \"Toggle toolbar\",\n                    sendButton: \"Send message\"\n                },\n                toolbar: false\n            },\n\n            setOptions: function(options) {\n                this._setEvents(options);\n                $.extend(true, this.options, options);\n\n                if (this.toolbar && \"toolbar\" in options) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n\n                this._messageBox();\n\n                if (\"toolbar\" in options) {\n                    this._resetToolbarButtons(options);\n                    this._toolbar();\n                }\n            },\n\n            _resetToolbarButtons: function(options) {\n                var toolbarBoxWrapper = this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper);\n\n                if (!toolbarBoxWrapper.is(\":visible\")) {\n                    toolbarBoxWrapper.show();\n                }\n\n                if (options.toolbar && typeof options.toolbar == \"object\" && \"buttons\" in options.toolbar) {\n                    this.options.toolbar.buttons = options.toolbar.buttons;\n                }\n            },\n\n            destroy: function() {\n                if (this.view) {\n                    this.view.unbind();\n                    this.view.destroy();\n                    this.view = null;\n                }\n\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n\n                if (this.toolbar) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n\n                Widget.fn.destroy.call(this);\n            },\n\n            _user: function() {\n                this.options.user.id = kendo.guid();\n            },\n\n            getUser: function() {\n                return extend(true, {}, this.options.user);\n            },\n\n            _wrapper: function() {\n                var chatStyles = Chat.styles;\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n                var uiElements = \"<div class='\" + chatStyles.viewWrapper + \"'></div>\" +\n                                 \"<span class='\" + chatStyles.messageBoxWrapper + \"'></span>\";\n                var toolbarElement = $((\"<div class=\\\"\" + (chatStyles.toolbarBoxWrapper) + \"\\\" role=\\\"toolbar\\\"></div>\")).hide();\n\n                this.wrapper = this.element\n                    .addClass(chatStyles.wrapper)\n                    .append(uiElements)\n                    .append(toolbarElement);\n\n                if (options.toolbar && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper).show();\n                }\n\n                if (height) {\n                    this.wrapper.height(height);\n                }\n\n                if (width) {\n                    this.wrapper.css(\"max-width\", width);\n                }\n            },\n\n            _view: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n\n                var element = this.wrapper.find(DOT + chatStyles.viewWrapper + \"\");\n\n                this.view = new kendo.chat.ChatView(element, options);\n\n                this.view\n                    .bind(\"actionClick\", function(args) {\n                        that.trigger(\"actionClick\", args);\n\n                        that.postMessage(args.text);\n                    });\n            },\n\n            _messageBox: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n                var element = this.wrapper.find(DOT + chatStyles.messageBoxWrapper + \"\");\n\n                this.messageBox = new kendo.chat.ChatMessageBox(element, options);\n\n                this.messageBox\n                    .bind(\"typingStart\", function(args) {\n                        that.trigger(\"typingStart\", args);\n                    })\n                    .bind(\"typingEnd\", function(args) {\n                        that.trigger(\"typingEnd\", args);\n                    })\n                    .bind(\"sendMessage\", function(args) {\n                        that.trigger(\"sendMessage\", args);\n\n                        that.postMessage(args.text);\n                    })\n                    .bind(\"toggleToolbar\", function() {\n                        that.toggleToolbar();\n                    })\n                    .bind(\"focusToolbar\", function() {\n                        if (that.toolbar) {\n                            that.toolbar.focus();\n                        }\n                    });\n            },\n\n            _toolbar: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, that.options);\n                var element = that.wrapper.find(DOT + chatStyles.toolbarBoxWrapper + \"\");\n\n                that.options.toolbarId = kendo.guid();\n                element.attr(\"id\", that.options.toolbarId);\n\n                if (options.toolbar.scrollable === undefined$1) {\n                    this.options.toolbar.scrollable = options.toolbar.scrollable = true;\n                }\n\n                if (options.toolbar.toggleable === undefined$1) {\n                    this.options.toolbar.toggleable = options.toolbar.toggleable = false;\n                }\n\n                that.toolbar = new kendo.chat.ChatToolBar(element, options);\n\n                that.toolbar.bind(\"click\", function(ev) {\n                    that.trigger(\"toolClick\", {\n                        sender: that,\n                        name: ev.name,\n                        button: ev.button,\n                        messageBox: that.messageBox.input[0],\n                        originalEvent: ev.originalEvent\n                    });\n                });\n            },\n\n            postMessage: function(message) {\n                var postArgs = extend(true, {}, { text: message, type: \"message\", timestamp: new Date(), from: this.getUser() });\n\n                this.trigger(\"post\", postArgs);\n\n                this.renderMessage(postArgs, postArgs.from);\n            },\n\n            // TEST calling View renderMessage\n            renderMessage: function(message, sender) {\n                this.view.renderMessage(message, sender);\n            },\n\n            // TEST calling View renderSuggestedActions\n            renderSuggestedActions: function(suggestedActions) {\n                this.view.renderSuggestedActions(suggestedActions);\n            },\n\n            // TEST calling View renderCard\n            renderAttachments: function(options, sender) {\n                this.view.renderAttachments(options, sender);\n            },\n\n            toggleToolbar: function(skipAnimation) {\n                this.toolbar.toggle(skipAnimation);\n            },\n\n            renderUserTypingIndicator: function(sender) {\n                this.view._renderTypingIndicator(sender);\n            },\n\n            clearUserTypingIndicator: function(sender) {\n                this.view._removeTypingParticipant(sender);\n            },\n\n            removeTypingIndicator: function() {\n                this.view._removeTypingIndicator();\n            }\n        });\n\n        kendo.ui.plugin(Chat);\n\n        extend(true, Chat, { styles: chatStyles });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}