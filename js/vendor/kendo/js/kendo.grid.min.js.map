{"version":3,"file":"kendo.grid.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendogrid","js","this","$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","ref","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","events","concat","ev","item","data","split","map","val","obj","obj$1","indexOf","key","reduce","acc","v","Object","assign","target","action","this$1$1","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","SortCommand","exec","idx","dataSource","sort","dir","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","SORTED_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","SELECTCOLUMNTMPL","size","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","SORTHEADERTMPL","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","columns","encoded","locked","parentIds","column","hidden","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","id","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","scrollableContent","scrollable","leftMostPosition","groupable","virtualScrollable","navigatable","toolbar","filterable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","editContainer","_editContainer","_mousedownOnEditCell","tap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","dragToSelect","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","_canDrag","link","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isEdited","isIE","_initMobile","head","mainOptions","_action","_buildStates","isEditable","isSelectable","isSortable","isRowReorderable","hasSelection","isSorted","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","rowTemplateFunc","paramName","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","Function","colSpanAttributes","dirty","dirtyFields","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","f","useWithBlock","fieldValue","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","resultTemplate","scrollableNoGridHeightStyles","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.data.js'), require('kendo.columnsorter.js'), require('kendo.editable.js'), require('kendo.window.js'), require('kendo.filtermenu.js'), require('kendo.filtercell.js'), require('kendo.columnmenu.js'), require('kendo.groupable.js'), require('kendo.pager.js'), require('kendo.selectable.js'), require('kendo.sortable.js'), require('kendo.reorderable.js'), require('kendo.resizable.js'), require('kendo.ooxml.js'), require('kendo.excel.js'), require('kendo.pane.js'), require('kendo.progressbar.js'), require('kendo.pdf.js'), require('kendo.dialog.js'), require('kendo.switch.js'), require('kendo.html.button.js'), require('kendo.textbox.js'), require('kendo.form.js'), require('kendo.toolbar.js'), require('kendo.icons.js'), require('kendo.menu.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.columnsorter', 'kendo.editable', 'kendo.window', 'kendo.filtermenu', 'kendo.filtercell', 'kendo.columnmenu', 'kendo.groupable', 'kendo.pager', 'kendo.selectable', 'kendo.sortable', 'kendo.reorderable', 'kendo.resizable', 'kendo.ooxml', 'kendo.excel', 'kendo.pane', 'kendo.progressbar', 'kendo.pdf', 'kendo.dialog', 'kendo.switch', 'kendo.html.button', 'kendo.textbox', 'kendo.form', 'kendo.toolbar', 'kendo.icons', 'kendo.menu'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendogrid = global.kendogrid || {}, global.kendogrid.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            ContextMenu = ui.ContextMenu,\n            extend = $.extend,\n            encode = kendo.htmlEncode;\n\n        var ACTION = \"action\";\n\n        var GridContextMenu = ContextMenu.extend({\n            init: function(element, options) {\n                var that = this;\n\n                ContextMenu.fn.init.call(that, element, options);\n\n                that._overrideTemplates();\n                that._extendItems();\n\n                that.bind(\"select\", that._onSelect.bind(that));\n                that.bind(\"open\", that._onOpen.bind(that));\n            },\n\n            _overrideTemplates: function() {\n                this.templates.sprite = function (ref) {\n                    var icon = ref.icon;\n                    var spriteCssClass = ref.spriteCssClass;\n\n                    return (\"\" + ((icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''));\n                };\n            },\n\n            defaultItems: {\n                \"separator\": { name: \"separator\", separator: true },\n                \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n                \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n                \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n                \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                    { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                    { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                    { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" } ] },\n                \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n                \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n                \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"arrows-no-change\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                    { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                    { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                    { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                    { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n                ] },\n                \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n                \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                    { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                    { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                    { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n                ] },\n                \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n                \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n                // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n                //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n                // ] },\n            },\n\n            events: ContextMenu.fn.events.concat([\n                ACTION\n            ]),\n\n            _onSelect: function(ev) {\n                var command = $(ev.item).data(\"command\");\n                var options = $(ev.item).data(\"options\");\n                    options = options ? options.split(\",\")\n                    .map(function (val) {\n                        var obj, obj$1;\n\n                        if (val.indexOf(\":\") > -1) {\n                            var ref = val.split(\":\");\n                            var key = ref[0];\n                            var val = ref[1];\n                            return ( obj = {}, obj[key || \"_\"] = val, obj );\n                        }\n\n                        return ( obj$1 = {}, obj$1[val] = true, obj$1 );\n                    })\n                    .reduce(function (acc, v) { return Object.assign(acc, v); }, {}) : {};\n\n                var target = $(ev.target);\n\n                if (!command) {\n                    return;\n                }\n\n                this.action({\n                    command: command,\n                    options: Object.assign(options, { target: target })\n                });\n            },\n\n            _onOpen: function(ev) {\n                var this$1$1 = this;\n\n                var menu = ev.sender,\n                    items = menu.options.items,\n                    elTarget = $(ev.event ? ev.event.target : null);\n\n                if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                    ev.preventDefault();\n                    return;\n                }\n\n                this._toggleSeparatorVisibility();\n\n                menu.element.find((\"[\" + (kendo.attr('soft-rules')) + \"]\")).each(function (i, item) {\n                    var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n\n                    menu.enable(item, this$1$1._validateSoftRules(rules));\n                });\n            },\n\n            _toggleSeparatorVisibility: function() {\n                var that = this,\n                    items = that.element.find(\".k-item.k-separator\").filter(function (i, item) {\n                        var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                        var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                        return !(prev.length && next.length);\n                    });\n\n                items.hide();\n            },\n\n            _extendItems: function() {\n                var that = this,\n                    items = that.options.items,\n                    item, isBuiltInTool;\n\n                if (items && items.length) {\n                    for (var i = 0; i < items.length; i++) {\n                        item = items[i];\n                        isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                        if (isBuiltInTool) {\n                            item = item.name;\n                        }\n\n                        if ($.isPlainObject(item)) {\n                            that._append(item);\n                        } else if (that.defaultItems[item]) {\n                            item = that.defaultItems[item];\n                            that._append(item);\n                        } else if (typeof(item) === \"string\") {\n                            item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                            that._append(item);\n                        }\n                    }\n                } else {\n                    for (var key in that.defaultItems) {\n                        item = that.defaultItems[key];\n                        that._append(item);\n                    }\n                }\n            },\n\n            _extendItem: function(item) {\n                var that = this,\n                    messages = that.options.messages,\n                    attr = item.attr || {};\n\n                if (item.command) {\n                    attr[kendo.attr(\"command\")] = item.command;\n                }\n\n                if (item.options) {\n                    attr[kendo.attr(\"options\")] = item.options;\n                }\n\n                if (item.softRules) {\n                    attr[kendo.attr(\"soft-rules\")] = item.softRules;\n                }\n\n                if (item.items) {\n                    for (var j = 0; j < item.items.length; j++) {\n                        item.items.forEach(function (subItem) {\n                            that._extendItem(subItem);\n                        });\n                    }\n                }\n\n                extend(item, {\n                    text: messages.commands[item.name],\n                    icon: item.icon || \"\",\n                    spriteCssClass: item.spriteCssClass || \"\",\n                    attr: attr,\n                    uid: kendo.guid()\n                });\n            },\n\n            _validateSoftRules: function(rules) {\n                var that = this;\n\n                if (!rules || !(rules && rules.length)) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _validateRules: function(tool) {\n                var that = this,\n                    rules = tool.rules ? tool.rules.split(\";\") : [];\n\n                if (!rules.length) {\n                    return true;\n                }\n\n                for (var i = 0; i < rules.length; i++) {\n                    if (!this._readState(rules[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            _readState: function(state) {\n                var that = this,\n                    states = that.options.states;\n\n                if (kendo.isFunction(states[state])) {\n                    return states[state]();\n                } else {\n                    return states[state];\n                }\n            },\n\n            _append: function(item) {\n                var that = this;\n\n                that._extendItem(item);\n\n                if (that._validateRules(item)) {\n                    that.append(item);\n                }\n            },\n\n            action: function(args) {\n                this.trigger(ACTION, args);\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            ContextMenu: GridContextMenu\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            extend = $.extend,\n            Class = kendo.Class;\n\n        var Command = Class.extend({\n            init: function(options) {\n                this.options = options;\n                this.grid = options.grid;\n            }\n        });\n\n        var SortCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dataSource = grid.dataSource,\n                    sort = dataSource.sort() || [],\n                    options = that.options,\n                    dir = options.dir,\n                    field = grid._getCellField(options.target),\n                    multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                    compare = grid.options.compare,\n                    length, idx;\n\n                if (multipleMode) {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: field, dir: dir, compare: compare });\n                } else {\n                    sort = [{ field: field, dir: dir, compare: compare }];\n                }\n\n                dataSource.sort(sort);\n            },\n        });\n\n        var AddCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.addRow();\n            }\n        });\n\n        var EditCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    inCellMode = grid._editMode() === \"incell\",\n                    target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n                if (inCellMode) {\n                    grid.editCell(target);\n                } else {\n                    grid.editRow(target);\n                }\n            }\n        });\n\n        var DeleteCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    target = that.options.target.closest(\"tr\");\n\n                grid.removeRow(target);\n            }\n        });\n\n        var CopySelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    withHeaders = that.options.withHeaders;\n\n                grid.copySelectionToClipboard(withHeaders);\n            }\n        });\n\n        var SelectRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    target = that.options.target.closest(\"tr\");\n\n                grid.select(selectMode.cell ? target.find('td') : target);\n            }\n        });\n\n        var SelectAllRowsCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                    rows = grid.items();\n\n                grid.select(selectMode.cell ? rows.find('td') : rows);\n            }\n        });\n\n        var ClearSelectionCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.clearSelection();\n            }\n        });\n\n        var ReorderRowCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid,\n                    dir = that.options.dir,\n                    target = that.options.target.closest(\"tr\"),\n                    index = target.index(),\n                    newIndex;\n\n                switch (dir) {\n                    case \"up\":\n                        newIndex = index - 1;\n                        break;\n                    case \"down\":\n                        newIndex = index + 2;\n                        break;\n                    case \"top\":\n                        newIndex = 0;\n                        break;\n                    case \"bottom\":\n                        newIndex = grid.items().length;\n                        break;\n                }\n\n                grid.reorderRowTo(target, newIndex);\n            }\n        });\n\n        var ExportPDFCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    grid = that.grid;\n\n                grid.saveAsPDF();\n            }\n        });\n\n        var ExportExcelCommand = Command.extend({\n            exec: function() {\n                var that = this,\n                    selection = that.options.selection,\n                    withHeaders = that.options.withHeaders,\n                    grid = that.grid;\n\n                if (selection) {\n                    grid.exportSelectedToExcel(withHeaders);\n                } else {\n                    grid.saveAsExcel();\n                }\n            }\n        });\n\n        kendo.ui.grid = kendo.ui.grid || {};\n\n        extend(kendo.ui.grid, {\n            GridCommand: Command,\n            commands: {\n                SortCommand: SortCommand,\n                AddCommand: AddCommand,\n                EditCommand: EditCommand,\n                DeleteCommand: DeleteCommand,\n                CopySelectionCommand: CopySelectionCommand,\n                SelectRowCommand: SelectRowCommand,\n                SelectAllRowsCommand: SelectAllRowsCommand,\n                ClearSelectionCommand: ClearSelectionCommand,\n                ReorderRowCommand: ReorderRowCommand,\n                ExportPDFCommand: ExportPDFCommand,\n                ExportExcelCommand: ExportExcelCommand\n            }\n        });\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"grid\",\n        name: \"Grid\",\n        category: \"web\",\n        description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n        depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n        features: [ {\n            id: \"grid-editing\",\n            name: \"Editing\",\n            description: \"Support for record editing\",\n            depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n        }, {\n            id: \"grid-filtering\",\n            name: \"Filtering\",\n            description: \"Support for record filtering\",\n            depends: [ \"filtermenu\" ]\n        }, {\n            id: \"grid-columnmenu\",\n            name: \"Column menu\",\n            description: \"Support for header column menu\",\n            depends: [ \"columnmenu\" ]\n        }, {\n            id: \"grid-grouping\",\n            name: \"Grouping\",\n            description: \"Support for grid grouping\",\n            depends: [ \"groupable\" ]\n        }, {\n            id: \"grid-filtercell\",\n            name: \"Row filter\",\n            description: \"Support for grid header filtering\",\n            depends: [ \"filtercell\" ]\n        }, {\n            id: \"grid-paging\",\n            name: \"Paging\",\n            description: \"Support for grid paging\",\n            depends: [ \"pager\" ]\n        }, {\n            id: \"grid-selection\",\n            name: \"Selection\",\n            description: \"Support for row selection\",\n            depends: [ \"selectable\" ]\n        }, {\n            id: \"grid-column-reorder\",\n            name: \"Column reordering\",\n            description: \"Support for column reordering\",\n            depends: [ \"reorderable\" ]\n        }, {\n            id: \"grid-column-resize\",\n            name: \"Column resizing\",\n            description: \"Support for column resizing\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"grid-mobile\",\n            name: \"Grid adaptive rendering\",\n            description: \"Support for adaptive rendering\",\n            depends: [ \"dialog\", \"pane\", \"switch\" ]\n        }, {\n            id: \"grid-excel-export\",\n            name: \"Excel export\",\n            description: \"Export grid data as Excel spreadsheet\",\n            depends: [ \"excel\" ]\n        }, {\n            id: \"grid-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export grid data as PDF\",\n            depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n        } ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            DataSource = kendo.data.DataSource,\n            ObservableObject = kendo.data.ObservableObject,\n            tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n            activeElement = kendo._activeElement,\n            Widget = ui.Widget,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            keys = kendo.keys,\n\n            isPlainObject = $.isPlainObject,\n            extend = $.extend,\n            map = $.map,\n            grep = $.grep,\n            isArray = Array.isArray,\n            inArray = $.inArray,\n            push = Array.prototype.push,\n            isFunction = kendo.isFunction,\n            encode = kendo.htmlEncode,\n            isEmptyObject = $.isEmptyObject,\n            contains = $.contains,\n            math = Math,\n\n            DOT = \".\",\n            PROGRESS = \"progress\",\n            ERROR = \"error\",\n            HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n            DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n            SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            NAVROW = \"tr:not(.k-footer-template):visible\",\n            NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n            ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n            COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n            HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n            CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n            CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n            CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n            CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n            WRAPPER = \".k-grid\",\n            NS = \".kendoGrid\",\n            CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n            GROUPCELLCLASS = \"k-group-cell\",\n\n            EDIT = \"edit\",\n            BEFOREEDIT = \"beforeEdit\",\n            SAVE = \"save\",\n            REMOVE = \"remove\",\n            DETAILINIT = \"detailInit\",\n            FILTERMENUINIT = \"filterMenuInit\",\n            COLUMNMENUINIT = \"columnMenuInit\",\n            FILTERMENUOPEN = \"filterMenuOpen\",\n            COLUMNMENUOPEN = \"columnMenuOpen\",\n            CELLCLOSE = \"cellClose\",\n            CHANGE = \"change\",\n            COLUMNHIDE = \"columnHide\",\n            COLUMNSHOW = \"columnShow\",\n            SAVECHANGES = \"saveChanges\",\n            DATABOUND = \"dataBound\",\n            DETAILEXPAND = \"detailExpand\",\n            DETAILCOLLAPSE = \"detailCollapse\",\n            ITEM_CHANGE = \"itemchange\",\n            PAGE = \"page\",\n            PAGING = \"paging\",\n            SCROLL = \"scroll\",\n            SYNC = \"sync\",\n            LOAD_START = \"loadStart\",\n            LOAD_END = \"loadEnd\",\n\n            FOCUSED = \"k-focus\",\n            HOVER = \"k-hover\",\n            ACTIVE = \"k-active\",\n            FOCUSABLE = \":kendoFocusable\",\n            SELECTED = \"k-selected\",\n            CHECKBOX = \"k-checkbox\",\n            CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n            NORECORDSCLASS = \"k-grid-norecords\",\n            LINK_CLASS = \"k-link\",\n            ICON_CLASS = \"k-icon\",\n            SVG_ICON_CLASS = \"k-svg-icon\",\n            ORDER_CLASS = \"k-sort-order\",\n            SORTED_CLASS = \"k-sorted\",\n            HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n            FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n            STICKY_CELL_CLASS = \"k-grid-content-sticky k-table-td\",\n            STICKY_HEADER_CLASS = \"k-grid-header-sticky k-header\",\n            STICKY_FOOTER_CLASS = \"k-grid-footer-sticky k-table-td\",\n            STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n            ROW_RESIZER = \"k-row-resizer\",\n            ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n            GROUPING_ROW = \"k-grouping-row\",\n            RESIZE = \"resize\",\n            ROWRESIZE = \"rowResize\",\n            COLUMNRESIZE = \"columnResize\",\n            COLUMNREORDER = \"columnReorder\",\n            COLUMNLOCK = \"columnLock\",\n            COLUMNUNLOCK = \"columnUnlock\",\n            COLUMNSTICK = \"columnStick\",\n            COLUMNUNSTICK = \"columnUnstick\",\n            ROWREORDER = \"rowReorder\",\n            NAVIGATE = \"navigate\",\n            CLICK = \"click\",\n            MOUSEDOWN = \"mousedown\",\n            MOUSEUP = \"mouseup\",\n            MOUSEENTER = \"mouseenter\",\n            MOUSELEAVE = \"mouseleave\",\n            MOUSEMOVE = \"mousemove\",\n            DUBLECLICK = \"dblclick\",\n            HEIGHT = \"height\",\n            WIDTH = \"width\",\n            AUTO = \"auto\",\n            TABINDEX = \"tabIndex\",\n            FUNCTION = \"function\",\n            STRING = \"string\",\n            BOTTOM = \"bottom\",\n            CONTAINER_FOR = \"container-for\",\n            FIELD = \"field\",\n            INPUT = \"input\",\n            INCELL = \"incell\",\n            INLINE = \"inline\",\n            UNIQUE_ID = \"uid\",\n            MINCOLSPANVALUE = 1,\n            COLSPAN = \"colSpan\",\n            OVERFLOW = \"overflow\",\n            HIDDEN = \"hidden\",\n            SORT = \"sort\",\n            GROUP_SORT = \"group-sort\",\n            DELETECONFIRM = \"Are you sure you want to delete this record?\",\n            NORECORDS = \"No records available.\",\n            CONFIRMDELETE = \"Delete\",\n            CANCELDELETE = \"Cancel\",\n            COLLAPSE = \"Collapse\",\n            EXPAND = \"Expand\",\n            ID = \"id\",\n            PX = \"px\",\n            TR = \"tr\",\n            DIV = \"div\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_OWNS = \"aria-owns\",\n            ARIA_ROWCOUNT = \"aria-rowcount\",\n            ARIA_COLCOUNT = \"aria-colcount\",\n            ARIA_CONTROLS = \"aria-controls\",\n            ARIA_COLINDEX = \"aria-colindex\",\n            ARIA_ROWINDEX = \"aria-rowindex\",\n            ARIA_EXPANDED = \"aria-expanded\",\n            ARIA_CHECKED = \"aria-checked\",\n            ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n            ROLE = \"role\",\n            NONE = \"none\",\n            ROW = \"row\",\n            ROWGROUP = \"rowgroup\",\n            COLUMNHEADER = \"columnheader\",\n            GRIDCELL = \"gridcell\",\n\n            formatRegExp = /(\\}|\\#)/ig,\n            templateHashRegExp = /#/ig,\n            whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n            leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n            nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n            COMMANDBUTTONTMPL = function (ref) {\n               var className = ref.className;\n               var attr = ref.attr;\n               var text = ref.text;\n\n               return (\"<button type=\\\"button\\\" class=\\\"\" + className + \"\\\" \" + attr + \">\" + text + \"</button>\");\n        },\n            SELECTCOLUMNTMPL = function (ref) {\n               var size = ref.size;\n\n               return \"<input tabindex=\\\"-1\\\" class=\\\"k-select-checkbox \" + CHECKBOX + \" \" + size + \" k-rounded-md\\\" data-role=\\\"checkbox\\\" aria-label=\\\"Select row\\\" aria-checked=\\\"false\\\" type=\\\"checkbox\\\">\";\n        },\n            SELECTCOLUMNHEADERTMPL = function (ref) {\n               var size = ref.size;\n\n               return \"<input tabindex=\\\"-1\\\" class=\\\"k-select-checkbox \" + CHECKBOX + \" \" + size + \" k-rounded-md\\\" data-role=\\\"checkbox\\\" aria-label=\\\"Select all rows\\\" aria-checked=\\\"false\\\" type=\\\"checkbox\\\">\";\n        },\n            DRAGHANDLECOLUMNTMPL = function () { return kendo.ui.icon(\"reorder\"); },\n            SORTHEADERTMPL = function (ref) {\n               var text = ref.text;\n\n               return (\"<span class=\\\"k-cell-inner\\\"><span class=\\\"k-link\\\"><span class=\\\"k-column-title\\\">\" + text + \"</span></span></span>\");\n        },\n            isRtl = false,\n            browser = kendo.support.browser;\n\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: \"k-content\",\n            scrollContainer: \"k-scroll-container\",\n            headerCellInner: \"k-cell-inner\"\n        };\n        var GroupsPager;\n\n        var defaultBodyContextMenu = [\n            \"copySelection\",\n            \"copySelectionNoHeaders\",\n            \"separator\",\n            \"create\",\n            \"edit\",\n            \"destroy\",\n            \"select\",\n            \"separator\",\n            \"reorderRow\",\n            \"exportPDF\",\n            \"exportExcel\",\n            \"separator\"\n        ];\n\n        var defaultHeadContextMenu = [\n            \"sortAsc\",\n            \"sortDesc\",\n            \"separator\"\n        ];\n\n        if (ui.Pager) {\n            GroupsPager = ui.Pager.extend({\n                init: function(element, options) {\n                    ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                    this.dataSource.options.useRanges = true;\n                    this.dataSource._omitPrefetch = true;\n                },\n                options: {\n                    name: \"GroupsPager\"\n                },\n\n                totalPages: function() {\n                    var that = this;\n\n                    return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n                },\n                _collapsedTotal: function() {\n                    var dataSource = this.dataSource;\n                    return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n                }\n            });\n        }\n\n        var VirtualScrollable = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = that.refresh.bind(that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n                that.dataSource.options.virtual = true;\n            },\n\n            options: {\n                name: \"VirtualScrollable\",\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL,\n                LOAD_START,\n                LOAD_END\n            ],\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n\n            wrap: function() {\n                var that = this,\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    scrollbar = kendo.support.scrollbar() + 1,\n                    element = that.element,\n                    wrapper;\n\n                element.css( {\n                    width: AUTO,\n                    overflow: \"hidden\"\n                }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                    .parent()\n                                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n                that._wrapper();\n\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css(\"touch-action\", NONE);\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function(e) {\n                            e.sender.capture();\n                        },\n                        move: function(e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                            .css({\n                                                width: scrollbar\n                                            }).appendTo(element)\n                                            .on(\"scroll\" + NS, that._scroll.bind(that));\n            },\n\n            _wrapper: function() {\n                var that = this;\n\n                if (isIE11) {\n                    //scrolling the virtual scrollbar to the bottom and then\n                    //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                    //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                    //https://github.com/telerik/kendo-ui-core/issues/3779\n                    that.wrapper.css({\n                        \"overflow-y\": SCROLL\n                    });\n\n                    //hide the wrapper behind the virtual scrollbar\n                    that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var scrollbar = this.verticalScrollbar,\n                    scrollTop = scrollbar.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _scroll: function(e) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    scrollTop = e.currentTarget.scrollTop,\n                    dataSource = that.dataSource,\n                    rowHeight = that.itemHeight,\n                    skip = dataSource.skip() || 0,\n                    start = that._rangeStart || skip,\n                    height = that.element.innerHeight(),\n                    isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                    firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                    lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                    lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - (start * rowHeight);\n                that._scrollbarTop = scrollTop;\n\n                that._scrolling = delayLoading;\n\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n\n                that.trigger(SCROLL);\n\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n\n                    that._scrollingTimeout = setTimeout(function() {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n\n            scrollToTop: function() {\n                this._scrollTo(0);\n            },\n\n            scrollToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n\n            _scrollWrapperToTop: function() {\n                this.wrapper.scrollTop(0);\n            },\n\n            _scrollWrapperToBottom: function() {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n\n            _scrollWrapperOnColumnResize: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n\n                    that._wrapperScrolled = false;\n                }\n            },\n\n            _scrollTo: function(scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n\n            _isScrolledToTop: function() {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n\n            _isScrolledToBottom: function() {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n\n                return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n            },\n\n            _isWrapperScrolledToBottom: function() {\n                var wrapper = this.wrapper;\n\n                return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n            },\n\n            itemIndex: function(rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n                return rangeStart + rowIndex;\n            },\n\n            position: function(index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n\n                return result > pageSize ? pageSize : result;\n            },\n\n            scrollIntoView: function(row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n\n            _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    itemHeight = that.itemHeight,\n                    take = dataSource.take(),\n                    rangeStart = that._rangeStart || dataSource.skip() || 0,\n                    currentSkip = math.floor(firstItemIndex / take) * take,\n                    fetching = false,\n                    prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n                if (firstItemIndex < rangeStart) {\n\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                    that._page(rangeStart, take);\n\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n\n                    //ensure the scrollbar can be scrolled to bottom with mouse drag\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n\n                    that._page(rangeStart, take);\n\n                } else if (!that._fetching && that.options.prefetch) {\n\n                    if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n\n                }\n                return fetching;\n            },\n\n            fetching: function() {\n                return this._fetching;\n            },\n\n            _page: function(skip, take, callback) {\n                var that = this,\n                    delayLoading = !that.options.prefetch,\n                    dataSource = that.dataSource,\n                    isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n\n                if (that.trigger(PAGING, { skip: skip, take: take })) {\n                    return;\n                }\n\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n\n                if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                    that.trigger(LOAD_START);\n\n                    dataSource.range(skip, take, function() {\n                        that.trigger(LOAD_END);\n                        callback();\n                        that.trigger(PAGE);\n                    }, \"page\");\n                } else {\n                    if (!delayLoading) {\n                        that.trigger(LOAD_START);\n                    }\n\n                    that._timeout = setTimeout(function() {\n                        if (!that._scrolling) {\n\n                            if (delayLoading) {\n                                that.trigger(LOAD_START);\n                            }\n\n                            dataSource.range(skip, take, function() {\n                                that.trigger(LOAD_END);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n\n            repaintScrollbar: function(shouldScrollWrapper) {\n                var that = this,\n                    maxHeight = that.options.maxScrollHeight,\n                    dataSource = that.dataSource,\n                    scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                    wrapperElement = that.wrapper[0],\n                    totalHeight,\n                    idx,\n                    itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n                var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n                var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                    .css({\n                        width: \"1px\",\n                        height: (maxHeight + \"px\")\n                    });\n\n                if (totalHeight % maxHeight) {\n                    divElements = divElements.add($(\"<div></div>\").css({\n                        width: \"1px\",\n                        height: (((totalHeight % maxHeight)) + \"px\")\n                    }));\n                }\n\n                that.verticalScrollbar.empty().append(divElements);\n\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n\n                if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n                that.trigger(LOAD_END);\n                clearTimeout(that._timeout);\n\n                that.repaintScrollbar(shouldScrollWrapper);\n\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n\n                if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                    if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                        that._rangeStart = dataSource.skip();\n                    }\n\n                    if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                        // reset the scrollbar position if datasource is filtered\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n\n                that._fetching = false;\n            }\n        });\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n        }\n\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n        }\n\n        function stringifyAttributes(attributes) {\n            var attr,\n                result = \" \";\n\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n\n        var defaultCommands = {\n            create: {\n                text: \"Add new record\",\n                className: \"k-grid-add\",\n                iconClass: \"k-i-plus\"\n            },\n            cancel: {\n                text: \"Cancel changes\",\n                className: \"k-grid-cancel-changes\",\n                iconClass: \"k-i-cancel\"\n            },\n            save: {\n                text: \"Save changes\",\n                className: \"k-grid-save-changes\",\n                iconClass: \"k-i-check\"\n            },\n            destroy: {\n                text: \"Delete\",\n                className: \"k-grid-remove-command\",\n                iconClass: \"k-i-x\"\n            },\n            edit: {\n                text: \"Edit\",\n                className: \"k-grid-edit-command\",\n                iconClass: \"k-i-pencil\",\n                themeColor: \"primary\"\n            },\n            update: {\n                text: \"Save\",\n                className: \"k-grid-save-command\",\n                iconClass: \"k-i-save\",\n                themeColor: \"primary\"\n            },\n            canceledit: {\n                text: \"Cancel\",\n                className: \"k-grid-cancel-command\",\n                iconClass: \"k-i-cancel-outline\"\n            },\n            excel: {\n                text: \"Export to Excel\",\n                className: \"k-grid-excel\",\n                iconClass: \"k-i-file-excel\"\n            },\n            pdf: {\n                text: \"Export to PDF\",\n                className: \"k-grid-pdf\",\n                iconClass: \"k-i-file-pdf\"\n            },\n            search: {\n                text: \"Search...\",\n                className: \"k-grid-search\"\n            }\n        };\n\n        function cursor(context, value) {\n            $('th, th .k-grid-filter-menu, th .k-link', context)\n                .add(document.body)\n                .css('cursor', value);\n        }\n\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n\n            if (typeof dest == \"number\") {\n                source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx,\n                length,\n                command,\n                commandName;\n\n            commands = !isArray(commands) ? [commands] : commands;\n\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n                }\n            }\n        }\n\n        function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n            return map(columns, function(column) {\n                column = typeof column === STRING ? { field: column } : column;\n\n                var hidden;\n                column.parentIds = parentIds;\n\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n\n                var uid = kendo.guid();\n                if (locked && !column.locked) {\n                    column.locked = locked;\n                }\n\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                    column.uid = uid;\n                } else {\n                    column.uid = uid = column.headerAttributes.id;\n                }\n\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n                }\n                return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n            });\n        }\n\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n\n\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n        }\n\n        function isCellVisible() {\n            return this.style.display !== NONE;\n        }\n\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== NONE;\n        }\n\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n\n        function visibleColumns(columns) {\n            return grep(columns, function(column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                    }\n\n                    result.push(column);\n                }\n\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n\n            return result;\n        }\n\n        function isUndefined(value) {\n            return typeof value === \"undefined\";\n        }\n\n        function toJQuery(elements) {\n            return $(elements).map(function() { return this.toArray(); });\n        }\n\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n                }\n            }\n        }\n\n        function findColumnByField(columns, field) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field == field) {\n                    return columns[i];\n                }\n            }\n        }\n\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(\":not(.k-filter-row)\");\n                $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n            }\n\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n            moveCells(leafs, columns, container, destination, action);\n        }\n\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n\n            var cells = {};\n            var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row)\n                        .find(\".k-header\")\n                        .filter(filter);\n                }\n\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr(\"index\"), offset + idx);\n            }\n\n\n            return columns.length;\n        }\n\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n            var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n\n            destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n            return target;\n        }\n\n        function decorateCellWithClass(html) {\n            var element = html;\n            var classes = element.match(/class=[\"][^\"]+/g);\n            if (classes) {\n                var cssClasses = classes[0].split('\\\"').pop();\n                element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n            } else {\n                element = element.replace(\"<td\",\"<td class='k-table-td'\");\n            }\n\n            return element;\n        }\n\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                    index--;\n                } else if (index > 0 || (index === 0 && !before)) {\n                    index++;\n                }\n\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n\n            for (idx = 0; idx < columns.length; idx++) {\n               if (columns[idx] == column) {\n                    result = { cell: cellCounts[row], row: row };\n                    break;\n               } else if (columns[idx].columns) {\n                   result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                   if (result) {\n                        break;\n                   }\n               }\n\n               if (!columns[idx].hidden) {\n                   cellCounts[row]++;\n               }\n            }\n            return result;\n        }\n\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n\n            return inArray(target, columns);\n        }\n\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n\n        function sumWidths(cols) {\n            var width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n\n            return width;\n        }\n\n        function removeRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = (rowSpan - count) || 1;\n                }\n            }\n        }\n\n        function addRowSpanValue(container, count) {\n            var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n\n        function removeEmptyRows(container) {\n            var rows = container.find(\"tr:not(.k-filter-row)\");\n\n            var emptyRowsCount = rows.filter(function() {\n                return !$(this).children().length;\n            }).remove().length;\n\n            var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n\n        function setLeftAndRightStyles(element, left, right) {\n            element.css({\n                \"left\": left,\n                \"right\": right\n            });\n        }\n\n        function createColumnAttribute(column, attribute, property) {\n            column[attribute] = column[attribute] || {};\n            column[attribute][property] = column[attribute][property] || \"\";\n        }\n\n        function addColumnAttribute(column, attribute, property, value) {\n            createColumnAttribute(column, attribute, property);\n\n            if (column[attribute][property] !== \"\") {\n                column[attribute][property] += \" \" + value;\n            } else {\n                column[attribute][property] = value;\n            }\n        }\n\n        function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n            createColumnAttribute(column, attribute, property);\n            if (removeAttributeProperty) {\n                delete column[attribute][property];\n            } else {\n                column[attribute][property] = column[attribute][property].replace(value, \"\");\n            }\n        }\n\n        function lockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked;\n            });\n        }\n\n        function nonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked;\n            });\n        }\n\n        function stickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked;\n            });\n        }\n\n        function visibleStickyColumns(columns) {\n            return grep(columns, function(column) {\n                return column.sticky && !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLockedColumns(columns) {\n            return grep(columns, function(column) {\n                return column.locked && isVisible(column);\n            });\n        }\n\n        function visibleLeafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleLeafExportColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push({\n                        field: columns[idx].field,\n                        width: columns[idx].width,\n                        values: columns[idx].values,\n                        title: columns[idx].title\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        function childColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n\n            return result;\n        }\n\n        function visibleChildColumns(columns) {\n            var result = childColumns(columns);\n\n            result = result.filter(function(e) {\n                return !e.hidden;\n            });\n\n            return result;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === \"string\") {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n\n        function editField(column) {\n            return {\n                field: column.field,\n                title: column.title,\n                format: column.format,\n                editor: column.editor,\n                values: column.values,\n                editorOptions: extend(true, { format: column.format }, column.editorOptions),\n                label: column.title || column.field || \"\"\n            };\n        }\n\n        function leafDataCells(container) {\n            var rows = container.find(\">tr:not(.k-filter-row)\");\n\n            var filter = function() {\n                var el = $(this);\n                return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n            };\n\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find(\"th\")\n                    .filter(filter)\n                    .filter(function() { return this.rowSpan > 1; });\n            }\n\n            cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n            var indexAttr = kendo.attr(\"index\");\n            cells.sort(function(a, b) {\n                a = $(a);\n                b = $(b);\n\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n\n                if (indexA === undefined$1) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined$1) {\n                    indexB = $(b).index();\n                }\n\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n            });\n\n            return cells;\n        }\n\n        function parentColumnsCells(cell) {\n            var container = cell.closest(\"table\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return !$(this).attr(\"rowspan\");\n                });\n\n                var offset = 0;\n                var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                    return this.colSpan > 1;\n                });\n\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n\n                index += Math.max(offset - 1, 0);\n\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr(\"data-colspan\")) {\n                        offset += parentCell[0].getAttribute(\"data-colspan\");\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n\n        function childColumnsCells(cell) {\n            var container = cell.closest(\"thead\");\n            var result = $().add(cell);\n\n            var row = cell.closest(TR);\n            var headerRows = container.find(\"tr:not(.k-filter-row)\");\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr(\"colspan\");\n\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var idx;\n\n                prevCells = prevCells.filter(function() {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n\n                var offset = 0;\n\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n\n                var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n                idx = 0;\n\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n\n            return result;\n        }\n\n        function appendContent(tbody, table, html, empty, size) {\n            var placeholder,\n                tmp = tbody;\n\n            // necessary for AngularJS to cleanup its guts.\n            if (empty) {\n                tbody.empty();\n            }\n\n            if (tbodySupportsInnerHtml) {\n                var $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n                tbody.empty().append($html);\n            } else {\n                placeholder = document.createElement(DIV);\n                placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n                $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var kendoStyleAttrObject = {};\n            kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n            return extend({}, attr, kendoStyleAttrObject);\n        }\n\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n\n            return !!attr[kendo.attr(\"style-display\")];\n        }\n\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            delete attr[kendo.attr(\"style-display\")];\n\n            return attr;\n        }\n\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find(\">colgroup\"),\n                width,\n                cols = map(visibleColumns, function(column) {\n                        width = column.width;\n                        if (width && parseInt(width, 10) !== 0) {\n                            return kendo.format((\"<col \" + (kendo.attr('style-width')) + \"=\\\"{0}\\\"/>\"), typeof width === STRING ? width : width + PX);\n                        }\n\n                        return \"<col />\";\n                    });\n\n            if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n            kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            table.prepend(colgroup);\n        }\n\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx , len;\n            var th = container.find(\"th:not(.k-group-cell)\");\n\n            for (idx = 0, len = columns.length; idx < len; idx ++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find(\"th:not(.k-group-cell)\");\n                    lastIndex ++;\n                }\n            }\n        }\n\n        function convertToObject(array) {\n            var result = {},\n                item,\n                idx,\n                length;\n\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n\n            return result;\n        }\n\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n                groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n            groupValue = groupValue != null ? groupValue : \"\";\n\n            return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n        }\n\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0,\n                state,\n                cell = cells[pad];\n\n            while (cell) {\n                state = visible ? true : cell.style.display !== NONE;\n\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? \"\" : NONE;\n                    break;\n                }\n\n                cell = cells[++pad];\n            }\n        }\n\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                        cell.find(\"col\").eq(columnIndex).remove();\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n\n        function groupRows(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                result.push(item);\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n\n            return result;\n        }\n\n        function groupFooters(data) {\n            var result = [];\n            var item;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                    break;\n                }\n\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n\n                result.push(item.aggregates);\n            }\n\n            return result;\n        }\n\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0,\n                length = rows.length,\n                cell, row, columns;\n\n            for ( ; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                    cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                } else {\n                    if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                        cell = $(cell);\n                        cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                        normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                        row = cell.find(TR).first();\n                    }\n\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children().last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n                item = toRemove.eq(idx).children().last();\n                item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n            }\n        }\n\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find(\">colgroup>col\");\n\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function(element, options, events) {\n                var that = this;\n\n                options = isArray(options) ? { dataSource: options } : options;\n\n                Widget.fn.init.call(that, element, options);\n\n                if (events) {\n                    that._events = events;\n                }\n\n                isRtl = kendo.support.isRtl(element);\n                CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n                that._element();\n\n                that._ariaId();\n\n                that._columns($.extend(true, [], that.options.columns));\n\n                if (that._foreignKeyPromises) {\n                    $.when.apply(null, that._foreignKeyPromises)\n                        .then(function() {\n                            that._foreignKeyPromises = null;\n                            that._continueInit();\n                        });\n                } else {\n                    that._continueInit();\n                }\n            },\n\n            _continueInit: function() {\n                var that = this;\n\n                that._dataSource();\n\n                that._stickyColumns();\n\n                that._tbody();\n\n                that._thead();\n\n                that._rowResizing();\n\n                that._groupable();\n\n                that._toolbar();\n\n                that._pageable();\n\n                that._setContentHeight();\n\n                that._templates();\n\n                that._navigatable();\n\n                that._selectable();\n\n                that._clipboard();\n\n                that._details();\n\n                that._editable();\n\n                that._attachCustomCommandsEvent();\n\n                that._adaptiveColumns();\n\n                that._minScreenSupport();\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n\n                if (that.options.contextMenu) {\n                    that._initContextMenu();\n                }\n\n                if (that.lockedContent) {\n                    that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                    that._resizeHandler = function() {\n                        that.resize();\n                    };\n                    $(window).on(\"resize\" + NS, that._resizeHandler);\n                }\n\n                kendo.notify(that);\n            },\n\n            events: [\n               CHANGE,\n               \"dataBinding\",\n               \"cancel\",\n               DATABOUND,\n               DETAILEXPAND,\n               DETAILCOLLAPSE,\n               DETAILINIT,\n               FILTERMENUINIT,\n               FILTERMENUOPEN,\n               COLUMNMENUINIT,\n               COLUMNMENUOPEN,\n               EDIT,\n               BEFOREEDIT,\n               SAVE,\n               REMOVE,\n               SAVECHANGES,\n               CELLCLOSE,\n               ROWRESIZE,\n               COLUMNRESIZE,\n               COLUMNREORDER,\n               COLUMNSHOW,\n               COLUMNHIDE,\n               COLUMNLOCK,\n               COLUMNUNLOCK,\n               COLUMNSTICK,\n               COLUMNUNSTICK,\n               ROWREORDER,\n               NAVIGATE,\n               \"page\",\n               \"sort\",\n               \"filter\",\n               \"group\",\n               \"groupExpand\",\n               \"groupCollapse\",\n               \"kendoKeydown\"\n            ],\n\n            setDataSource: function(dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n\n                that.options.dataSource = dataSource;\n\n                that._dataSource();\n\n                that._pageable();\n\n                that._thead();\n\n                that._rowResizing();\n\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                        kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._footer();\n                }\n            },\n\n            options: {\n                name: \"Grid\",\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                encodeTitles: false,\n                groupable: false,\n                rowTemplate: \"\",\n                altRowTemplate: \"\",\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                contextMenu: false,\n                columnResizeHandleWidth: 3,\n                size: \"medium\",\n                mobile: \"\",\n                loaderType: \"loadingPanel\",\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text,\n                        select: \"Select\",\n                        selectRow: \"Select Row\",\n                        selectAllRows: \"All rows\",\n                        clearSelection: \"Clear selection\",\n                        copySelection: \"Copy selection\",\n                        copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                        reorderRow: \"Reorder row\",\n                        reorderRowUp: \"Up\",\n                        reorderRowDown: \"Down\",\n                        reorderRowTop: \"Top\",\n                        reorderRowBottom: \"Bottom\",\n                        exportPdf: \"Export to PDF\",\n                        exportExcel: \"Export to Excel\",\n                        exportToExcelAll: \"All\",\n                        exportToExcelSelection: \"Selection\",\n                        exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                        sortAsc: \"Sort Ascending\",\n                        sortDesc: \"Sort Descending\"\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: \"\",\n                    groupHeader: \"Press ctrl + space to group\",\n                    ungroupHeader: \"Press ctrl + space to ungroup\",\n                    itemsSelected: \"items selected\",\n                    dragHandleLabel: \"Drag row\",\n                    toolbarLabel: \"grid toolbar\",\n                    groupingHeaderLabel: \"grid grouping header\",\n                    filterCellTitle: \"filter cell\"\n                },\n                width: null\n            },\n\n            destroy: function() {\n                var that = this,\n                    element,\n                    reorderableInstance;\n\n                that._angularItems(\"cleanup\");\n                that._destroyColumnAttachments();\n\n                Widget.fn.destroy.call(that);\n\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                    this._headertables = null;\n                }\n\n                if (that._resizeHandler) {\n                    $(window).off(\"resize\" + NS, that._resizeHandler);\n                }\n\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n\n                that.pager = null;\n\n                that._destroyGroupable();\n\n                reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n                if (reorderableInstance) {\n                    reorderableInstance.destroy();\n                }\n\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n\n                    that.clearArea();\n                    that._selectedIds = null;\n\n                    if (that.copyHandler) {\n                        that.wrapper.off(\"keydown\", that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                    }\n                }\n\n                that.selectable = null;\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n\n                that._destroyRowResizing();\n\n                that._destroyVirtualScrollable();\n\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n\n                that._destroyEditable();\n\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler)\n                               .unbind(SORT, that._clearSortClasses);\n\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n                }\n\n                element = that.element\n                    .add(that.wrapper)\n                    .add(that.table)\n                    .add(that.thead)\n                    .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n                if (that.content) {\n                    element = element\n                            .add(that.content)\n                            .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n                }\n\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n\n                if (that._isMobile) {\n                    that.wrapper.off(\"transitionend\" + NS);\n                    that.wrapper.off(\"contextmenu\" + NS);\n                }\n\n                if (that.minScreenResizeHandler) {\n                    $(window).off(\"resize\", that.minScreenResizeHandler);\n                }\n\n                that._detachColumnMediaResizeHandler();\n\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n\n                that._draggableInstance = null;\n\n                if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (that.tbodyContextMenu) {\n                    that.tbodyContextMenu.destroy();\n                }\n\n                if (that.theadContextMenu) {\n                    that.theadContextMenu.destroy();\n                }\n\n                that._draggableRowsInstance = null;\n\n                element.off(NS);\n\n                kendo.destroy(that.wrapper);\n\n                that.rowTemplate =\n                that.altRowTemplate =\n                that.lockedRowTemplate =\n                that.lockedAltRowTemplate =\n                that.detailTemplate =\n                that.footerTemplate =\n                that.groupFooterTemplate =\n                that.lockedGroupFooterTemplate =\n                that.noRecordsTemplate = null;\n\n                that.scrollables =\n                that.thead =\n                that.tbody =\n                that.element =\n                that.table =\n                that.content =\n                that.footer =\n                that.wrapper =\n                that.lockedTable =\n                that.lockedContent =\n                that.lockedHeader =\n                that.lockedFooter =\n                that._groupableClickHandler =\n                that._groupRows =\n                that._setContentWidthHandler = null;\n            },\n\n            getOptions: function() {\n                var options = this.options;\n                options.dataSource = null;\n\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n\n                var dataSource = this.dataSource;\n\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n\n                result.dataSource = $.extend(true, {}, dataSource.options);\n\n                dataSource.options.data = initialData;\n\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n\n                result.$angular = undefined$1;\n\n                return result;\n            },\n\n            setOptions: function(options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                } else {\n                  if (options.dataSource.filter) {\n                      currentOptions.dataSource.filter = options.dataSource.filter;\n                  }\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass(\"k-grid-mobile\");\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n\n            items: function() {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n\n            _items: function(container, includeGroupRows) {\n                return container.children().filter(function() {\n                    var tr = $(this);\n                    return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n                });\n            },\n\n            dataItems: function() {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n\n                return dataItems;\n            },\n\n            _destroyColumnAttachments: function() {\n                var that = this;\n\n                that.resizeHandle = null;\n\n                if (!that.thead) {\n                    return;\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return { elements: that.thead.get() };\n                });\n\n                that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                    var th = $(this),\n                        filterMenu = th.data(\"kendoFilterMenu\"),\n                        sortable = th.data(\"kendoColumnSorter\"),\n                        columnMenu = th.data(\"kendoColumnMenu\");\n\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n\n            _attachCustomCommandsEvent: function() {\n                var that = this,\n                    columns = leafColumns(that.columns || []),\n                    command,\n                    idx,\n                    length;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n\n            _aria: function() {\n                var wrapper = this.wrapper,\n                    gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                    table = this.table,\n                    toolbar = wrapper.find(\".k-grid-toolbar\"),\n                    groupingHeader = wrapper.find(\".k-grouping-header\"),\n                    gridId = table.attr(ID),\n                    tableTabindex = table.attr(TABINDEX),\n                    tbodyId, headerGroupId, footerGroupId, tableOwned,\n                    numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                    trailingColumns = this._trailingColumns(),\n                    virtual = this.virtualScroll,\n                    pageable = this.options.pageable,\n                    rowsCount;\n\n                table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n                if (gridRole) {\n                    table.attr(ROLE, gridRole);\n                }\n\n                table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(\"th\").attr(ROLE, COLUMNHEADER);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else if (this._hasDetails()) {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    } else {\n                        rowsCount = numberOfFixedRows + this.dataSource.total();\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                } else if (this._hasDetails()) {\n                    if (this._groups() > 0) {\n                        rowsCount = -1;\n                    } else {\n                        rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                    }\n\n                    table.attr(ARIA_ROWCOUNT, rowsCount);\n                }\n\n                if (rowsCount && rowsCount > 0) {\n                    this._ariaRowIndex();\n                }\n\n                if ((virtual && virtual.columns) ||\n                    (!table.attr(ARIA_COLCOUNT) &&\n                        (table.find(\"td:hidden\").length > 0 ||\n                        wrapper.find(\".k-grid-content-locked td:hidden\").length > 0))) {\n                            table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                            this._ariaColumnIndex();\n                }\n\n                if (!gridId) {\n                    gridId = kendo.guid();\n                    table.attr(ID, gridId);\n                }\n\n                if (this.pager) {\n                    this.pager.element.attr(ARIA_CONTROLS, gridId);\n                }\n\n                toolbar.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.toolbarLabel,\n                    \"aria-controls\": gridId\n                });\n\n                groupingHeader.attr({\n                    role: \"toolbar\",\n                    \"aria-label\": this.options.messages.groupingHeaderLabel,\n                    \"aria-controls\": gridId\n                });\n\n                headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n                footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n                if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                    this._ariaLockedContent();\n                }\n\n                if (!!headerGroupId || !!footerGroupId) {\n                    tbodyId = this.tbody.attr(ID) || kendo.guid();\n                    tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                    this.tbody.attr(ID, tbodyId);\n                    table.attr(ARIA_OWNS, tableOwned);\n                }\n\n                if (this.options.groupable) {\n                    this._ariaGroupTitles();\n                }\n            },\n\n            _ariaColumnIndex: function() {\n                var trailingColumns = this._trailingColumns(),\n                    dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                    headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                    lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                    firstIndex = Number.MAX_VALUE,\n                    lastIndex = 0,\n                    lockedLastIndex = 0,\n                    previousVirtual = 0,\n                    nextVirtual = 0,\n                    previousIndex, i, cells, dataIndex, cellsIndex,\n                    eachHeaderCell = function(j, cell) {\n                        var current = cell.getAttribute(\"data-index\"),\n                            currentIndex = Number(current),\n                            lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                        if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                            firstIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                            lockedLastIndex = currentIndex;\n                        }\n\n                        if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                            lastIndex = currentIndex;\n                        }\n\n                        if (current !== null) {\n                            cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                            previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                        } else {\n                            cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                            previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                        }\n                    };\n\n                if (dataVirtual.length === 2) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                    nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                    previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                    nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                }\n\n                for (i = 0; i < lockedHeaderRows.length; i++) {\n                    previousIndex = 0;\n                    lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i < headerRows.length; i++) {\n                    previousIndex = 0;\n                    headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n                }\n\n                for (i = 0; i <= lockedLastIndex; i++) {\n                    dataIndex = i + trailingColumns;\n                    cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n\n                for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                    if (previousVirtual === 0 ) {\n                        cellsIndex = i + 1;\n                    } else {\n                        cellsIndex = i - previousVirtual + 2;\n                    }\n\n                    dataIndex = firstIndex + i + trailingColumns;\n\n                    cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                    cells.attr(ARIA_COLINDEX, dataIndex + 1);\n                }\n            },\n\n            _ariaGroupTitles: function() {\n                var that = this,\n                    groups = that.dataSource.group(),\n                    ths = that.wrapper.find(\".k-grid-header th\");\n\n                ths.each(function(i, el) {\n                    if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                            el.setAttribute(\"title\", that.options.messages.groupHeader);\n                    }\n                });\n\n                if (groups && groups.length > 0) {\n                    groups.forEach(function(group) {\n                        var field = group.field,\n                            el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                        if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                            el.attr(\"title\", that.options.messages.ungroupHeader);\n                        }\n                    });\n                }\n            },\n\n            _ariaHeaderFooter: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    groupId = \"\",\n                    rowGroup;\n\n                if (table.length > 0) {\n                    rowGroup = table.find(group + \", tbody\");\n                    groupId = rowGroup.attr(ID) || kendo.guid();\n\n                    table.attr(ROLE, NONE);\n                    table.find(TR).attr(ROLE, ROW);\n                    table.find(el).attr(ROLE, role);\n                    rowGroup.attr({\n                        role: ROWGROUP,\n                        id: groupId\n                    });\n                }\n\n                if (lockedTable.length > 0) {\n                    that._ariaLocked(type, group, el, role);\n                }\n\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n                table.find(\"td\").attr(ROLE, GRIDCELL);\n\n                return groupId;\n            },\n\n            _ariaId: function() {\n                var id = this.element.attr(ID) || \"aria\";\n\n                if (id) {\n                    this._cellId = id + \"_active_cell\";\n                }\n            },\n\n            _ariaLocked: function(type, group, el, role) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                    lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                    rows = table.find(TR),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n\n                lockedTable.find(el).attr(ROLE, role);\n\n                rows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaLockedContent: function() {\n                var that = this,\n                    table = that.table,\n                    tableRows = table.find(TR),\n                    lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                    lockedRows = lockedTable.find(TR);\n\n                lockedTable.attr(ROLE, NONE);\n                lockedTable.find(\"tbody\").attr(ROLE, NONE);\n                lockedRows.attr(ROLE, NONE);\n                lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n                tableRows.each(function(i, row) {\n                    var ownedCells = [];\n\n                    ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                    ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                    row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n                });\n            },\n\n            _ariaAddHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    table = this.table,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                    this._ariaColumnIndex();\n\n                    table.attr(ARIA_COLCOUNT, leafColsCount);\n                }\n            },\n\n            _ariaRemoveHiddenColIndex: function() {\n                var virtualScroll = this.virtualScroll || {},\n                    columns = this.columns,\n                    leafColsCount = leafColumns(columns).length;\n\n                if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                    this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                    this.table.removeAttr(ARIA_COLCOUNT);\n                }\n            },\n\n            _ariaRowIndex: function() {\n                var headerRows = this.thead.find(\">tr\"),\n                    numberOfHeaderRows = headerRows.length,\n                    bodyRows = this.tbody.find(\">tr\"),\n                    footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                    totalNumberOfItems = this.dataSource.total(),\n                    previousItems = this.dataSource.skip() || 0,\n                    currentIndex = 1,\n                    previousMaster = false,\n                    i, currentRow;\n\n                if (this._hasDetails()) {\n                    totalNumberOfItems = totalNumberOfItems * 2;\n                    previousItems = previousItems * 2;\n                }\n\n                for (i = 0; i < numberOfHeaderRows; i++) {\n                    headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n\n                currentIndex = numberOfHeaderRows + previousItems;\n\n                for (i = 0; i < bodyRows.length; i++) {\n                    currentRow = bodyRows.eq(i);\n\n                    if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                        if (previousMaster) {\n                            currentIndex = currentIndex + 2;\n                        } else {\n                            currentIndex = currentIndex + 1;\n                        }\n\n                        previousMaster = true;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                        previousMaster = false;\n                    }\n\n                    currentRow.attr(ARIA_ROWINDEX, currentIndex);\n                }\n\n                currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n                for (i = 0; i < footerRows.length; i++) {\n                    footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n                }\n            },\n\n            _cellsIds: function(elements, prefix, i) {\n                var ownedCells = [];\n\n                elements.each(function(j, cell) {\n                    var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                    cell.setAttribute(ID, id);\n\n                    ownedCells.push(id);\n                });\n\n                return ownedCells;\n            },\n\n            _trailingColumns: function() {\n                return this._groups() + (this._hasDetails() ? 1 : 0);\n            },\n\n            _element: function() {\n                var that = this,\n                    table = that.element;\n\n                if (!table.is(\"table\")) {\n                    if (that.options.scrollable) {\n                        table = that.element.find(\"> .k-grid-content > table\");\n                    } else {\n                        table = that.element.children(\"table\");\n                    }\n\n                    if (!table.length) {\n                        table = $(\"<table />\").appendTo(that.element);\n                    }\n                }\n\n                table.addClass(\"k-grid-table k-table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that.table = table;\n\n                that._wrapper();\n            },\n\n            _createResizeHandle: function(container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = (indicatorWidth * 3) / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n\n                if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n\n                scrollLeft = kendo.scrollLeft(container);\n\n                if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeft = scrollLeft * -1;\n                }\n\n                leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n                left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n               } else {\n                    if (scrollable) {\n                        rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                        headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                        leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                        ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = -rtlCorrection;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n\n                top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n                resizeHandle.css({\n                    top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                })\n                .data(\"th\", th)\n                .show();\n\n                resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n                });\n            },\n\n            _positionColumnResizeHandle: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                    var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                    var th = $(this);\n                    if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                        return;\n                    }\n\n                    if (typeof button !== \"undefined\" && button !== 0) {\n                        //do not create a new resize handle if a mouse button is still pressed\n                        //this happens during resizing or before UserEvents trigger \"start\"\n                        return;\n                    }\n\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        // resizing multi-column headers is not supported\n                        return;\n                    }\n\n                    that._createResizeHandle(th.closest(DIV), th);\n                });\n            },\n\n            _resizeHandleDocumentClick: function(e) {\n                if ($(e.target).closest(\".k-column-active\").length) {\n                    return;\n                }\n\n                $(document).off(e);\n\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n\n            _resetResizeHandleHeader: function() {\n                var th;\n\n                if (!this.resizeHandle) {\n                    return;\n                }\n\n                th = $(this.resizeHandle).data(\"th\");\n\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n\n            _hideResizeHandle: function() {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data(\"th\")\n                        .removeClass(\"k-column-active\");\n\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n\n            _positionColumnResizeHandleTouch: function() {\n                var that = this,\n                    lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function(e) {\n                        var th = $(e.target);\n\n                        e.preventDefault();\n\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data(\"th\")\n                                .removeClass(\"k-column-active\");\n                            that._resetResizeHandleHeader();\n                        }\n\n                        th.addClass(\"k-column-active\");\n\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                        that._createResizeHandle(th.closest(DIV), th);\n\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                        }\n\n                        $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n\n            resizeColumn: function(column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n                var col;\n\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                if (options.scrollable) {\n\n                    col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                        .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                        .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                } else {\n                    col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                }\n\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n\n                            contentTable\n                                .add(header)\n                                .add(footer)\n                                .css('width', width);\n\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n\n                that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n\n                column.width = columnWidth;\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            _resizable: function() {\n                var that = this,\n                    options = that.options,\n                    container,\n                    columnStart,\n                    columnWidth,\n                    columnMinWidth,\n                    gridWidth,\n                    isMobile = this._isMobile,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                    isLocked,\n                    col, th;\n\n                if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                    container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                        hint: function(handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({\n                                height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                            });\n                        },\n                        start: function(e) {\n                            th = $(e.currentTarget).data(\"th\");\n\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n\n                            var header = th.closest(\"table\"),\n                                index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                            isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                            var contentTable = isLocked ? that.lockedTable : that.table,\n                                footer = that.footer || $();\n\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                            }\n\n                            cursor(that.wrapper, 'col-resize');\n\n                            if (options.scrollable) {\n                                col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                            } else {\n                                col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                            }\n\n                            var columns = $.map(that.columns, function(a) {\n                                return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                            });\n\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                            // fix broken UI in Chrome38+\n                            if (browser.webkit) {\n                                that.wrapper.addClass(\"k-grid-column-resizing\");\n                            }\n                        },\n                        resize: function(e) {\n                            var rtlMultiplier = isRtl ? -1 : 1,\n                                currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children(\"table\");\n                                } else if (that.footer) {\n                                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest(\"table\");\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                        }\n\n                                        contentTable\n                                            .add(header)\n                                            .add(footer)\n                                            .css('width', width);\n\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function() {\n                            var newWidth = outerWidth(th),\n                                column,\n                                header;\n\n                            cursor(that.wrapper, \"\");\n\n                            if (browser.webkit) {\n                                that.wrapper.removeClass(\"k-grid-column-resizing\");\n                            }\n\n                            if (th && columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                                var index = th.attr(kendo.attr(\"index\"));\n                                if (!index) {\n                                    index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n\n                                column.width = newWidth;\n\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                                that._updateStickyColumns();\n                            }\n\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n\n                }\n            },\n\n            // Row resizing functionality below\n            _addLockedRowResizing: function(tr) {\n                var index = tr.index();\n\n                return this.lockedTable.find(TR).eq(index)\n                    .add(this.tbody.find(TR).eq(index));\n            },\n\n            _getMinRowHeight: function(row) {\n                var minHeight = 0;\n\n                row.each(function (i, el) {\n                    var currentMinHeight;\n\n                    el.style.height = '';\n                    currentMinHeight = outerHeight(el);\n\n                    if (currentMinHeight > minHeight) {\n                        minHeight = currentMinHeight;\n                    }\n                });\n\n                return minHeight;\n            },\n\n            _cacheRowHeight: function(rows, height) {\n                var that = this;\n\n                if (!that._cachedRowsHeight) {\n                    that._cachedRowsHeight = {};\n                }\n\n                rows.each(function (i, el) {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    that._cachedRowsHeight[uid] = height;\n                });\n            },\n\n            _clearCachedRowsHeight: function(rows) {\n                var that = this;\n\n                if (rows && that._cachedRowsHeight) {\n                    rows.each(function (i, el) {\n                        var uid = el.getAttribute(\"data-uid\");\n\n                        delete that._cachedRowsHeight[uid];\n                    });\n                } else {\n                    that._cachedRowsHeight = null;\n                }\n            },\n\n            _mapCachedRowsHeight: function(method, target) {\n                var input = this._cachedRowsHeight,\n                    ds = this.dataSource,\n                    output = {};\n\n                Object.keys(input).forEach(function (key) {\n                    var item = ds[method](key);\n\n                    output[item[target]] = input[key];\n                });\n\n                this._cachedRowsHeight = output;\n            },\n\n            _rowResizerDblClick: function() {\n                var that = this,\n                    resizer = that.rowResizer,\n                    row = resizer.data(TR),\n                    oldHeight = outerHeight(row),\n                    newHeight, rows;\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.select();\n                } else {\n                    rows = row;\n                }\n\n                if (that.lockedTable) {\n                    row = that._addLockedRowResizing(row);\n\n                    if (row.hasClass(SELECTED)) {\n                        rows = that.lockedTable.find(DOT + SELECTED);\n                    } else {\n                        rows = that.lockedTable.find(TR).eq(row.index());\n                    }\n\n                    rows.each(function (i, el) {\n                        var rowIndex = el.rowIndex,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                            pairMinHeight = that._getMinRowHeight(rowPair);\n\n                        rowPair.css(HEIGHT, pairMinHeight);\n                    });\n                } else {\n                    rows.css(HEIGHT, AUTO);\n                }\n\n                that._clearCachedRowsHeight(rows);\n\n                resizer.removeClass(HOVER);\n                resizer.removeClass(ACTIVE);\n\n                newHeight = outerHeight(row);\n\n                if (oldHeight != newHeight) {\n                    that.trigger(ROWRESIZE, {\n                        row: row,\n                        rows: rows,\n                        oldHeight: oldHeight,\n                        newHeight: newHeight\n                    });\n                }\n            },\n\n            _setupRowResizer: function _setupRowResizer(resizer, row, top) {\n                resizer\n                    .data(TR, row)\n                    .css({\n                        top: top\n                    });\n            },\n\n            _attachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer,\n                    delay = 200,\n                    isIn = false;\n\n                rowResizer\n                    .on(MOUSEDOWN + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(HOVER);\n                            rowResizer.addClass(ACTIVE);\n                        }\n                    })\n                    .on(MOUSEUP + NS, function (e) {\n                        if (e.button === 0) {\n                            rowResizer.removeClass(ACTIVE);\n                            rowResizer.addClass(HOVER);\n                        }\n                    })\n                    .on(MOUSEENTER + NS, function () {\n                        isIn = true;\n\n                        setTimeout(function () {\n                            if (isIn) {\n                                rowResizer.addClass(HOVER);\n                            }\n                        }, delay);\n                    })\n                    .on(MOUSELEAVE + NS, function () {\n                        isIn = false;\n                        rowResizer.removeClass(HOVER);\n                    });\n            },\n\n            _getResizerTop: function(tr, container) {\n                var resizer = this.rowResizer,\n                    inner = resizer.find(DOT + ROW_RESIZER)[0],\n                    paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n                return tr.offset().top -\n                    parseFloat(tr.css(\"marginTop\")) -\n                    (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                    inner.clientHeight -\n                    paddingTop +\n                    container.scrollTop();\n            },\n\n            _getResizerContainer: function() {\n                var container = this.tbody.closest(DIV);\n\n                if (this.lockedTable) {\n                    container = container.closest(DOT + \"k-grid-container\");\n                }\n\n                return container;\n            },\n\n            _createRowResizer: function(e) {\n                var that = this,\n                    tr = $(e.currentTarget),\n                    targetHeight = e.currentTarget.clientHeight,\n                    positionIntarget = e.offsetY,\n                    rowResizer = that.rowResizer,\n                    previousRow = tr.prev(TR + \":visible\"),\n                    container = that._getResizerContainer(),\n                    top;\n\n                if (!rowResizer) {\n                    rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                    container.append(rowResizer);\n                    that._attachRowResizerEvents();\n\n                    rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n                }\n\n                top = that._getResizerTop(tr, container);\n\n                if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                    if (!previousRow.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, previousRow, top);\n                    }\n                } else {\n                    if (!tr.hasClass(GROUPING_ROW)) {\n                        that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                    }\n                }\n            },\n\n            _detachRowResizerEvents: function() {\n                var rowResizer = this.rowResizer;\n\n                rowResizer\n                    .off(MOUSEDOWN + NS)\n                    .off(MOUSEUP + NS)\n                    .off(MOUSEENTER + NS)\n                    .off(MOUSELEAVE + NS);\n            },\n\n            _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n                var that = this;\n\n                rows.each(function (i, el) {\n                    var minHeight;\n\n                    if (multiSelectionLocked) {\n                        var rowIndex = el.rowIndex,\n                            pairNew = newHeight,\n                            pairMin = 0,\n                            rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                        rowPair.each(function (i, r) {\n                            var currentMinHeight;\n\n                            r.style.height = '';\n                            currentMinHeight = outerHeight(r);\n\n                            if (currentMinHeight > pairMin) {\n                                pairMin = currentMinHeight;\n                            }\n                        });\n\n                        if (pairNew < pairMin) {\n                            pairNew = pairMin;\n\n                            that._clearCachedRowsHeight(rowPair.eq(0));\n                        } else {\n                            that._cacheRowHeight(rowPair.eq(0), pairNew);\n                        }\n\n                        rowPair.css(HEIGHT, pairNew);\n                    } else {\n                        el.style.height = '';\n                        minHeight = outerHeight(el);\n\n                        if (newHeight > minHeight) {\n                            el.style.height = newHeight + PX;\n\n                            that._cacheRowHeight($(el), newHeight);\n                        } else {\n                            that._clearCachedRowsHeight($(el));\n                        }\n                    }\n                });\n            },\n\n            _rowResizing: function() {\n                var that = this,\n                    options = that.options,\n                    container, rowStart, rowHeight, tr;\n\n                if (options.resizable && options.resizable.rows === true) {\n                    that.tbody\n                        .parent()\n                        .add(that.lockedTable)\n                        .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                    if (that.rowResizing) {\n                        that.rowResizing.destroy();\n                    }\n\n                    container = that._getResizerContainer();\n\n                    that.rowResizing = new ui.Resizable(container, {\n                        handle: DOT + ROW_RESIZER_WRAP,\n                        start: function(e) {\n                            tr = $(e.currentTarget).data(TR);\n\n                            if (that.lockedTable) {\n                                tr = that._addLockedRowResizing(tr);\n                            }\n\n                            tr.addClass(HOVER);\n\n                            that._detachRowResizerEvents();\n\n                            rowStart = e.y.location;\n                            rowHeight = outerHeight(tr);\n                        },\n                        resize: function(e) {\n                            var newHeight = rowHeight + e.y.location - rowStart,\n                                minHeight = 0;\n\n                            if (tr.length > 1) {\n                                minHeight = that._getMinRowHeight(tr);\n                            }\n\n                            if (newHeight < minHeight) {\n                                newHeight = minHeight;\n                            }\n\n                            tr.css('height', newHeight);\n\n                            that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                        },\n                        resizeend: function() {\n                            var newHeight = outerHeight(tr),\n                                multiSelectionLocked = false,\n                                rows;\n\n                            if (tr.hasClass(SELECTED)) {\n                                rows = that.select();\n\n                                if (tr.length > 1 && rows.length > tr.length) {\n                                    rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                    multiSelectionLocked = true;\n                                }\n                            } else {\n                                rows = tr;\n                            }\n\n                            that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                            tr.removeClass(HOVER);\n\n                            that.rowResizer.removeClass(ACTIVE);\n                            that.rowResizer.addClass(HOVER);\n                            that._attachRowResizerEvents();\n\n                            if (multiSelectionLocked) {\n                                rows = that.select();\n                            }\n\n                            if (rowHeight != newHeight) {\n                                that.trigger(ROWRESIZE, {\n                                    row: tr,\n                                    rows: rows,\n                                    oldHeight: rowHeight,\n                                    newHeight: newHeight\n                                });\n                            }\n\n                            tr = null;\n                        }\n                    });\n                }\n            },\n\n            _draggable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n\n                    var header = that.wrapper.children(\".k-grid-header\");\n\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                        dragstart: function() {\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                                if (that.virtualScrollable) {\n                                    kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                                } else {\n                                    kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function() {\n                            that._resetResizeHandleHeader();\n                            header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                        },\n                        drag: function() {\n                            that._hideResizeHandle();\n                        },\n                        hint: function(target) {\n                            var title = target.attr(kendo.attr(\"title\"));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                                .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                                .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                        }\n                    }).data(\"kendoDraggable\");\n                }\n            },\n\n            _reorderable: function() {\n                var that = this,\n                    reorderable = that.options.reorderable;\n\n                if (reorderable === true || (reorderable && reorderable.columns)) {\n                    if (that.wrapper.data(\"kendoReorderable\")) {\n                        that.wrapper.data(\"kendoReorderable\").destroy();\n                    }\n\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dropFilter: HEADERCELLS,\n                        dragOverContainers: function(sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function(e) {\n                            return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function(e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n\n                            that.reorderColumn(newIndex, column, e.position === \"before\");\n                        }\n                    });\n                }\n            },\n\n            _reorderHeader: function(sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                }\n\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = \"prepend\";\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                    }\n\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n\n            _reorderContent: function(sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    }\n                    else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find(\"colgroup\");\n                            headerCol = that.lockedHeader.find(\"colgroup\");\n                            footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                        }\n                    }\n                }\n\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n\n                var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(\n                                that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                                that.table.find(\">tbody>tr.k-grouping-row\"),\n                                sources.length\n                            );\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(\n                            that.table.find(\">tbody>tr.k-grouping-row\"),\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                            sources.length\n                        );\n                    }\n\n                    lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n                }\n\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n\n            _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                    closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n\n            _autoFitLeafColumn: function(leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n\n            _hasReorderableRows: function() {\n                return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n            },\n\n            _draggableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                        (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                    clickMoveClick = false;\n\n                if (that._draggableRowsInstance) {\n                    that._draggableRowsInstance.destroy();\n                }\n\n                if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                    clickMoveClick = true;\n                }\n\n                that._draggableRowsInstance = that.tbody.kendoDraggable({\n                    group: \"row-draggable\",\n                    autoScroll: true,\n                    filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                    hint: function(target) {\n                        var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                        if (selectable && that.select().length > 1) {\n                            hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                        } else {\n                            var clone = target.closest(ITEMROW).clone();\n                            clone.find(\"td.k-command-cell\").remove();\n                            clone.find(\"td\").each(function(index, elm) {\n                                hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                            });\n                        }\n\n                        return hint;\n                    },\n                    clickMoveClick: clickMoveClick,\n                    cursorOffset: { top: 0, left: 0 }\n                }).data(\"kendoDraggable\");\n            },\n\n            _reorderableRows: function() {\n                var that = this,\n                    selectable = that._checkBoxSelection ||\n                                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (that.tbody.data(\"kendoReorderable\")) {\n                    that.tbody.data(\"kendoReorderable\").destroy();\n                }\n\n                that.tbody.kendoReorderable({\n                    smartPosition: false,\n                    draggable: that._draggableRowsInstance,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var result = true,\n                            target = $(ITEMROW, that.content).eq(targetIndex);\n\n                        if (selectable) {\n                            result = !target.is(\".k-selected\");\n                        }\n\n                        return result;\n                    },\n                    inSameContainer: function(e) {\n                        if (selectable) {\n                            return !$(e.target).is(\".k-selected\");\n                        }\n\n                        return true;\n                    },\n                    dropFilter: \"> \" + ITEMROW,\n                    allowIcon: \"insert-middle\",\n                    orientation: \"vertical\",\n                    reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                    positionDropCue: function(reorderDropCue, dropTarget) {\n                        var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                        reorderDropCue.css({\n                            transform: \"translate(0,-50%)\",\n                            left: firstCellLeft\n                        });\n                    },\n                    externalDraggable: function(e) {\n                        var draggable = e.draggable;\n\n                        if (draggable) {\n                            return draggable;\n                        }\n                    },\n                    change: function(e) {\n                        that._triggerRowRorder(e);\n                    }\n                });\n            },\n\n            _triggerRowRorder: function(e) {\n                var that = this,\n                    args = {\n                        newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                        oldIndex: e.oldIndex\n                    },\n                    row = e.element,\n                    selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n                if (selectable && that.select().length > 1) {\n                    args = extend(args, {\n                        rows: that.select()\n                    });\n                } else {\n                    args = extend(args, {\n                        row: row\n                    });\n                }\n\n                if (!that.trigger(ROWREORDER, args)) {\n                    that.reorderRows(selectable ? that.select() : row, args.newIndex);\n                }\n            },\n\n            reorderRowTo: function(row, index) {\n                var that = this,\n                    item = that.dataItem(row),\n                    oldIndex = row.index();\n\n                if (index < 0 || index === oldIndex) {\n                    return;\n                }\n\n                if (!that.trigger(ROWREORDER, {\n                    row: row,\n                    oldIndex: row.index(),\n                    newIndex: index\n                })) {\n                    that.dataSource.pushMove(index, [item]);\n                }\n            },\n\n            reorderRows: function(rows, index) {\n                var that = this,\n                    dataSource = that.dataSource,\n                    rowsLength = that.tbody.children(ITEMROW).length,\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                    items = rows.toArray().map(function(row) {\n                        return that.dataItem(row);\n                    });\n\n                if (!targetItem) {\n                    // If index is after last row dataItem wouldn't exist\n                    targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                    index = dataSource.indexOf(targetItem) + 1;\n                } else {\n                    index = dataSource.indexOf(targetItem);\n                }\n\n                if (index >= 0) {\n                    that._rowDropping = true;\n                    dataSource.pushMove(index, items);\n                    that._rowDropping = false;\n                }\n            },\n\n            autoFitColumns: function(columns) {\n                var that = this;\n\n                columns = columns || that.columns;\n\n                for (var i = 0; i < columns.length; i++) {\n                    var column = columns[i];\n\n                    if (column.columns) {\n                        that.autoFitColumns(column.columns);\n                    } else {\n                        that.autoFitColumn(column);\n                    }\n                }\n            },\n\n            autoFitColumn: function(column) {\n                var that = this,\n                    options = that.options,\n                    columns = that.columns,\n                    index,\n                    th,\n                    headerTable,\n                    leafCols,\n                    isLocked,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    col,\n                    minWidth,\n                    contentDiv, scrollLeft,\n                    notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                    notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                    menu,\n                    thWidth;\n\n                //  retrieve the column object, depending on the method argument\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                leafCols = leafColumns(columns);\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafCols);\n                isLocked = column.locked;\n\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children(\"table\");\n                } else {\n                    headerTable = that.thead.parent();\n                }\n\n                th = headerTable.find(\"[data-index='\" + index + \"']\");\n                menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n                var contentTable = isLocked ? that.lockedTable : that.table,\n                    footer = that.footer || $();\n\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                }\n\n                var footerTable = footer.find(\"table\").first();\n\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n\n                // adjust column index, depending on previous hidden columns\n                for (var j = 0; j < leafCols.length; j++) {\n                    if (leafCols[j] === column) {\n                        break;\n                    } else {\n                        if (leafCols[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n\n                // get col elements\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                        .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                        .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = kendo.scrollLeft(contentDiv);\n                    }\n                } else {\n                    col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n                }\n\n                var tables = headerTable.add(contentTable).add(footerTable);\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"initial\");\n                }\n\n                var oldColumnWidth = outerWidth(th);\n\n                // reset the table and autofitted column widths\n                // if scrolling is disabled, we need some additional repainting of the table\n                col.width(\"\");\n                tables.css(\"table-layout\", \"fixed\");\n                col.width(AUTO);\n                tables.addClass(\"k-autofitting\");\n                tables.css(\"table-layout\", \"\");\n\n                thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n                // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n                var newColumnWidth = Math.ceil(Math.max(\n                    thWidth,\n                    outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                    outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n                )) + 1;\n\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n\n                if (browser.safari) {\n                    th.css(\"white-space\", \"\");\n                }\n\n                // if all visible columns have widths, the table needs a pixel width as well\n                if (options.scrollable) {\n                    var cols = headerTable.find(\"col\"),\n                        colWidth,\n                        totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n\n                    if (totalWidth) {\n                        tables.each(function() {\n                            this.style.width = totalWidth + PX;\n                        });\n                    }\n                }\n\n                tables.removeClass(\"k-autofitting\");\n\n                if (scrollLeft) {\n                    kendo.scrollLeft(contentDiv, scrollLeft);\n                }\n\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._updateStickyColumns();\n            },\n\n            reorderColumn: function(destIndex, column, before) {\n                var that = this,\n                    parent = columnParent(column, that.columns),\n                    columns = parent ? parent.columns : that.columns,\n                    sourceIndex = inArray(column, columns),\n                    destColumn = columns[destIndex],\n                    virtualScroll = that.virtualScroll || {},\n                    lockChanged,\n                    isLocked = !!destColumn.locked,\n                    lockedCount = lockedColumns(that.columns).length,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n\n                that._hideResizeHandle();\n\n                if (before === undefined$1) {\n                    before = destIndex < sourceIndex;\n                }\n\n                var sourceColumns = [column];\n\n                that._reorderHeader(sourceColumns, destColumn, before);\n\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n\n                that._reorderContent(sourceColumns, destColumn, before);\n\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n\n                if (!lockChanged) {\n                    return;\n                }\n\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, {\n                        column: column\n                    });\n                } else {\n                    that.trigger(COLUMNUNLOCK, {\n                        column: column\n                    });\n                }\n            },\n\n            _updateColumnCellIndex: function() {\n                var header;\n                var offset = 0;\n\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find(\"thead\");\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n\n            lockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n\n                if (column.sticky) {\n                    this.unstickColumn(columns.indexOf(column));\n                }\n\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n\n            unlockColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n\n            stickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || column.sticky || column.hidden) {\n                    return;\n                }\n\n                if (column.locked) {\n                    this.unlockColumn(columns.indexOf(column));\n\n                    if (column.locked) {\n                        return;\n                    }\n                }\n\n                column.sticky = true;\n                this._updateStickyColumns();\n            },\n\n            unstickColumn: function(column) {\n                var columns = this.columns;\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !column.sticky || column.locked || column.hidden) {\n                    return;\n                }\n\n                this._removeStickyAttributes([column]);\n                this._removeStickyStyles(stickyColumns(columns));\n\n                column.sticky = false;\n                this._updateStickyColumns();\n\n                if (this._anyStickyColumns() === 0) {\n                    this._templates();\n                    if (this._hasFilterRow()) {\n                        this._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            cellIndex: function(td) {\n                var lockedColumnOffset = 0;\n\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n\n            _modelForContainer: function(container) {\n                container = $(container);\n\n                if (!container.is(TR) && this._editMode() !== \"popup\") {\n                    container = container.closest(TR);\n                }\n\n                var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n                return this.dataSource.getByUid(id);\n            },\n\n            _calculateColumnIndex: function(cell) {\n                var cellIndex = this.cellIndex(cell);\n                var virtualOffset = 0;\n\n                if (this._hasVirtualColumns()) {\n                    virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                    virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n                }\n\n                return cellIndex + virtualOffset;\n            },\n\n            _editable: function() {\n                var that = this,\n                    editable = that.options.editable,\n                    handler = function() {\n                        var target = activeElement(),\n                            cell = that._editContainer;\n\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    };\n\n                if (editable) {\n                    this.wrapper.addClass(\"k-editable\");\n\n                    var mode = that._editMode();\n                    if (mode === \"incell\") {\n                        that.table.add(that.lockedTable)\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                                var target = $(e.target);\n                                if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                    e.preventDefault();\n                                }\n                            });\n\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper\n                                    .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                        // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                        // this is necessary for the \"focusout\" event to be fired\n                                        $(e.target).trigger(\"focus\");\n                                    })\n                                    .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                        if (!$(e.target).is(\"input\")) {\n                                            $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                        }\n                                    })\n                                    .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                        var editContainer = that._editContainer;\n\n                                        if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                            that._mousedownOnEditCell = true;\n                                        } else {\n                                            that._mousedownOnEditCell = false;\n                                        }\n                                    });\n                            }\n\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                                filter: \"tr:not(.k-grouping-row) > td\",\n                                allowSelection: true,\n                                tap: function(e) {\n                                    var td = $(e.target),\n                                    isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                    that._mousedownOnEditCell = false;\n\n                                    if (td.hasClass(\"k-hierarchy-cell\") ||\n                                        td.hasClass(\"k-detail-cell\") ||\n                                        td.hasClass(\"k-group-cell\") ||\n                                        td.hasClass(\"k-edit-cell\") ||\n                                        td.has(\".k-grid-remove-command\").length ||\n                                        (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                        $(e.target).is(\":input\")) {\n                                        return;\n                                    }\n\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).trigger(\"blur\");\n                                            that.closeCell();\n                                            that.editCell(td);\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }\n                            });\n\n                            that.wrapper.on(\"focusin\" + NS, function() {\n                                // fix focus issue in IE\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            })\n                            .on(\"focusout\" + NS, function(e) {\n                                var shouldCloseCell = true;\n\n                                if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n\n                                that._mousedownOnEditCell = false;\n\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function() {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                                var element = $(this);\n                                if (!that._belongsToGrid(element)) {\n                                    return;\n                                }\n                                e.preventDefault();\n                                that.editRow(element.closest(TR));\n                            });\n\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow(element.closest(TR));\n                        });\n                    } else {\n                        //Required for the MVC server wrapper delete button\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                            if (!that._belongsToGrid($(this))) {\n                                return;\n                            }\n                            e.stopPropagation();\n\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n\n            editCell: function(cell) {\n                cell = $(cell);\n\n                var that = this,\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                    model = that._modelForContainer(cell);\n\n                that.closeCell();\n\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n\n                    that._attachModelChange(model);\n\n                    that._editContainer = cell;\n\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass(\"k-edit-cell\")\n                        .kendoEditable({\n                            fields: editField(column),\n                            model: model,\n                            size: that.options.size,\n                            target: that,\n                            change: function(e) {\n                                if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                    e.preventDefault();\n                                }\n                            },\n                            skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                        }).data(\"kendoEditable\");\n\n                    var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                        that._syncLockedScroll();\n                    }\n\n                    that.trigger(EDIT, { container: cell, model: model });\n                }\n            },\n\n            _adjustLockedHorizontalScrollBar: function() {\n                var table = this.table,\n                    content = table.parent();\n\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n\n            _syncLockedScroll: function() {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n                }\n            },\n\n            _syncLockedContentHeight: function() {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n\n            _syncLockedHeaderHeight: function() {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children(\"table\");\n                    var table = this.thead.parent();\n\n                    this._adjustRowsHeight(lockedTable, table);\n\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n\n            _syncLockedFooterHeight: function() {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n                }\n            },\n\n            _destroyEditable: function() {\n                var that = this;\n\n                var destroy = function() {\n                    if (that.editable) {\n\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        var window = that._editContainer.data(\"kendoWindow\");\n\n                        if (container) {\n                            container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                            container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                        }\n\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        if (window) {\n                            window.destroy();\n                        }\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n\n                if (that.editable) {\n                    if (that._editMode() === \"popup\" && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                        }\n                        else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n\n            _destroyEditView: function() {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate(\"\");\n                }\n            },\n\n            _attachModelChange: function(model) {\n                var that = this;\n\n                that._modelChangeHandler = function(e) {\n                    that._modelChange({ field: e.field, model: this });\n                };\n\n                model.bind(\"change\", that._modelChangeHandler);\n            },\n\n            _detachModelChange: function() {\n                var that = this,\n                    container = that._editContainer,\n                    model = that._modelForContainer(container);\n\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n\n            closeCell: function(isCancel) {\n                var that = this,\n                    cell = that._editContainer,\n                    column,\n                    tr,\n                    model;\n\n                if (!cell) {\n                    return;\n                }\n\n                model = that._modelForContainer(cell);\n\n                if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                    return;\n                }\n\n                that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n                cell.removeClass(\"k-edit-cell\");\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n                }\n\n                that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n                that._displayCell(cell, column, model);\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n                }\n            },\n\n            _displayCell: function(cell, column, dataItem) {\n                var that = this,\n                    state = { storage: {}, count: 0 },\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                cell.empty().html(tmpl(dataItem));\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: cell,\n                        data: [ { dataItem: dataItem } ]\n                    };\n                });\n            },\n\n            removeRow: function(row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n\n                this._removeRow(row);\n            },\n\n            _removeRow: function(row) {\n                var that = this,\n                    model,\n                    modelId,\n                    key,\n                    schema,\n                    mode = that._editMode();\n\n                if (mode !== \"incell\") {\n                    that.cancelRow();\n                }\n\n                row = $(row);\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n\n                model = that._modelForContainer(row);\n\n                if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n\n                    that.dataSource.remove(model);\n\n                    if (mode === \"inline\" || mode === \"popup\") {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === \"incell\") {\n                    that._destroyEditable();\n                }\n            },\n\n            _editMode: function() {\n                var mode = \"incell\",\n                    editable = this.options.editable;\n\n                if (editable !== true) {\n                    if (typeof editable == \"string\") {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n\n                return mode;\n            },\n\n            editRow: function(row) {\n                var model;\n                var that = this;\n\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n\n                var mode = that._editMode();\n                var container;\n\n                that.cancelRow();\n\n                if (model) {\n                    row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                    that._attachModelChange(model);\n\n                    if (mode === \"popup\") {\n                        that._createPopupEditor(model);\n                    } else if (mode === \"inline\") {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === \"incell\") {\n                        $(row).children(DATA_CELL).each(function() {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                            model = that._modelForContainer(cell);\n\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n\n\n                    container = that.editView ? that.editView.element : that._editContainer;\n\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = this._editCancelClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                        }\n\n                        container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                    }\n                }\n            },\n\n            _editUpdateClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                this.saveRow();\n            },\n\n            _editCancelClick: function(e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                    return;\n                }\n\n                var currentIndex = that.items().index($(that.current()).parent());\n\n                that.cancelRow();\n\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n\n            _editFields: function(columns, model) {\n                var fields = [];\n                var column;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable || column.command) {\n                        continue;\n                    }\n                    if (isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                    }\n                }\n                return fields;\n            },\n\n            _createPopupEditor: function(model) {\n                var that = this;\n                var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                var container;\n                var buttonsHTML;\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                options = options || {};\n\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n\n                    html += (kendo.template(template, settings))(model);\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (that._isMobile) {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n\n                                if (isColumnEditable(column, model)) {\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = { storage: {}, count: 0 };\n\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                    if (state.count > 0) {\n                                        tmpl = tmpl.bind(state.storage);\n                                    }\n\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n\n                                html += \"</li>\";\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, \"edit\");\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n\n                       if (command.attr) {\n                           attr = command.attr;\n                       }\n                    }\n                }\n\n                if (!that._isMobile) {\n                    buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                    buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                    buttonsHTML += '</div>';\n\n                    html += template ? buttonsHTML + '</div>' : '</div>';\n\n                    container = that._editContainer = $(html)\n                    .appendTo(that.wrapper).eq(0)\n                    .kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || \"Edit\",\n                        visible: false,\n                        close: function(e) {\n                            if (e.userTriggered) {\n                                //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                                e.sender.element.trigger(\"focus\");\n                                if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n\n                                var currentIndex = that.items().index($(that.current()).parent());\n\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += \"</ul></div>\";\n                    that.editView = that.pane.append(\n                        '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                            '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                                '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                                'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                                encode(that.options.messages.commands.edit || \"Edit\") +\n                                '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                                'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                            '</div>' +\n                            '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                                html +\n                            '</div>' +\n                        '</div>');\n                    container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n                }\n\n                if (!template && !that._isMobile) {\n                    that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                        items: that._editFields(columns, model),\n                        buttonsTemplate: function () { return ''; },\n                        formData: model\n                    }).editable;\n                    that._editContainer.append(buttonsHTML);\n                } else {\n                    that.editable = that._editContainer\n                    .kendoEditable({\n                        fields: that._isMobile ? that._editFields(columns, model) : null,\n                        model: model,\n                        clearContainer: false,\n                        target: that\n                    }).data(\"kendoEditable\");\n                }\n\n                that._openPopUpEditor();\n\n                that.trigger(EDIT, { container: container, model: model });\n            },\n\n            _openPopUpEditor: function() {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n\n            _createInlineEditor: function(row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n\n                row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push(editField(column));\n                        cell.attr(kendo.attr(\"container-for\"), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, \"edit\");\n                        if (command) {\n                            cell.empty();\n\n                            var updateText,\n                                cancelText,\n                                updateIconClass,\n                                cancelIconClass,\n                                attr;\n\n                            if (isPlainObject(command)) {\n                                    if (isPlainObject(command.text)) {\n                                        updateText = command.text.update;\n                                        cancelText = command.text.cancel;\n                                    }\n                                    if (isPlainObject(command.iconClass)) {\n                                        updateIconClass = command.iconClass.update;\n                                        cancelIconClass = command.iconClass.cancel;\n                                    }\n\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n\n                            $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                                that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                        }\n                    }\n                });\n\n                that._editContainer = row;\n                that._editContainer.addClass(\"k-grid-edit-row\");\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    size: that.options.size,\n                    model: model,\n                    skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n\n                if (row.length > 1) {\n\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n\n                that.trigger(EDIT, { container: row, model: model });\n            },\n\n            cancelRow: function(notify) {\n                var that = this,\n                    container = that._editContainer,\n                    model;\n\n                if (container) {\n                    model = that._modelForContainer(container);\n\n                    if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                        return;\n                    }\n\n                    that._destroyEditable();\n\n                    that.dataSource.cancelChanges(model);\n\n                    that._clearEditableState();\n\n                    if (that._editMode() !== \"popup\") {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                    }\n                }\n            },\n\n            saveRow: function() {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n\n                valid = that.editable && that.editable.end();\n\n                if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n\n                    return deferred.reject().promise();\n                }\n\n                that._clearEditableState();\n\n                return this.dataSource.sync();\n            },\n\n            _displayRow: function(row) {\n                var that = this,\n                    model = that._modelForContainer(row),\n                    related,\n                    newRow,\n                    nextRow,\n                    isSelected = row.hasClass(SELECTED),\n                    isAlt = row.hasClass(\"k-alt\");\n\n                if (model) {\n\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n\n                    that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(\":visible\")) {\n                        newRow.hide();\n                    }\n                    row.replaceWith(newRow);\n\n                    that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                    if (related && related.length) {\n                        that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                    }\n\n                    var angularElements = newRow;\n                    var angularData = [{ dataItem: model }];\n\n                    if (related && related.length) {\n                        angularElements = newRow.add(related);\n                        angularData.push({ dataItem: model });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: angularElements.get(),\n                            data: angularData\n                        };\n                    });\n\n\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                        kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                    }\n                }\n            },\n\n            _showMessage: function(messages, row) {\n                var that = this;\n\n                if (!that._isMobile) {\n                    // eslint-disable-next-line no-alert\n                    return window.confirm(messages.title);\n                }\n\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function() {\n                        if (that.content) {\n                            that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                            that.content.css(OVERFLOW, HIDDEN);\n                        }\n                    },\n                    close: function() {\n                        if (that.content) {\n                            that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                        }\n                    }\n                });\n\n                confirmDialog.result\n                    .done(function() {\n                        that._removeRow(row);\n                    })\n                    .fail(function() {\n                        var confirmDialog = that._confirmDialog;\n\n                        if (confirmDialog) {\n                            confirmDialog.close();\n                            confirmDialog.destroy();\n                        }\n                    });\n\n                return false;\n            },\n\n            _confirmation: function(row) {\n                var that = this,\n                    editable = that.options.editable,\n                    confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n\n                if (confirmation !== false && confirmation != null) {\n\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n\n                    return that._showMessage({\n                            confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                            cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                            title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                        }, row);\n                }\n\n                return true;\n            },\n\n            cancelChanges: function() {\n                var that = this;\n\n                if (that._cachedRowsHeight) {\n                    that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                    that._shouldMapHights = true;\n                }\n\n                that.dataSource.cancelChanges();\n\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function() {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            saveChanges: function() {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            addRow: function() {\n                var that = this,\n                    index,\n                    dataSource = that.dataSource,\n                    mode = that._editMode(),\n                    createAt = that.options.editable.createAt || \"\",\n                    pageSize = dataSource.pageSize(),\n                    view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n\n                if ((that.editable && that.editable.end()) || !that.editable) {\n                    if (mode != \"incell\") {\n                        that.cancelRow();\n                    }\n\n                    index = dataSource.indexOf(view[0]);\n\n                    if (createAtBottom) {\n                        index += view.length;\n\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n\n                    if (that.options.navigatable && mode == \"incell\") {\n                        that._removeCurrent();\n                    }\n\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n\n            _editModel: function(model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || \"\";\n                var mode = that._editMode();\n\n                if (model) {\n                    var id = model.uid,\n                        table = that.lockedContent ? that.lockedTable : that.table,\n                        row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                        cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                    if (mode === \"inline\" && row.length) {\n                        that.editRow(row);\n                    } else if (mode === \"popup\") {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n\n                    if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                        //scroll the containers to the bottom\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n\n            _virtualAddRow: function() {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n                that._clearEditableState();\n\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n\n            _virtualAddRowAtTop: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function() {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n\n            _virtualAddRowAtBottom: function() {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n\n                    that._virtualPageToBottom(function() {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function() {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n\n            _virtualPageToTop: function(callback) {\n                var that = this;\n\n                that._virtualPage(0, that.dataSource.take(), function() {\n                    callback();\n                });\n            },\n\n            _virtualPageToBottom: function(callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? (total - take) : 0;\n\n                that._virtualPage(skip, take, function() {\n                    callback();\n                });\n            },\n\n            _virtualPage: function(skip, take, callback) {\n                var that = this;\n\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n\n            _firstEditableColumnIndex: function(container) {\n                var that = this,\n                    column,\n                    columns = leafColumns(that.columns),\n                    idx,\n                    length,\n                    model = that._modelForContainer(container);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n\n            _clickAdd: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.addRow();\n            },\n\n            _clickCancel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.cancelChanges();\n            },\n\n            _clickExcel: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveAsExcel();\n            },\n\n            _clickPdf: function(e) {\n                var that = this;\n\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                var promise = that.saveAsPDF();\n\n                if (promise) {\n                    promise.done(function() {\n                        that._pdfInitialized = false;\n                    });\n                }\n            },\n\n            _clickSave: function(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n\n                this.saveChanges();\n            },\n\n            _searchInput: function(e) {\n                var that = this,\n                    input = e.currentTarget;\n\n                clearTimeout(that._searchTimeOut);\n\n                that._searchTimeOut = setTimeout(function() {\n                    that._searchTimeOut = null;\n\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = { filters: [], logic: \"or\" };\n                    var value = input.value;\n\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n\n                    if (that.dataSource.options.endless) {\n                        that.dataSource.options.endless = null;\n                        that._endlessPageSize = that.dataSource.options.pageSize;\n                    }\n\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            that._pushExpression(expression.filters, searchFields[i], value);\n                        }\n                    } else {\n                        expression = {};\n                    }\n\n                    that.dataSource.filter(expression);\n                }, 300);\n            },\n\n            _pushExpression: function(filters, field, value) {\n                var that = this,\n                    isServerFiltering = that.dataSource.options.serverFiltering,\n                    defaultOperators = {\n                        string: \"contains\",\n                        number: \"gte\",\n                        date: \"gte\",\n                        enums: \"eq\",\n                        boolean: \"eq\"\n                    },\n                    name = field.name || field,\n                    operator = field.operator,\n                    modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                    fieldInfo = modelInfo && modelInfo[name],\n                    parseFn = fieldInfo && fieldInfo.parse,\n                    expression = {\n                        field: name,\n                        operator: operator || defaultOperators.string,\n                        value: value\n                    };\n\n                if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                    extend(expression, {\n                        operator: operator || defaultOperators[fieldInfo.type],\n                        value: parseFn(value)\n                    });\n                }\n\n                if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                    return;\n                }\n\n                filters.push(expression);\n            },\n\n            _toolbar: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    toolbar = that.options.toolbar,\n\n                    container, items;\n\n                if (toolbar) {\n                    that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                    that._cancelClickHandler = that._clickCancel.bind(that);\n                    that._saveClickHandler = that._clickSave.bind(that);\n                    that._excelClickHandler = that._clickExcel.bind(that);\n                    that._pdfClickHandler = that._clickPdf.bind(that);\n                    that._serachHandler = that._searchInput.bind(that);\n\n                    container = that.wrapper.find(\".k-grid-toolbar\");\n\n                    if (!container.length) {\n                        container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                            .prependTo(wrapper);\n\n                        if (typeof toolbar === STRING || isFunction(toolbar)) {\n                            if (typeof toolbar === STRING) {\n                                toolbar = kendo.template(toolbar).bind(that);\n                            }\n\n                            container.html(toolbar({ grid: that }));\n                            that._attachToolbarClicks();\n                        } else if (isArray(toolbar)) {\n                            items = that._processItems(toolbar);\n\n                            container.kendoToolBar({\n                                navigateOnTab: !that.options.navigatable,\n                                size: that.options.size,\n                                items: items\n                            });\n                        }\n\n                        that.angular(\"compile\", function() {\n                            return { elements: container.get() };\n                        });\n                    } else {\n                        that._attachToolbarClicks();\n                    }\n\n                    container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n                }\n            },\n\n            _attachToolbarClicks: function() {\n                var editable = this.options.editable,\n                    container = this.wrapper.find(\".k-grid-toolbar\");\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                        .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n                container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n            },\n\n            _processItems: function(tools) {\n                var that = this,\n                    items = [],\n                    messages = this.options.messages.commands;\n\n                tools.map(function (t) {\n                    var command, searchText, icon, className, inputSize, template = \"\";\n\n                    if (typeof t === 'string') {\n                        command = t.toLowerCase();\n                        t = {};\n                        t.text = messages[command] || command;\n                    } else {\n                        command = (t.name || t.text || \"\").toLowerCase();\n                        t.text = t.text || messages[command] || command;\n                    }\n\n                    if (command === \"search\") {\n                        items.push({\n                            type: \"spacer\"\n                        });\n\n                        searchText = t.text || messages.search;\n                        icon = t.icon || t.iconClass || \"search\";\n\n                        inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                        template += \"<span class='k-searchbox k-input \" + inputSize + \" k-rounded-md k-input-solid k-grid-search'>\";\n                        template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                        template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                        template += \"</span>\";\n\n                        items.push({\n                            name: \"search\",\n                            overflow: \"never\",\n                            template: template\n                        });\n                    } else {\n                        if (!command && !(isPlainObject(t) && t.template)) {\n                            throw new Error(\"Custom commands should have name specified\");\n                        }\n\n                        t = extend({ type: \"button\" }, defaultCommands[command], t);\n                        className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                        t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                        t.attributes = that._processAttr(t.attr);\n                        delete t.attr;\n\n                        if (!!className) {\n                            if (t.attributes[\"class\"] === undefined$1) {\n                                t.attributes[\"class\"] = \"\";\n                            }\n\n                            t.attributes[\"class\"] += (\" \" + className);\n                        }\n\n                        if (t.template) {\n                            delete t.type;\n                        }\n\n                        if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                            t.click = that[\"_\" + command + \"ClickHandler\"];\n                        }\n\n                        items.push(t);\n                    }\n                });\n\n                return items;\n            },\n\n            _processAttr: function(attr) {\n                var attributes = {},\n                    attrArray;\n\n                if (typeof attr === STRING && attr.length > 0) {\n                    attrArray = attr.split(\" \");\n                    attrArray.map(function (a) {\n                        var keyValue = a.split(\"=\");\n\n                        if (keyValue.length === 2) {\n                            attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                        }\n                    });\n                } else if (isPlainObject(attr)) {\n                    attributes = attr;\n                }\n\n                return attributes;\n            },\n\n            _createButton: function(command) {\n                var button,\n                    template = command.template || COMMANDBUTTONTMPL,\n                    commandName = typeof command === STRING ? command : command.name || command.text,\n                    className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                    options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                    messages = this.options.messages.commands,\n                    attributeClassMatch;\n\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error(\"Custom commands should have name specified\");\n                }\n\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n\n                    if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                        command.className += \" \" + options.className;\n                    } else if (command.className === undefined$1) {\n                        command.className = options.className;\n                    }\n\n                    if (command.className.indexOf(\"k-primary\") > -1) {\n                        command.className = command.className.replace(\"k-primary\", \"\");\n                        command.themeColor = \"primary\";\n                    }\n\n                    if (commandName === \"edit\") {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                                command.className += \" \" + attributeClassMatch[1];\n                            }\n                        }\n                    }\n\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n\n                button = kendo.template(template)(options);\n\n                if (!command.template) {\n                    return kendo.html.renderButton($(button), options);\n                } else {\n                    return button;\n                }\n            },\n\n            _hasFooters: function() {\n                return !!this.footerTemplate ||\n                    !!this.groupFooterTemplate ||\n                    (this.footer && this.footer.length > 0) ||\n                    this.wrapper.find(\".k-grid-footer\").length > 0;\n            },\n\n            _groupable: function() {\n                var that = this;\n\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function(e) {\n                        var element = $(this),\n                        groupRow = element.closest(TR);\n\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                        if (element.is(CARET_ALT_DOWN)) {\n                            if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n                }\n\n                that._attachGroupable();\n            },\n\n            _attachGroupable: function() {\n                var that = this,\n                    wrapper = that.wrapper,\n                    groupable = that.options.groupable,\n                    draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                    filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                        $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                    }\n\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n\n                    if (browser.chrome) {\n                        wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                        wrapper.find(filter).css(\"touch-action\", NONE);\n                    }\n\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: \">div.k-grouping-header\",\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        size: that.options.size,\n                        allowDrag: that.options.reorderable,\n                        removeGroup: function(e) {\n                            that._showUngroupedColumn(e);\n                        },\n                        change: function(e) {\n                            if (that.trigger(\"group\", { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                that._hideGroupedColumns(e.groups);\n                                if (that.dataSource.options.endless) {\n                                    that._resetEndless();\n                                }\n                            }\n                        }\n                    }));\n\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n\n            _showUngroupedColumn: function(group) {\n                var columns = leafColumns(this.columns);\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                        this.showColumn(columns[i]);\n                    }\n                }\n            },\n\n            _hideGroupedColumns: function(groups) {\n                if (!groups) {\n                    return;\n                }\n                var columns = leafColumns(this.columns);\n                var fields = [];\n                var i;\n\n                for (i = 0; i < groups.length; i++) {\n                    if (groups[i].colID) {\n                        fields.push(groups[i].colID);\n                    }\n                }\n\n                for (i = 0; i < columns.length; i++) {\n                    if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                        this.hideColumn(columns[i]);\n                    }\n                }\n            },\n\n            _resetEndless: function() {\n                var that = this;\n                that.dataSource.options.endless = null;\n                that._endlessPageSize = that.dataSource.options.pageSize;\n                that.dataSource._skip = 0;\n                that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                that.dataSource._page = 1;\n            },\n\n            _addGroupableOptionsToHeader: function() {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = \"\";\n                var headerCells = that._headerCells();\n                var cellFieldAttr = \"\";\n                var headerCell;\n                var columnOptions;\n                var i;\n\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n\n            _destroyGroupable: function() {\n                var that = this;\n\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable(\"destroy\");\n                }\n\n                that.groupable = null;\n\n                that._removeGroupableOptionsFromHeader();\n            },\n\n            _removeGroupableOptionsFromHeader: function() {\n                var that = this;\n                var headerCells = that._headerCells();\n\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n\n            _continuousItems: function(filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n\n                var that = this;\n\n                var elements = that.table.add(that.lockedTable);\n\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n                var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n                var result = [];\n\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n\n                return result;\n            },\n\n            _selectable: function() {\n                var that = this,\n                    multi,\n                    cell,\n                    notString = [],\n                    isLocked = that._isLocked(),\n                    selectable = that.options.selectable;\n\n                if (selectable) {\n\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n\n                    that._selectedIds = {};\n\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n\n                    if (that._hasDetails()) {\n                        notString[notString.length] = \".k-detail-row\";\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                    }\n\n                    notString = notString.join(\",\");\n\n                    if (notString !== \"\") {\n                        notString = \":not(\" + notString + \")\";\n                    }\n\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n\n                    var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                        change: function(e) {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n\n                            if (e.event) {\n                                that.trigger(CHANGE);\n                            }\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function(items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx ++) {\n                                related = that._relatedRow(items[idx]);\n\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n\n                            return result;\n                        },\n                        continuousItems: function() {\n                            return that._continuousItems(filter, cell);\n                        },\n                        ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                        addIdToRanges: true\n                    });\n\n                    if (that.options.navigatable) {\n                        elements.on(\"keydown\" + NS, function(e) {\n                            var current = that.current();\n                            var target = e.target;\n                            var eventObject = { event: e };\n                            var triggerChange;\n                            var lastSelection;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                                !current.is(\".k-edit-cell,.k-header\") &&\n                                current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                    current = cell ? current : current.parent();\n                                    triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n\n                                    if (isLocked && !cell) {\n                                        current = current.add(that._relatedRow(current));\n                                    }\n\n                                    if (multi) {\n                                        if (!e.ctrlKey) {\n                                            that.selectable.clear();\n                                        } else {\n                                            if (current.hasClass(SELECTED)) {\n                                                that._deselectCheckRows(current);\n                                                that.trigger(CHANGE);\n                                                return;\n                                            }\n                                        }\n                                    } else {\n                                        that.selectable.clear();\n                                    }\n                                    if (!cell) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.value(current);\n                                    if (triggerChange) {\n                                        that.trigger(CHANGE);\n                                    }\n                            } else if (!cell &&\n                                ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                              ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                               (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                               (e.shiftKey && e.keyCode == keys.UP) ||\n                               (e.shiftKey && e.keyCode == keys.DOWN) ||\n                               (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n\n                                lastSelection = that.selectable.value();\n\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                    if (!compareElements(lastSelection, that.selectable.value())) {\n                                        that.trigger(CHANGE, eventObject);\n                                    }\n                                } else if (!current.hasClass(SELECTED)) {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                    that.trigger(CHANGE);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n\n            _clipboard: function() {\n                var options = this.options;\n                var selectable = options.selectable;\n\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.attr(TABINDEX, 0);\n\n                        grid.table.add(grid.lockedTable)\n                            .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                                if (e.target !== e.currentTarget) {\n                                    e.stopImmediatePropagation();\n                                }\n                            })\n                            .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                    }\n                    grid.copyHandler = grid.copySelection.bind(grid);\n                    grid.updateClipBoardState = function() {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                        }\n                    };\n                    grid.bind(\"change\",grid.updateClipBoardState);\n                    grid.wrapper.on(\"keydown\", grid.copyHandler);\n                    grid.clearAreaHandler = grid.clearArea.bind(grid);\n                    grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n                }\n            },\n\n            copySelectionToClipboard: function(includeHeaders) {\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n                document.execCommand('copy');\n            },\n\n            copySelection: function(e) {\n                if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                    $(e.target).is(\"input:visible,textarea:visible\") ||\n                    (window.getSelection && window.getSelection().toString()) ||\n                    (document.selection && document.selection.createRange().text) ) {\n                    return;\n                }\n\n                this._createAreaClipBoard();\n                this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n            },\n\n            _createAreaClipBoard: function() {\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard =\n                        $(\"<textarea />\")\n                        .css({\n                            position: \"fixed\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            opacity: 0,\n                            width: 0,\n                            height: 0\n                        })\n                        .appendTo(this.wrapper);\n                }\n            },\n\n            getTSV: function(includeHeaders) {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = \"\\t\";\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = \"\";\n                if (selected.length) {\n                    if (selected.eq(0).is(TR)) {\n                        selected = selected.find(\"td:not(.k-group-cell)\");\n                    }\n                    if (onlyVisible) {\n                        selected.filter(\":visible\");\n                    }\n\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    var fields = [];\n                    var field;\n                    var columns = visibleLeafColumns(this.columns);\n\n                    $.each(selected, function(idx, cell) {\n                        cell = $(cell);\n                        field = grid._getCellField(cell, hasLockedCols);\n\n                        var tr = cell.closest(TR);\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(\":hidden\").length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                        if (field) {\n                            fields[cellIndex] = field;\n                        }\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n\n                    var rowsOffset = result.length;\n                    result = $.each(result, function(idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n\n                    if (includeHeaders && fields.length) {\n                        result.splice(rowsOffset, 0, fields.map(function(field) {\n                            return getTitle(field, columns);\n                        }));\n\n                        var headerIndex = result.findIndex(function(el) {\n                            return el !== undefined$1;\n                        });\n\n                        result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                    }\n\n                    $.each(result.slice(rowsOffset), function(idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + \"\\r\\n\";\n                        } else {\n                            text += \"\\r\\n\";\n                        }\n                    });\n                }\n                return text;\n            },\n\n            clearArea: function(e) {\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    focusTable(this.table, true);\n                }\n\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n\n            _adaptiveColumns: function() {\n                var that = this;\n\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n\n            _anyColumnHasMediaQuery: function() {\n                return this._columnsWithMediaQuery().length;\n            },\n\n            _columnsWithMediaQuery: function() {\n                return columnsWithMedia(this.columns);\n            },\n\n            _attachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n\n            _detachColumnMediaResizeHandler: function() {\n                var that = this;\n\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n\n            _onColumnMediaResize: function() {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n\n            _setColumnsMediaVisibility: function(columns) {\n                var cols = columns || [];\n\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n\n            _setColumnMediaVisibility: function(column) {\n                var that = this;\n\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n\n            _showColumnByMedia: function(column) {\n                if (!column.hidden) {\n                    // \"hidden\" has a priority over \"matchesMedia\"\n                    this.showColumn(column);\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _hideColumnByMedia: function(column) {\n                var initiallyHidden = column.hidden;\n\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n\n                    // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                    column.hidden = initiallyHidden;\n                }\n\n                setColumnMatchesMedia(column);\n            },\n\n            _setContentMediaWidth: function() {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n\n                if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children(\"table\");\n                    } else if (that.footer) {\n                        footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                    }\n\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n\n                    var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n\n                    var headerColumns = header.find(\"th\");\n                    var headerColgroup = header.find(\"colgroup\");\n\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                    var totalHeaderWidth = 0;\n\n                    if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css(WIDTH);\n\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                                if (columnStyleWidth !== \"\") {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    // remove the header width to calculate the height of a column without fixed width\n                                    header.css(WIDTH, AUTO);\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css(WIDTH, currentHeaderWidth);\n                                }\n\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n\n                        contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                        that._updateStickyColumns();\n                    }\n                }\n            },\n\n            _minScreenSupport: function() {\n                var any = this.hideMinScreenCols();\n\n                if (any) {\n                    this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                    $(window).on(\"resize\", this.minScreenResizeHandler);\n                }\n            },\n\n            hideMinScreenCols: function() {\n                var cols = this.columns,\n                    screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n\n            _iterateMinScreenCols: function(cols, screenWidth) {\n                var any = false;\n\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined$1 && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(false);\n                }\n            },\n\n            _updateStickyColumns: function() {\n                var that = this;\n                var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (that._anyStickyColumns()) {\n                    that._setStickyColumns(true);\n                    that._templates();\n\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n\n                    if (that._hasFilterRow()) {\n                        that._updateStickyFilterCells();\n                    }\n                }\n            },\n\n            _updateStickyFilterCells: function() {\n                var that = this;\n                var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n                if (filterCells.length) {\n                    filterCells.each(function() {\n                        var th = $(this);\n                        var column = th.data(\"column\");\n\n                        if (column.sticky) {\n                            if (isPlainObject(column.stickyStyle)) {\n                                th.css({\n                                    left: column.stickyStyle.left || \"\",\n                                    right: column.stickyStyle.right || \"\"\n                                });\n                            }\n\n                            th.addClass(STICKY_HEADER_CLASS);\n                        } else {\n                            th.css({\n                                left: \"\",\n                                right: \"\"\n                            });\n\n                            th.removeClass(STICKY_HEADER_CLASS);\n                        }\n                    });\n                }\n            },\n\n            _anyStickyColumns: function() {\n                var that = this;\n\n                return stickyColumns(that.columns).length;\n            },\n\n            _setStickyColumns: function(updateStyles) {\n                var that = this;\n                var columns = stickyColumns(that.columns);\n                var visibleColumns = visibleStickyColumns(that.columns);\n                var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n                that._removeStickyAttributes(columns);\n                that._setStickyClassAttributes(columns);\n                that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n                if (updateStyles) {\n                    that._setStickyStyles(visibleColumns, stickyWidths);\n                }\n            },\n\n            _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n                var that = this;\n                var i;\n                var column;\n                var columnWidth;\n                var nextColumnLeft;\n                var nextColumnRight;\n                var left = isRtl ? \"right\" : \"left\";\n                var right = isRtl ? \"left\" : \"right\";\n                var stickyWidths = {\n                    left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                    right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n                };\n\n                for (i = 0; i < columns.length - 1; i++) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                    stickyWidths[left][i + 1] = nextColumnLeft;\n                }\n\n                for (i = columns.length - 1; i > 0; i--) {\n                    column = columns[i];\n                    columnWidth = that._sumColumnWidth(column);\n                    nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                    stickyWidths[right][i - 1] = nextColumnRight;\n                }\n\n                return stickyWidths;\n            },\n\n            _setStickyClassAttributes: function(columns, masterIndex) {\n                var that = this;\n                var i;\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        if (!masterIndex && i) {\n                            masterIndex = i;\n                        }\n\n                        that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                    }\n\n                    if (masterIndex) {\n                        addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                    addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n                }\n            },\n\n            _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n                var that = this;\n                var i;\n                var column;\n                var stickyLeft;\n                var stickyRight;\n                var stickyStyle;\n                var childCols;\n                var childStickyWidths;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    stickyLeft = stickyWidths.left[i];\n                    stickyRight = stickyWidths.right[i];\n                    stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                    if (column.columns) {\n                        childCols = visibleChildColumns([column]);\n                        childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                        that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                        if (updateStyles) {\n                            that._setStickyStyles(childCols, childStickyWidths);\n                        }\n                    }\n\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                    addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                    column.stickyStyle = stickyStyle;\n                }\n            },\n\n            _removeStickyAttributes: function(columns) {\n                var that = this;\n                var i;\n                var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n                var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n                var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n                var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n                var column;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.columns) {\n                        that._removeStickyAttributes(childColumns([column]));\n                    }\n\n                    removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                    removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                    removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n                }\n            },\n\n            _setStickyStyles: function(columns, stickyWidths) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var left;\n                var right;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    left = stickyWidths.left[i];\n                    right = stickyWidths.right[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.addClass(STICKY_HEADER_CLASS);\n                    if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                        header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    }\n                    setLeftAndRightStyles(header, left, right);\n\n                    if (column.columns) {\n                        continue;\n                    }\n\n                    if (that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.addClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, left, right);\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, left, right);\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.addClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, left, right);\n                        }\n                    }\n                }\n            },\n\n            _removeStickyStyles: function(columns) {\n                var that = this;\n                var i;\n                var j;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var rows = that.tbody.children(\":not(.k-detail-row)\");\n                var row;\n                var column;\n                var columnIndex;\n                var header;\n                var footer;\n                var groupHeader;\n                var cell;\n\n                for (i = 0; i < columns.length; i++) {\n                    column = columns[i];\n                    columnIndex = leafsCols.indexOf(column);\n                    header = that._getColumnHeader(column);\n\n                    header.removeClass(STICKY_HEADER_CLASS);\n                    header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                    setLeftAndRightStyles(header, \"\", \"\");\n\n                    if (column.columns) {\n                        that._removeStickyStyles(column.columns);\n                        continue;\n                    }\n\n                    if (column.footerTemplate && that.footer) {\n                        footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        footer.removeClass(STICKY_FOOTER_CLASS);\n                        setLeftAndRightStyles(footer, \"\", \"\");\n                    }\n\n                    for (j = 0; j < rows.length; j++) {\n                        row = $(rows[j]);\n\n                        if (row.hasClass(GROUPING_ROW)) {\n                            groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                            groupHeader.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(groupHeader, \"\", \"\");\n                        } else {\n                            cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                            cell.removeClass(STICKY_CELL_CLASS);\n                            setLeftAndRightStyles(cell, \"\", \"\");\n                        }\n                    }\n                }\n            },\n\n            _getColumnHeader: function(column) {\n                var that = this;\n                var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n                return header;\n            },\n\n            _sumColumnWidth: function(column) {\n                var that = this;\n                var width = 0;\n\n                if (column.columns) {\n                    width = that._sumCurrentWidths(leafColumns([column]));\n                } else {\n                    width = that._sumCurrentWidths([column]);\n                }\n\n                return width;\n            },\n\n            _sumCurrentWidths: function(cols) {\n                var that = this;\n                var width = 0;\n                var colWidth = 0;\n                var col;\n                var header;\n                var i;\n                var length = cols.length;\n\n                for (i = 0; i < length; i++) {\n                    col = cols[i];\n                    header = that._getColumnHeader(col);\n\n                    if (!col.hidden && columnMatchesMedia(col)) {\n                        colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                        width += colWidth ? parseInt(colWidth, 10) : 0;\n                    }\n                }\n\n                return width;\n            },\n\n            _belongsToGrid: function(element) {\n                return this.wrapper[0] === element.closest(WRAPPER)[0];\n            },\n\n            getSelectedData: function() {\n                var that = this;\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var result = [];\n                var visibleColumns = visibleLeafColumns(that.columns);\n\n                for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                    result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n                }\n\n                if (selectedSingleItems.length) {\n                    result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n                }\n\n                return result;\n            },\n\n            exportSelectedToExcel: function(includeHeaders) {\n                if (!kendo.excel || !kendo.ooxml) {\n                    throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n                }\n\n                var that = this;\n                var excel = this.options.excel || {};\n                var visibleColumns = visibleLeafColumns(that.columns);\n                var exporter = new kendo.excel.ExcelExporter({});\n                var columnHandler = function() {return { autoWidth: true };};\n                var book = {\n                    sheets: [{\n                        columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                        rows: [],\n                        freezePane: {},\n                        filter: false\n                    }]\n                };\n                var selectedRanges = that.selectable.selectedRanges();\n                var selectedRangeNames = Object.keys(selectedRanges);\n                var selectedSingleItems = that.selectable.selectedSingleItems();\n                var idx;\n                var exportData = [];\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var sortHandler = exportDataSort.bind(that);\n\n                for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                    exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n                }\n\n                if (exportData.length) {\n                    that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n                }\n                exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n                if (exportData.length) {\n                    if (hasLockedCols) {\n                        exportData = exportData.sort(sortHandler);\n                    }\n                    that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n                }\n\n                if (book.sheets[0].rows.length) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    if (!workbook.options) {\n                        workbook.options = {};\n                    }\n                    workbook.options.skipCustomHeight = true;\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    });\n                }\n            },\n\n            _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n                var idx = 0;\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n                var item;\n\n                for (idx = 0; idx < data.length; idx++) {\n                    item = data[idx];\n                    exporter.data = [item];\n                    this._setExporterColumns(exporter, visibleColumns, item);\n                    this._createExportRows(book, exporter, includeHeaders);\n                }\n            },\n\n            _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n                var visibleColumns = visibleLeafExportColumns(this.columns);\n\n                exporter.data = data;\n                this._setExporterColumns(exporter, visibleColumns, data[0]);\n                this._createExportRows(book, exporter, includeHeaders);\n            },\n\n            _createExportRows: function(book, exporter, includeHeaders) {\n                book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n            },\n\n            _setExporterColumns: function(exporter, columns, item) {\n                exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                    return Object.keys(item).indexOf(col.field) >= 0;\n                }), exporter._prepareColumn);\n            },\n\n            _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n                var that = this;\n                var elementType = elements[0][0].nodeName;\n                var isRowSelection = elementType === 'TR';\n                var dataItem;\n                var result = {};\n                var element;\n                var curr;\n                var field;\n                var columnMapHandler = function(col) {\n                    var result = {};\n\n                    if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                        return;\n                    }\n\n                    result[col.field] = dataItem[col.field];\n                    return result;\n                };\n                var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n                var column;\n\n                for (var i = 0; i < elements.length; i++) {\n                    element = elements[i];\n                    dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                    if (isRowSelection) {\n                        result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                    } else {\n                        field = that._getCellField(element, hasLockedCols);\n\n                        if (!field) {\n                            continue;\n                        }\n\n                        curr = result[dataItem.uid];\n\n                        if (!curr) {\n                            curr = result[dataItem.uid] = {};\n                        }\n\n                        column = findColumnByField(visibleColumns, field);\n\n                        if (!column || (columnsFilter && !columnsFilter(column))) {\n                            continue;\n                        }\n\n                        curr[field] = dataItem[field];\n                    }\n                }\n\n                return Object.keys(result).map(function(id) {\n                    result[id].uid = id;\n                    return result[id];\n                });\n            },\n\n            _getCellField: function(cell, hasLockedCols) {\n                var grid = this;\n                var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n                var fieldAttr = kendo.attr('field');\n                var index = kendo.attr('index');\n\n                if (hasLockedCols) {\n                    return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                } else {\n                    return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n                }\n            },\n\n            _relatedRow: function(row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n\n                if (!lockedTable) {\n                    return row;\n                }\n\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr\").index(row);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr\").eq(index);\n            },\n\n            _relatedCell: function(cell) {\n                var lockedTable = this.lockedTable;\n\n                cell = $(cell);\n\n                if (!lockedTable) {\n                    return cell;\n                }\n\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find(\">tbody>tr>td\").index(cell);\n\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n\n                return table.find(\">tbody>tr>td\").index(index);\n            },\n\n            clearSelection: function() {\n                var that = this;\n\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n            },\n\n            select: function(items) {\n                var that = this,\n                    selectable = that.selectable,\n                    selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                    cell = selectableoptions.cell;\n\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function() {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            }\n                            else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                    }\n\n                    if (!cell) {\n                        that._persistSelectedRows();\n                    }\n\n                    return;\n                }\n\n                return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n            },\n\n            _toggleHeaderCheckState: function(checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                        .attr(ARIA_LABEL, \"Deselect all rows\");\n                } else {\n                    that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                        .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                        .attr(ARIA_LABEL, \"Select all rows\");\n                }\n            },\n\n            _uncheckCheckBoxes: function() {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n\n                tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n            },\n\n            _deselectCheckRows: function(items) {\n                var that = this,\n                rangeSelectedAttr = kendo.attr(\"range-selected\");\n                items = that.table.add(that.lockedTable).find(items);\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        return that._relatedRow(this);\n                    }));\n                }\n\n                items.each(function() {\n                    $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                        .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n                });\n                that._toggleHeaderCheckState(false);\n\n                that._persistSelectedRows();\n\n            },\n\n            _checkRows: function(items) {\n                items.each(function() {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                        .prop(\"checked\", true)\n                        .attr(ARIA_LABEL, \"Deselect row\")\n                        .attr(ARIA_CHECKED, true);\n                });\n            },\n\n            _persistSelectedRows: function() {\n                var that = this,\n                    key,\n                    dataItem,\n                    allRows = that.items(),\n                    dataSourceOptions = that.dataSource.options,\n                    schema = dataSourceOptions.schema,\n                    modelId,\n                    selectedViewIds = {};\n\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n                if (!modelId) {\n                    return;\n                }\n\n                if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                    that._selectedIds = {};\n                }\n\n                that.select().each(function() {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n\n                for (var i = 0; i < allRows.length; i ++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n\n            selectedKeyNames: function() {\n                var that = this,\n                    ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n\n            _updateCurrentAttr: function(current, next) {\n                var headerId = $(current).data(\"headerId\");\n                var nextId;\n                var descId;\n\n                $(current).removeClass(FOCUSED);\n                this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, \"\");\n                    $(current).attr(ID, headerId);\n                } else {\n                    $(current).removeAttr(ID);\n                }\n\n                nextId = next.attr(ID);\n\n                if (nextId != this._cellId) {\n                    next.data(\"headerId\", nextId);\n                }\n\n                if (!!nextId) {\n                    descId = nextId;\n                } else {\n                    next.attr(ID, this._cellId);\n                }\n\n                next.addClass(FOCUSED);\n                this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n                this._current = next;\n            },\n\n            _scrollCurrent: function() {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n\n                if (!current || !scrollable) {\n                    return;\n                }\n\n                var row = current.parent();\n                var tableContainer = row.closest(\"table\").parent();\n\n                var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n                var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n                var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n                //adjust scroll vertically\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n\n                if (this.lockedContent) {\n                    //sync locked and non-locked content scrollTop\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n\n                //adjust scroll horizontally, if not inside locked tables\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n\n            current: function(next) {\n                return this._setCurrent(next, true);\n            },\n\n            _setCurrent: function(next, preventTrigger, preventScroll) {\n                var current = this._current;\n\n                next = $(next);\n\n                if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                }\n\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, {\n                                element: next\n                            });\n                        }\n                    }\n                }\n\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n                }\n\n                this._updateSelctCheckbox(current, next);\n\n                return this._current;\n            },\n\n            _removeCurrent: function() {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n\n            _updateSelctCheckbox: function(current, next) {\n                var nextCheckbox;\n\n                if (next && next.length) {\n                    nextCheckbox = next.find(\".k-select-checkbox\");\n\n                    if (nextCheckbox.length > 0) {\n                        nextCheckbox.focus();\n                    } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                        focusTable(this.table, true);\n                    }\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n                var table = $(element).closest(\"table\")[0];\n                var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n                var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n                var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n                var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = (bottomDistance - containerOffsetDir);\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n                container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n            },\n\n            _navigatable: function() {\n                var that = this;\n\n                if (!that.options.navigatable) {\n                    return;\n                }\n\n                //data tables - locked and non-locked\n                var dataTables = that.table.add(that.lockedTable);\n                //header tables - locked and non-locked\n                var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n                //the over wich keys will be handled\n                var tables = dataTables;\n\n                if (that.options.scrollable) {\n                    //add the header table when the widget is scrollable\n                    tables = tables.add(headerTables);\n                }\n\n                this._navigatableTables = tables;\n                this._headertables = headerTables;\n\n                //dettach all previous events\n                tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n                headerTables\n                    .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n                //prevent propagation when clicked inside detail grid\n                dataTables\n                    .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                        if (e.target !== e.currentTarget) {\n                            e.stopImmediatePropagation();\n                        }\n                    });\n\n                tables\n                    //handle click on tables, will attempt to focus the table\n                    .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                    .on(\"focus\" + NS, that._tableFocus.bind(that))\n                    .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                    .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n                that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n            },\n\n            _filterFocus: function(e) {\n                var header = e.target.closest(\"th\");\n\n                this._filterFocusable().attr(TABINDEX, 0);\n                this._setCurrent(header);\n                $(header).removeClass(FOCUSED);\n            },\n\n            _tableFocus: function() {\n                var current = this.current();\n                var table = this.lockedTable ? this.lockedTable : this.table;\n\n                //if there is already current, highlighted it\n                //otherwise highlight the first possible cell\n                if (current && current.is(\":visible\")) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                    } else {\n                        this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                    }\n                }\n\n                this.table.attr(TABINDEX, 0);\n            },\n\n            _tableBlur: function() {\n                var current = this.current();\n\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n\n            _findCellIndex: function(columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n\n                return cellIndex;\n            },\n\n            _scrollToColumn: function(key, e) {\n                if (this._virtualCellIndex === undefined$1) {\n                    return false;\n                }\n\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                kendo.scrollLeft(that.content, scrollWidth);\n                return true;\n            },\n\n            _tableKeyDown: function(e) {\n                var current = this.current();\n                var virtualScroll = this.virtualScroll || {};\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                    e.stopImmediatePropagation();\n                    return;\n                }\n\n                // do not handle key down if request in progress\n                // or there isn't current set\n                if (requestInProgress) {\n                    // swallow key events while in progress\n                    e.preventDefault();\n                    return;\n                }\n\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                    return;\n                }\n\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n                }\n\n                if (!current.length) {\n                    return;\n                }\n\n                var handled = false;\n\n                if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                    handled = this._focusToolbar();\n                }\n\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n                }\n\n                if (handled) {\n                    //prevent scrolling while pressing the keys\n                    e.preventDefault();\n                    //required in hierarchy\n                    e.stopPropagation();\n                }\n            },\n\n            _focusToolbar: function() {\n                var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n                if (focusable.length > 0) {\n                    focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.collapseGroup(row);\n                    } else {\n                        this.collapseRow(row);\n                    }\n                } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                   this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).last();\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n\n                            next = this._prevHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                //thead or tbody\n                var container = row.parent();\n\n                if (altKey) {\n                    if (row.hasClass(GROUPING_ROW)) {\n                        this.expandGroup(row);\n                    } else {\n                        this.expandRow(row);\n                    }\n                 } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n\n                    if (!next[0]) {\n                        if (shiftKey) {\n                           if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW).first();\n                                }\n                                next = next.children(DATA_CELL).first();\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n\n                            next = this._nextHorizontalCell(container, current, index);\n\n                            if (next[0] !== current[0]) {\n                                focusTable(this.table, true);\n                            }\n                        }\n                    }\n\n                    this._setCurrent(next);\n                }\n\n                return true;\n            },\n\n            _moveUp: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                   next = current.parent();\n                   next = next.prevAll(ITEMROW).first();\n                   next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                   next = this._prevVerticalCell(container, current);\n                   if (!next[0]) {\n                      this._lastCellIndex = 0;\n                      container = this._verticalContainer(container, true);\n\n                      next = this._prevVerticalCell(container, current);\n\n                      if (next[0]) {\n                          focusTable(this.table, true);\n                      }\n                   }\n                }\n\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n\n                return true;\n            },\n\n            _moveDown: function(current, shiftKey, ctrlKey) {\n                //thead or tbody\n                var container = current.parent().parent();\n                var next, cellIndex, index, oldIndex;\n\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n                } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                    cellIndex = current.index();\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW).first();\n                    index = this.tbody.children(ITEMROW).index(next);\n                    oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                    if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                        this.reorderRows(current.parent(), index + 1);\n                        next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                    }\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n\n            _moveColumn: function(current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? - 1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n\n            _handleHome: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.HOME);\n                    return true;\n                }\n\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                    } else {\n                        prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL).first();\n                }\n\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n\n            _handleEnd: function(current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(keys.END);\n                    return true;\n                }\n\n                if (ctrl) {\n                    next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL).last();\n                }\n\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n\n            _handlePageDown: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() + 1);\n\n                return true;\n            },\n\n            _handlePageUp: function() {\n                if (!this.options.pageable) {\n                    return false;\n                }\n\n                this.dataSource.page(this.dataSource.page() - 1);\n\n                return true;\n            },\n\n            _handleTabKey: function(current, currentTable, shiftKey, target) {\n                var isInCell = this.options.editable && this._editMode() == \"incell\";\n                var cell, filterFocusable;\n\n                if (!isInCell ||\n                    current.is(\"th\") ||\n                    (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            filterFocusable = this._filterFocusable();\n\n                            if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                                filterFocusable.first().trigger(\"focus\");\n\n                                return true;\n                            } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                                filterFocusable.last().trigger(\"focus\");\n\n                                return true;\n                            }\n                        }\n\n                        return false;\n                }\n\n                cell = $(activeElement()).closest(\".k-edit-cell\");\n\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n\n                cell = this._tabNext(current, currentTable, shiftKey);\n\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleEscKey: function(current) {\n                var active = activeElement();\n                var isInCell = this._editMode() == \"incell\";\n\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        // return focus back to the table\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        this._filterFocusable().attr(TABINDEX, -1);\n                        focusTable(this.table, true);\n\n                        return true;\n                    }\n\n                    return false;\n                }\n\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n\n                focusTable(this.table, true);\n\n                return true;\n            },\n\n            _toggleCurrent: function(current, editable, hasDetails) {\n                var row = current.parent();\n\n                if (current.is(\".k-command-cell\")) {\n                    return false;\n                }\n\n                if (row.is(\".k-filter-row\")) {\n                    return false;\n                }\n\n                if (row.is(DOT + GROUPING_ROW)) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                if (!editable && hasDetails) {\n                    row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _handleSpaceKey: function(current, ctrlKey) {\n                var that = this;\n\n                if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                    return;\n                }\n\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr(\"field\"));\n                var aggregates = that.groupable.aggregates();\n\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: \"asc\",\n                        aggregates: aggregates || []\n                    });\n                } else {\n                    descriptors = $.grep(descriptors, function(item)\n                    {\n                        return item.field !== field;\n                    });\n                }\n\n                that.dataSource.group(descriptors);\n\n                return true;\n            },\n\n            _handleEnterKey: function(current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest(\"td\");\n                var hasDetails = this._hasDetails();\n                var link, filterFocusable;\n\n                if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n\n                if (current.is(\"th\")) {\n                    // sort the column, if possible\n                    link = current.find(\".k-link\");\n\n                    if (current.has($(activeElement())).length > 0) {\n                        return false;\n                    } else if (link.length) {\n                        link.click();\n                    } else if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n                        filterFocusable.attr(TABINDEX, 0);\n                        current.find(\":kendoFocusable\").first().focus();\n                    } else {\n                        current.find(CHECKBOXINPUT).trigger(\"focus\");\n                    }\n\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable, hasDetails)) {\n                    return true;\n                }\n\n                var focusable = current.find(\":kendoFocusable\").first();\n                if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                    focusable.trigger(\"focus\");\n\n                    return true;\n                }\n\n                if (editable && !target.is(\":button,.k-button,textarea\")) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n\n                    this._handleEditing(container, false, currentTable);\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _nextHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(\"k-header\")) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n\n                        //get the same row index in the new table\n                        return rows.eq(originalIndex).children(DATA_CELL).first();\n                    }\n                }\n\n                return cells.first();\n            },\n\n            _prevHorizontalCell: function(table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n\n                    //no sibling cells are found and we've changed the table\n                    if (rowIndex == -1) {\n                        if (current.hasClass(\"k-header\")) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n\n                            return current;\n                        }\n\n                        //current is in filter row\n                        if (current.parent().hasClass(\"k-filter-row\")) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n\n                        //get the same row index in the new table\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n\n                return cells.first();\n            },\n\n            _currentDataIndex: function(table, current) {\n                var index = current.attr(\"data-index\");\n\n                if (!index) {\n                    return undefined$1;\n                }\n\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                    return index - lockedColumnsCount;\n                }\n\n                return index;\n            },\n\n            _prevVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n\n                //current is in the header, but not at the last level of multi-level columns\n                if (index || current.hasClass(\"k-header\")) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n\n                //check this out\n                index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n\n                //if current is inside filter row\n                if (row.hasClass(\"k-filter-row\")) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n\n                //move up to header container\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    //is there filter row in the header container\n                    row = container.find(\"tr.k-filter-row:visible\");\n                    if (!row[0]) {\n                        // in hierarchical grid we need to correct the index\n                        // since the k-hierarchy cell is navigatable\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    } else {\n                        if (this._hasDetails()) {\n                            index--;\n                        }\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n\n                return cells.eq(0);\n            },\n\n            _nextVerticalCell: function(container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                //get data-index in case of last level of multi-level columns\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n\n                //current is in the header, but not at the last level of multi-level columns\n                //and we are not changing the table\n                if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                    return childColumnsCells(current).eq(1);\n                }\n\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n\n                //move down to data container\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n\n                var tmpIndex = index;\n                //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n                if (this._currentDataIndex(container, current) !== undefined$1) {\n                    var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                    var hiddenColumns = currentRowCells.filter(\":hidden\");\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n\n                return cells.eq(0);\n            },\n\n            _verticalContainer: function(container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n\n                return table.find(up ? \">thead\" : \">tbody\");\n            },\n\n            _filterFocusable: function() {\n                return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n            },\n\n            _horizontalContainer: function(container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n\n                index += right ? 1 : -1;\n\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n\n                return this._navigatableTables.eq(index).find(\"thead, tbody\");\n            },\n\n            _tabNext: function(current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                        next = this._relatedRow(next);\n                    }\n\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                    }\n                    if (back) {\n                        next = next.children(DATA_CELL).last();\n                    } else {\n                        next = next.children(DATA_CELL).first();\n                    }\n                }\n\n                return next;\n            },\n\n            _handleEditing: function(current, next, table) {\n                var that = this,\n                    active = $(activeElement()),\n                    mode = that._editMode(),\n                    isIE = browser.msie,\n                    editContainer = that._editContainer,\n                    focusable,\n                    editable = that.options.editable && that.options.editable.update !== false,\n                    isEdited;\n\n                table = $(table);\n                if (mode == \"incell\") {\n                    isEdited = current.hasClass(\"k-edit-cell\");\n                } else {\n                    isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n                }\n\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        active.trigger(\"blur\");\n                        if (isIE) {\n                            //IE10 with jQuery 1.9.x does not trigger blur handler\n                            //numeric textbox does trigger change\n                            active.trigger(\"blur\");\n                        }\n                    }\n\n                    if (!that.editable) {\n                        focusTable(that.table);\n                        return;\n                    }\n\n                    if (that.editable.end()) {\n                        if (mode == \"incell\") {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == \"incell\") {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n\n                if (next) {\n                    that._setCurrent(next);\n                }\n\n                focusTable(that.table, true);\n\n                if (!editable) {\n                    return;\n                }\n\n                if ((!isEdited && !next) || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n\n            _wrapper: function() {\n                var that = this,\n                    table = that.table,\n                    height = that.options.height,\n                    width = that.options.width,\n                    wrapper = that.element;\n\n                if (!wrapper.is(DIV)) {\n                   wrapper = wrapper.wrap(\"<div/>\").parent();\n                }\n\n                that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, AUTO);\n                }\n\n                if (width) {\n                    that.wrapper.css(WIDTH, width);\n                }\n\n                that._initMobile();\n            },\n\n            _initContextMenu: function() {\n                var that = this,\n                    options = that.options,\n                    tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                    theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n                var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n                tbodyContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.tbody,\n                    filter: \".k-table-td\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, tbodyContextMenu);\n\n                theadContextMenu = extend({}, {\n                    messages: options.messages,\n                    target: that.thead,\n                    filter: \".k-table-th\",\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, theadContextMenu);\n\n                that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n                that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n            },\n\n            _buildStates: function() {\n                var this$1$1 = this;\n\n                var that = this;\n\n                return {\n                    isEditable: that.options.editable,\n                    isSelectable: that.options.selectable,\n                    isSortable: that.options.sortable,\n                    isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                    hasSelection: function () { return (this$1$1.select() ? this$1$1.select().length > 0 : false); },\n                    isSorted: function () { return !(this$1$1.dataSource.sort() ? this$1$1.dataSource.sort().length > 0 : false); },\n                };\n            },\n\n            _action: function(args) {\n                var commandName = args.command,\n                    commandOptions = extend({ grid: this }, args.options),\n                    command = new ui.grid.commands[commandName](commandOptions);\n\n                return command.exec();\n            },\n\n            _initMobile: function() {\n                var options = this.options;\n                var that = this;\n\n                this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                    options.mobile === \"phone\" ||\n                                    options.mobile === \"tablet\";\n\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                        '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                        'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                    )\n                    .parent();\n\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n\n                    this._editAnimation = \"slide\";\n\n                    // Grid transitions should not propagate to the view\n                    that.wrapper.on(\"transitionend\" + NS, function(e) {\n                        e.stopPropagation();\n                    });\n\n                    that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                        e.preventDefault();\n                        return false;\n                    });\n\n                    this.view.bind(\"showStart\", function() {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n\n            _createPane: function(html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n\n                return pane;\n            },\n\n            _tbody: function() {\n                var that = this,\n                    table = that.table,\n                    tbody;\n\n                tbody = table.find(\">tbody\");\n\n                if (!tbody.length) {\n                    tbody = $(\"<tbody class='k-table-tbody'/>\").appendTo(table);\n                }\n\n                that.tbody = tbody;\n            },\n\n            _scrollable: function() {\n                var that = this,\n                    header,\n                    table,\n                    options = that.options,\n                    scrollable = options.scrollable,\n                    hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                    virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                    scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                    headerWrap;\n\n                if (scrollable) {\n                    header = that.wrapper.children(\".k-grid-header\");\n\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n\n                    // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                    header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                    table.width(that.table[0].style.width);\n\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n\n                    if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n\n                    if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n\n                    that.content.wrap(\"<div class='k-grid-container' />\").parent();\n\n                    if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                        that._createVirtualScrollable();\n                    }\n\n                    if (virtualScroll && virtualScroll.columns) {\n\n                        that.table.css({\n                            width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                        });\n                    }\n\n                    headerWrap = header.children(\".k-grid-header-wrap\");\n\n                    that.scrollables = headerWrap.add(that.content);\n\n                    // the footer may exists if rendered from the server\n                    var footer = that.wrapper.find(\".k-grid-footer\");\n\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                    }\n\n                    headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                        }\n                    });\n\n                    if (virtualScroll && virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                    !that._endlessFetchInProgress &&\n                                    that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n\n                            if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                                  that._virtualColScroll = true;\n                                  that._cacheEditableState();\n                                  that.refresh();\n                                  that._restoreEditableState();\n                                  that._virtualColScroll = false;\n                            }\n\n                            if (that.rowResizer) {\n                                that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                            }\n                        });\n\n                        var touchScroller = that.content.data(\"kendoTouchScroller\");\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind(\"change\", function(e) {\n                                kendo.scrollLeft(that.scrollables, -e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n\n                            that.one(DATABOUND, function(e) {\n                                e.sender.wrapper.addClass(\"k-grid-backface\");\n                            });\n                        }\n                    }\n                }\n            },\n\n            _createVirtualScrollable: function() {\n                var that = this;\n\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function() { return that._averageRowHeight(); },\n                    page: function() {\n                        that._restoreEditableState();\n                    },\n                    scroll: function() {\n                        that._focusEditable();\n                    },\n                    loadStart: function() {\n                        that._progress(true);\n                    },\n                    loadEnd: function() {\n                        that._progress(false);\n                    }\n                });\n\n                that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n            },\n\n            _onVirtualPaging: function() {\n                var that = this;\n\n                that._cacheEditableState();\n\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n\n            _isVirtualEditable: function() {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n\n            _isVirtualInlineEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INLINE;\n            },\n\n            _isVirtualIncellEditable: function() {\n                return (this.virtualScrollable) && this._editMode() === INCELL;\n            },\n\n            _isVirtualPopupEditable: function() {\n                return this.virtualScrollable && this._editMode() === \"popup\";\n            },\n\n            _hasVirtualColumns: function() {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n\n            _scrollVirtualWrapper: function() {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n\n            _scrollVirtualWrapperOnColumnResize: function() {\n                var virtualScrollable = this.virtualScrollable;\n\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n\n            _restoreEditableState: function() {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n\n                that._shouldClearEditableState = true;\n            },\n\n            _focusEditable: function() {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                    }\n                }\n            },\n\n            _canFocusEditable: function() {\n                var that = this;\n                var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n                (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n                return result;\n            },\n\n            _cacheEditableState: function() {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                var value;\n\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        //change event is not fired if the editable container is scrolled\n                        //out of the virtual view with the mousewheel right after editing\n                        active.change();\n\n                        widget = kendo.widgetInstance(active, kendo.ui);\n\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            value = active.val();\n\n                            if (active.is(\"[type='checkbox'\")) {\n                                value = active.is(\":checked\");\n                            }\n\n                            widget.value(value);\n                            widget.trigger(CHANGE);\n                        }\n                    }\n\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n\n            _clearSortClasses: function() {\n                var that = this,\n                    content = that.content || that.table,\n                    lockedContent = that.lockedContent;\n\n                if (content) {\n                    content.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n\n                if (lockedContent) {\n                    lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n                }\n            },\n\n            _clearEditableState: function() {\n                var that = this;\n\n                if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                    that._editableState = null;\n                }\n            },\n\n            _destroyVirtualScrollable: function() {\n                var that = this;\n\n                that._clearEditableState();\n\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n\n                that.virtualScrollable = null;\n            },\n\n            _destroyRowResizing: function() {\n                if (this.rowResizing) {\n                    this.rowResizing.destroy();\n\n                    this.rowResizing = null;\n                }\n\n                if (this.rowResizer) {\n                    this._detachRowResizerEvents();\n                    this.rowResizer.off(DUBLECLICK + NS);\n                    this.rowResizer = null;\n                    this._clearCachedRowsHeight();\n                }\n            },\n\n            _renderNoRecordsContent: function() {\n                var that = this;\n\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                    if (noRecordsElement.length) {\n                        that.angular(\"cleanup\", function() {\n                            return { elements: noRecordsElement.get() };\n                        });\n\n                        noRecordsElement.remove();\n                    }\n\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                        kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                        noRecordsElement.insertAfter(that.table);\n\n                        that.angular(\"compile\", function() {\n                            return {\n                                elements: noRecordsElement.get(),\n                                data: [{}]\n                            };\n                        });\n                    }\n                }\n            },\n\n            _setContentWidth: function(scrollLeft) {\n                var that = this,\n                    hiddenDivClass = 'k-grid-content-expander',\n                    hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                    resizable = that.resizable,\n                    expander;\n\n                if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = that._setContentWidth.bind(that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind(\"resize\", that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                kendo.scrollLeft(that.content, scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n\n                    // workaround IE does not show vertical scrollbar for elements without width\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = \"1px\";\n                    }\n                }\n            },\n\n            _applyLockedContainersWidth: function() {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(),\n                        headerWrap = headerTable.parent(),\n                        contentWidth = this.wrapper[0].clientWidth,\n                        groups = this._groups(),\n                        scrollbar = kendo.support.scrollbar(),\n                        cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                        width = columnsWidth(cols),\n                        nonLockedColsWidth = columnsWidth(nonLockedCols),\n                        footerWrap;\n\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                    }\n\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n\n                    this.lockedHeader\n                        .add(this.lockedContent)\n                        .width(width);\n\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n\n                    //https://github.com/telerik/kendo-ui-core/issues/377\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n\n                    this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n\n            _setContentHeight: function() {\n                var that = this,\n                    options = that.options,\n                    height,\n                    header = that.wrapper.children(\".k-grid-header\"),\n                    scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n\n                if (options.scrollable && that.wrapper.is(\":visible\")) {\n                    if (scrollableHeight && that.content[0].style.height === \"\") {\n                        // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                        that.content[0].style.height = scrollableHeight;\n                    }\n\n                    height = that.wrapper.innerHeight();\n\n                    height -= outerHeight(header);\n\n                    if (that.pager && that.pager.element.is(\":visible\")) {\n                        height -= outerHeight(that.pager.element);\n                    }\n\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                    }\n\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                    }\n\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                    }\n\n                    var isGridHeightSet = function(el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n\n                        el.height(AUTO);\n                        newHeight = el.height();\n\n                        if (initialHeight != newHeight) {\n                            el.height(\"\");\n                            return true;\n                        }\n                        el.height(\"\");\n                        return false;\n                    };\n\n                    if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                        if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n\n            _averageRowHeight: function() {\n                var that = this,\n                    itemsCount = that._items(that.tbody, true).length,\n                    rowHeight = that._rowHeight;\n\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n                if (rowHeight !== currentRowHeight) {\n                    that._measures ++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n\n            _dataSource: function() {\n                var that = this,\n                    options = that.options,\n                    pageable,\n                    dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, { table: that.table, fields: that.columns });\n\n                    pageable = options.pageable;\n\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                    .unbind(PROGRESS, that._progressHandler)\n                                    .unbind(ERROR, that._errorHandler)\n                                    .unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = that.refresh.bind(that);\n                    that._progressHandler = that._requestStart.bind(that);\n                    that._errorHandler = that._error.bind(that);\n                    that._sortHandler = that._clearSortClasses.bind(that);\n                }\n\n                that.dataSource = DataSource.create(dataSource)\n                                    .bind(CHANGE, that._refreshHandler)\n                                    .bind(PROGRESS, that._progressHandler)\n                                    .bind(ERROR, that._errorHandler)\n                                    .bind(SORT, that._sortHandler);\n            },\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _modelChange: function(e) {\n                var that = this,\n                    tbody = that.tbody,\n                    model = e.model,\n                    row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                    relatedRow,\n                    cell,\n                    column,\n                    isAlt = row.hasClass(\"k-alt\"),\n                    tmp,\n                    idx = that._items(tbody).index(row),\n                    isLocked = that.lockedContent,\n                    selectable,\n                    selectableRow,\n                    childCells,\n                    originalCells,\n                    length;\n\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n\n                if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        if (column.field === e.field) {\n                            if (!cell.hasClass(\"k-edit-cell\")) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass(\"k-dirty-cell\");\n                            }\n                        }\n                    });\n\n                } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                    selectableRow = $().add(row);\n\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                        selectableRow = selectableRow.add(relatedRow);\n\n                        relatedRow.replaceWith(tmp);\n                    }\n\n                    that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                    row.replaceWith(tmp);\n\n                    tmp = that._items(tbody).eq(idx);\n\n                    var angularData = [ { dataItem: model } ];\n\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n\n                        tmp = tmp.add(relatedRow);\n                        angularData.push({ dataItem: model });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: tmp.get(),\n                            data: angularData\n                         };\n                    });\n\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                       that.select(tmp);\n                    }\n\n                    originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                    childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                            cell.addClass(SELECTED);\n                        }\n                    }\n\n                    that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n                }\n            },\n\n            _pageable: function() {\n                var that = this,\n                    pagerWrap,\n                    pageable = that.options.pageable,\n                    size = that.options.size,\n                    navigatable = that.options.navigatable;\n\n                if (pageable) {\n                    pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                    }\n\n                    if (pageable.position === \"top\") {\n                        pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n\n                    if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                        }\n                    }\n\n                    that.pager.bind(\"pageChange\", function(e) {\n                        if (that.trigger(\"page\", { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n\n                    that._togglePagerVisibility();\n                }\n            },\n\n            _footer: function() {\n                var that = this,\n                    aggregates = that.dataSource.aggregates(),\n                    html = \"\",\n                    footerTemplate = that.footerTemplate,\n                    options = that.options,\n                    footerWrap,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                    if (footer.length) {\n                        var tmp = html;\n\n                        that.angular(\"cleanup\", function() {\n                            return { elements: footer.get() };\n                        });\n\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                        } else {\n                            footer = that.footer = html.insertAfter(that.tbody);\n                        }\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                            data: map(that.columns, function(col) {\n                                return {\n                                    column: col,\n                                    aggregate: aggregates[col.field]\n                                };\n                            })\n                        };\n                    });\n\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                        that.scrollables = $(\n                            that.scrollables\n                                .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                                .toArray()\n                        ).add(footerWrap);\n                    }\n\n                    if (that._footerWidth) {\n                        footer.find(\"table\").css('width', that._footerWidth);\n                    }\n\n                    if (footerWrap) {\n                        var offset = kendo.scrollLeft(that.content);\n\n                        if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                            offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                        }\n                        kendo.scrollLeft(footerWrap, offset);\n                    }\n                }\n\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n\n            _wrapFooter: function(footerRow) {\n                var that = this,\n                    html = \"\",\n                    table,\n                    scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                    table = html.find(\"table\");\n                    table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    that._appendCols(table);\n                    html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                    return html;\n                }\n\n                return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n            },\n\n            _columnMenu: function() {\n                var that = this,\n                    menu,\n                    columns = leafColumns(that.columns),\n                    column,\n                    options = that.options,\n                    columnMenu = options.columnMenu,\n                    menuOptions,\n                    sortable,\n                    filterable,\n                    cells,\n                    hasMultiColumnHeaders = grep(that.columns, function(item) {\n                        return item.columns !== undefined$1;\n                    }).length > 0,\n                    hasLockableColumns = grep(that.columns, function(item) {\n                        return item.lockable !== false;\n                    }).length > 0,\n                    hasStickableColumns = grep(that.columns, function(item) {\n                        return item.stickable === true;\n                    }).length > 0,\n                    isMobile = this._isMobile,\n                    initCallback = function(e) {\n                        that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                    },\n                    openCallback = function(e) {\n                        that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    stickCallback = function(e) {\n                        that.trigger(COLUMNSTICK, { column: e.column });\n                    },\n                    unstickCallback = function(e) {\n                        that.trigger(COLUMNUNSTICK, { column: e.column });\n                    },\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    $angular = options.$angular;\n\n                if (columnMenu) {\n                    if (typeof columnMenu == \"boolean\") {\n                        columnMenu = {};\n                    }\n\n                    that._setColumnsMediaVisibility(columns);\n\n                    cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n\n                        if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            menu = cell.data(\"kendoColumnMenu\");\n                            if (menu) {\n                                menu.destroy();\n                            }\n\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                                compare: (column.sortable || {}).compare\n                            }) : false;\n\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                stick: stickCallback,\n                                unstick: unstickCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                                hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                                hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                                encodeTitles: that.options.encodeTitles,\n                                componentType: columnMenu.componentType,\n                                appendTo: DOT + classNames.headerCellInner,\n                                reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                                groupable: that.options.groupable && column.groupable !== false\n                            };\n\n                            if ($angular) {\n                                menuOptions.$angular = $angular;\n                            }\n\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n\n            _headerCells: function() {\n                return $(this.thead).find(\"th\").filter(function() {\n                    var th = $(this);\n                    return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n                });\n            },\n\n            _hasFilterMenu: function() {\n                var filterable = this.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                    return false;\n                }\n\n                return filterable;\n            },\n\n            _filterable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    filterMenu,\n                    cells,\n                    cell,\n                    filterInit = function(e) {\n                        that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                    },\n                    closeCallback = function() {\n                        focusTable(that.table, true);\n                    },\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    },\n                    filterOpen = function(e) {\n                        that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                    },\n                    filterable = that._hasFilterMenu();\n\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);//that._headerCells();\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                            filterMenu = cell.data(\"kendoFilterMenu\");\n\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n\n                            filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                            if (filterMenu) {\n                               filterMenu.destroy();\n                            }\n\n                            var columnFilterable = columns[idx].filterable;\n\n                            var options = extend({},\n                                filterable,\n                                columnFilterable,\n                                {\n                                    dataSource: that.dataSource,\n                                    values: columns[idx].values,\n                                    format: columns[idx].format,\n                                    closeCallback: closeCallback,\n                                    title: columns[idx].title || columns[idx].field,\n                                    init: filterInit,\n                                    open: filterOpen,\n                                    pane: that.pane,\n                                    change: filterHandler,\n                                    appendTo: DOT + classNames.headerCellInner\n                                }\n                            );\n\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _filterRow: function() {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                   return;\n                }\n\n                var settings;\n                var $angular = that.options.$angular;\n                var columns = leafColumns(that.columns),\n                    filterable = that.options.filterable,\n                    rowheader = that.thead.find(\".k-filter-row\"),\n                    filterHandler = function(e) {\n                        if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    };\n\n\n                this._updateHeader(that._groups());\n\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource,\n                        col = columns[i],\n                        operators = that.options.filterable.operators,\n                        customDataSource = false,\n                        td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                        field = col.field;\n\n                    if (col.hidden) {\n                        td.hide();\n                    }\n                    rowheader.append(td);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n\n                        if (cellOptions.enabled === false) {\n                            td.html(\"&nbsp;\");\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            size: that.options.size,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n\n                        $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                            .appendTo(td)\n                            .kendoFilterCell(settings);\n                    } else {\n                        td.html(\"&nbsp;\");\n                    }\n                    td.data(\"column\", col);\n                }\n\n                this._filterFocusable().attr(TABINDEX, -1);\n            },\n\n            _sortable: function() {\n                var that = this,\n                    columns = leafColumns(that.columns),\n                    column,\n                    sorterInstance,\n                    cell,\n                    sortable = that.options.sortable,\n                    sortHandler = function(e) {\n                        if (that.trigger(\"sort\", { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n\n\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n\n                            sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n\n                            cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                                .kendoColumnSorter(\n                                    extend({}, sortable, column.sortable, {\n                                        dataSource: that.dataSource,\n                                        aria: true,\n                                        filter: \":not(.k-column-active)\",\n                                        change: sortHandler\n                                    })\n                                );\n                        }\n                    }\n                    cells = null;\n                }\n            },\n\n            _columns: function(columns) {\n                var that = this,\n                    table = that.table,\n                    encoded,\n                    cols = table.find(\"col\"),\n                    lockedCols,\n                    headerRows = that.element.find('thead tr'),\n                    dataSource = that.options.dataSource,\n                    draggableColumns;\n\n                // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n                columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr(\"sortable\")),\n                        filterable = th.attr(kendo.attr(\"filterable\")),\n                        type = th.attr(kendo.attr(\"type\")),\n                        groupable = th.attr(kendo.attr(\"groupable\")),\n                        field = th.attr(kendo.attr(\"field\")),\n                        title = th.attr(kendo.attr(\"title\")),\n                        columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                        menu = th.attr(kendo.attr(\"menu\"));\n\n                    if (!field) {\n                       field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                    }\n\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== \"false\",\n                        filterable: filterable !== \"false\",\n                        groupable: groupable !== \"false\",\n                        menu: menu !== \"false\",\n                        columnMenu: columnMenu !== \"false\",\n                        template: th.attr(kendo.attr(\"template\")),\n                        width: cols.eq(idx).css(WIDTH)\n                    };\n                });\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error(\"There should be at least one non locked column\");\n                    }\n\n                    normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n\n                that.columns = normalizeColumns(columns, encoded);\n\n                if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                    that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n                }\n\n                draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n                if (draggableColumns.length) {\n                    that._hasDragHandleColumn = true;\n\n                    for (var i = 0; i < draggableColumns.length; i++) {\n                        draggableColumns[i].headerAttributes = $.extend({\n                            \"aria-label\": that.options.messages.dragHandleLabel\n                        }, draggableColumns[i].headerAttributes);\n                    }\n                }\n\n                that._foreignKeyBindings(that.columns);\n            },\n\n            _foreignKeyBindings: function(columns) {\n                var that = this;\n                var length = columns.length;\n                var column;\n\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n\n                    if (column.dataSource) {\n                        that._fetchForeignKeyValues(column);\n                    }\n                }\n            },\n\n            _fetchForeignKeyValues: function(column) {\n                var that = this;\n                var promise = $.Deferred();\n\n                that._hasBoundForeignKey = true;\n                column.dataSource = DataSource.create(column.dataSource);\n\n                if (!that._foreignKeyPromises) {\n                    that._foreignKeyPromises = [];\n                }\n\n                that._foreignKeyPromises.push(promise);\n                column.dataSource.fetch().then(function() {\n                    var data = column.dataSource.data();\n                    column.values = data.map(function(item) {\n                        return {\n                            value: item[column.dataValueField],\n                            text: item[column.dataTextField]\n                        };\n                    });\n                    promise.resolve();\n                });\n\n            },\n\n            _updateColumnIDs: function(columns, tr) {\n\n                if (!columns.length) {\n                    return;\n                }\n\n                var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr(ID);\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n\n            _headerCheckboxClick: function(e) {\n                var that = this,\n                    checkBox = $(e.target),\n                    checked = checkBox.prop(\"checked\");\n\n                if (!that._belongsToGrid(checkBox)) {\n                    return;\n                }\n\n                if (checked) {\n                    that.select(that.items());\n                } else {\n                    that.clearSelection();\n                }\n\n                that.trigger(CHANGE);\n            },\n\n            _checkboxClick: function(e) {\n                var that = this,\n                    row = $(e.target).closest(TR),\n                    isSelecting = !row.hasClass(SELECTED);\n\n                if (!that._belongsToGrid(row)) {\n                    return;\n                }\n\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n                that.trigger(CHANGE);\n            },\n\n            _groups: function() {\n                var group = this.dataSource.group();\n\n                return group ? group.length : 0;\n            },\n\n            _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    idx,\n                    length = columns.length,\n                    template,\n                    state = { storage: {}, count: 0 },\n                    column,\n                    type,\n                    hasDetails = that._hasDetails(),\n                    groups = that._groups();\n\n                var fieldAttr = kendo.attr(\"field\");\n                var field;\n                var classAttribute;\n                var rowTemplateFunc;\n\n                if (!rowTemplate) {\n                    rowTemplateFunc = function (data) {\n                        var uid = length ? (\" \" + (kendo.attr(\"uid\")) + \"=\\\"\" + (kendo.getter(\"uid\")(data)) + \"\\\"\") : '';\n                        var rowTemplateResult = \"<tr class=\\\"\" + (alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row ') + \"k-master-row\\\"\" + uid + \">\";\n\n                        if (groups > 0 && !skipGroupCells) {\n                            rowTemplateResult += groupCells(groups);\n                        }\n\n                        if (hasDetails) {\n                            rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($((\"<a href=\\\"#\\\" \" + ARIA_LABEL + \"=\\\"\" + EXPAND + \"\\\" tabindex=\\\"-1\\\"></a>\")), { icon: (\"caret-alt-\" + (isRtl ? \"left\" : \"right\")) }) + '</td>';\n                        }\n\n                        for (idx = 0; idx < length; idx++) {\n                            column = columns[idx];\n                            template = column.template;\n                            type = typeof template;\n                            field = column.field;\n\n                            if (that._editMode() === INCELL && field) {\n                                column.attributes = column.attributes || {};\n\n                                if (that.virtualScroll) {\n                                    column.attributes[fieldAttr] = field;\n                                }\n\n                                var dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                                column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                                if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                                    column.attributes[\"class\"] += dirtyCellTemplate;\n                                }\n                            }\n\n                            if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                                column.attributes = removeHiddenStyle(column.attributes);\n                            } else if (!column.colSpan && column.hidden) {\n                                column.attributes = addHiddenStyle(column.attributes);\n                            }\n\n                            if (column.command) {\n                                column.attributes = column.attributes || {};\n                                classAttribute = column.attributes[\"class\"];\n\n                                if (typeof classAttribute !== \"undefined\") {\n                                    if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                        column.attributes[\"class\"] += \" k-command-cell\";\n                                    }\n                                } else {\n                                    column.attributes[\"class\"] = \"k-command-cell\";\n                                }\n                            }\n\n                            if (column.draggable) {\n                                column.attributes = column.attributes || {};\n                                if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                    column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                } else {\n                                    column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                                }\n\n                                if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                    column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                                }\n\n                                if (typeof column.attributes.style !== \"undefined\") {\n                                    column.attributes.style += \" cursor: move;\";\n                                } else {\n                                    column.attributes.style = \"cursor: move;\";\n                                }\n                            }\n\n                            var attributes = column.attributes instanceof Function ? column.attributes(data) : column.attributes;\n                            var columnAttributes = stringifyAttributes(attributes);\n                            var colSpanAttributes = '';\n\n                            if (column.colSpan) {\n                                if (column.colSpan > 1) {\n                                    colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                                }\n                                colSpanAttributes += \" colSpan=\\\"\" + (column.colSpan) + \"\\\"\";\n                            }\n                            rowTemplateResult += decorateCellWithClass((\"<td\" + columnAttributes + colSpanAttributes + \">\"));\n                            rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                            rowTemplateResult += \"</td>\";\n                        }\n\n                        rowTemplateResult += \"</tr>\";\n                        return rowTemplateResult;\n                    };\n                }\n\n                rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n                if (state.count > 0) {\n                    return rowTemplate.bind(state.storage);\n                }\n\n                return rowTemplate;\n            },\n\n            _dirtyCellTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? ' k-dirty-cell' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _headerCellText: function(column) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.headerTemplate,\n                    type = typeof(template),\n                    text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n\n            _cellTmpl: function(column, state) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    template = column.template,\n                    field = column.field,\n                    // html = \"\",\n                    idx,\n                    length,\n                    format = column.format,\n                    type = typeof template,\n                    columnValues = column.values;\n\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        return function (data) {\n                            var html = \"\";\n                            for (idx = 0, length = column.command.length; idx < length; idx++) {\n                                if (column.command[idx].visible) {\n                                    html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                                } else {\n                                    html += that._createButton(column.command[idx]);\n                                }\n                            }\n                            return html;\n                        };\n                    }\n                    return function () { return that._createButton(column.command); };\n                }\n\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n\n                if (column.draggable) {\n                    return DRAGHANDLECOLUMNTMPL;\n                }\n\n                return function (data) {\n                    var html = that._dirtyIndicatorTemplate(field)(data);\n\n                    if (type === FUNCTION) {\n                        state.storage[\"tmpl\" + state.count] = template;\n                        html += template(data);\n                        state.count++;\n                    } else if (type === STRING) {\n                        html += kendo.template(template, settings)(data);\n                    } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                        var v = convertToObject(columnValues);\n                        var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                        html += encode(f != null ? f : '');\n                    } else {\n                        var fieldValue = '';\n                        if (field) {\n                            field = kendo.getter(field)(data);\n                            fieldValue = field == null ? '' : field;\n                        }\n\n                        if (format) {\n                            fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                        }\n\n                        html += column.encoded ? encode(fieldValue) : fieldValue;\n                    }\n\n                    return html;\n                };\n            },\n\n            _dirtyIndicatorTemplate: function(field) {\n                return function (data) {\n                    if (field && data && data.dirty && data.dirtyFields) {\n                        var dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                        return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                    }\n\n                    return \"\";\n                };\n            },\n\n            _virtualCols: function(columns) {\n                var that = this;\n                var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n                var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n\n                that.virtualCols = colsToRender;\n\n                return colsToRender;\n            },\n\n            _templates: function() {\n                var that = this,\n                    options = that.options,\n                    dataSource = that.dataSource,\n                    groups = dataSource.group(),\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    aggregates = dataSource.aggregate(),\n                    columnLeafs = leafColumns(that.columns),\n                    columnsLocked = leafColumns(lockedColumns(that.columns)),\n                    leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                    columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                    groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                    groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error(\"Having both row template and locked columns is not supported\");\n                    }\n\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || (function () { return \"\"; }));\n                }\n\n                if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                    grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n                }\n\n                if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                    }\n                }\n\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n\n            _noRecordsTmpl: function() {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? (\" \" + (kendo.attr(\"style-margin\")) + \"=\\\"0 auto\\\" \" + (kendo.attr(\"style-position\")) + \"=\\\"static\\\"\") : '';\n                var state = { storage: {}, count: 0 };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                // var html = \"\";\n                var type;\n                var tmpl;\n                var resultTemplate;\n\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n\n                type = typeof template;\n                if (type === \"function\") {\n                    var currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                    state.count++;\n                    resultTemplate = function (data) { return kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data)); };\n\n                } else if (type === \"string\") {\n                    resultTemplate = this.options.noRecords.template ?\n                        kendo.format(wrapper, NORECORDSCLASS, template)\n                        : function () { return kendo.format(wrapper, NORECORDSCLASS, template); };\n                }\n\n                tmpl = kendo.template(resultTemplate, settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                return tmpl;\n            },\n\n            _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    // html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    groups = that._groups(),\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column;\n\n                var footerTemplateFunction = function (data) {\n                    var html = '<tr class=\"' + rowClass + '\">';\n\n                    if (groups > 0 && !skipGroupCells) {\n                        html += groupCells(groups);\n                    }\n\n                    if (that._hasDetails()) {\n                        html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                    }\n\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            html += template(data);\n                            count++;\n                        } else {\n                            html += \"&nbsp;\";\n                        }\n\n                        html += \"</td>\";\n                    }\n\n                    html += '</tr>';\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n                if (count > 0) {\n                    return resultTemplate.bind(storage);\n                }\n\n                return resultTemplate;\n            },\n\n            _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    html = \"\",\n                    idx,\n                    length,\n                    template,\n                    type,\n                    storage = {},\n                    count = 0,\n                    scope = {},\n                    fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                    column,\n                    headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                    groupHeaderColumnTemplateClass;\n\n                if (headerTemplateIndex < 0) {\n                    return;\n                }\n                var groupHeaderTemplFunc = function (data) {\n                    var resultHtml = '<tr class=\"' + rowClass + '\">';\n\n                    if (!skipGroupCells) {\n                        for (var i = 0; i < data.groupCells; i++) {\n                            resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                        }\n                    }\n\n                    if (that._hasDetails()) {\n                        resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                        return resultHtml;\n                        // return kendo.template(resultHtml, settings);\n                    }\n\n                    if (headerTemplateIndex < MINCOLSPANVALUE) {\n                        headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                    }\n                    else {\n                        resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                    }\n\n                    for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column[templateName];\n                        type = typeof template;\n\n                        if (column.sticky) {\n                            var stickyAttributes = '';\n                            groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                            if (!groupHeaderColumnTemplateClass) {\n                                groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                            }\n\n                            if (isPlainObject(column.stickyStyle)) {\n                                var stickyLeft = column.stickyStyle.left ? ((kendo.attr(\"style-left\")) + \"=\\\"\" + (column.stickyStyle.left) + \"\\\"\") : '';\n                                var stickyRight = column.stickyStyle.right ? ((kendo.attr(\"style-right\")) + \"=\\\"\" + (column.stickyStyle.right) + \"\\\"\") : '';\n                                stickyAttributes = stickyLeft + \" \" + stickyRight;\n                            }\n\n                            resultHtml += \"<td class=\\\"k-table-td \" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"\\\" \" + stickyAttributes + \">\";\n                        } else {\n                            resultHtml += \"<td class='k-table-td'>\";\n                        }\n\n                        if (template) {\n                            if (type !== FUNCTION) {\n                                scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                                template = kendo.template(template, scope);\n                            }\n\n                            storage[\"tmpl\" + count] = template;\n                            resultHtml += storage[\"tmpl\" + count](data);\n                            count++;\n                        } else {\n                            resultHtml += \"&nbsp;\";\n                        }\n\n                        resultHtml += \"</td>\";\n                    }\n\n                    resultHtml += '</tr>';\n\n                    return resultHtml;\n                };\n\n                html = kendo.template(groupHeaderTemplFunc, settings);\n\n                if (count > 0) {\n                    return html.bind(storage);\n                }\n\n                return html;\n            },\n\n            _detailTmpl: function(template) {\n                var that = this,\n                    settings = extend({}, kendo.Template, that.options.templateSettings),\n                    paramName = settings.paramName,\n                    templateFunctionStorage = {},\n                    templateFunctionCount = 0,\n                    groups = that._groups(),\n                    colspan = visibleColumns(leafColumns(that.columns)).length,\n                    type = typeof template;\n\n                var detailTemplateFunction = function (data) {\n                    var html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                    if (groups > 0) {\n                        html += groupCells(groups);\n                    }\n\n                    html += \"<td role=\\\"gridcell\\\" class=\\\"k-hierarchy-cell k-table-td\\\"></td><td role=\\\"gridcell\\\" class=\\\"k-table-td k-detail-cell\\\"\" + (colspan ? (\" colspan=\\\"\" + colspan + \"\\\"\") : '') + \">\";\n                    if (type === FUNCTION) {\n                        templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                        html += template(data);\n                        templateFunctionCount++;\n                    } else {\n                        html += kendo.template(template, settings)(data);\n                    }\n\n                    html += \"</td></tr>\";\n                    return html;\n                };\n\n                var resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n                if (templateFunctionCount > 0) {\n                    return resultTemplate.bind(templateFunctionStorage);\n                }\n\n                return resultTemplate;\n            },\n\n            _hasDetails: function() {\n                var that = this;\n\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function() {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable &&\n                        typeof filterable.mode == STRING &&\n                        filterable.mode.indexOf(ROW) != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function(col) {\n                    return col.filterable === false;\n                });\n\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n\n                return hasFiltering;\n            },\n\n            _details: function() {\n                var that = this;\n\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error(\"Having both detail template and locked columns is not supported\");\n                }\n\n                that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                    var button = $(this);\n\n                    that._toggleDetails(button);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n\n            _toggleDetails: function(button, omitAnimation) {\n                var that = this,\n                cell = button.closest(\"td.k-hierarchy-cell\"),\n                expanding = button.is(CARET_ALT_RIGHT),\n                masterRow = button.closest(\"tr.k-master-row\"),\n                masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n                detailRow,\n                detailTemplate = that.detailTemplate,\n                data,\n                hasDetails = that._hasDetails(),\n                ariaLabelText = expanding ? COLLAPSE : EXPAND,\n                ariaExpandText = expanding ? true : false;\n\n                if (!expanding) {\n                    kendo.ui.icon(button, { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                } else {\n                    kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n                }\n\n                button.attr(ARIA_LABEL, ariaLabelText);\n\n                cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n                detailRow = masterRow.next();\n\n                if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                    data = that.dataItem(masterRow);\n\n                    detailRow = $(detailTemplate(data))\n                        .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                        .insertAfter(masterRow);\n\n                    if (masterRowIndex || masterRowIndex === 0) {\n                        detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: detailRow.get(),\n                            data: [ { dataItem: data } ]\n                        };\n                    });\n\n                    that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n                }\n\n                that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n                if (omitAnimation) {\n                    toggleRow(detailRow, expanding);\n                } else {\n                    detailRow.toggle(expanding);\n                }\n            },\n\n            dataItem: function(tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n\n                var rows = this.tbody.children(),\n                    classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                    idx = tr.sectionRowIndex,\n                    j, correctIdx;\n\n                correctIdx = idx;\n\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n\n                return this._data[correctIdx];\n            },\n\n            expandRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            collapseRow: function(tr, omitAnimation) {\n                var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n                if (button.length) {\n                    this._toggleDetails(button, omitAnimation);\n                }\n            },\n\n            _createHeaderCells: function(columns, rowSpan) {\n                var that = this,\n                    idx,\n                    th,\n                    text,\n                    html = \"\",\n                    length,\n                    title,\n                    columnMenu = that.options.columnMenu,\n                    sortable = that.options.sortable,\n                    filterable = that._hasFilterMenu(),\n                    messages = that.options.messages,\n                    leafs = leafColumns(that.columns),\n                    groups = that.dataSource.group(),\n                    field;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    title = th.title;\n                    field = \"\";\n\n                    var index = inArray(th, leafs);\n                    var currentTh = \"\";\n\n                    if (th.selectable) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.draggable) {\n                        currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n                        text = th.headerTemplate ? text : \"\";\n                        currentTh += \">\" + text + \"</th>\";\n                    } else if (th.command) {\n                        currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += \">\" + text + \"</th>\";\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                        }\n\n                        currentTh += \"<th scope='col' \" + field;\n                        if ((columnMenu && th.field && th.menu !== false)) {\n                            currentTh += \" aria-haspopup='menu'\";\n                        } else if (filterable && th.filterable !== false && !th.command) {\n                            currentTh += \" aria-haspopup='dialog'\";\n                        }\n\n                        if (rowSpan && !columns[idx].colSpan) {\n                            currentTh += \" rowspan='\" + rowSpan + \"'\";\n                        }\n\n                        if (columns[idx].colSpan > 1) {\n                            currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        } else if (columns[idx].colSpan === 1) {\n                            currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                        }\n\n                        if (title) {\n                            title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                            currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                        }\n\n                        if (th.groupable !== undefined$1) {\n                            currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                        }\n\n                        if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                            currentTh += \"title='\";\n                            currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            currentTh += \"' \";\n                        }\n\n                        if (th.aggregates && th.aggregates.length) {\n                            currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                        }\n\n                        if (index > -1) {\n                            currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                        }\n\n                        currentTh += stringifyAttributes(th.headerAttributes);\n\n                        if (sortable) {\n                            text = kendo.template(SORTHEADERTMPL)({ text: text });\n                        }\n\n                        currentTh += \">\" + text + \"</th>\";\n                    }\n                    html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n                }\n                return html;\n            },\n\n            _appendLockedColumnContent: function() {\n                var columns = this.columns,\n                    idx,\n                    colgroup = this.table.find(\"colgroup\"),\n                    cols = colgroup.find(COLGROUP),\n                    length,\n                    lockedCols = $(),\n                    skipHiddenCount = 0,\n                    container,\n                    colSpan,\n                    spanIdx,\n                    colOffset = 0;\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount ++;\n                        }\n                    }\n                }\n\n                container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n                // detach is required for IE8, otherwise it switches to compatibility mode\n                colgroup.detach();\n                container.find(\"colgroup\").append(lockedCols);\n                colgroup.insertBefore(this.table.find(\"tbody\"));\n\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children(\"table\");\n                this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n            },\n\n            _appendLockedColumnFooter: function() {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find(\".k-footer-template>td\");\n                var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n                var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n\n                html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n                lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n\n                lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n\n                lockedCells.appendTo(html.find(TR));\n                lockedCols.appendTo(html.find(\"colgroup\"));\n                that.lockedFooter = html.prependTo(footer);\n            },\n\n            _appendLockedColumnHeader: function(container) {\n                var that = this,\n                    columns = this.columns,\n                    idx,\n                    html,\n                    length,\n                    colgroup,\n                    tr,\n                    trFilter,\n                    table,\n                    header,\n                    filtercellCells,\n                    rows = [],\n                    skipHiddenCount = 0,\n                    cols = $(),\n                    hasFilterRow = that._hasFilterRow(),\n                    filterCellOffset = 0,\n                    filterCells = $(),\n                    cell,\n                    leafColumnsCount = 0,\n                    cells = $();\n\n                colgroup = that.thead.prev().find(COLGROUP);\n                header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n                filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                    html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                    table = $(html);\n\n                    table.find('.k-grid-header-locked').css('width', '1px');\n\n                    table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                    colgroup = table.find(\"colgroup\");\n                    colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                    tr = table.find(\"thead tr:not(.k-filter-row)\");\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                    }\n\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n\n                    trFilter = table.find(\".k-filter-row\");\n                    trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find(\".k-group-cell\").remove();\n\n                    return true;\n                }\n                return false;\n            },\n\n            _removeLockedContainers: function() {\n                var elements = this.lockedHeader\n                    .add(this.lockedContent)\n                    .add(this.lockedFooter);\n\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n\n            _thead: function() {\n                var that = this,\n                    columns = that.columns,\n                    hasDetails = that._hasDetails() && columns.length,\n                    hasFilterRow = that._hasFilterRow(),\n                    idx,\n                    html = \"\",\n                    thead = that.table.find(\">thead\"),\n                    hasTHead = that.element.find(\"thead\").first().length > 0,\n                    headerContent = that.options.messages.expandCollapseColumnHeader,\n                    tr;\n\n                if (!thead.length) {\n                    thead = $(\"<thead class='k-table-thead' role='rowgroup'/>\").insertBefore(that.tbody);\n                }\n\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                    tr.remove();\n                    tr = $();\n\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n                } else {\n                    tr = that.element.find(\"tr:has(th)\").first();\n                }\n\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                       var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                       that._prepareColumns(rows, columns);\n\n                       for (idx = 0; idx < rows.length; idx++) {\n                           html += \"<tr class='k-table-row'>\";\n                           if (hasDetails) {\n                               html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                           }\n                           html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                           html += \"</tr>\";\n                       }\n\n                       tr = $(html);\n                       kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n    \t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n    \t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n    \t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n    \t\t\t\t\t\tcell[0].style.display = NONE;\n    \t\t\t\t\t}\n                   }\n\n                   that._updateHeadersAttr(childColumns(columns));\n    \t\t\t}\n\n                if (hasFilterRow) {\n                    var filterRow = $(\"<tr/>\");\n                    filterRow.addClass(\"k-filter-row k-table-row\");\n                    if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                        filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                    }\n\n                    var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n\n                    thead.append(filterRow);\n                }\n\n                if (!tr.children().length) {\n                    html = \"\";\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                    }\n\n                    html += that._createHeaderCells(columns);\n\n                    tr.html(html);\n                } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n\n                tr.find(\"th\").addClass(\"k-header\");\n\n                if (!that.options.scrollable) {\n                    thead.addClass(\"k-grid-header\");\n                }\n\n                tr.find(\"script\").remove().end().prependTo(thead);\n\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n\n                this.angular(\"cleanup\", function() {\n                    return {\n                        elements: thead.find(\"th\" + NAVCELL).get()\n                    };\n                });\n\n                this.angular(\"compile\", function() {\n                    return {\n                        elements: thead.find(HEADERCELLS).get(),\n                        data: map(columns, function(col) { return { column: col }; })\n                    };\n                });\n\n                that.thead = thead;\n\n                that._sortable();\n\n                that._filterable();\n\n                that._filterRow();\n\n                that._scrollable();\n\n                that._columnMenu();\n\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n                if (hasLockedColumns) {\n\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                    that._appendLockedColumnContent();\n\n                    that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function(e) {\n                                that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                                e.preventDefault();\n                            }\n                        });\n                    }\n\n                    that._updateLockedCols();\n                }\n\n                that._updateCols();\n\n                that._updateColumnCellIndex();\n\n                that._updateFirstColumnClass();\n\n                that._resizable();\n\n                that._draggable();\n\n                that._reorderable();\n\n                that._updateHeader(that._groups());\n\n                that._updateStickyColumns();\n\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n\n                    that._applyLockedContainersWidth();\n                }\n\n                if (that.groupable) {\n                    that._attachGroupable();\n                }\n            },\n\n            _retrieveFirstColumn: function(columns, rows) {\n                var result = $();\n\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(\":not(:first)\");\n                    }\n\n                    result = result.add(rows);\n                }\n\n                return result;\n            },\n\n            _updateFirstColumnClass: function() {\n                var that = this,\n                    columns = that.columns || [],\n                    hasDetails = that._hasDetails() && columns.length;\n\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                    columns = nonLockedColumns(columns);\n\n                    var rows = that._retrieveFirstColumn(columns, tr);\n\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                        columns = lockedColumns(that.columns);\n\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n\n                    rows.each(function() {\n                        var ths = $(this).find(\"th\");\n                        ths.removeClass(\"k-first\");\n                        ths.eq(0).addClass(\"k-first\");\n                    });\n                }\n            },\n\n            _prepareColumns: function(rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = { column: columns[idx], colSpan: 0 };\n                    row.cells.push(cell);\n\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = { rowSpan: 0, cells: [], index: rows.length };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n\n            _wheelScroll: function(e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n\n                var content = this.content;\n\n                if (this.virtualScroll && this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n\n                var scrollTop = content.scrollTop(),\n                    delta = kendo.wheelDeltaY(e);\n\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight &&\n                        (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                        content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n\n                    content.scrollTop(scrollTop + (-delta));\n                }\n            },\n\n            _isLocked: function() {\n                return this.lockedHeader != null;\n            },\n\n            _updateHeaderCols: function() {\n                var table = this.thead.parent().add(this.table);\n\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n\n            _updateColumnSorters: function() {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n\n                if (!that.options.sortable) {\n                    return;\n                }\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n\n            _updateHeadersAttr: function(columns) {\n                if (!columns.length) {\n                    return;\n                }\n\n                var that = this;\n\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                        th.attr(\"headers\", columns[i].headerAttributes.headers);\n                    }\n                }\n\n                that._updateHeadersAttr(childColumns(columns));\n            },\n\n            _updateCols: function(table) {\n                table = table || this.thead.parent().add(this.table);\n\n                this._appendCols(table, this._isLocked());\n            },\n\n            _updateLockedCols: function(table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _appendCols: function(table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n\n            _autoColumns: function(schema) {\n                if (schema && schema.toJSON) {\n                    var that = this,\n                        field,\n                        encoded;\n\n                    schema = schema.toJSON();\n\n                    encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                    for (field in schema) {\n                        that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                    }\n\n                    that._thead();\n\n                    that._templates();\n                }\n            },\n\n            _setRowCachedHeight: function(row, uid) {\n                var cachedHeights = this._cachedRowsHeight,\n                    cachedHeight = cachedHeights[uid],\n                    $row;\n\n                if (cachedHeight) {\n                    $row = $(row);\n                    $row[0].style.height = cachedHeight + \"px\";\n                    row = $row.prop(\"outerHTML\");\n                }\n\n                return row;\n            },\n\n            _rowsHtml: function(data, templates) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    rowTemplate = templates.rowTemplate,\n                    altRowTemplate = templates.altRowTemplate,\n                    cachedHeights = that._cachedRowsHeight,\n                    length, row;\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            row = altRowTemplate(data[idx]);\n                        } else {\n                            row = rowTemplate(data[idx]);\n                        }\n\n                        if (cachedHeights) {\n                            row = that._setRowCachedHeight(row, data[idx].uid);\n                        }\n\n                        html += row;\n                    }\n                    that._data.push(data[idx]);\n                }\n\n                return html;\n            },\n\n            _groupData: function(group, skipFooter, firstColumn) {\n                var that = this,\n                    footerDefaults = that._groupAggregatesDefaultObject || {},\n                    groupItems = group.items,\n                    aggregates = extend({}, footerDefaults, group.aggregates),\n                    headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                    footerData = {};\n\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate],\n                            { group: { field: group.field, value: group.value, items: groupItems } }\n                        );\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n\n            _removeGroupIfEmpty: function(row) {\n                var that = this,\n                    itemsCount,\n                    subgroupsCount,\n                    length = that.dataSource._group.length;\n\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n\n                }\n            },\n\n            _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n                var that = this,\n                    html = \"\",\n                    idx,\n                    length,\n                    isLocked = that.lockedContent != null,\n                    field = group.field,\n                    column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                    firstColumn = visibleColumns(that.columns)[0],\n                    firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                    text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                    groupItems = group.currentItems || group.items,\n                    groups = that._groups(),\n                    groupFooterTemplate = templates.groupFooterTemplate,\n                    groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                    groupData,\n                    isGroupPaged = that.dataSource._isGroupPaged(),\n                    expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n\n                if (!that._skipRerenderItemsCount) {\n                    if (!group.excludeHeader) {\n                        html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                    } else if (isLocked) {\n                        group.excludeHeader = isLockedTable ? false : true;\n                    } else {\n                        group.excludeHeader = false;\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n                }\n\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n\n                if (groupFooterTemplate) {\n\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n\n            collapseGroup: function(group) {\n                var level,\n                    that = this,\n                    groupToCollapse = group,\n                    groupable = this.options.groupable,\n                    showFooter = groupable.showFooter,\n                    footerCount = showFooter ? 0 : 1,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    tr;\n\n                group = $(group);\n                level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"collapseGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_DOWN).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: (\"caret-alt-\" + (isRtl ? 'left' : 'right')) });\n                }\n\n                group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                    .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n                group = group.nextAll(TR);\n\n                var toHide = [];\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        footerCount++;\n                    } else if (tr.hasClass(\"k-group-footer\")) {\n                        footerCount--;\n                    }\n\n                    if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                        break;\n                    }\n\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n\n                $(toHide).hide();\n\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function() {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n\n            expandGroup: function(group) {\n                    group = $(group);\n\n                var that = this,\n                    showFooter = that.options.groupable.showFooter,\n                    level,\n                    tr,\n                    offset,\n                    relatedGroup = $(),\n                    idx,\n                    length,\n                    footersVisibility = [],\n                    groupsCount = 1;\n\n                    level = group.find(\".k-group-cell\").length;\n\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr(\"data-group-uid\");\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                        that._progress(false);\n                    }, \"expandGroup\");\n                    return;\n                }\n\n                if (this._isLocked()) {\n                    if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                        relatedGroup = group.nextAll(TR);\n                        group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                    } else {\n                        relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                    }\n                }\n\n                if (group.find(CARET_ALT_RIGHT).length) {\n                    kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n                }\n\n                group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                    .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n                group = group.nextAll(TR);\n\n                for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                    tr = group.eq(idx);\n                    offset = tr.find(\".k-group-cell\").length;\n                    if (offset <= level) {\n                        break;\n                    }\n\n                    if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n\n                        if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            that.expandGroup(tr);\n                        }\n\n                        if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n\n                    if (tr.hasClass(GROUPING_ROW)) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(\":visible\"));\n                        }\n                        groupsCount ++;\n                    }\n\n                    if (tr.hasClass(\"k-group-footer\")) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount --;\n                        }\n                    }\n                }\n\n                if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n                (!that.options.scrollable.endless && this._isLocked())) {\n                    that._syncLockedContentHeight();\n                }\n            },\n\n            _updateHeader: function(groups) {\n                var that = this,\n                    container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                    filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                    length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                    rows = container.children(\"tr:not(:first)\").filter(function() {\n                        return !$(this).children(\":visible\").length;\n                    });\n\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                    if (that.element.is(\":visible\")) {\n                        rows.find(\"th.k-group-cell\").hide();\n                    }\n                } else if (groups < length) {\n                    container.find(TR).each(function() {\n                        $(this).find(\".k-group-cell\").eq(groups).remove();\n                        $(this).find(\".k-group-cell\").slice(groups).remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n                }\n            },\n\n            _firstDataItem: function(data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n\n            _updateTablesWidth: function() {\n                var that = this,\n                    tables;\n\n                if (!that._isLocked()) {\n                    return;\n                }\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                    .add(that.thead.parent())\n                    .add(that.table);\n\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n\n                tables =\n                    $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                    .add(that.lockedHeader.find(\">table\"))\n                    .add(that.lockedTable);\n\n                tables.width(tableWidth(tables.eq(0)));\n            },\n\n            hideColumn: function(column) {\n                var that = this,\n                    cell,\n                    tables,\n                    idx,\n                    cols,\n                    colWidth,\n                    position,\n                    width = 0,\n                    headerCellIndex,\n                    length,\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    virtualScroll = that.virtualScroll || {},\n                    columns = that.columns,\n                    visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                    columnIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n\n                    setColumnVisibility(column, false);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                       this.hideColumn(column.columns[idx]);\n                    }\n\n                    that._ariaAddHiddenColIndex();\n                    that.trigger(COLUMNHIDE, { column: column });\n\n                    return;\n                }\n\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n                setColumnVisibility(column, false);\n\n                that._setParentsVisibility(column, false);\n\n                that._templates();\n\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = NONE;\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    that._footerWidth = null;\n\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n\n            _setParentsVisibility: function(column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                var predicate = visible ?\n                    function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                    function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? \"\" : NONE;\n                        }\n\n                        if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                            colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                            cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                        }\n                    }\n                }\n            },\n\n            _updateContentWidth: function() {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n\n                tables.css({\n                    width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                });\n                that.refresh();\n            },\n\n            showColumn: function(column) {\n                var that = this,\n                    idx,\n                    length,\n                    cell,\n                    tables,\n                    width,\n                    headerCellIndex,\n                    position,\n                    colWidth,\n                    cols,\n                    columns = that.columns,\n                    virtualScroll = that.virtualScroll || {},\n                    footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                    lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                    columnIndex,\n                    originalColumn,\n                    columnLeafIndex,\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    columnIndex = column;\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                } else {\n                    $.each(flatColumns(columns), function(index, item) {\n                        if (item.field === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                }\n\n                if (!column || isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                    setColumnVisibility(column, true);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        if (!originalColumn.columns[idx].hidden) {\n                            this.showColumn(column.columns[idx]);\n                        }\n                    }\n\n                    that._ariaRemoveHiddenColIndex();\n                    that.trigger(COLUMNSHOW, { column: column });\n\n                    return;\n                }\n\n                columnLeafIndex = inArray(column, leafColumns(columns));\n\n                setColumnVisibility(column, true);\n\n                that._setParentsVisibility(column, true);\n\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnLeafIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = \"\";\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                    showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    if (!column.width) {\n                        tables.width(\"\");\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find(\"col\");\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n\n                            if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n\n                            if (colWidth.indexOf(\"%\") > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function() {\n                                this.style.width = width + PX;\n                            });\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n\n            _columnVisibilitySetter: function(column) {\n                var col = column || {};\n\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n\n\n            _buildSkeleton: function() {\n                var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n                var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n                var loaderHTML = \"\";\n                var colspan;\n                var groups = this._groups();\n                var columnsCount = visibleColumns.length + groups;\n\n                if (this._hasDetails()) {\n                    columnsCount++;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n                }\n\n                for (var i = 0; i < pageSize; i++) {\n                    loaderHTML += \"<tr class='k-table-row'>\";\n                    for (var j = 0; j < columnsCount; j++) {\n                        if (colspan && !j) {\n                            loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        } else {\n                            loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                        }\n                    }\n                    loaderHTML += \"</tr>\";\n                }\n                return loaderHTML;\n            },\n\n            _progress: function(toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                var loaderType = this.options.loaderType;\n                var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n                var skeleton;\n\n                if (isVirtualization) {\n                    element = this.content;\n                } else if (this._editContainer && this._editMode() === \"popup\") {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is(\"table\")) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n\n                if (loaderType == \"skeleton\") {\n                    if (toggle) {\n                        skeleton = this._buildSkeleton();\n                            element.find(\"tbody\")\n                             .empty()\n                             .append(skeleton);\n                    } else {\n                        element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                    }\n                } else {\n                    if (endless && toggle) {\n                        kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                    } else {\n                        kendo.ui.progress(element, toggle);\n                    }\n                }\n            },\n\n            _resize: function(size, force) {\n\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n\n                if (this._anyStickyColumns()) {\n                    this._updateStickyColumns(false);\n                }\n            },\n\n            _isActiveInTable: function() {\n                var active = activeElement();\n\n                if (!active) { return false; }\n\n                return this.table[0] === active ||\n                    $.contains(this.table[0], active) ||\n                    (this._isLocked() &&\n                        (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                    );\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    data = that.dataSource.view(),\n                    navigatable = that.options.navigatable,\n                    virtualScroll = that.virtualScroll || {},\n                    currentIndex,\n                    current = $(that.current()),\n                    isCurrentInHeader = false,\n                    groups = that._groups(),\n                    colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                    contentScrollLeft,\n                    cachedItemsToSkip;\n\n                if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                    if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                        return;\n                    }\n                }\n\n                if (that._shouldMapHights) {\n                    that._mapCachedRowsHeight(\"get\", \"uid\");\n                    that._shouldMapHights = false;\n                }\n\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n\n                //someone remove the edited item\n                if (e && e.action === \"remove\" && that.editable &&\n                    that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n\n                e = e || {};\n\n                if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                    return;\n                }\n\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n\n                that._angularItems(\"cleanup\");\n\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                        isCurrentInHeader = current.is(\"th\");\n                        currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                    }\n                    that._destroyEditable();\n                }\n\n                if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function() {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 250);\n                } else {\n                     that._progress(false);\n                }\n\n                that._hideResizeHandle();\n\n                that._data = [];\n\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n\n                that._group = groups > 0 || that._group;\n\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n\n                if (that.content) {\n                    contentScrollLeft = kendo.scrollLeft(that.content);\n                }\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n\n                if (!that._virtualColScroll) {\n                    that._footer();\n\n                    that._renderNoRecordsContent();\n\n                    that._togglePagerVisibility();\n\n                    that._setContentHeight();\n\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n\n                if (that.lockedTable) {\n                    //requires manual trigger of scroll to sync both tables\n                    if (virtualScroll.rows) {\n                        that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger(\"change\");\n                    } else {\n                        that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                        that.content.trigger(\"scroll\");\n                    }\n                }\n\n                if (!that._endlessFetchInProgress && !that._rowDropping) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n\n                that._muteAngularRebind(function() {\n                    that._angularItems(\"compile\");\n                });\n\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n\n                if (that.options.persistSelection &&\n                    ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                    (that.items().length || that.dataSource._isGroupPaged())) {\n                    that._restoreSelection();\n                }\n\n                if (!that.options.persistSelection) {\n                    that._selectedIds = {};\n                }\n\n                if (that._hasReorderableRows()) {\n                    that._draggableRows();\n                    that._reorderableRows();\n                }\n\n                that._aria();\n\n                that.trigger(DATABOUND);\n           },\n\n            _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined$1 || currentIndex < 0) {\n                    return;\n                }\n\n                this._removeCurrent();\n\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else {\n                        currentIndex = 0;\n                    }\n\n                    var row = $();\n                    var colspan;\n\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n\n\n                    var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                        .eq(currentIndex);\n\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n\n                    } else {\n                        this._setCurrent(td);\n                    }\n\n                }\n\n                if (this._current) {\n                    focusTable(this.table, true);\n                }\n            },\n\n            _restoreSelection: function() {\n                var that = this,\n                    allRows = that.items(),\n                    selectedRows,\n                    id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n                selectedRows = grep(allRows, function(row) {\n                     var dataItemKey = that.dataItem(row)[id];\n                     if (that._selectedIds[dataItemKey]) {\n                        return row;\n                     }\n                });\n\n                that.select(selectedRows);\n            },\n\n           _angularItems: function(cmd) {\n\n               kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n               if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n                   this._cleanupDetailItems();\n               }\n\n               this._angularGroupItems(cmd);\n\n               this._angularGroupFooterItems(cmd);\n           },\n\n           _cleanupDetailItems: function() {\n               var that = this;\n\n               if (that._hasDetails()) {\n                  that.angular(\"cleanup\", function() {\n                       return { elements: that.tbody.children(\".k-detail-row\") };\n                   });\n\n                   that.tbody.find(\".k-detail-cell\").empty();\n               }\n           },\n\n           _angularGroupItems: function(cmd) {\n               var that = this,\n                   container = that.tbody;\n\n               if (that.lockedContent) {\n                   container = that.lockedTable.find(\"tbody\");\n               }\n\n               if (that._group) {\n                  that.angular(cmd, function() {\n                       return {\n                           elements: container.children(DOT + GROUPING_ROW),\n                           data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                               return { dataItem: dataItem };\n                           })\n                       };\n                   });\n               }\n           },\n\n           _angularGroupFooterItems: function(cmd) {\n               var that = this,\n                   container = that.tbody;\n\n               if (that.lockedContent) {\n                    container = that.element;\n               }\n\n               if (that._group && that.groupFooterTemplate) {\n\n                   that.angular(cmd, function() {\n                       return {\n                           elements: container.find(\".k-group-footer\"),\n                           data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                               return { dataItem: dataItem };\n                           })\n                       };\n                   });\n               }\n           },\n\n           _renderContent: function(data, colspan, groups) {\n                var that = this,\n                    idx,\n                    length,\n                    html = \"\",\n                    isLocked = that.lockedContent != null,\n                    endlessAppend = null,\n                    skipLastGroup,\n                    flatViewLength,\n                    scrollable = that.options.scrollable,\n                    templates = {\n                            rowTemplate: that.rowTemplate,\n                            altRowTemplate: that.altRowTemplate,\n                            groupFooterTemplate: that.groupFooterTemplate,\n                            groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                        };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n\n                    colspan = isLocked ? colspan - groups : colspan;\n\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function() {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular, this.options.size);\n                }\n           },\n\n           _renderGroupRows: function() {\n            var that = this,\n            data = that._groupRows,\n            groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n            groups = that._groups(),\n            groupRowBuilderFunc,\n            isLocked = that.lockedContent != null,\n            columns,\n            colspan,\n            group,\n            field,\n            column,\n            template,\n            text,\n            groupHeaderData,\n            tableContainer,\n            isInLockedContainer,\n            prevElement,\n            newGroupRowElement,\n            currentRow,\n            level,\n            groupHeaderColumnTemplate,\n            firstColumnGroupData;\n\n            groupRows.each(function(index, row) {\n                currentRow = $(row);\n                tableContainer = currentRow.closest(\"table\").parent();\n                isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n                columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n                if (isLocked) {\n                    groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                    colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                }\n                else {\n                    groupRowBuilderFunc = groupRowBuilder;\n                    colspan = columns.length + groups - level;\n                }\n\n                group = index >= data.length ? data[index - data.length] : data[index];\n                field = group.field;\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n                firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                groups = groups;\n                groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n                if (template) {\n                    text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                }\n\n                prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n                newGroupRowElement = $(groupHeaderColumnTemplate ?\n                    groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                    groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n                );\n\n                kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n                if (prevElement.is(\"tbody\")) {\n                    prevElement.prepend(newGroupRowElement);\n                }\n                else {\n                    prevElement.after(newGroupRowElement);\n                }\n                    currentRow.remove();\n               });\n           },\n\n           _renderLockedContent: function(data, colspan, groups) {\n               var html = \"\",\n                   idx,\n                   length,\n                   skipLastGroup,\n                   endlessAppend = null,\n                   flatViewLength,\n                   templates = {\n                       rowTemplate: this.lockedRowTemplate,\n                       altRowTemplate: this.lockedAltRowTemplate,\n                       groupFooterTemplate: this.lockedGroupFooterTemplate,\n                       groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                   };\n\n               if (this.lockedContent) {\n\n                   var table = this.lockedTable;\n                   endlessAppend = this._skipRerenderItemsCount > 0;\n\n                   if (groups > 0) {\n                       colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                       if (this.options.scrollable.endless) {\n                         flatViewLength = this.dataSource.flatView().length;\n                       }\n                       for (idx = 0, length = data.length; idx < length; idx++) {\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                        html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                       }\n                   } else {\n                       html = this._rowsHtml(data, templates);\n                   }\n\n                   if (endlessAppend) {\n                       table.children(\"tbody\").append(html);\n                   } else {\n                       appendContent(table.children(\"tbody\"), table, html, this.options.$angular, this.options.size);\n                   }\n\n                   this._syncLockedContentHeight();\n               }\n           },\n\n           _togglePagerVisibility: function() {\n               if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n           },\n\n           _adjustRowsHeight: function(table1, table2) {\n               var rows = table1[0].rows,\n                   length = rows.length,\n                   idx,\n                   rows2 = table2[0].rows,\n                   containers = table1.add(table2),\n                   containersLength = containers.length,\n                   heights = [];\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   if (rows[idx].style.height) {\n                       rows[idx].style.height = rows2[idx].style.height = \"\";\n                   }\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (!rows2[idx]) {\n                       break;\n                   }\n\n                   var offsetHeight1 = rows[idx].offsetHeight;\n                   var offsetHeight2 = rows2[idx].offsetHeight;\n                   var height = 0;\n\n                   if (offsetHeight1 > offsetHeight2) {\n                       height = offsetHeight1;\n                   } else if (offsetHeight1 < offsetHeight2) {\n                       height = offsetHeight2;\n                   }\n\n                   heights.push(height);\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = NONE;\n               }\n\n               for (idx = 0; idx < length; idx++) {\n                   if (heights[idx]) {\n                       //add one to resolve row misalignment in IE\n                       rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n                   }\n               }\n\n               for (idx = 0; idx < containersLength; idx++) {\n                   containers[idx].style.display = \"\";\n               }\n           }\n       });\n\n       if (kendo.ExcelMixin) {\n           kendo.ExcelMixin.extend(Grid.prototype);\n       }\n\n       if (kendo.PDFMixin) {\n           kendo.PDFMixin.extend(Grid.prototype);\n\n           Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n               var grid = this;\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n               var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n               var cont = $(\"<div>\")\n                   .css({ position: \"absolute\", left: -10000, top: -10000 });\n               var clone;\n\n               grid.toggleUnexportableColumns(grid.columns);\n               clone = grid.wrapper.clone().css({\n                   height: AUTO, width: AUTO\n               }).appendTo(cont);\n               clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n               clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n               clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n               clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n               this._initPDFProgress(progress);\n\n               var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.one(\"change\", draw);\n                       dataSource.page(startingPage);\n                   } else {\n                       grid.refresh();\n                       draw();\n                   }\n               }\n\n               function draw() {\n                   cont.appendTo(document.body);\n                   var options = $.extend({}, grid.options.pdf, {\n                       _destructive: true,\n                       progress: function(p) {\n                           progress.notify({\n                               page: p.page,\n                               pageNumber: p.pageNum,\n                               progress: 0.5 + p.pageNum / p.totalPages / 2,\n                               totalPages: p.totalPages\n                           });\n                       }\n                   });\n                   kendo.drawing.drawDOM(clone, options)\n                       .always(function() {\n                           cont.remove();\n                       })\n                       .then(function(group) {\n                           result.resolve(group);\n                           grid.toggleUnexportableColumns(grid.columns, true);\n                       })\n                       .fail(function(err) {\n                           result.reject(err);\n                       });\n               }\n\n               function renderPage() {\n                   var pageNum = dataSource.page();\n                   var totalPages = allPages ? dataSource.totalPages() : 1;\n                   body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n                   if (pageNum < totalPages) {\n                       dataSource.page(pageNum + 1);\n                   } else {\n                       dataSource.unbind(\"change\", renderPage);\n                       resolve();\n                   }\n               }\n\n               if (allPages) {\n                   dataSource.bind(\"change\", renderPage);\n                   dataSource.page(1);\n               } else {\n                   renderPage();\n               }\n\n               return result.promise();\n           };\n\n           Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n               var length = columns.length;\n               var column;\n               var exportable;\n               var visibleInExport;\n               var visibleInExportOnly;\n\n               for (var i = 0; i < length; i++) {\n                   column = columns[i];\n                   exportable = column.exportable;\n                   if (!restore) {\n                       if (typeof column.exportable === \"object\") {\n                           exportable = column.exportable.pdf;\n                       }\n\n                       visibleInExport = !column.hidden && exportable !== false;\n                       visibleInExportOnly = column.hidden && exportable === true;\n                       exportable = visibleInExport || visibleInExportOnly;\n\n                       if (!exportable && !column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.hideColumn(column);\n                       } else if (exportable && column.hidden) {\n                           column._toggledDuringExport = true;\n                           this.showColumn(column);\n                       } else if (exportable && column.columns) {\n                           this.toggleUnexportableColumns(column.columns);\n                       }\n                   } else {\n                       if (column._toggledDuringExport) {\n                           column._toggledDuringExport = false;\n\n                           if (column.hidden) {\n                               this.showColumn(column);\n                           } else {\n                               this.hideColumn(column);\n                           }\n                       } else if (column.columns) {\n                           this.toggleUnexportableColumns(column.columns, restore);\n                       }\n                   }\n               }\n           };\n\n           Grid.prototype._drawPDF = function(progress) {\n               var grid = this;\n\n               if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n                   return grid._drawPDF_autoPageBreak(progress);\n               }\n\n               var result = new $.Deferred();\n               var dataSource = grid.dataSource;\n               var allPages = grid.options.pdf.allPages;\n\n               this._initPDFProgress(progress);\n\n               // This group will be our document containing all pages\n               var doc = new kendo.drawing.Group();\n               var startingPage = dataSource.page();\n\n               function resolve() {\n                   if (allPages && startingPage !== undefined$1) {\n                       dataSource.unbind(\"change\", exportPage);\n                       dataSource.one(\"change\", function() {\n                           result.resolve(doc);\n                       });\n\n                       dataSource.page(startingPage);\n                   } else {\n                       result.resolve(doc);\n                   }\n               }\n\n               function exportPage() {\n                    grid.toggleUnexportableColumns(grid.columns);\n                    grid._drawPDFShadow({\n                        width: grid.wrapper.width()\n                    }, {\n                        avoidLinks: grid.options.pdf.avoidLinks\n                    })\n                    .done(function(group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n\n                        grid.toggleUnexportableColumns(grid.columns, true);\n                        progress.notify(args);\n                        doc.append(args.page);\n\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    })\n                    .fail(function(err) {\n                        result.reject(err);\n                    });\n                }\n\n                if (allPages) {\n                    dataSource.bind(\"change\", exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n\n                return result.promise();\n            };\n\n            Grid.prototype._initPDFProgress = function(deferred) {\n               var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n               loading.prepend(this.wrapper.clone().css({\n                   position: \"absolute\", top: 0, left: 0\n               }));\n\n               this._pdfInitialized = true;\n               this.wrapper.append(loading);\n\n               var pb = $(\"<div class='k-loading-pdf-progress'>\")\n               .appendTo(loading)\n               .kendoProgressBar({\n                   type: \"chunk\",\n                   chunkCount: 10,\n                   min: 0,\n                   max: 1,\n                   value: 0\n               }).data(\"kendoProgressBar\");\n\n               deferred.progress(function(e) {\n                   pb.value(e.progress);\n               })\n               .always(function() {\n                   kendo.destroy(loading);\n                   loading.remove();\n               });\n            };\n       }\n\n       function syncTableHeight(table1, table2) {\n           table1 = table1[0];\n           table2 = table2[0];\n\n           if (table1.rows.length !== table2.rows.length) {\n               var lockedHeigth = table1.offsetHeight;\n               var tableHeigth = table2.offsetHeight;\n\n               var row;\n               var diff;\n               if (lockedHeigth > tableHeigth) {\n                   row = table2.rows[table2.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table2.rows[table2.rows.length - 2];\n                   }\n\n                   diff = lockedHeigth - tableHeigth;\n               } else {\n                   row = table1.rows[table1.rows.length - 1];\n\n                   if (filterRowRegExp.test(row.className)) {\n                       row = table1.rows[table1.rows.length - 2];\n                   }\n\n                   diff = tableHeigth - lockedHeigth;\n               }\n               row.style.height = row.offsetHeight + diff + PX;\n           }\n       }\n\n       function adjustRowHeight(row1, row2) {\n           var height;\n           var offsetHeight1 = row1.offsetHeight;\n           var offsetHeight2 = row2.offsetHeight;\n\n           if (offsetHeight1 > offsetHeight2) {\n               height = offsetHeight1 + PX;\n           } else if (offsetHeight1 < offsetHeight2) {\n               height = offsetHeight2 + PX;\n           }\n\n           if (height) {\n               row1.style.height = row2.style.height = height;\n           }\n       }\n\n       function getCommand(commands, name) {\n           var idx, length, command;\n\n           if (typeof commands === STRING && commands === name) {\n              return commands;\n           }\n\n           if (isPlainObject(commands) && commands.name === name) {\n               return commands;\n           }\n\n           if (isArray(commands)) {\n               for (idx = 0, length = commands.length; idx < length; idx++) {\n                   command = commands[idx];\n\n                   if ((typeof command === STRING && command === name) || (command.name === name)) {\n                       return command;\n                   }\n               }\n           }\n           return null;\n       }\n\n       function compareElements(element, toCompare) {\n           if (element.length !== toCompare.length) {\n               return false;\n           }\n\n           for (var i = 0; i < element.length; i++) {\n               if (element[i] !== toCompare[i]) {\n                   return false;\n               }\n           }\n\n           return true;\n       }\n\n       function focusTable(table, direct) {\n           if (!table || table.length === 0) {\n               return;\n           }\n\n           if (direct === true) {\n               table = $(table);\n               var scrollLeft = kendo.scrollLeft(table.parent());\n\n                kendo.focusElement(table);\n                kendo.scrollLeft(table.parent(), scrollLeft);\n            } else {\n                $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n            }\n        }\n\n       function isColumnGroupable(grid, column) {\n           return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n       }\n\n       function isGroupedBy(groups, field) {\n           return !!$.grep(groups, function(item) {\n               return item.field === field;\n           }).length;\n       }\n\n       function isColumnEditable(column, model) {\n           if (!column.field || column.selectable) {\n               return false;\n           }\n           if (model.editable && !model.editable(column.field)) {\n               return false;\n           }\n           if (column.editable && !column.editable(model)) {\n               return false;\n           }\n           return true;\n       }\n\n       function isInputElement(element) {\n           return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n       }\n\n        function tableClick(e) {\n            var that = this,\n                currentTarget = $(e.currentTarget),\n                isHeader = currentTarget.is(\"th\"),\n                table = this.table.add(this.lockedTable),\n                headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n                isInput = isInputElement(e.target),\n                preventScroll = $(e.target).is('.k-checkbox'),\n                target = $(e.target),\n                currentTable = currentTarget.closest(\"table\")[0];\n\n            if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n\n            if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n                return;\n            }\n\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n\n            if (isHeader || !isInput) {\n                setTimeout(function() {\n                    var activeEl = $(kendo._activeElement());\n                    if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                        return;\n                    }\n\n                    //Only if input element is not selected yet and it is not descendant of the grid's table\n                    if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                        //DOMElement.focus() only for header, because IE doesn't really focus the table\n                        focusTable(that.table[0], true);\n                    }\n                });\n            }\n\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n            }\n        }\n\n       function leftMostPosition(element, rtl) {\n           if (!rtl) {\n               return 0;\n           }\n\n           var result = 0;\n\n           if (kendo.support.browser.webkit) {\n               result = element.width();\n           }\n\n           return result;\n       }\n\n       function parseVirtualSettings(options) {\n            var asLowerString;\n\n            if (typeof options === \"string\") {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === \"true\") {\n                    return {\n                        rows: true\n                    };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf(\"rows\") > -1,\n                        columns: asLowerString.indexOf(\"columns\") > -1\n                    };\n                }\n\n            } else if (options === true) {\n                return {\n                    rows: true\n                };\n            }\n       }\n\n       function isElementVisibleInWrapper(wrapper, element) {\n           var offsetTop;\n           var halfHeight;\n\n           if (!wrapper) {\n             return false;\n           }\n\n           element = $(element);\n\n           if (element[0] && contains(wrapper[0], element[0])) {\n               offsetTop = element.offset().top - wrapper.offset().top;\n               halfHeight = element.outerHeight() / 2;\n\n               if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n                   return true;\n               }\n           }\n\n           return false;\n       }\n\n       function isInEdit(cell) {\n           return cell &&\n               (cell.hasClass(\"k-edit-cell\") ||\n                cell.parent().hasClass(\"k-grid-edit-row\"));\n       }\n\n        function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n            var html;\n\n            if (groupHeaderColumnTemplate) {\n                html = groupHeaderColumnTemplate(extend({}, groupData, {\n                    groupCells: level,\n                    colspan: templateColspan,\n                    text: text\n                }));\n            } else {\n                html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            return html;\n        }\n\n       function groupCellBuilder(headerTemplateIndex) {\n        return function (ref) {\n           var colspan = ref.colspan;\n           var text = ref.text;\n\n           return \"<td class=\\\"k-table-td\\\" colspan=\\\"\" + (colspan + headerTemplateIndex) + \"\\\">\" +\n        '<p class=\"k-reset\">' +\n            kendo.ui.icon($((\"<a href=\\\"\\\\#\\\" tabindex=\\\"-1\\\" \" + ARIA_LABEL + \"=\\\"\" + COLLAPSE + \"\\\"></a>\")), { icon: \"caret-alt-down\" }) + text +\n        '</p></td>';\n        };\n       }\n\n       function groupCellLockedContentBuilder(headerTemplateIndex) {\n        return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n        '<p class=\"k-reset\">&nbsp;</p></td>';\n       }\n\n       function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n        return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n            '<p class=\"k-reset\">' +\n            kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : (\"caret-alt-\" + (isRtl ? 'left' : 'right'))) }) + text +\n        '</p></td></tr>';\n       }\n\n       function groupRowLockedContentBuilder(colspan) {\n        return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n            '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n            '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n       }\n\n       function toggleRow(row, visible) {\n           row = $(row)[0];\n           if (visible) {\n               row.style.display = \"\";\n           } else {\n               row.style.display = NONE;\n           }\n       }\n\n       function htmlEncode(value, backslashEscapeQuotes) {\n           var ampRegExp = /&/g,\n               ltRegExp = /</g,\n               quoteRegExp = /\"/g,\n               aposRegExp = /'/g,\n               gtRegExp = />/g;\n\n           return (\"\" + value)\n               .replace(ampRegExp, \"&amp;\")\n               .replace(ltRegExp, \"&lt;\")\n               .replace(gtRegExp, \"&gt;\")\n               .replace(quoteRegExp, function(match) {\n                   if (backslashEscapeQuotes) {\n                       return \"\\\\\" + match;\n                   }\n                   return \"&quot;\";\n               })\n               .replace(aposRegExp, \"&#39;\");\n       }\n\n       function getTitle(field, columns) {\n            return columns.filter(function(col) {\n                return col.field === field;\n            })[0].title || field;\n        }\n\n        function exportDataSort(a, b) {\n            return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n        }\n\n        function isExcelExportableColumn(column) {\n            return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n        }\n\n       ui.plugin(Grid);\n       ui.plugin(VirtualScrollable);\n\n       extend(kendo.ui.grid, {\n           defaultBodyContextMenu: defaultBodyContextMenu,\n           defaultHeadContextMenu: defaultHeadContextMenu,\n       });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}