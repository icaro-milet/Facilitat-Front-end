{"version":3,"file":"kendo.scheduler.view.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoscheduler","view","js","this","kendo","ui","scheduler","$","window","getDate","date","Widget","outerHeight","_outerHeight","keys","ONGOING_CLASS","math","Math","SPACE","levels","values","key","result","collect","depth","level","idx","length","push","table","tableRows","className","trim","join","scrollbarWidth","ResourceView","Class","extend","init","index","isRtl","enforceAllDaySlot","_index","_timeSlotCollections","_daySlotCollections","_isRtl","_enforceAllDaySlot","addTimeSlotCollection","startDate","endDate","_addCollection","addDaySlotCollection","collections","collection","SlotCollection","timeSlotCollectionCount","daySlotCollectionCount","_refreshSlotCollections","slotCollections","slotCollectionIndex","collectionIndex","refresh","daySlotByPosition","x","y","byDate","_slotByPosition","timeSlotByPosition","slotIndex","count","nextSlot","slot","at","width","offsetWidth","height","offsetHeight","horizontalEnd","offsetLeft","verticalEnd","offsetTop","timeSlotRanges","startTime","endTime","firstIndex","lastIndex","start","_startSlot","inRange","end","_endSlot","MS_PER_DAY","first","last","_continuousRange","TimeSlotRange","daySlotRanges","isAllDay","DaySlotRange","range","startSlot","endSlot","startIndex","endIndex","ranges","head","tail","slotRanges","event","isDay","_startTime","toUtcTime","_endTime","undefined","isMultiDay","_startCollection","startInRange","_endCollection","endInRange","_getCollections","continuousSlot","reverse","pad","isDaySlot","firstSlot","lastSlot","upSlot","keepCollection","groupByDateVertically","that","_verticalSlot","downSlot","leftSlot","_horizontalSlot","rightSlot","step","swapCollection","_collection","multiday","time","_start","slotByStartDate","slotByEndDate","getSlotCollection","getTimeSlotCollection","getDaySlotCollection","SlotRange","options","innerHeight","events","addEvent","outerRect","snap","_rect","property","top","bottom","left","right","support","element","startOffset","startSlotDuration","endOffset","endSlotDuration","round","innerRect","innerWidth","groupIndex","_slots","_events","_end","_groupIndex","_collectionIndex","allday","addTimeSlot","isHorizontal","TimeSlot","addDaySlot","eventCount","DaySlot","Slot","clientWidth","clientHeight","timezone","toLocalDate","fn","apply","arguments","offsetX","rtl","offset","difference","duration","floor","children","firstChild","firstChildHeight","firstChildTop","Date","rangeIndex","eventElement","slotIndexEnd","SchedulerView","call","_normalizeOptions","_initDefaultTools","_scrollbar","scrollbar","_resizeHint","_moveHint","_cellId","guid","_resourcesForGroups","_selectedSlots","attr","messages","ariaEventLabel","on","to","allDay","prefix","visibleEndDate","_defaultTools","todayMobile","type","fillMode","text","today","click","_footerTodayClickHandler","bind","attributes","class","fulldayDesktop","icon","showWorkHours","showFullDay","showWorkDay","toggleFullDay","noop","fulldayMobile","setMilliseconds","workDayStart","workDayEnd","_isMobile","mobile","mobileOS","_addResourceView","resourceView","groups","_refreshResourceViews","i","dateForTitle","format","selectedDateFormat","shortDateForTitle","selectedShortDateFormat","mobileDateForTitle","selectedMobileDateFormat","_changeGroup","selection","previous","_isGroupedByDate","_changeDate","group","_changeGroupContinuously","_changeViewPeriod","_isInRange","newStart","newEnd","min","max","_horizontalSlots","multiple","method","horizontalRange","isVertical","_isVerticallyGrouped","_normalizeHorizontalSelection","tempSlot","_getNextHorizontalRange","_continuousSlot","_verticalSlots","verticalRange","_normalizeVerticalSelection","_getNextVerticalRange","e","preventDefault","currentDate","timezoneOffset","convert","getTimezoneOffset","trigger","name","action","_footerItems","items","_footer","footer","html","appendTo","kendoToolBar","resizable","constrainSelection","move","shift","handled","verticalByDate","slots","DOWN","UP","_updateDirection","LEFT","RIGHT","backward","moveToEventInGroup","selectedEvents","prev","lastSelected","_continuousEvents","uid","inArray","moveToEvent","allEvents","_getAllEvents","uniqueAllEvents","_getUniqueEvents","sortedEvents","_getSortedEvents","eventIndex","_getNextEventIndexBySlot","_getStartIdx","_getSelectedSlot","current","candidate","_current","content","has","_scrollTo","select","clearSelection","_selectEvents","_selectSlots","tempIndex","slotStartDate","eventStartDate","getTime","selectedEventIndex","each","concat","exists","j","sort","second","firstStartDate","secondStartDate","cell","replace","selectedStateRegExp","groupEvent","found","groupEvents","add","indexOf","addClass","addDays","_resourceValue","resource","item","valuePrimitive","getter","dataValueField","_setResourceValue","groupLevelMember","value","setter","field","_resourceBySlot","resources","groupedResources","passedChildren","numberOfChildren","resourceIndex","groupOptions","nestedMember","orientation","rowLevels","columnLevels","dateGroupCompensation","groupLevel","_createResizeHint","css","_removeResizeHint","remove","_removeMoveHint","filter","container","elementOffset","elementOffsetDir","containerScroll","scrollTop","containerOffsetDir","bottomDistance","_inverseEventColor","eventColor","eventColorIsDark","Color","isDark","eventBackground","_eventTmpl","template","wrapper","settings","Template","templateSettings","paramName","state","storage","tmpl","eventResources","data","dataSource","eventResource","dataIndex","get","resourceColor","dataColorField","title","dataTextField","color","createLayout","layout","allDayIndex","rows","allDaySlot","splice","_isVirtualized","_trimRowLevels","rowCount","find","append","_topSection","_bottomSection","_updateDomRowLevels","_groupOrientation","_outerWidth","_scroller","virtual","levelMarker","lastGroup","cachedRowLevels","_hasContentToRender","stopAtLevel","parentLevel","parentValue","rowLevelIndex","stop","createNextLayout","trimmedRowLevels","clone","_height","_times","rowSpan","parseInt","_virtualContent","render","_cachedEvents","_tryRenderContent","bufferHeight","_isSchedulerHeightSet","initialHeight","el","style","groupCells","times","_rowLevelIndices","toArray","map","refreshLayout","toolbar","headerHeight","paddingDirection","eq","datesHeader","timesHeader","datesHeaderRows","contentDiv","kineticScrollNeeded","timesTable","removeClass","thElm","columnLevelCount","_datesHeader","dateGroup","closest","wrap","parent","scrollLeft","touchScroller","avoidScrolling","target","movable","_touchScroller","scrollElement","sender","groupIdx","groupLength","_createDateLayout","dates","inner","createDateLayoutConfiguration","_createColumnsLayout","createLayoutConfiguration","_createRowsLayout","selectionByElement","removeAttr","destroy","_ongoingTimer","clearInterval","getKendoToolBar","calendarInfo","getCulture","calendars","standard","prevGroupSlot","nextGroupSlot","_eventOptionsForMove","_updateEventForResize","_updateEventForSelection","_innerElements","countInner","innerCollection","innerSpan","innerEls","isMobile","rowIndex","Array","split","rowHeaderRows","rowsBefore","currentRow","rowspan","columnIndex","dateTableRows","columnLevelIndex","th","column","colspan","allDayTableRows","lastLevel","td","cellContent","applyStylesFromKendoAttributes","_formatEventAriaLabel","labelText","labelMessages","sameDate","toString","_ongoingEvents","interval","ongoingOptions","ongoingEvents","enabled","_ongoingUpdater","updateInterval","isNaN","setInterval","currentTime","ongoingClass","cssClass","_updateOngoing","useLocalTimezone","forEach","appointment","re","processor","parts","channels","formats","resolveColor","process","exec","r","g","b","normalizeByte","_createColumns","eventElements","columns","eventRange","zeroWidthEventOffset","columnLength","endOverlaps","configuration","obj","minorTicks","itemParentValue","dataParentValueField","htmlEncode","slice","prototype","charAt","substr","toLowerCase","namedColors","percBrightness","sqrt","aqua","azure","beige","black","blue","brown","coral","cyan","darkblue","darkcyan","darkgray","darkgreen","darkorange","darkred","dimgray","fuchsia","gold","goldenrod","gray","green","greenyellow","indigo","ivory","khaki","lightblue","lightgrey","lightgreen","lightpink","lightyellow","lime","limegreen","linen","magenta","maroon","mediumblue","navy","olive","orange","orangered","orchid","pink","plum","purple","red","royalblue","salmon","silver","skyblue","slateblue","slategray","snow","steelblue","tan","teal","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","createColumns","createRows","collidingEvents","elements","slotStart","slotEnd","eventsForSlot","groupEqFilter","isArray","ObservableArray","jQuery"],"sources":["kendo.scheduler.view.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.toolbar.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.toolbar'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoscheduler = global.kendoscheduler || {}, global.kendoscheduler.view = global.kendoscheduler.view || {}, global.kendoscheduler.view.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"scheduler.view\",\n        name: \"Scheduler View\",\n        category: \"web\",\n        description: \"The Scheduler Common View\",\n        depends: [ \"core\", \"toolbar\" ],\n        hidden: true\n    };\n        kendo.ui.scheduler = {};\n\n    (function($) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            getDate = kendo.date.getDate,\n            Widget = ui.Widget,\n            outerHeight = kendo._outerHeight,\n            keys = kendo.keys,\n            NS = \".kendoSchedulerView\",\n            INVERSE_COLOR_CLASS = \"k-event-inverse\",\n            ONGOING_CLASS = \"k-event-ongoing\",\n            MIN_HORIZONTAL_SCROLL_SIZE = 1024,\n            math = Math,\n            SPACE = \" \",\n            DOT = \".\";\n\n        function levels(values, key) {\n            var result = [];\n\n            function collect(depth, values) {\n                values = values[key];\n\n                if (values) {\n                    var level = result[depth] = result[depth] || [];\n\n                    for (var idx = 0; idx < values.length; idx++) {\n                        level.push(values[idx]);\n                        collect(depth + 1, values[idx]);\n                    }\n                }\n            }\n\n            collect(0, values);\n\n            return result;\n        }\n\n        function table(tableRows, className) {\n            if (!tableRows.length) {\n                return \"\";\n            }\n\n            return '<table role=\"presentation\" class=\"' + kendo.trim('k-scheduler-table ' + (className || \"\")) + '\">' +\n                   '<tr>' +\n                        tableRows.join(\"</tr><tr>\") +\n                   '</tr>' +\n                   '</table>';\n        }\n\n        function allDayTable(tableRows, className) {\n            if (!tableRows.length) {\n                return \"\";\n            }\n\n            return (\"<div \" + (kendo.attr(\"style-position\")) + \"=\\\"relative\\\">\" + (table(tableRows, className)) + \"</div>\");\n        }\n\n        function timesHeader(columnLevelCount, allDaySlot, rowCount) {\n            var tableRows = [];\n\n            if (rowCount > 0) {\n                for (var idx = 0; idx < columnLevelCount; idx++) {\n                    tableRows.push(\"<th>&#8203;</th>\");\n                }\n            }\n\n            if (allDaySlot) {\n                tableRows.push('<th class=\"k-scheduler-times-all-day\">' + allDaySlot.text + '</th>');\n            }\n\n            if (rowCount < 1) {\n               return $();\n            }\n\n            return $('<div class=\"k-scheduler-times\">' + table(tableRows) + '</div>');\n        }\n\n        function content() {\n            return $(\n                '<div class=\"k-scheduler-content\">' +\n                    '<table role=\"presentation\" class=\"k-scheduler-table\"></table>' +\n                '</div>'\n            );\n        }\n        var HINT = '<div class=\"k-marquee k-scheduler-marquee\">' +\n                        '<div class=\"k-marquee-color\"></div>' +\n                        '<div class=\"k-marquee-text\">' +\n                            '<div class=\"k-label-top\"></div>' +\n                            '<div class=\"k-label-bottom\"></div>' +\n                        '</div>' +\n                    '</div>';\n\n\n        var ResourceView = kendo.Class.extend({\n            init: function(index, isRtl, enforceAllDaySlot) {\n                this._index = index;\n                this._timeSlotCollections = [];\n                this._daySlotCollections = [];\n                this._isRtl = isRtl;\n                this._enforceAllDaySlot = enforceAllDaySlot;\n            },\n\n            addTimeSlotCollection: function(startDate, endDate) {\n                return this._addCollection(startDate, endDate, this._timeSlotCollections);\n            },\n\n            addDaySlotCollection: function(startDate, endDate) {\n                return this._addCollection(startDate, endDate, this._daySlotCollections);\n            },\n\n            _addCollection: function(startDate, endDate, collections) {\n                var collection = new SlotCollection(startDate, endDate, this._index, collections.length);\n\n                collections.push(collection);\n\n                return collection;\n            },\n\n            timeSlotCollectionCount: function() {\n                return this._timeSlotCollections.length;\n            },\n\n            daySlotCollectionCount: function() {\n                return this._daySlotCollections.length;\n            },\n\n            _refreshSlotCollections: function() {\n                var slotCollections = [this._timeSlotCollections || [], this._daySlotCollections || []];\n\n                for (var slotCollectionIndex = 0; slotCollectionIndex < slotCollections.length; slotCollectionIndex++) {\n                    var collections = slotCollections[slotCollectionIndex];\n                    for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                        var collection = collections[collectionIndex];\n                        collection.refresh();\n                    }\n                }\n            },\n\n            daySlotByPosition: function(x, y, byDate) {\n                return this._slotByPosition(x, y, this._daySlotCollections, byDate);\n            },\n\n            timeSlotByPosition: function(x, y, byDate) {\n                return this._slotByPosition(x, y, this._timeSlotCollections, byDate);\n            },\n\n            _slotByPosition: function(x, y, collections, byDate) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n\n                    for (var slotIndex = 0; slotIndex < collection.count(); slotIndex++) {\n                        var slot = collection.at(slotIndex);\n                        var width = slot.offsetWidth;\n                        var height = slot.offsetHeight;\n                        var nextSlot;\n\n                        var horizontalEnd = slot.offsetLeft + width;\n                        var verticalEnd = slot.offsetTop + height;\n\n                        if (!byDate) {\n                             nextSlot = collection.at(slotIndex + 1);\n                        }\n\n                        if (nextSlot) {\n                            if (nextSlot.offsetLeft != slot.offsetLeft) {\n                                if (this._isRtl) {\n                                    horizontalEnd = slot.offsetLeft + (slot.offsetLeft - nextSlot.offsetLeft);\n                                } else {\n                                    horizontalEnd = nextSlot.offsetLeft;\n                                }\n                            } else {\n                                verticalEnd = nextSlot.offsetTop;\n                            }\n                        }\n\n                        if (x >= slot.offsetLeft && x < horizontalEnd &&\n                            y >= slot.offsetTop && y < verticalEnd) {\n                            return slot;\n                        }\n                    }\n                }\n             },\n\n            refresh: function() {\n                var collectionIndex;\n\n                for (collectionIndex = 0; collectionIndex < this._daySlotCollections.length; collectionIndex++) {\n                    this._daySlotCollections[collectionIndex].refresh();\n                }\n\n                for (collectionIndex = 0; collectionIndex < this._timeSlotCollections.length; collectionIndex++) {\n                    this._timeSlotCollections[collectionIndex].refresh();\n                }\n            },\n\n            timeSlotRanges: function(startTime, endTime) {\n                var collections = this._timeSlotCollections;\n                var start = this._startSlot(startTime, collections);\n                var firstIndex, lastIndex;\n\n                if (!start.inRange && startTime >= start.slot.end) {\n                    firstIndex = start.slot.collectionIndex + 1;\n                    start = null;\n                }\n\n                var end = start;\n\n                if (startTime < endTime) {\n                    end = this._endSlot(endTime, collections);\n                }\n\n                if (end && !end.inRange && endTime <= end.slot.start) {\n                    lastIndex = end.slot.collectionIndex;\n\n                    if (endTime === end.slot.start && ((start && lastIndex > start.slot.collectionIndex) || (lastIndex > firstIndex))) {\n                        lastIndex -= 1;\n                    }\n\n                    end = null;\n                }\n\n                if (start === null && end === null) {\n                    if (endTime - startTime < kendo.date.MS_PER_DAY) {\n                        return [];\n                    } else {\n                        start = {\n                            inRange: true,\n                            slot: collections[firstIndex].first()\n                        };\n\n                        end = {\n                            inRange: true,\n                            slot: collections[lastIndex].last()\n                        };\n                    }\n                }\n\n                if (start === null) {\n                    if (end.slot.end <= startTime) {\n                        return [];\n                    }\n\n                    start = {\n                        inRange: true,\n                        slot: (collections[firstIndex] || collections[end.slot.collectionIndex]).first()\n                    };\n                }\n\n                if (end === null) {\n                    if (start.slot.start >= endTime) {\n                        return [];\n                    }\n\n                    end = {\n                        inRange: true,\n                        slot: (collections[lastIndex] || collections[start.slot.collectionIndex]).last()\n                    };\n                }\n\n                return this._continuousRange(TimeSlotRange, collections, start, end);\n            },\n\n            daySlotRanges: function(startTime, endTime, isAllDay) {\n                var collections = this._daySlotCollections;\n\n                var start = this._startSlot(startTime, collections, isAllDay);\n\n                if (!start.inRange && startTime >= start.slot.end) {\n                    start = null;\n                }\n\n                var end = start;\n\n                if (startTime < endTime) {\n                    end = this._endSlot(endTime, collections, isAllDay);\n                }\n\n                if (end && !end.inRange && endTime <= end.slot.start) {\n                    end = null;\n                }\n\n                if (start === null && end === null) {\n                    return [];\n                }\n\n                if (start === null) {\n                    if (end.slot.end <= startTime) {\n                        return [];\n                    }\n\n                    do {\n                        startTime += kendo.date.MS_PER_DAY;\n                        start = this._startSlot(startTime, collections, isAllDay);\n                    } while (!start.inRange && startTime >= start.slot.end);\n                }\n\n                if (end === null) {\n                    if (start.slot.start >= endTime) {\n                        return [];\n                    }\n\n                    do {\n                        endTime -= kendo.date.MS_PER_DAY;\n                        end = this._endSlot(endTime, collections, isAllDay);\n                    } while (!end.inRange && endTime <= end.slot.start);\n                }\n\n                return this._continuousRange(DaySlotRange, collections, start, end);\n            },\n\n            _continuousRange: function(range, collections, start, end) {\n                var startSlot = start.slot;\n                var endSlot = end.slot;\n\n                var startIndex = startSlot.collectionIndex;\n                var endIndex = endSlot.collectionIndex;\n\n                var ranges = [];\n\n                for (var collectionIndex = startIndex; collectionIndex <= endIndex; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n\n                    var first = collection.first();\n                    var last = collection.last();\n                    var head = false;\n                    var tail = false;\n\n                    if (collectionIndex == startIndex) {\n                        tail = !start.inRange;\n                    }\n\n                    if (collectionIndex == endIndex) {\n                        head = !end.inRange;\n                    }\n\n                    if (first.start < startSlot.start) {\n                        first = startSlot;\n                    }\n\n                    if (last.start > endSlot.start) {\n                        last = endSlot;\n                    }\n\n                    if (startIndex < endIndex) {\n                        if (collectionIndex == startIndex) {\n                            head = true;\n                        } else if (collectionIndex == endIndex) {\n                            tail = true;\n                        } else {\n                            head = tail = true;\n                        }\n                    }\n\n                    ranges.push(new range({\n                        start: first,\n                        end: last,\n                        collection: collection,\n                        head: head,\n                        tail: tail\n                    }));\n                }\n\n                return ranges;\n            },\n\n            slotRanges: function(event, isDay) {\n                var startTime = event._startTime || kendo.date.toUtcTime(event.start);\n                var endTime = event._endTime || kendo.date.toUtcTime(event.end);\n\n                if (isDay === undefined) {\n                    if (this._enforceAllDaySlot) {\n                        isDay = event.isMultiDay();\n                    } else {\n                        isDay = event.isAllDay;\n                    }\n                }\n\n                if (isDay) {\n                    return this.daySlotRanges(startTime, endTime, event.isAllDay);\n                }\n\n                return this.timeSlotRanges(startTime, endTime);\n            },\n\n            ranges: function(startTime, endTime, isDay, isAllDay) {\n                if (typeof startTime != \"number\") {\n                    startTime = kendo.date.toUtcTime(startTime);\n                }\n\n                if (typeof endTime != \"number\") {\n                    endTime = kendo.date.toUtcTime(endTime);\n                }\n\n                if (isDay) {\n                    return this.daySlotRanges(startTime, endTime, isAllDay);\n                }\n\n                return this.timeSlotRanges(startTime, endTime);\n            },\n\n            _startCollection: function(date, collections) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n\n                    if (collection.startInRange(date)) {\n                        return collection;\n                    }\n                }\n\n                return null;\n            },\n\n            _endCollection: function(date, collections, isAllDay) {\n                for (var collectionIndex = 0; collectionIndex < collections.length; collectionIndex++) {\n                    var collection = collections[collectionIndex];\n\n                    if (collection.endInRange(date, isAllDay)) {\n                        return collection;\n                    }\n                }\n\n                return null;\n            },\n\n            _getCollections: function(isDay) {\n                return isDay ? this._daySlotCollections : this._timeSlotCollections;\n            },\n\n            continuousSlot: function(slot, reverse) {\n                var pad = reverse ? -1 : 1;\n                var collections = this._getCollections(slot.isDaySlot);\n                var collection = collections[slot.collectionIndex + pad];\n\n                return collection ? collection[reverse ? \"last\" : \"first\"]() : undefined;\n            },\n\n            firstSlot: function() {\n                var collections = this._getCollections(this.daySlotCollectionCount());\n\n                return collections[0].first();\n            },\n\n            lastSlot: function() {\n                var collections = this._getCollections(this.daySlotCollectionCount());\n\n                return collections[collections.length - 1].last();\n            },\n\n            upSlot: function(slot, keepCollection, groupByDateVertically) {\n                var that = this;\n                var moveToDaySlot = function(isDaySlot, collectionIndex, index) {\n                    var isFirstCell = index === 0;\n\n                    if (!keepCollection && !isDaySlot && isFirstCell && that.daySlotCollectionCount()) {\n                        return that._daySlotCollections[0].at(collectionIndex);\n                    }\n                };\n\n                if (!this.timeSlotCollectionCount()) {\n                    keepCollection = true;\n                }\n\n                return this._verticalSlot(slot, -1, moveToDaySlot, groupByDateVertically);\n            },\n\n            downSlot: function(slot, keepCollection, groupByDateVertically) {\n                var that = this;\n                var moveToTimeSlot = function(isDaySlot, collectionIndex, index) {\n                    if (!keepCollection && isDaySlot && that.timeSlotCollectionCount()) {\n                        return that._timeSlotCollections[index].at(0);\n                    }\n                };\n\n                if (!this.timeSlotCollectionCount()) {\n                    keepCollection = true;\n                }\n\n                return this._verticalSlot(slot, 1, moveToTimeSlot, groupByDateVertically);\n            },\n\n            leftSlot: function(slot, groupByDateVertically) {\n                return this._horizontalSlot(slot, -1, groupByDateVertically);\n            },\n\n            rightSlot: function(slot, groupByDateVertically) {\n                return this._horizontalSlot(slot, 1, groupByDateVertically);\n            },\n\n            _horizontalSlot: function(slot, step, groupByDateVertically) {\n                var index = slot.index;\n                var isDaySlot = slot.isDaySlot;\n                var collectionIndex = slot.collectionIndex;\n                var collections = this._getCollections(isDaySlot);\n\n                isDaySlot = groupByDateVertically ? false : isDaySlot;\n\n                if (isDaySlot) {\n                    index += step;\n                } else {\n                    collectionIndex += step;\n                }\n\n                var collection = collections[collectionIndex];\n\n                return collection ? collection.at(index) : undefined;\n            },\n\n            _verticalSlot: function(slot, step, swapCollection, groupByDateVertically) {\n                var index = slot.index;\n                var isDaySlot = slot.isDaySlot;\n                var collectionIndex = slot.collectionIndex;\n                var collections = this._getCollections(isDaySlot);\n\n                slot = swapCollection(isDaySlot, collectionIndex, index);\n                if (slot) {\n                    return slot;\n                }\n\n                isDaySlot = groupByDateVertically ? false : isDaySlot;\n\n                if (isDaySlot) {\n                    collectionIndex += step;\n                } else {\n                    index += step;\n                }\n\n                var collection = collections[collectionIndex];\n\n                return collection ? collection.at(index) : undefined;\n            },\n\n            _collection: function(index, multiday) {\n                var collections = multiday ? this._daySlotCollections : this._timeSlotCollections;\n\n                return collections[index];\n            },\n\n            _startSlot: function(time, collections, isAllDay) {\n                var collection = this._startCollection(time, collections);\n                var inRange = true;\n                var index = 0;\n\n                if (!collection) {\n                    collection = collections[index];\n\n                    while (index < collections.length - 1 && collection._start < time) {\n                        index++;\n                        collection = collections[index];\n                    }\n\n                    inRange = false;\n                }\n\n                var slot = collection.slotByStartDate(time, isAllDay);\n\n                if (!slot) {\n                    slot = collection.first();\n                    inRange = false;\n                }\n\n                return {\n                    slot: slot,\n                    inRange: inRange\n                };\n            },\n\n            _endSlot: function(time, collections, isAllDay) {\n                var collection = this._endCollection(time, collections, isAllDay);\n                var inRange = true;\n                var index = collections.length - 1;\n\n                if (!collection) {\n                    collection = collections[index];\n\n                    while (index > 0 && collection._start > time) {\n                        index--;\n                        collection = collections[index];\n                    }\n\n                    inRange = false;\n                }\n\n                var slot = collection.slotByEndDate(time, isAllDay);\n\n                if (!slot) {\n                    if (time <= collection.first().start) {\n                        slot = collection.first();\n                    } else {\n                        slot = collection.last();\n                    }\n\n                    inRange = false;\n                }\n\n                return {\n                    slot: slot,\n                    inRange: inRange\n                };\n            },\n\n            getSlotCollection: function(index, isDay) {\n                return this[isDay ? \"getDaySlotCollection\" : \"getTimeSlotCollection\"](index);\n            },\n\n            getTimeSlotCollection: function(index) {\n                return this._timeSlotCollections[index];\n            },\n\n            getDaySlotCollection: function(index) {\n                return this._daySlotCollections[index];\n            }\n        });\n\n        var SlotRange = kendo.Class.extend({\n            init: function(options) {\n                $.extend(this, options);\n            },\n\n            innerHeight: function() {\n                var collection = this.collection;\n\n                var startIndex = this.start.index;\n\n                var endIndex = this.end.index;\n\n                var result = 0;\n\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                   result += collection.at(slotIndex).offsetHeight;\n                }\n\n                return result;\n            },\n\n            events: function() {\n                return this.collection.events();\n            },\n\n            addEvent: function(event) {\n                this.events().push(event);\n            },\n\n            startSlot: function() {\n                if (this.start.offsetLeft > this.end.offsetLeft) {\n                    return this.end;\n                }\n                return this.start;\n            },\n\n            endSlot: function() {\n                if (this.start.offsetLeft > this.end.offsetLeft) {\n                    return this.start;\n                }\n                return this.end;\n            }\n        });\n\n        var TimeSlotRange = SlotRange.extend({\n            innerHeight: function() {\n                var collection = this.collection;\n\n                var startIndex = this.start.index;\n\n                var endIndex = this.end.index;\n\n                var result = 0;\n\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                   result += collection.at(slotIndex).offsetHeight;\n                }\n\n                return result;\n            },\n\n            outerRect: function(start, end, snap) {\n                return this._rect(\"offset\", start, end, snap);\n            },\n\n            _rect: function(property, start, end, snap) {\n                var top;\n                var bottom;\n                var left;\n                var right;\n                var startSlot = this.start;\n                var endSlot = this.end;\n                var isRtl = kendo.support.isRtl(startSlot.element);\n\n                if (typeof start != \"number\") {\n                    start = kendo.date.toUtcTime(start);\n                }\n\n                if (typeof end != \"number\") {\n                    end = kendo.date.toUtcTime(end);\n                }\n\n                if (snap) {\n                    top = startSlot.offsetTop;\n                    bottom = endSlot.offsetTop + endSlot[property + \"Height\"];\n                    if (isRtl) {\n                        left = endSlot.offsetLeft;\n                        right = startSlot.offsetLeft + startSlot[property + \"Width\"];\n                    } else {\n                        left = startSlot.offsetLeft;\n                        right = endSlot.offsetLeft + endSlot[property + \"Width\"];\n                    }\n                } else {\n                    var startOffset = start - startSlot.start;\n\n                    if (startOffset < 0) {\n                        startOffset = 0;\n                    }\n\n                    var startSlotDuration = startSlot.end - startSlot.start;\n\n                    top = startSlot.offsetTop + startSlot[property + \"Height\"] * startOffset / startSlotDuration;\n\n                    var endOffset = endSlot.end - end;\n\n                    if (endOffset < 0) {\n                        endOffset = 0;\n                    }\n\n                    var endSlotDuration = endSlot.end - endSlot.start;\n\n                    bottom = endSlot.offsetTop + endSlot[property + \"Height\"] - endSlot[property + \"Height\"] * endOffset / endSlotDuration;\n\n                    if (isRtl) {\n                        left = Math.round(endSlot.offsetLeft + endSlot[property + \"Width\"] * endOffset / endSlotDuration);\n                        right = Math.round(startSlot.offsetLeft + startSlot[property + \"Width\"] - startSlot[property + \"Width\"] * startOffset / startSlotDuration);\n                    } else {\n                        left = Math.round(startSlot.offsetLeft + startSlot[property + \"Width\"] * startOffset / startSlotDuration);\n                        right = Math.round(endSlot.offsetLeft + endSlot[property + \"Width\"] - endSlot[property + \"Width\"] * endOffset / endSlotDuration);\n                    }\n                }\n\n                return {\n                    top: top,\n                    bottom: bottom,\n                    //first column has no left border\n                    left: left === 0 ? left : left + 1,\n                    right: right\n                };\n            },\n\n            innerRect: function(start, end, snap) {\n                return this._rect(\"client\", start, end, snap);\n            }\n        });\n\n        var DaySlotRange = SlotRange.extend({\n            innerWidth: function() {\n                var collection = this.collection;\n\n                var startIndex = this.start.index;\n\n                var endIndex = this.end.index;\n\n                var result = 0;\n\n                var width = startIndex !== endIndex ? \"offsetWidth\" : \"clientWidth\";\n\n                for (var slotIndex = startIndex; slotIndex <= endIndex; slotIndex++) {\n                   result += collection.at(slotIndex)[width];\n                }\n\n                return result;\n            }\n        });\n\n        var SlotCollection = kendo.Class.extend({\n            init: function(startDate, endDate, groupIndex, collectionIndex) {\n                this._slots = [];\n\n                this._events = [];\n\n                this._start = kendo.date.toUtcTime(startDate);\n\n                this._end = kendo.date.toUtcTime(endDate);\n\n                this._groupIndex = groupIndex;\n\n                this._collectionIndex = collectionIndex;\n            },\n            refresh: function() {\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    this._slots[slotIndex].refresh();\n                }\n            },\n\n            startInRange: function(date) {\n                return this._start <= date && date < this._end;\n            },\n\n            endInRange: function(date, isAllDay) {\n                var end = isAllDay ? date < this._end : date <= this._end;\n                return this._start <= date && end;\n            },\n\n            slotByStartDate: function(date) {\n                var time = date;\n\n                if (typeof time != \"number\") {\n                    time = kendo.date.toUtcTime(date);\n                }\n\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    var slot = this._slots[slotIndex];\n\n                    if (slot.startInRange(time)) {\n                        return slot;\n                    }\n                }\n\n                return null;\n            },\n\n            slotByEndDate: function(date, allday) {\n                var time = date;\n\n                if (typeof time != \"number\") {\n                    time = kendo.date.toUtcTime(date);\n                }\n\n                if (allday) {\n                    return this.slotByStartDate(date, false);\n                }\n\n                for (var slotIndex = 0; slotIndex < this._slots.length; slotIndex++) {\n                    var slot = this._slots[slotIndex];\n\n                    if (slot.endInRange(time)) {\n                        return slot;\n                    }\n                }\n\n                return null;\n            },\n\n            count: function() {\n                return this._slots.length;\n            },\n            events: function() {\n                return this._events;\n            },\n            addTimeSlot: function(element, start, end, isHorizontal) {\n                var slot = new TimeSlot(element, start, end, this._groupIndex, this._collectionIndex, this._slots.length, isHorizontal);\n\n                this._slots.push(slot);\n            },\n            addDaySlot: function(element, start, end, eventCount) {\n                var slot = new DaySlot(element, start, end, this._groupIndex, this._collectionIndex, this._slots.length, eventCount);\n\n                this._slots.push(slot);\n            },\n            first: function() {\n                return this._slots[0];\n            },\n            last: function() {\n                return this._slots[this._slots.length - 1];\n            },\n            at: function(index) {\n                return this._slots[index];\n            }\n        });\n\n        var Slot = kendo.Class.extend({\n            init: function(element, start, end, groupIndex, collectionIndex, index) {\n                this.element = element;\n                this.clientWidth = element.clientWidth;\n                this.clientHeight = element.clientHeight;\n                this.offsetWidth = element.offsetWidth;\n                this.offsetHeight = element.offsetHeight;\n                this.offsetTop = element.offsetTop;\n                this.offsetLeft = element.offsetLeft;\n\n                this.start = start;\n                this.end = end;\n                this.element = element;\n                this.groupIndex = groupIndex;\n                this.collectionIndex = collectionIndex;\n                this.index = index;\n                this.isDaySlot = false;\n            },\n\n            refresh: function() {\n                var element = this.element;\n\n                this.clientWidth = element.clientWidth;\n                this.clientHeight = element.clientHeight;\n                this.offsetWidth = element.offsetWidth;\n                this.offsetHeight = element.offsetHeight;\n                this.offsetTop = element.offsetTop;\n                this.offsetLeft = element.offsetLeft;\n            },\n\n            startDate: function() {\n                return kendo.timezone.toLocalDate(this.start);\n            },\n\n            endDate: function() {\n                return kendo.timezone.toLocalDate(this.end);\n            },\n\n            startInRange: function(date) {\n                return this.start <= date && date < this.end;\n            },\n\n            endInRange: function(date) {\n                return this.start < date && date <= this.end;\n            },\n\n            startOffset: function() {\n               return this.start;\n            },\n\n            endOffset: function() {\n                return this.end;\n            }\n        });\n\n        var TimeSlot = Slot.extend({\n            init: function(element, start, end, groupIndex, collectionIndex, index, isHorizontal) {\n                Slot.fn.init.apply(this, arguments);\n\n                this.isHorizontal = isHorizontal ? true : false;\n            },\n\n            offsetX: function(rtl, offset) {\n                if (rtl) {\n                    return this.offsetLeft + offset;\n                } else {\n                    return this.offsetLeft + offset;\n                }\n            },\n\n            startInRange: function(date) {\n                return this.start <= date && date < this.end;\n            },\n\n            endInRange: function(date) {\n                return this.start < date && date <= this.end;\n            },\n\n            startOffset: function(x, y, snap) {\n                if (snap) {\n                    return this.start;\n                }\n\n                var offset = $(this.element).offset();\n\n                var duration = this.end - this.start;\n                var difference;\n                var time;\n\n                if (this.isHorizontal) {\n                    //need update\n                    var isRtl = kendo.support.isRtl(this.element);\n                    difference = x - offset.left;\n                    time = Math.floor(duration * ( difference / this.offsetWidth));\n\n                    if (isRtl) {\n                        return this.start + duration - time;\n                    }\n                } else {\n                    difference = y - offset.top;\n                    time = Math.floor(duration * ( difference / this.offsetHeight));\n                }\n\n                return this.start + time;\n            },\n\n            endOffset: function(x, y, snap) {\n                if (snap) {\n                    return this.end;\n                }\n\n                var offset = $(this.element).offset();\n\n                var duration = this.end - this.start;\n                var difference;\n                var time;\n\n                if (this.isHorizontal) {\n                    //need update\n                    var isRtl = kendo.support.isRtl(this.element);\n                    difference = x - offset.left;\n                    time = Math.floor(duration * ( difference / this.offsetWidth));\n\n                    if (isRtl) {\n                        return this.start + duration - time;\n                    }\n                } else {\n                    difference = y - offset.top;\n                    time = Math.floor(duration * ( difference / this.offsetHeight));\n                }\n\n                return this.start + time;\n            }\n        });\n\n        var DaySlot = Slot.extend({\n            init: function(element, start, end, groupIndex, collectionIndex, index, eventCount) {\n                Slot.fn.init.apply(this, arguments);\n\n                this.eventCount = eventCount;\n                this.isDaySlot = true;\n\n                if (this.element.children.length) {\n                    var firstChild = this.element.children[0];\n\n                    this.firstChildHeight = firstChild.offsetHeight;\n                    this.firstChildTop = firstChild.offsetTop;\n                } else {\n                    this.firstChildHeight = 3;\n                    this.firstChildTop = 0;\n                }\n            },\n\n            startDate: function() {\n                var date = new Date(this.start);\n\n                return kendo.timezone.apply(date, \"Etc/UTC\");\n            },\n\n            endDate: function() {\n                var date = new Date(this.end);\n\n                return kendo.timezone.apply(date, \"Etc/UTC\");\n            },\n\n            startInRange: function(date) {\n                return this.start <= date && date < this.end;\n            },\n\n            endInRange: function(date) {\n                return this.start < date && date <= this.end;\n            }\n        });\n\n        var scrollbarWidth;\n        function scrollbar() {\n            scrollbarWidth = scrollbarWidth ? scrollbarWidth : kendo.support.scrollbar();\n            return scrollbarWidth;\n        }\n\n        kendo.ui.SchedulerView = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, $.extend({}, this.options, options));\n\n                this._normalizeOptions();\n                this._initDefaultTools();\n                this._scrollbar = scrollbar();\n                this._isRtl = kendo.support.isRtl(element);\n                this._resizeHint = $();\n                this._moveHint = $();\n                this._cellId = kendo.guid();\n                this._resourcesForGroups();\n                this._selectedSlots = [];\n                this.element.attr(\"role\", \"application\");\n            },\n\n            options: {\n                messages: {\n                    ariaEventLabel: {\n                        on: \"on\",\n                        at: \"at\",\n                        to: \"to\",\n                        allDay: \"(all day)\",\n                        prefix: \"\"\n                    }\n                }\n            },\n\n            visibleEndDate: function() {\n                return this.endDate();\n            },\n\n            _initDefaultTools: function() {\n                this._defaultTools = {\n                    todayMobile: {\n                        type: \"button\",\n                        fillMode: \"flat\",\n                        text: this.options.messages.today,\n                        click: this._footerTodayClickHandler.bind(this),\n                        attributes: {\n                            class: \"k-scheduler-today\"\n                        }\n                    },\n                    fulldayDesktop: {\n                        type: \"button\",\n                        icon: \"clock\",\n                        text: this.options.showWorkHours ? this.options.messages.showFullDay : this.options.messages.showWorkDay,\n                        click: this.toggleFullDay ? this.toggleFullDay.bind(this) : $.noop,\n                        attributes: {\n                            class: \"k-scheduler-fullday\"\n                        }\n                    },\n                    fulldayMobile: {\n                        type: \"button\",\n                        fillMode: \"flat\",\n                        text: this.options.showWorkHours ? this.options.messages.showFullDay : this.options.messages.showWorkDay,\n                        click: this.toggleFullDay ? this.toggleFullDay.bind(this) : $.noop,\n                        attributes: {\n                            class: \"k-scheduler-fullday\"\n                        }\n                    }\n                };\n            },\n\n            _normalizeOptions: function() {\n                var options = this.options;\n\n                if (options.startTime) {\n                    options.startTime.setMilliseconds(0);\n                }\n\n                if (options.endTime) {\n                    options.endTime.setMilliseconds(0);\n                }\n\n                if (options.workDayStart) {\n                    options.workDayStart.setMilliseconds(0);\n                }\n\n                if (options.workDayEnd) {\n                    options.workDayEnd.setMilliseconds(0);\n                }\n            },\n\n            _isMobile: function() {\n                var options = this.options;\n                return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n            },\n\n            _addResourceView: function() {\n                var resourceView = new ResourceView(this.groups.length, this._isRtl, this.options.enforceAllDaySlot);\n\n                this.groups.push(resourceView);\n\n                return resourceView;\n            },\n\n            _refreshResourceViews: function() {\n                var groups = this.groups;\n\n                if (groups) {\n                    for (var i = 0; i < groups.length; i++) {\n                        groups[i]._refreshSlotCollections();\n                    }\n                }\n            },\n\n            dateForTitle: function() {\n                return kendo.format(this.options.selectedDateFormat, this.startDate(), this.endDate());\n            },\n\n            shortDateForTitle: function() {\n                return kendo.format(this.options.selectedShortDateFormat, this.startDate(), this.endDate());\n            },\n\n            mobileDateForTitle: function() {\n                return kendo.format(this.options.selectedMobileDateFormat || this.options.selectedShortDateFormat, this.startDate(), this.endDate());\n            },\n\n            _changeGroup: function(selection, previous) {\n                var method = previous ? \"prevGroupSlot\" : \"nextGroupSlot\";\n                var slot = this[method](selection.start, selection.groupIndex, selection.isAllDay);\n\n                if (slot) {\n                    selection.groupIndex += previous ? -1 : 1;\n                }\n\n                if (this._isGroupedByDate() && !slot) {\n                   selection.groupIndex = previous ? this.groups.length - 1 : 0;\n                }\n\n                return slot;\n            },\n\n            _changeDate: function(selection, slot, previous) {\n                var group = this.groups[selection.groupIndex];\n                var collections, index;\n\n                if (previous) {\n                      collections = group._getCollections(false);\n                      index = group.daySlotCollectionCount() ? slot.index - 1 : slot.collectionIndex - 1;\n\n                      if (index >= 0) {\n                          return collections[index]._slots[collections[index]._slots.length - 1];\n                      }\n                  } else {\n                      collections = group._getCollections(group.daySlotCollectionCount());\n                      index = group.daySlotCollectionCount() ? 0 : slot.collectionIndex + 1;\n                      var slotIndex = group.daySlotCollectionCount() ? slot.collectionIndex + 1 : 0;\n\n                      if (collections[index] && collections[index]._slots[slotIndex]) {\n                          return collections[index]._slots[slotIndex];\n                      }\n                   }\n            },\n\n            _changeGroupContinuously: function() {\n                return null;\n            },\n\n            _changeViewPeriod: function() {\n                return false;\n            },\n\n            _isInRange: function(newStart, newEnd) {\n                if (!newStart || !newEnd || !this.options.min || !this.options.max) {\n                    return false;\n                }\n                return getDate(newStart) <= getDate(this.options.min) || getDate(newEnd) >= getDate(this.options.max);\n            },\n\n            _horizontalSlots: function(selection, ranges, multiple, reverse) {\n                var method = reverse ? \"leftSlot\" : \"rightSlot\";\n                var horizontalRange = {\n                     startSlot: ranges[0].start,\n                     endSlot: ranges[ranges.length - 1].end\n                 };\n                var group = this.groups[selection.groupIndex];\n                var isVertical = this._isVerticallyGrouped();\n\n                if (!multiple) {\n                    var slot = this._normalizeHorizontalSelection(selection, ranges, reverse);\n                    if (slot) {\n                        horizontalRange.startSlot = horizontalRange.endSlot = slot;\n                    }\n                }\n\n                if (this._isGroupedByDate() && !multiple) {\n                      var tempSlot = this._changeGroup(selection, reverse);\n\n                      if (!tempSlot)\n                      {\n                        horizontalRange = this._getNextHorizontalRange(group, method, horizontalRange);\n                      } else {\n                          horizontalRange.startSlot = horizontalRange.endSlot = tempSlot;\n                      }\n                } else {\n                      horizontalRange.startSlot = group[method](horizontalRange.startSlot);\n                      horizontalRange.endSlot = group[method](horizontalRange.endSlot);\n\n                      if (!multiple && !isVertical && (!horizontalRange.startSlot || !horizontalRange.endSlot)) {\n                            horizontalRange.startSlot = horizontalRange.endSlot = this._changeGroup(selection, reverse);\n                      }\n                }\n\n                var continuousSlot;\n\n                if ((!horizontalRange.startSlot || !horizontalRange.endSlot) && !this._isGroupedByDate()) {\n                    continuousSlot = this._continuousSlot(selection, ranges, reverse);\n                    continuousSlot = this._changeGroupContinuously(selection, continuousSlot, multiple, reverse);\n\n                    if (continuousSlot) {\n                        horizontalRange.startSlot = horizontalRange.endSlot = continuousSlot;\n                    }\n                }\n\n                return horizontalRange;\n            },\n\n             _getNextHorizontalRange: function(group, method, horizontalRange) {\n                if (!this._isVerticallyGrouped()) {\n                    horizontalRange.startSlot = group[method](horizontalRange.startSlot);\n                    horizontalRange.endSlot = group[method](horizontalRange.endSlot);\n                }\n\n                 return horizontalRange;\n            },\n\n            _verticalSlots: function(selection, ranges, multiple, reverse) {\n                var group = this.groups[selection.groupIndex];\n                var slot;\n                var verticalRange = {\n                    startSlot: ranges[0].start,\n                    endSlot: ranges[ranges.length - 1].end\n                };\n\n                if (!multiple) {\n                    slot = this._normalizeVerticalSelection(selection, ranges, reverse);\n                    if (slot) {\n                        verticalRange.startSlot = verticalRange.endSlot = slot;\n                    }\n                }\n\n                var method = reverse ? \"upSlot\" : \"downSlot\";\n\n                verticalRange = this._getNextVerticalRange(group, method, verticalRange, multiple);\n\n                if (!multiple && this._isVerticallyGrouped() && (!verticalRange.startSlot || !verticalRange.endSlot)) {\n                    if (this._isGroupedByDate()) {\n                        verticalRange.startSlot = verticalRange.endSlot = this._changeDate(selection, slot, reverse);\n\n                   } else {\n                        verticalRange.startSlot = verticalRange.endSlot = this._changeGroup(selection, reverse);\n                   }\n                }\n\n                return verticalRange;\n            },\n\n            _getNextVerticalRange: function(group, method, verticalRange, multiple) {\n                 verticalRange.startSlot = group[method](verticalRange.startSlot, multiple);\n                 verticalRange.endSlot = group[method](verticalRange.endSlot, multiple);\n\n                 return verticalRange;\n            },\n\n            _normalizeHorizontalSelection: function() {\n                return null;\n            },\n\n            _normalizeVerticalSelection: function(selection, ranges, reverse) {\n                var slot;\n\n                if (reverse) {\n                    slot = ranges[0].start;\n                } else {\n                    slot = ranges[ranges.length - 1].end;\n                }\n\n                return slot;\n            },\n\n            _continuousSlot: function() {\n                return null;\n            },\n\n            _footerTodayClickHandler: function(e) {\n                e.preventDefault();\n\n                var that = this;\n                var options = that.options;\n                var timezone = that.options.timezone;\n                var action = \"today\";\n                var currentDate = new Date();\n                var date;\n\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                that.trigger(\"navigate\", { view: that.name || options.name, action: action, date: date });\n            },\n\n            _footerItems: function() {\n                var that = this,\n                    items = [],\n                    options = this.options;\n\n                if (that._isMobile()) {\n                    items.push({\n                        type: \"button\",\n                        fillMode: \"flat\",\n                        text: options.messages.today,\n                        click: that._footerTodayClickHandler.bind(that),\n                        attributes: {\n                            class: \"k-scheduler-today\"\n                        }\n                    });\n                }\n\n                return items;\n            },\n\n            _footer: function() {\n                if (this.options.footer === false) {\n                    return;\n                }\n\n                var that = this,\n                    items = that._footerItems();\n\n                if (items.length > 0) {\n                    var html = $('<div class=\"k-scheduler-footer\">');\n\n                    that.footer = html.appendTo(that.element);\n\n                    that.footer.kendoToolBar({\n                        resizable: false,\n                        items: items\n                    });\n                }\n            },\n\n            constrainSelection: function(selection) {\n                var group = this.groups[0];\n                var slot;\n\n                if (!this.inRange(selection)) {\n                   slot = group.firstSlot();\n\n                   selection.isAllDay = slot.isDaySlot;\n                   selection.start = slot.startDate();\n                   selection.end = slot.endDate();\n                } else {\n                    if (!group.daySlotCollectionCount()) {\n                        selection.isAllDay = false;\n                    } else if (!group.timeSlotCollectionCount()) {\n                        selection.isAllDay = true;\n                    }\n               }\n\n                if (!this.groups[selection.groupIndex]) {\n                    selection.groupIndex = 0;\n                }\n            },\n\n            move: function(selection, key, shift) {\n                var handled = false;\n                var group = this.groups[selection.groupIndex];\n                var verticalByDate = this._isGroupedByDate() && this._isVerticallyGrouped();\n\n                if (!group.timeSlotCollectionCount()) {\n                    selection.isAllDay = true;\n                }\n\n                var ranges = group.ranges(selection.start, selection.end, selection.isAllDay, false);\n                var startSlot, endSlot, reverse, slots;\n\n                if (key === keys.DOWN || key === keys.UP) {\n                    handled = true;\n                    reverse = key === keys.UP;\n\n                    this._updateDirection(selection, ranges, shift, reverse, true);\n\n                    slots = this._verticalSlots(selection, ranges, shift, reverse);\n\n                    if (!slots.startSlot && !shift && this._changeViewPeriod(selection, reverse, !verticalByDate)) {\n                        return handled;\n                    }\n\n                } else if (key === keys.LEFT || key === keys.RIGHT) {\n                    handled = true;\n                    reverse = key === keys.LEFT;\n\n                    this._updateDirection(selection, ranges, shift, reverse, false);\n\n                    slots = this._horizontalSlots(selection, ranges, shift, reverse);\n\n                    if (!slots.startSlot && !shift && this._changeViewPeriod(selection, reverse, verticalByDate)) {\n                        return handled;\n                    }\n                }\n\n                if (handled) {\n                    startSlot = slots.startSlot;\n                    endSlot = slots.endSlot;\n\n                    if (shift) {\n                        var backward = selection.backward;\n                        if (backward && startSlot) {\n                            selection.start = startSlot.startDate();\n                        } else if (!backward && endSlot) {\n                            selection.end = endSlot.endDate();\n                        }\n                    } else if (startSlot && endSlot) {\n                        selection.isAllDay = startSlot.isDaySlot;\n                        selection.start = startSlot.startDate();\n                        selection.end = endSlot.endDate();\n                    }\n\n                    selection.events = [];\n                }\n\n                return handled;\n            },\n\n            moveToEventInGroup: function(group, slot, selectedEvents, prev) {\n                var events = group._continuousEvents || [];\n                var found, event;\n                var pad = prev ? -1 : 1;\n                var length = events.length;\n                var idx = prev ? length - 1 : 0;\n                var i, lastSelected;\n\n                if (selectedEvents.length) {\n                    lastSelected = selectedEvents[selectedEvents.length - 1];\n\n                    if (prev) {\n                        for (i = 0; i < events.length; i++) {\n                            if (events[i].uid === lastSelected) {\n                                idx = i + pad;\n                            }\n                        }\n                    } else {\n                        for (i = events.length - 1; i > -1; i--) {\n                            if (events[i].uid === lastSelected) {\n                                idx = i + pad;\n                            }\n                        }\n                    }\n                }\n\n                while (idx < length && idx > -1) {\n                    event = events[idx];\n\n                    if ( (!prev && event.start.startDate() >= slot.startDate()) ||\n                        (prev && event.start.startDate() <= slot.startDate()) ) {\n\n                        if (event && $.inArray(event.uid, selectedEvents) === -1) {\n                            found = !!event;\n                            break;\n                        }\n                    }\n\n                    idx += pad;\n                }\n\n                return event;\n            },\n\n            moveToEvent: function(selection, prev) {\n                var groupIndex = selection.groupIndex;\n\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(selection.start, selection.end, this.name === \"month\" || selection.isAllDay, false)[0].start;\n\n                var length = this.groups.length;\n                var pad = prev ? -1 : 1;\n                var events = selection.events;\n                var event;\n\n                if (this._isGroupedByDate()) {\n                    var allEvents = this._getAllEvents();\n                    var uniqueAllEvents = this._getUniqueEvents(allEvents);\n                    var sortedEvents = this._getSortedEvents(uniqueAllEvents);\n\n                    if (events.length === 0) {\n                        var eventIndex = this._getNextEventIndexBySlot(slot, sortedEvents, groupIndex);\n\n                        if (prev) {\n                            eventIndex--;\n                        }\n\n                        event = sortedEvents[eventIndex];\n                    } else {\n                         var idx = this._getStartIdx(events, sortedEvents);\n\n                        while (idx < sortedEvents.length && idx > -1) {\n                            if (events.length > 0) {\n                                slot = this._getSelectedSlot(slot, sortedEvents, event, idx, pad, prev);\n                            }\n\n                            if (!slot) {\n                                break;\n                            }\n\n                            if ( (!prev && sortedEvents[idx].start.startDate() >= slot.startDate()) ||\n                                  (prev && sortedEvents[idx].start.startDate() <= slot.startDate())) {\n                                 if (events[0] != sortedEvents[idx].uid) {\n                                     event = sortedEvents[idx];\n                                      break;\n                                 }\n                            }\n                            idx += pad;\n                        }\n                    }\n                } else {\n                      while (groupIndex < length && groupIndex > -1) {\n                        event = this.moveToEventInGroup(group, slot, events, prev);\n\n                        groupIndex += pad;\n                        group = this.groups[groupIndex];\n\n                        if (!group || event) {\n                            break;\n                        }\n\n                        events = [];\n                        if (prev) {\n                            slot = group.lastSlot();\n                        } else {\n                            slot = group.firstSlot(true);\n                        }\n                    }\n                }\n\n                if (event) {\n                    selection.events = [ event.uid ];\n                    selection.start = event.start.startDate();\n                    selection.end = event.end.endDate();\n                    selection.isAllDay = event.start.isDaySlot;\n                    selection.groupIndex = event.start.groupIndex;\n                    selection.eventElement = event.element[0];\n                }\n\n                return !!event;\n            },\n\n            current: function(candidate) {\n                if (candidate !== undefined) {\n                    this._current = candidate;\n                    if (this.content.has(candidate)) {\n                        this._scrollTo(candidate, this.content[0]);\n                    }\n                } else {\n                    return this._current;\n                }\n            },\n\n            select: function(selection) {\n                this.clearSelection();\n\n                if (!this._selectEvents(selection)) {\n                    this._selectSlots(selection);\n                }\n            },\n\n            _getNextEventIndexBySlot: function(slot, sortedEvents, groupIndex) {\n                var tempIndex = 0;\n                var slotStartDate = kendo.date.getDate(slot.startDate());\n\n                for (var i = 0; i < sortedEvents.length; i++) {\n                    var eventStartDate = kendo.date.getDate(sortedEvents[i].start.startDate());\n                    if (slotStartDate > eventStartDate) {\n                        tempIndex++;\n                        continue;\n                    }\n\n                    if (slotStartDate.getTime() === eventStartDate.getTime() && groupIndex > sortedEvents[i].start.groupIndex) {\n                          tempIndex++;\n                          continue;\n                    }\n\n                    if (slotStartDate.getTime() === eventStartDate.getTime() &&\n                        groupIndex >= sortedEvents[i].start.groupIndex &&\n                        slot.startDate() > sortedEvents[i].start.startDate()) {\n                        tempIndex++;\n                        continue;\n                     }\n\n                     break;\n                }\n                return tempIndex;\n            },\n\n            _getSelectedSlot: function(slot, sortedEvents, event, idx, pad, prev) {\n                  if (sortedEvents[idx + pad] &&\n                   sortedEvents[idx].start.groupIndex !== sortedEvents[idx + pad].start.groupIndex) {\n                        var groupIndex = sortedEvents[idx + pad].start.groupIndex;\n                        var group = this.groups[groupIndex];\n\n                        if (!group || event) {\n                           slot = null;\n                        }\n\n                        if (prev) {\n                            slot = group.lastSlot();\n                        } else {\n                            slot = group.firstSlot(true);\n                        }\n                    }\n                 return slot;\n            },\n\n            _getStartIdx: function(events, sortedEvents) {\n                var selectedEventIndex = 0;\n\n                $.each(sortedEvents, function() {\n                    if (this.uid === events[0]) {\n                         return false;\n                    }\n\n                    selectedEventIndex++;\n                });\n\n                return selectedEventIndex;\n            },\n\n            _getAllEvents: function() {\n                var allEvents = [];\n                var groups = this.groups;\n\n                for (var idx = 0; idx < groups.length; idx++) {\n                    if (groups[idx]._continuousEvents) {\n                        allEvents = allEvents.concat(groups[idx]._continuousEvents);\n                    }\n                }\n\n                return allEvents;\n            },\n\n            _getUniqueEvents: function(allEvents) {\n                var uniqueAllEvents = [];\n\n                for (var i = 0; i < allEvents.length; i++) {\n                    var exists = false;\n                    for (var j = 0; j < uniqueAllEvents.length; j++) {\n                        if (allEvents[i].uid === uniqueAllEvents[j].uid) {\n                            exists = true;\n                            break;\n                        }\n                    }\n\n                    if (!exists) {\n                        uniqueAllEvents.push(allEvents[i]);\n                    }\n                }\n\n                return uniqueAllEvents;\n            },\n\n            _getSortedEvents: function(uniqueAllEvents) {\n                 return uniqueAllEvents.sort(function(first, second) {\n                    var firstStartDate = first.start.startDate();\n                    var secondStartDate = second.start.startDate();\n                    var result = kendo.date.getDate(firstStartDate) - kendo.date.getDate(secondStartDate);\n\n                    if (result === 0) {\n                        result = first.start.groupIndex - second.start.groupIndex;\n                    }\n\n                    if (result === 0) {\n                        result = firstStartDate.getTime() - secondStartDate.getTime();\n                    }\n\n                    if (result === 0) {\n                        if (first.start.isDaySlot && !second.start.isDaySlot) {\n                                result = -1;\n                        }\n\n                        if (!first.start.isDaySlot && second.start.isDaySlot) {\n                                result = 1;\n                        }\n                    }\n\n                    if (result === 0) {\n                        result = $(first.element).index() - $(second.element).index();\n                    }\n\n                    return result;\n                });\n            },\n\n            _selectSlots: function(selection) {\n                var isAllDay = selection.isAllDay;\n                var group = this.groups[selection.groupIndex];\n\n                if (!group.timeSlotCollectionCount()) {\n                    isAllDay = true;\n                }\n\n                this._selectedSlots = [];\n\n                var ranges = group.ranges(selection.start, selection.end, isAllDay, false);\n                var element;\n                var slot;\n\n                for (var rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {\n                    var range = ranges[rangeIndex];\n                    var collection = range.collection;\n\n                    for (var slotIndex = range.start.index; slotIndex <= range.end.index; slotIndex++) {\n                        slot = collection.at(slotIndex);\n\n                        element = slot.element;\n                        addSelectedState(element);\n\n                        this._selectedSlots.push({\n                            start: slot.startDate(),\n                            end: slot.endDate(),\n                            element: element\n                        });\n                    }\n                }\n\n                if (selection.backward) {\n                    element = ranges[0].start.element;\n                }\n\n                this.current(element);\n            },\n\n            _selectEvents: function(selection) {\n                var found = false;\n                var events = selection.events;\n                var groupEvents = this._getAllEvents();\n                var idx, groupEvent, length = groupEvents.length;\n\n                if (!events[0] || !groupEvents[0]) {\n                    return found;\n                }\n\n                var result = $();\n                selection.events = [];\n                for (idx = 0; idx < length; idx ++) {\n                    if ($.inArray(groupEvents[idx].uid, events) > -1) {\n                        groupEvent = groupEvents[idx];\n                        result = result.add(groupEvent.element);\n                        if (selection.events.indexOf(groupEvent.uid) === -1) {\n                            selection.events.push(groupEvent.uid);\n                        }\n                    }\n                }\n\n                if (result[0]) {\n                    result.addClass(\"k-selected\");\n\n                    if (selection.eventElement) {\n                        this.current(selection.eventElement);\n                    } else {\n                        this.current(result.last()[0]);\n                    }\n\n                    this._selectedSlots = [];\n                    found = true;\n                }\n\n                return found;\n            },\n\n            inRange: function(options) {\n                var startDate = this.startDate();\n                var endDate = kendo.date.addDays(this.endDate(), 1);\n                var start = options.start;\n                var end = options.end;\n\n                return startDate <= start && start < endDate && startDate < end && end <= endDate;\n            },\n\n            _resourceValue: function(resource, item) {\n                if (resource.valuePrimitive) {\n                    item = kendo.getter(resource.dataValueField)(item);\n                }\n                return item;\n            },\n\n            _setResourceValue: function(groupLevelMember, resource, result) {\n                var value = groupLevelMember.value,\n                    setter;\n\n                if (resource.multiple) {\n                    value = [value];\n                }\n\n                setter = kendo.setter(resource.field);\n                setter(result, value);\n            },\n\n            _resourceBySlot: function(slot) {\n                var resources = this.groupedResources;\n                var result = {};\n\n                if (resources.length) {\n                    var resourceIndex = slot.groupIndex,\n                        groupOptions = this.options.group,\n                        nestedMember = groupOptions.date || groupOptions.orientation === \"horizontal\" ? \"columns\" : \"rows\",\n                        levels = nestedMember === \"rows\" ? this.rowLevels : this.columnLevels,\n                        dateGroupCompensation = groupOptions.date && groupOptions.orientation === \"horizontal\" ? 1 : 0,\n                        groupLevel = levels[resources.length - 1 + dateGroupCompensation],\n                        resource = resources[resources.length - 1],\n                        groupLevelMember = groupLevel[resourceIndex],\n                        passedChildren, numberOfChildren, j, i;\n\n                    this._setResourceValue(groupLevelMember, resource, result);\n\n                    for (j = resources.length - 2; j >= 0; j--) {\n                        groupLevel = levels[j + dateGroupCompensation];\n                        resource = resources[j];\n                        passedChildren = 0;\n\n                        for (i = 0; i < groupLevel.length; i++) {\n                            groupLevelMember = groupLevel[i];\n                            numberOfChildren = groupLevelMember[nestedMember].length;\n\n                            if (numberOfChildren > resourceIndex - passedChildren) {\n                                this._setResourceValue(groupLevelMember, resource, result);\n\n                                i = groupLevel.length;\n                            } else {\n                                passedChildren += numberOfChildren;\n                            }\n                        }\n                    }\n                }\n\n                return result;\n            },\n\n            _createResizeHint: function(left, top, width, height) {\n                return $(HINT).css({\n                    left: left,\n                    top: top,\n                    width: width,\n                    height: height\n                });\n            },\n\n            _removeResizeHint: function() {\n                this._resizeHint.remove();\n                this._resizeHint = $();\n            },\n\n            _removeMoveHint: function(uid) {\n                if (uid) {\n                    this._moveHint.filter(\"[data-uid='\" + uid + \"']\").remove();\n\n                    this._moveHint = this._moveHint.filter(\"[data-uid!='\" + uid + \"']\");\n                } else {\n                    this._moveHint.remove();\n                    this._moveHint = $();\n                }\n            },\n\n            _scrollTo: function(element, container) {\n                var elementOffset = element.offsetTop,\n                    elementOffsetDir = element.offsetHeight,\n                    containerScroll = container.scrollTop,\n                    containerOffsetDir = container.clientHeight,\n                    bottomDistance = elementOffset + elementOffsetDir,\n                    result = 0;\n\n                    if (containerScroll > elementOffset) {\n                        result = elementOffset;\n                    } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                        if (elementOffsetDir <= containerOffsetDir) {\n                            result = (bottomDistance - containerOffsetDir);\n                        } else {\n                            result = elementOffset;\n                        }\n                    } else {\n                        result = containerScroll;\n                    }\n                    container.scrollTop = result;\n            },\n\n            _inverseEventColor: function(element) {\n                var eventColor = element.css(\"color\");\n                var eventColorIsDark = new Color(eventColor).isDark();\n                var eventBackground = element.css(\"background-color\");\n                var eventBackgroundIsDark = new Color(eventBackground).isDark();\n\n                if (eventColorIsDark == eventBackgroundIsDark) {\n                    element.addClass(INVERSE_COLOR_CLASS);\n                }\n            },\n\n            // Possibly legacy code. Ensure clients do not use it before removing. Or throw warning.\n            // CSP: leave it as it is (for now).\n           _eventTmpl: function(template, wrapper) {\n               var options = this.options,\n                   settings = $.extend({}, kendo.Template, options.templateSettings),\n                   paramName = settings.paramName,\n                   html = \"\",\n                   type = typeof template,\n                   state = { storage: {}, count: 0 };\n\n                if (type === \"function\") {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                    state.count ++;\n                } else if (type === \"string\") {\n                    html += template;\n                }\n\n                var tmpl = kendo.template(kendo.format(wrapper, html), settings);\n\n                if (state.count > 0) {\n                    tmpl = tmpl.bind(state.storage);\n                }\n\n                return tmpl;\n           },\n\n            eventResources: function(event) {\n                var resources = [],\n                    options = this.options;\n\n                if (!options.resources) {\n                    return resources;\n                }\n\n                for (var idx = 0; idx < options.resources.length; idx++) {\n                    var resource = options.resources[idx];\n                    var field = resource.field;\n                    var eventResources = kendo.getter(field)(event);\n\n                    if (eventResources == null) {\n                        continue;\n                    }\n\n                    if (!resource.multiple) {\n                        eventResources = [eventResources];\n                    }\n\n                    var data = resource.dataSource.view();\n\n                    for (var resourceIndex = 0; resourceIndex < eventResources.length; resourceIndex++) {\n                        var eventResource = null;\n\n                        var value = eventResources[resourceIndex];\n\n                        if (!resource.valuePrimitive) {\n                            value = kendo.getter(resource.dataValueField)(value);\n                        }\n\n                        for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                            if (data[dataIndex].get(resource.dataValueField) == value) {\n                                eventResource = data[dataIndex];\n                                break;\n                            }\n                        }\n\n                        if (eventResource !== null) {\n                            var resourceColor = kendo.getter(resource.dataColorField)(eventResource);\n                            resources.push({\n                                field: resource.field,\n                                title: resource.title,\n                                name: resource.name,\n                                text: kendo.getter(resource.dataTextField)(eventResource),\n                                value: value,\n                                color: resourceColor\n                            });\n                        }\n                    }\n                }\n                return resources;\n            },\n\n            createLayout: function(layout) {\n                var allDayIndex = -1;\n\n                if (!layout.rows) {\n                    layout.rows = [];\n                }\n\n                for (var idx = 0; idx < layout.rows.length; idx++) {\n                    if (layout.rows[idx].allDay) {\n                        allDayIndex = idx;\n                        break;\n                    }\n                }\n\n                var allDaySlot = layout.rows[allDayIndex];\n\n                if (allDayIndex >= 0) {\n                    layout.rows.splice(allDayIndex, 1);\n                }\n\n                var columnLevels = this.columnLevels = levels(layout, \"columns\");\n                var rowLevels = this.rowLevels = levels(layout, \"rows\");\n\n                if (this._isVirtualized()) {\n                    this._trimRowLevels(rowLevels);\n                }\n\n                this.table = $('<table role=\"presentation\" class=\"k-scheduler-layout k-scheduler-' + this.name + 'view\"><tbody></tbody></table>');\n\n                var rowCount = rowLevels[rowLevels.length - 1].length;\n\n                this.table.find(\"tbody\").first().append(this._topSection(columnLevels, allDaySlot, rowCount));\n                this.table.find(\"tbody\").first().append(this._bottomSection(columnLevels, rowLevels, rowCount));\n                this.element.append(this.table);\n\n                if (this._isVirtualized()) {\n                    this._updateDomRowLevels();\n                }\n\n                // Enable horizontal scrolling when mobile, grouped and less than 1024px width\n                if (this._isMobile() &&\n                        columnLevels.length > 1 &&\n                        this._groupOrientation() === \"horizontal\" &&\n                        kendo._outerWidth($(window)) < MIN_HORIZONTAL_SCROLL_SIZE ) {\n\n                    this.table.find(\".k-scheduler-content .k-scheduler-table\").width((columnLevels[columnLevels.length - 2].length * 100) + \"%\");\n                    this.table.find(\".k-scheduler-header .k-scheduler-table\").width((columnLevels[columnLevels.length - 2].length * 100) + \"%\");\n                }\n\n                this._scroller();\n            },\n\n            _isVirtualized: function() {\n                return this.options.virtual && this.rowLevels.length > 1 && this._isVerticallyGrouped();\n            },\n\n            _trimRowLevels: function(rowLevels) {\n                var lastGroup = rowLevels[rowLevels.length - 2];\n                var cachedRowLevels = this.cachedRowLevels || [];\n                var levelMarker;\n\n                this._hasContentToRender = true;\n\n                var stopAtLevel = function(levels, index) {\n                    var hasParent = levels[index - 1].length > 0,\n                    parentLevel, parentValue;\n\n                    if (hasParent) {\n                        parentLevel = levels[index - 1][0];\n                        parentValue = levels[index][0].parentValue;\n\n                        return parentLevel.value !== parentValue;\n                    } else {\n                        return true;\n                    }\n                };\n\n                for (var rowLevelIndex = rowLevels.length - 2; rowLevelIndex >= 0; rowLevelIndex--) {\n                    var stop = false;\n                    if (rowLevelIndex > 0 && stopAtLevel(rowLevels, rowLevelIndex)) {\n                        stop = true;\n                        levelMarker = rowLevelIndex;\n                    }\n\n                    cachedRowLevels[rowLevelIndex] = rowLevels[rowLevelIndex].splice(1);\n\n                    if (rowLevelIndex < rowLevels.length - 2 && rowLevels[rowLevelIndex][0].rows.length != 1) {\n                        rowLevels[rowLevelIndex][0].rows = rowLevels[rowLevelIndex + 1];\n                    }\n\n                    if (stop) {\n                        break;\n                    }\n                }\n\n                cachedRowLevels[rowLevels.length - 1] = rowLevels[rowLevels.length - 1].splice(lastGroup[0].rows.length);\n\n                this.cachedRowLevels = cachedRowLevels;\n\n                if (!cachedRowLevels[cachedRowLevels.length - 1].length) {\n                    this._hasContentToRender = false;\n                }\n\n                return {\n                    levelMarker: levelMarker || 0,\n                    rowLevels: rowLevels\n                };\n            },\n\n            createNextLayout: function() {\n                var clone = [];\n                var trimmedRowLevels;\n                var rowLevels;\n                var levelMarker;\n                var rowCount;\n\n                for (var rowLevelIndex = 0; rowLevelIndex < this.cachedRowLevels.length; rowLevelIndex++) {\n                    clone[rowLevelIndex] = this.cachedRowLevels[rowLevelIndex];\n                }\n\n                trimmedRowLevels = this._trimRowLevels(clone);\n                rowLevels = trimmedRowLevels.rowLevels.splice(trimmedRowLevels.levelMarker);\n                levelMarker = trimmedRowLevels.levelMarker;\n                rowCount = rowLevels[rowLevels.length - 1].length;\n\n                delete this._height;\n\n                for (var i = levelMarker; i < this.rowLevels.length; i++) {\n                    this.rowLevels[i] = this.rowLevels[i].concat(rowLevels[i - levelMarker]);\n                }\n\n                this.table\n                    .find(\".k-scheduler-times\").last().find(\"tbody\")\n                    .append(this._times(rowLevels, rowCount, this._isMobile()).find(\"tr\"));\n\n                this._updateDomRowLevels();\n\n                if (levelMarker > 0) {\n                    for (i = 0; i < levelMarker; i++) {\n                        var cell = this.table.find(\"[data-row-level=\" + i + \"]\").last();\n                        var rowSpan = parseInt(cell.attr(\"rowspan\"),10) + rowCount;\n                        cell.attr(\"rowspan\", rowSpan);\n                    }\n                }\n\n                this._virtualContent(rowLevels, this.columnLevels);\n                this.render(this._cachedEvents);\n            },\n\n            _tryRenderContent: function() {\n                var that = this;\n                var bufferHeight = that.table.innerHeight();\n                var height = that.content.find(\"table\").innerHeight();\n                var scrollTop = that.content.scrollTop();\n\n                while (that._hasContentToRender && height - bufferHeight < scrollTop) {\n                    that.createNextLayout();\n                    height = that.content.find(\"table\").innerHeight();\n                }\n            },\n\n            _isSchedulerHeightSet: function() {\n                var el = this.element;\n                var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(\"auto\");\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n            },\n\n            _updateDomRowLevels: function() {\n                var that = this;\n                var groupCells = that.times.find(\".k-scheduler-group-cell:not([data-row-level])\");\n\n                if (!this._rowLevelIndices) {\n                    this._rowLevelIndices = groupCells.map(function(index, item) {\n                        $(item).attr(\"data-row-level\", index);\n                        return index;\n                    }).toArray().reverse();\n                    return;\n                }\n\n                groupCells = groupCells.toArray().reverse();\n\n                for (var i = 0; i <= groupCells.length; i++) {\n                    $(groupCells[i]).attr(\"data-row-level\", this._rowLevelIndices[i]);\n                }\n            },\n\n            refreshLayout: function() {\n                var that = this,\n                    toolbar = that.element.find(\"> .k-scheduler-toolbar\"),\n                    height = that.element.innerHeight(),\n                    scrollbar = this._scrollbar,\n                    headerHeight = 0,\n                    paddingDirection = this._isRtl ? \"left\" : \"right\";\n\n                for (var idx = 0; idx < toolbar.length; idx++) {\n                    height -= outerHeight(toolbar.eq(idx));\n                }\n\n                if (that.datesHeader) {\n                    headerHeight = outerHeight(that.datesHeader);\n                }\n\n                if (that.timesHeader && outerHeight(that.timesHeader) > headerHeight) {\n                    headerHeight = outerHeight(that.timesHeader);\n                }\n\n                if (that.datesHeader && that.timesHeader) {\n                    var datesHeaderRows = that.datesHeader.find(\"table\").first().find(\"tr\");\n\n                    that.timesHeader.find(\"tr\").height(function(index) {\n                        $(this).height(datesHeaderRows.eq(index).height());\n                    });\n                }\n\n                if (headerHeight) {\n                    height -= headerHeight;\n                }\n\n                if (that.footer) {\n                    height -= outerHeight(that.footer);\n                }\n\n                var contentDiv = that.content[0],\n                    scrollbarWidth = !kendo.support.kineticScrollNeeded ? scrollbar : 0;\n\n                if (this._isSchedulerHeightSet()) { // set content height only if needed\n\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n\n                    if (that.times) {\n                        that.times.height(contentDiv.clientHeight);\n\n                        var timesTable = that.times.find(\"table\");\n                        if (timesTable.length) {\n                            timesTable.height(that.content.find(\"table\")[0].clientHeight);\n                        }\n                    }\n                }\n\n                if (that.table) {\n                    if (contentDiv.offsetWidth - contentDiv.clientWidth > 0) {\n                        that.table.addClass(\"k-scrollbar-v\");\n                        that.datesHeader.css(\"padding-\" + paddingDirection, scrollbarWidth - parseInt(that.datesHeader.children().css(\"border-\" + paddingDirection + \"-width\"), 10));\n                    } else {\n                        that.datesHeader.css(\"padding-\" + paddingDirection, \"0\");\n                    }\n                    if (contentDiv.offsetHeight - contentDiv.clientHeight > 0 || contentDiv.clientHeight > that.content.children(\".k-scheduler-table\").height()) {\n                        that.table.addClass(\"k-scrollbar-h\");\n                    } else {\n                        that.table.removeClass(\"k-scrollbar-h\");\n                    }\n                }\n\n                that._refreshResourceViews();\n            },\n\n            _topSection: function(columnLevels, allDaySlot, rowCount) {\n                var thElm = $(\"<tr>\");\n\n                this.timesHeader = timesHeader(columnLevels.length, allDaySlot, rowCount);\n                this.datesHeader = this._datesHeader(columnLevels, allDaySlot);\n\n                var dateGroup = this.datesHeader.find(\".k-nav-day\");\n\n                if (dateGroup.length) {\n                    dateGroup.closest(\"tr\").addClass(\"k-scheduler-date-group\");\n                }\n\n                if (this._isMobile()) {\n                    thElm.addClass(\"k-mobile-header\");\n                    thElm.addClass(\"k-mobile-\" + this._groupOrientation() + \"-header\");\n                }\n\n                return $(thElm).append(this.timesHeader.add(this.datesHeader).wrap(\"<td>\").parent());\n            },\n\n            _bottomSection: function(columnLevels, rowLevels, rowCount) {\n                this.times = this._times(rowLevels, rowCount, this._isMobile());\n\n                this.content = content(columnLevels[columnLevels.length - 1], rowLevels[rowLevels.length - 1]);\n\n                return $(\"<tr>\").append(this.times.add(this.content).wrap(\"<td>\").parent());\n            },\n\n            _scroller: function() {\n                var that = this;\n\n                this.content.on(\"scroll\" + NS, function() {\n                    kendo.scrollLeft(that.datesHeader.find(\">.k-scheduler-header-wrap\"), this.scrollLeft);\n                    that.times.scrollTop(this.scrollTop);\n                    if (that._isVirtualized()) {\n                        that._tryRenderContent();\n                    }\n                });\n\n                var touchScroller = kendo.touchScroller(this.content, {\n                    avoidScrolling: function(e) {\n                        return $(e.event.target).closest(\".k-event.k-event-active\").length > 0;\n                    }\n                });\n\n                if (touchScroller && touchScroller.movable) {\n\n                    this._touchScroller = touchScroller;\n\n                    this.content = touchScroller.scrollElement;\n\n                    touchScroller.movable.bind(\"change\", function(e) {\n                        kendo.scrollLeft(that.datesHeader.find(\">.k-scheduler-header-wrap\"), -e.sender.x);\n                        that.times.scrollTop(-e.sender.y);\n                        if (that._isVirtualized()) {\n                            that._tryRenderContent();\n                        }\n                    });\n                }\n            },\n\n            _resourcesForGroups: function() {\n                var result = [];\n                var groups = this.options.group;\n                var resources = this.options.resources;\n\n                groups = groups && groups.resources ? groups.resources : [];\n\n                if (resources && groups.length) {\n                    for (var idx = 0, length = resources.length; idx < length; idx++) {\n                        for (var groupIdx = 0, groupLength = groups.length; groupIdx < groupLength; groupIdx++) {\n                            if (resources[idx].name === groups[groupIdx]) {\n                                result.push(resources[idx]);\n                            }\n                        }\n                    }\n                }\n\n                this.groupedResources = result;\n            },\n\n            _createDateLayout: function(dates, inner, times) {\n                return createDateLayoutConfiguration(\"rows\", dates, inner, times);\n            },\n\n            _createColumnsLayout: function(resources, inner, template, dates, times, parentValue) {\n                return createLayoutConfiguration(\"columns\", resources, inner, template, dates, times, parentValue);\n            },\n\n            _groupOrientation: function() {\n                var groups = this.options.group;\n                return groups && groups.resources ? groups.orientation : \"horizontal\";\n            },\n\n            _isGroupedByDate: function() {\n                return this.options.group && this.options.group.date;\n            },\n\n            _isVerticallyGrouped: function() {\n                return this.groupedResources.length && this._groupOrientation() === \"vertical\";\n            },\n\n            _createRowsLayout: function(resources, inner, template, dates) {\n                return createLayoutConfiguration(\"rows\", resources, inner, template, dates);\n            },\n\n            selectionByElement: function() {\n                return null;\n            },\n\n            clearSelection: function() {\n                this.content\n                    .find(\".k-selected\")\n                    .removeAttr(\"id\")\n                    .removeClass(\"k-selected\");\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(this);\n\n                if (that._ongoingTimer) {\n                    clearInterval(that._ongoingTimer);\n                    that._ongoingTimer = null;\n                }\n\n                if (that.table) {\n                    kendo.destroy(that.table);\n                    that.table.remove();\n                }\n\n                if (that.footer) {\n                    that.footer.getKendoToolBar().destroy();\n                    that.footer.remove();\n                }\n\n                that.groups = null;\n                that.table = null;\n                that.content = null;\n                that.times = null;\n                that.datesHeader = null;\n                that.timesHeader = null;\n                that.footer = null;\n                that._resizeHint = null;\n                that._moveHint = null;\n            },\n\n            calendarInfo: function() {\n                return kendo.getCulture().calendars.standard;\n            },\n\n            prevGroupSlot: function(date, groupIndex, isDay) {\n                var collection;\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n\n                if (groupIndex <= 0) {\n                    return;\n                }\n\n                if (this._isGroupedByDate()) {\n                   return slot;\n                }\n\n                if (this._isVerticallyGrouped()) {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(group.daySlotCollectionCount() - 1, true);\n                        return collection.at(slot.index);\n                    } else {\n                        collection = group._collection(isDay ? slot.index : slot.collectionIndex, false);\n                        return collection.last();\n                    }\n                } else {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(slot.collectionIndex, true);\n                        return collection.last();\n                    } else {\n                        collection = group._collection(isDay ? 0 : group.timeSlotCollectionCount() - 1, isDay);\n                        return isDay ? collection.last() : collection.at(slot.index);\n                    }\n                }\n            },\n\n            nextGroupSlot: function(date, groupIndex, isDay) {\n                var collection;\n                var group = this.groups[groupIndex];\n                var slot = group.ranges(date, date, isDay, false)[0].start;\n                var daySlotCollectionCount;\n\n                if (groupIndex >= this.groups.length - 1) {\n                    return;\n                }\n\n                if (this._isGroupedByDate()) {\n                   return slot;\n                }\n\n                if (this._isVerticallyGrouped()) {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(0, true);\n                        return collection.at(slot.index);\n                    } else {\n                        daySlotCollectionCount = group.daySlotCollectionCount();\n                        collection = group._collection(daySlotCollectionCount ? 0 : slot.collectionIndex, daySlotCollectionCount);\n\n                        return isDay ? collection.first() : collection.at(slot.collectionIndex);\n                    }\n                } else {\n                    if (!group.timeSlotCollectionCount()) {\n                        collection = group._collection(slot.collectionIndex, true);\n                        return collection.first();\n                    } else {\n                        collection = group._collection(0, isDay);\n                        return isDay ? collection.first() : collection.at(slot.index);\n                    }\n                }\n            },\n\n            _eventOptionsForMove: function() {\n                return {};\n            },\n\n            _updateEventForResize: function() {\n                return;\n            },\n\n            _updateEventForSelection: function(event) {\n                return event;\n            },\n\n            _innerElements: function(element, type, inner) {\n                var count = 0,\n                    countInner = function(el) {\n                        var innerSpan = el[inner],\n                            innerEls = el[type],\n                            current, innerCollection, i;\n\n                        if (innerSpan) {\n                            count += innerSpan;\n                            return;\n                        }\n\n                        if (!innerEls || innerEls.length === 0) {\n                            count += 1;\n                            return;\n                        }\n\n                        for (i = 0; i < innerEls.length; i++) {\n                            current = innerEls[i];\n                            innerCollection = current[type];\n\n                            if (innerCollection && innerCollection[0]) {\n                                if (!innerCollection[0][type] || innerCollection[0][type].length === 0) {\n                                    count += innerCollection.length;\n                                } else {\n                                    countInner(current);\n                                }\n                            } else {\n                                count += 1;\n                            }\n                        }\n                    };\n\n                countInner(element);\n\n                return count;\n            },\n\n            _times: function(rowLevels, rowCount, isMobile) {\n                var that = this;\n                var rows = new Array(rowCount).join().split(\",\");\n                var rowHeaderRows = [];\n                var rowIndex;\n\n                for (var rowLevelIndex = 0; rowLevelIndex < rowLevels.length; rowLevelIndex++) {\n                    var level = rowLevels[rowLevelIndex];\n                    var rowsBefore = 0;\n\n                    for (rowIndex = 0; rowIndex < level.length; rowIndex++) {\n                        var currentRow = level[rowIndex];\n                        var className = currentRow.className || \"\";\n                        var text = currentRow.text;\n                        var rowspan = that._innerElements(currentRow, \"rows\");\n\n                        rowsBefore += rowspan;\n\n                        if (currentRow.allDay) {\n                            className = \"k-scheduler-times-all-day\";\n                        }\n\n                        if (isMobile && className.indexOf(\"k-scheduler-group-cell\") !== -1) {\n                            text = '<span class=\"k-scheduler-group-text\">' + text + '</span>';\n                        }\n\n                        rows[rowsBefore - rowspan] += '<th class=\"' + className + '\" rowspan=\"' + rowspan + '\">' + text + \"</th>\";\n                    }\n                }\n\n                for (rowIndex = 0; rowIndex < rowCount; rowIndex++) {\n                    rowHeaderRows.push(rows[rowIndex]);\n                }\n\n                if (rowCount < 1) {\n                    return $();\n                }\n\n                return $('<div class=\"k-scheduler-times\">' + table(rowHeaderRows) + '</div>');\n            },\n\n            _datesHeader: function(columnLevels, allDaySlot) {\n                var that = this;\n                var dateTableRows = [];\n                var columnIndex;\n                var result;\n\n                for (var columnLevelIndex = 0; columnLevelIndex < columnLevels.length; columnLevelIndex++) {\n                    var level = columnLevels[columnLevelIndex];\n                    var th = [];\n\n                    for (columnIndex = 0; columnIndex < level.length; columnIndex ++) {\n                        var column = level[columnIndex];\n                        var colspan = that._innerElements(column, \"columns\", \"colspan\");\n\n                        th.push('<th colspan=\"' + (column.colspan || colspan) + '\" class=\"' + (column.className || \"\") + '\">' + column.text + \"</th>\");\n                    }\n\n                    dateTableRows.push(th.join(\"\"));\n                }\n\n                var allDayTableRows = [];\n\n                if (allDaySlot) {\n                    var lastLevel = columnLevels[columnLevels.length - 1];\n                    var td = [];\n                    var cellContent = allDaySlot.cellContent;\n\n                    for (columnIndex = 0; columnIndex < lastLevel.length; columnIndex++) {\n                        td.push('<td class=\"' + (lastLevel[columnIndex].className || \"\") + '\">' + (cellContent ? cellContent(columnIndex) : '&nbsp;') + '</td>');\n                    }\n\n                    allDayTableRows.push(td.join(\"\"));\n                }\n\n                result = $(\n                    '<div class=\"k-scheduler-header\">' +\n                        '<div class=\"k-scheduler-header-wrap\">' +\n                            table(dateTableRows) +\n                            allDayTable(allDayTableRows, \"k-scheduler-header-all-day\") +\n                        '</div>' +\n                    '</div>'\n                );\n\n                kendo.applyStylesFromKendoAttributes(result, [\"position\"]);\n\n                return result;\n            },\n\n            _formatEventAriaLabel: function(title, start, end, isAllDay) {\n                var labelMessages = this.options.messages.ariaEventLabel,\n                    sameDate = kendo.date.getDate(start).getTime() === kendo.date.getDate(end).getTime(),\n                    labelText;\n\n                if (typeof(labelMessages) === \"string\") {\n                    return kendo.format(labelMessages, title, start, start);\n                }\n\n                labelText = (labelMessages.prefix + SPACE + title + SPACE + labelMessages.on + SPACE + kendo.toString(start, \"D\")).trim();\n\n                if (isAllDay && sameDate) {\n                    return labelText + SPACE + labelMessages.allDay;\n                } else if (isAllDay) {\n                    return labelText + SPACE + labelMessages.to + SPACE + kendo.toString(end, \"D\") + SPACE + labelMessages.allDay;\n                } else {\n                    labelText = labelText + SPACE + labelMessages.at + SPACE + kendo.toString(start, \"t\") + SPACE + labelMessages.to + SPACE;\n\n                    if (sameDate) {\n                        return labelText + kendo.toString(end, \"t\");\n                    } else {\n                        return labelText + kendo.toString(end, \"D\") + SPACE + labelMessages.at + SPACE + kendo.toString(end, \"t\");\n                    }\n                }\n            },\n\n            _ongoingEvents: function(data) {\n                var that = this,\n                    ongoingOptions = that.options.ongoingEvents,\n                    shouldMarkOngoing = !!ongoingOptions && (ongoingOptions === true || ongoingOptions.enabled),\n                    interval;\n\n                if (shouldMarkOngoing) {\n                    that._ongoingUpdater(data);\n\n                    interval = ongoingOptions.updateInterval || 60000;\n\n                    if (that._ongoingTimer) {\n                        clearInterval(that._ongoingTimer);\n                        that._ongoingTimer = null;\n                    }\n\n                    if (!isNaN(interval)) {\n                        that._ongoingTimer = setInterval(this._ongoingUpdater.bind(that, data), interval);\n                    }\n                }\n            },\n\n            _ongoingUpdater: function(data) {\n                var currentTime = new Date(),\n                    ongoingClass = this.options.ongoingEvents.cssClass || ONGOING_CLASS;\n\n                this.content.find(DOT + ongoingClass).removeClass(ongoingClass);\n\n                if (this.groups && this.groups.length > 0) {\n                    this._updateOngoing(currentTime, data);\n                }\n            },\n\n            _updateOngoing: function(currentTime, data) {\n                var that = this,\n                    el = that.element,\n                    ongoingOptions = that.options.ongoingEvents,\n                    ongoingClass = ongoingOptions.cssClass || ONGOING_CLASS,\n                    useLocalTimezone = ongoingOptions.useLocalTimezone,\n                    timezone = that.options.timezone,\n                    timezoneOffset, currentTime;\n\n                if (!data) {\n                    return;\n                }\n\n                if (useLocalTimezone === false && !!timezone) {\n                    timezoneOffset = kendo.timezone.offset(currentTime, timezone);\n                    currentTime = kendo.timezone.convert(currentTime, currentTime.getTimezoneOffset(), timezoneOffset);\n                }\n\n                data.forEach(function (appointment) {\n                    var uid,\n                        start = appointment.start,\n                        end = appointment.end;\n\n                    if (appointment.isAllDay) {\n                        end = new Date(end.getTime() + 1000 * 60 * 60 * 24 - 1);\n                    }\n\n                    if (start <= currentTime && end >= currentTime) {\n                        uid = appointment.uid;\n\n                        el.find(\"[data-uid=\" + uid + \"]\").addClass(ongoingClass);\n                    }\n                });\n            }\n        });\n\n        function collidingEvents(elements, start, end) {\n            var idx,\n                index,\n                startIndex,\n                overlaps,\n                endIndex;\n\n            for (idx = elements.length - 1; idx >= 0; idx--) {\n                index = rangeIndex(elements[idx]);\n                startIndex = index.start;\n                endIndex = index.end;\n\n                overlaps = startIndex <= start && endIndex >= start;\n\n                if (overlaps || (startIndex >= start && endIndex <= end) || (start <= startIndex && end >= startIndex)) {\n                    if (startIndex < start) {\n                        start = startIndex;\n                    }\n\n                    if (endIndex > end) {\n                        end = endIndex;\n                    }\n                }\n            }\n\n            return eventsForSlot(elements, start, end);\n        }\n\n        function rangeIndex(eventElement) {\n            return {\n                start: eventElement.start,\n                end: eventElement.end,\n                slotIndex: eventElement.slotIndex,\n                slotIndexEnd: eventElement.slotIndexEnd\n            };\n        }\n\n        function eventsForSlot(elements, slotStart, slotEnd) {\n            var events = [];\n\n            for (var idx = 0; idx < elements.length; idx++) {\n                var event = rangeIndex(elements[idx]);\n\n                if ((event.start < slotStart && event.end > slotStart) || (event.start >= slotStart && event.end <= slotEnd)) {\n                    events.push(elements[idx]);\n                }\n            }\n\n            return events;\n        }\n\n        function createColumns(eventElements) {\n            return _createColumns(eventElements);\n        }\n\n        function createRows(eventElements) {\n            return _createColumns(eventElements);\n        }\n\n        var Color = function(value) {\n            var color = this,\n                formats = Color.formats,\n                re,\n                processor,\n                parts,\n                i,\n                channels;\n\n            if (arguments.length === 1) {\n                value = color.resolveColor(value);\n\n                for (i = 0; i < formats.length; i++) {\n                    re = formats[i].re;\n                    processor = formats[i].process;\n                    parts = re.exec(value);\n\n                    if (parts) {\n                        channels = processor(parts);\n                        color.r = channels[0];\n                        color.g = channels[1];\n                        color.b = channels[2];\n                    }\n                }\n            } else {\n                color.r = arguments[0];\n                color.g = arguments[1];\n                color.b = arguments[2];\n            }\n\n            color.r = color.normalizeByte(color.r);\n            color.g = color.normalizeByte(color.g);\n            color.b = color.normalizeByte(color.b);\n        };\n\n        Color.prototype = {\n            resolveColor: function(value) {\n                value = value || \"#000\";\n\n                if (value.charAt(0) == \"#\") {\n                    value = value.substr(1, 6);\n                }\n\n                value = value.replace(/ /g, \"\");\n                value = value.toLowerCase();\n                value = Color.namedColors[value] || value;\n\n                return value;\n            },\n\n            normalizeByte: function(value) {\n                return (value < 0 || isNaN(value)) ? 0 : ((value > 255) ? 255 : value);\n            },\n\n            percBrightness: function() {\n                var color = this;\n                return math.sqrt(0.241 * color.r * color.r + 0.691 * color.g * color.g + 0.068 * color.b * color.b);\n            },\n\n            isDark: function() {\n                var color = this;\n                var brightnessValue = color.percBrightness();\n                return brightnessValue < 180;\n            }\n        };\n\n        Color.formats = [{\n                re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n                process: function(parts) {\n                    return [\n                        parseInt(parts[1], 10), parseInt(parts[2], 10), parseInt(parts[3], 10)\n                    ];\n                }\n            }, {\n                re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n                process: function(parts) {\n                    return [\n                        parseInt(parts[1], 16), parseInt(parts[2], 16), parseInt(parts[3], 16)\n                    ];\n                }\n            }, {\n                re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n                process: function(parts) {\n                    return [\n                        parseInt(parts[1] + parts[1], 16),\n                        parseInt(parts[2] + parts[2], 16),\n                        parseInt(parts[3] + parts[3], 16)\n                    ];\n                }\n            }\n        ];\n\n        Color.namedColors = {\n            aqua: \"00ffff\", azure: \"f0ffff\", beige: \"f5f5dc\",\n            black: \"000000\", blue: \"0000ff\", brown: \"a52a2a\",\n            coral: \"ff7f50\", cyan: \"00ffff\", darkblue: \"00008b\",\n            darkcyan: \"008b8b\", darkgray: \"a9a9a9\", darkgreen: \"006400\",\n            darkorange: \"ff8c00\", darkred: \"8b0000\", dimgray: \"696969\",\n            fuchsia: \"ff00ff\", gold: \"ffd700\", goldenrod: \"daa520\",\n            gray: \"808080\", green: \"008000\", greenyellow: \"adff2f\",\n            indigo: \"4b0082\", ivory: \"fffff0\", khaki: \"f0e68c\",\n            lightblue: \"add8e6\", lightgrey: \"d3d3d3\", lightgreen: \"90ee90\",\n            lightpink: \"ffb6c1\", lightyellow: \"ffffe0\", lime: \"00ff00\",\n            limegreen: \"32cd32\", linen: \"faf0e6\", magenta: \"ff00ff\",\n            maroon: \"800000\", mediumblue: \"0000cd\", navy: \"000080\",\n            olive: \"808000\", orange: \"ffa500\", orangered: \"ff4500\",\n            orchid: \"da70d6\", pink: \"ffc0cb\", plum: \"dda0dd\",\n            purple: \"800080\", red: \"ff0000\", royalblue: \"4169e1\",\n            salmon: \"fa8072\", silver: \"c0c0c0\", skyblue: \"87ceeb\",\n            slateblue: \"6a5acd\", slategray: \"708090\", snow: \"fffafa\",\n            steelblue: \"4682b4\", tan: \"d2b48c\", teal: \"008080\",\n            tomato: \"ff6347\", turquoise: \"40e0d0\", violet: \"ee82ee\",\n            wheat: \"f5deb3\", white: \"ffffff\", whitesmoke: \"f5f5f5\",\n            yellow: \"ffff00\", yellowgreen: \"9acd32\"\n        };\n\n        function _createColumns(eventElements) {\n            var columns = [];\n\n            for (var idx = 0; idx < eventElements.length; idx++) {\n                var event = eventElements[idx];\n                var eventRange = rangeIndex(event);\n                var column = null;\n\n                if (event.zeroWidthEventOffset && eventRange.end - eventRange.start < event.zeroWidthEventOffset) {\n                    eventRange.end = eventRange.start + event.zeroWidthEventOffset;\n                }\n\n                for (var j = 0, columnLength = columns.length; j < columnLength; j++) {\n                    var endOverlaps = (eventRange.start > columns[j].end) || (eventRange.slotIndex > columns[j].slotIndexEnd);\n\n                    if (eventRange.start < columns[j].start || eventRange.slotIndex < columns[j].slotIndex || endOverlaps) {\n\n                        column = columns[j];\n\n                        if (column.end < eventRange.end) {\n                            column.end = eventRange.end;\n                        }\n\n                        if (column.slotIndexEnd < eventRange.slotIndexEnd) {\n                            column.slotIndexEnd = eventRange.slotIndexEnd;\n                        }\n\n                        break;\n                    }\n                }\n\n                if (!column) {\n                    column = { slotIndex: eventRange.slotIndex, slotIndexEnd: eventRange.slotIndexEnd, start: eventRange.start, end: eventRange.end, events: [] };\n                    columns.push(column);\n                }\n\n                column.events.push(event);\n            }\n\n            return columns;\n        }\n\n        function createDateLayoutConfiguration(name, dates, inner, times) {\n             var configuration = [];\n\n             $.each(dates, function(index, item) {\n                var className = item.className ? \"k-slot-cell \" + item.className : \"k-slot-cell\";\n\n                var obj = {\n                    text: item.text,\n                    className: className\n                };\n\n                if (times && !item.minorTicks) {\n                    obj[name] = createDateLayoutConfiguration(name, item.columns, inner, times);\n                } else {\n                    obj[name] = inner;\n                }\n                configuration.push(obj);\n            });\n\n            return configuration;\n        }\n\n        function createLayoutConfiguration(name, resources, inner, template, dates, times, parentValue) {\n            var resource = resources[0];\n            var configuration = [];\n\n            if (resource) {\n                if (dates && inner) {\n                    $.each(dates, function(index, item) {\n                        if (times && !item.minorTicks) {\n                            item[name] = createLayoutConfiguration(name, resources, item.columns, template, item.columns, times, parentValue);\n                        } else {\n                            item[name] = createLayoutConfiguration(name, resources, null, template, null, null, parentValue);\n                        }\n                    });\n                    configuration = dates;\n                } else {\n                    var data = resource.dataSource.view();\n\n                    data = data.filter(function(item) {\n                        var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n\n                        return itemParentValue === null || itemParentValue === undefined || itemParentValue === parentValue;\n                    });\n\n                    for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                        var value = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                        var obj = {\n                            text: template({\n                                text: kendo.htmlEncode(kendo.getter(resource.dataTextField)(data[dataIndex])),\n                                color: kendo.getter(resource.dataColorField)(data[dataIndex]),\n                                field: resource.field,\n                                title: resource.title,\n                                name: resource.name,\n                                value: value\n                            }),\n                            className: \"k-slot-cell k-scheduler-group-cell\",\n                            parentValue: parentValue,\n                            value: value\n                        };\n\n                        // filter-out those inner resources that are not relevant\n                        obj[name] = createLayoutConfiguration(name, resources.slice(1), inner, template, dates, times, value);\n\n                        configuration.push(obj);\n                    }\n                }\n                return configuration;\n            }\n            return inner;\n        }\n\n        function groupEqFilter(value) {\n            return function(item) {\n                if (Array.isArray(item) || item instanceof kendo.data.ObservableArray) {\n                    for (var idx = 0; idx < item.length; idx++) {\n                        if (item[idx] == value) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                return item == value;\n            };\n        }\n\n        var selectedStateRegExp = /\\s*k-selected/;\n        function addSelectedState(cell) {\n            cell.className = cell.className.replace(selectedStateRegExp, \"\") + \" k-selected\";\n        }\n\n        $.extend(ui.SchedulerView, {\n            createColumns: createColumns,\n            createRows: createRows,\n            rangeIndex: rangeIndex,\n            collidingEvents: collidingEvents,\n            groupEqFilter: groupEqFilter\n        });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}