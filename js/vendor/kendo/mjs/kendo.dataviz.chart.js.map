{"version":3,"file":"kendo.dataviz.chart.js","names":["$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","DATE","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","inArray","isFunction","valueOrDefault","isObject","deepExtend","last","eventElement","getTemplate","TextBox","ShapeElement","getSpacing","CurveProcessor","append","isString","parseDate","styleValue","CategoryAxis","BoxElement","Title","round","limitValue","grep","elementStyles","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Color","geometry","GeometryPoint","transform","ChartAxis","extend","init","axis","this","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1$1","type","_makeValue","undefined","canonicalFields","series","concat","bindPoint","pointIx","item","fields","data","pointData","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","array","object","srcFields","fieldName","srcFieldName","sourceFieldName","push","current","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","Error","percentValue","abs","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","BORDER_BRIGHTNESS","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","PYRAMID","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","DRILLDOWN","DRILLDOWN_FIELD","GLASS","TOOLTIP_OFFSET","LINE_MARKER_SIZE","MOUSEWHEEL_ZOOM_RATE","ErrorBarBase","isVertical","chart","fn","call","reflow","targetBox","linePoints","endCaps","valueBox","getAxis","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","categoriesCount","seriesCount","categories","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","points","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","stack","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","convertableToNumber","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","ref","chartSeries","limitsCache","key","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","category","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","currentSeries","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","visible","reflowCategories","clip","limitPoints","limitPoint","limittedSlot","limitSlot","equals","reverse","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","_bindPoint","seriesIx$2","outOfRangePoint","_bindCache","bindCache","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","element","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","LinePoint","tooltipTracking","markers","labels","_rendered","size","marker","createMarker","labelTemplate","labelText","formatValue","align","vAlign","margin","left","right","markerBorder","background","border","brightness","toHex","rotation","opacity","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","tooltipAnchor","clipBox","overlaps","verticalAlign","horizontalAlign","horizontal","overlapsBox","unclipElements","noclip","padding","HIGHLIGHT_ZINDEX","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","dir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","segments","process","curve","apply","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","seriesMissingValues","createSegment","_addSegment","children","unshift","segment","missingValues","nearestPoint","target","allPoints","nearestPointDistance","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","anyHasZIndex","elements","duration","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","curveProcessor","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","_outOfRangeMinPoint","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","start","parentBox","hasGradientOverlay","overlay","gradient","Bar","createLabel","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","labelOptions","negativeColor","cluster","getStackWrap","stackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","set","drawLines","lineStyle","normalColor","areNumbers","tooltip","CandlestickChart","hasValue","splitValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intlService","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","ref$1","Bubble","radius","highlightGroup","Circle","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minR","minSize","maxR","maxSize","minArea","PI","areaRatio","area","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","seriesItem","wrapData","bulletOptions","bullet","isNaN","BaseTooltip","getStyle","pointColor","backgroundColor","font","borderWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","className","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","lineEnd","getBox","dim","lineStart","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","id","ID","createTitle","titleOptions","title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","appendIfNotNull","segmentVisible","pointVisibility","bindSegments","equalsIgnoreCase","a","b","toLowerCase","filterSeriesByType","types","getDateField","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","shrinkToFit","AREA_REGEX","hasValue$1","findNext","pointHasValue","outPoint","getter$$1","hasItem","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","test","_outOfRangeMaxPoint","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","createPanes","createCrosshairs","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","crossingValues","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","COORD_PRECISION","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","rotated","allPaneAxes","autoRotateLabels","chartPane","remainingHeight","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","bg","MultiPath","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","END","START","edge","plotBands","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","_createLabel","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","srcSeries","processedSeries","_currentPointsCache","_seriesPointsCache","axisPane","categoryField","aggregateSeries","filterSeries","dataLength","_seriesMax","currentRangeIndices","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","dateAxis","srcData","getFn","mapCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","stackableChartOptions","firstSeries","categoryAxes","unique","axisSeries","groupSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","targetOptions","axesOptions","s","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","limitValue$1","util","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","alignItems","legendItem","clippedBBox","rectToBox","addVisual","LegendItem","createContainer","FloatElement","markerOptions","cursor","eventSink","_itemOverlay","widget","args","_legendItemHover","pointIndex","_unsetActivePoint","renderChildren","HORIZONTAL","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","hasItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","PlotAreaFactory","_registry","registry","match","entry","createDiv","classNames","closestHandle","hasClasses","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","direction","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","obj","mousewheel","_mousewheelHandler","_mousewheel","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","_pointInPane","modelCoords","_toModelCoordinates","eventCoordinates","handle","bodyRect","getBoundingClientRect","inBody","moveTarget","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","expand","setTimeout","touch","touches","p0","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","inferredDate","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","autoTextColor","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","angle","middle","lp","labelHeight","labelWidth","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","tooltipAlignment","RAD_30","rad","RAD_60","radians","sine","sin","cosine","cos","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","sort","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","boxX","labelsCount","labelDistance","boxY","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","centerPoint","sr","crossing","intersection","pointInCircle","space","find","autoFit","pieCenter","bboxBottom","reverseValue","originalX","sector_center","cx","cy","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DonutChart","holeSize","totalSize","seriesWithoutSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","axisType","axisDefaultRange","valueAxisOptions","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","onCircle","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","xValue","yValue","RadarLineChart","seriesSegments","groupBySeriesIx","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","finalNarrow","dynamicSlope","dynamicHeight","PyramidChart","FunnelPlotArea","createChart","chartType","HeatmapPoint","labelColor","isRoundRect","ROUNDED_RECT","halfBorderWidth","borderRadius","HeatmapChart","setRange","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","colorScale","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","COLOR","FIRST","MAX","MIN","NOTE_TEXT","errorLow","errorHigh","AXIS_NAMES","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","firstChild","seriesCopies","aliases","alias","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","currentSize","_size","hasSize","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","paneName","_model","findPaneByName","findPaneByIndex","filter","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","_highlight","showTooltip","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","traverse","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","axisDefaults","themeAxisDefaults","mapAxisOptions","axisColor","applyAxisDefaults","seriesLength","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","subtitle","orderTitles","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","_updateDrilldownPoint","_resetDrilldownPoint","_startDrilldown","isDefaultPrevented","obj$1","_shouldAttachMouseMove","_hoveredPoint","_plotAreaHovered","cancel","_stopChartHandlers","_gestureDistance","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","closest","coordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","_showInactiveOpacity","_displayTooltip","_displayInactiveOpacity","activePoint","multipleSeries","highlightPoints","chartInstance","_activeChartInstance","_chartInstanceFromPoint","_updateSeriesOpacity","_applySeriesOpacity","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","_updateHoveredPoint","hoveredPoint","drilldown","_drilldownState","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","_activePoint","hasInactiveOpacity","_hasInactiveOpacity","_hideInactiveOpacity","hasDefaultInactiveOpacity","defaultInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","uniqueCategories","HashMap","bindable","dataIx","dataRow","srcDates","comparer","dateComparer","dates","sortDates","uniqueDates","rows","rowCount","rowIx","colCount","colIx","transpose","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","undefined$1","Widget","ui","ChartBreadcrumb","_attachChartEvents","_renderBreadcrumb","events","rootItem","icon","showIcon","breadcrumb","_onChartDrilldown","_onChartDrilldownLevelChange","deferred","resetDrilldownLevel","getKendoChart","breadcrumbElement","Breadcrumb","_onBreadcrumbClick","level","findIndex","plugin","NS","outerWidth","_outerWidth","outerHeight","_outerHeight","KendoChart","DataSource","InstanceObserver","template","encode","htmlEncode","MOUSELEAVE_NS","AXIS_LABEL_CLICK","DRILLDOWN_LEVEL_CHANGE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","DOCUMENT_ELEMENT","documentElement","CHANGE","DATABOUND","LEAVE","Observable","UserEvents","global","multiTouch","fastTap","ChartInstanceObserver","handlerMap","legendItemClick","dataSource","_seriesVisibility","SeriesVisibilityState","_initDataSource","instance","_instance","_bindSeries","_bindCategories","dimensions","_setEvents","_getThemeOptions","_sourceSeries","setDataSource","_hasDataSource","_onDataChanged","_dataChangeHandler","_hasData","fetch","off","_destroyCrosshairTooltips","findSeries","ChartSeries","findSeriesByName","_createSeries","findSeriesByIndex","originalChartArea","_seriesOptions","on","relatedTarget","autoHide","themeName","SASS_THEMES","autoTheme","themes","_initChart","_createChart","_isRtl","_onInit","_initTooltip","tooltips","_crosshairTooltips","_getCrosshairTooltip","_showTooltip","_hideTooltip","_onRender","_copyMembers","names","_events","_tooltipleave","_onLegendItemClick","_legendItemClick","save","_onDrilldown","drilldownSeriesFactory","Promise","then","resolved","_onDrilldownData","drilldownSeries","Object","assign","_bindData","groupedSeries","view","grouped","seriesVisibility","read","applyByGroup","applyByIndex","seriesData","_groupIx","categoriesData","_bindCategoryAxis","isRtl","css","proxyMembers","createProxyMember","arguments","nameTemplate","seriesClone","legacyTemplate","groupNameTemplate","logToConsole","_groupValue","ExportMixin","PDFMixin","action","persistSeriesVisibility","saveState","geom","attr","applyStylesFromKendoAttributes","mobileScrollerSelector","_mobileScroller","downEvent","applyEventMap","guid","_closeTooltipHandler","_closeTooltip","_clearShowTimeout","remove","sharedTemplate","colspan","colorMarker","nameColumn","sharedTemplateIterator","_offset","_ensureElement","stop","animate","showTimeout","_measure","zoomLevel","viewport","scrollTop","pageYOffset","scrollLeft","pageXOffset","movable","_fit","fakeContainer","normalizeStyle","toggleClass","_sharedContent","_pointContent","html","forceHide","_hideElement","is","appendTo","contains","fadeOut","always","toString","tooltipTemplate","xLow","xHigh","yLow","yHigh","viewPortSize","output","_chart","_options","_filterPoints","_clearFields","toggleVisibility","_filterData","__meta__","description","depends","features","kendo$1"],"sources":["kendo.dataviz.chart.js"],"mappings":"MAAO,wBACA,yBACA,2BACA,gCACA,8BACA,wBACA,kCACA,8BACA,oBASP,SAAUA,GAGVC,OAAOC,MAAMC,QAAUF,OAAOC,MAAMC,SAAW,GAC/C,IAAIA,EAAUD,MAAMC,QAChBC,EAAQD,EAAQC,MAChBC,EAAWF,EAAQE,SACnBC,EAAmBH,EAAQI,UAC3BC,EAAYF,EAAiBE,UAC7BC,EAAYH,EAAiBG,UAC7BC,EAAQJ,EAAiBI,MACzBC,EAASL,EAAiBK,OAC1BC,EAAMN,EAAiBM,IACvBC,EAASP,EAAiBO,OAC1BC,EAAOR,EAAiBQ,KACxBC,EAAQT,EAAiBS,MACzBC,EAASV,EAAiBU,OAC1BC,EAAIX,EAAiBW,EACrBC,EAAIZ,EAAiBY,EACrBC,EAAQb,EAAiBa,MACzBC,EAAQd,EAAiBc,MACzBC,EAAOf,EAAiBe,KACxBC,EAAoBhB,EAAiBgB,kBACrCC,EAAMjB,EAAiBiB,IACvBC,EAAUrB,EAAQqB,QAClBC,EAAStB,EAAQsB,OACjBC,EAAUvB,EAAQuB,QAClBC,EAAexB,EAAQwB,aACvBC,EAAQzB,EAAQyB,MAChBC,EAAM1B,EAAQ0B,IACdC,EAAmB3B,EAAQ2B,iBAC3BC,EAAoB5B,EAAQ4B,kBAC5BC,EAAU7B,EAAQ6B,QAClBC,EAAa9B,EAAQ8B,WACrBC,EAAiB/B,EAAQ+B,eACzBC,EAAWhC,EAAQgC,SACnBC,EAAajC,EAAQiC,WACrBC,EAAOlC,EAAQkC,KACfC,EAAenC,EAAQmC,aACvBC,EAAcpC,EAAQoC,YACtBC,EAAUrC,EAAQqC,QAClBC,EAAetC,EAAQsC,aACvBC,EAAavC,EAAQuC,WACrBC,EAAiBxC,EAAQwC,eACzBC,EAASzC,EAAQyC,OACjBC,EAAW1C,EAAQ0C,SACnBC,EAAY3C,EAAQ2C,UACpBC,EAAa5C,EAAQ4C,WACrBC,EAAe7C,EAAQ6C,aACvBC,EAAa9C,EAAQ8C,WACrBC,EAAQ/C,EAAQ+C,MAChBC,EAAQhD,EAAQgD,MAChBC,EAAajD,EAAQiD,WACrBC,EAAOlD,EAAQkD,KACfC,EAAgBnD,EAAQmD,cACxBC,EAAapD,EAAQoD,WACrBC,EAAWrD,EAAQqD,SACnBC,GAAetD,EAAQsD,aACvBC,GAAUxD,MAAMwD,QAChBC,GAAUzD,MAAMyD,QAChBC,GAAOD,GAAQC,KACfC,GAAYF,GAAQE,UACpBC,GAAmBH,GAAQG,iBAC3BC,GAAQJ,GAAQI,MAChBC,GAAQ9D,MAAM8D,MACdC,GAAW/D,MAAM+D,SACjBC,GAAgBD,GAASrC,MACzBuC,GAAYF,GAASE,UAErBC,GAAYhE,EAAMiE,OAAO,CACzBC,KAAM,SAASC,GAEXC,KAAKC,MAAQF,EACbC,KAAKE,QAAUH,EAAKG,SAGxBC,MAAO,SAASC,GACZ,IAAIL,EAAOC,KAAKC,MAGhB,OAFYF,EAAKM,YAAcN,EAAKM,YAAYD,GAASL,EAAKO,SAASF,IAK3EG,KAAM,SAASC,EAAMC,EAAIC,GAGrB,YAFc,IAAVA,IAAoBA,GAAQ,GAEzBV,KAAKC,MAAMM,KAAKC,EAAMC,EAAIC,IAGrCC,MAAO,WACH,OAAOX,KAAKC,MAAMU,SAGtBC,WAAY,WACR,OAAOZ,KAAKC,MAAMW,gBAI1B,SAASC,GAAeC,EAAMC,GAC1B,IAAK,IAAIC,EAAM,EAAGA,EAAMD,EAAKE,OAAQD,IACjC,GAAID,EAAKC,GAAKd,QAAQY,OAASA,EAE3B,OADAC,EAAKC,GAAKE,qBACH,IAAItB,GAAUmB,EAAKC,IAKtC,IAAIG,GAAYzF,MAAME,MAAMiE,OAAO,CAC/BC,KAAM,SAASsB,GACXpB,KAAKqB,OAASD,EAAKC,OACnBrB,KAAKsB,aAAeF,EAAKG,eAAeF,OACxCrB,KAAKwB,MAAQJ,GAGjBP,eAAgB,SAASC,GACrB,OAAOD,GAAeC,EAAMd,KAAKwB,MAAMT,SAI3CU,GAAgB7F,EAAMiE,OAAO,CAC7BC,KAAM,SAAS4B,GAEX1B,KAAK2B,UAAYD,EACjB1B,KAAKqB,OAASK,EAASL,OACvBrB,KAAK4B,iBAAmBF,EAASG,aAIzC,SAASC,GAAaC,GAIlB,IAHA,IAAId,EAASc,EAAOd,OAChBe,EAAQ,EAEHC,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIC,EAAMH,EAAOE,GACbpG,EAASqG,IACTF,IAIR,OAAOA,EAGX,IAAIG,GAAa,CACbC,IAAK,SAASL,GAIV,IAHA,IAAId,EAASc,EAAOd,OAChBmB,EAAMpG,EAEDiG,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI9B,EAAQ4B,EAAOE,GACfpG,EAASsE,KACTiC,EAAMC,KAAKD,IAAIA,EAAKjC,IAI5B,OAAOiC,IAAQpG,EAAY+F,EAAO,GAAKK,GAG3CE,IAAK,SAASP,GAIV,IAHA,IAAId,EAASc,EAAOd,OAChBqB,EAAMrG,EAEDgG,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI9B,EAAQ4B,EAAOE,GACfpG,EAASsE,KACTmC,EAAMD,KAAKC,IAAIA,EAAKnC,IAI5B,OAAOmC,IAAQrG,EAAY8F,EAAO,GAAKO,GAG3CC,IAAK,SAASR,GAIV,IAHA,IAAId,EAASc,EAAOd,OAChBsB,EAAM,EAEDN,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI9B,EAAQ4B,EAAOE,GACfpG,EAASsE,KACToC,GAAOpC,GAIf,OAAOoC,GAGXC,UAAW,SAAST,GAChB,IAAIU,EAAS,KAMb,OAJIX,GAAaC,KACbU,EAASN,GAAWI,IAAIR,IAGrBU,GAGXT,MAAO,SAASD,GAIZ,IAHA,IAAId,EAASc,EAAOd,OAChBe,EAAQ,EAEHC,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI9B,EAAQ4B,EAAOE,GACL,OAAV9B,GAAkBnD,EAAQmD,IAC1B6B,IAIR,OAAOA,GAGXU,IAAK,SAASX,GACV,IAAIC,EAAQF,GAAaC,GACrBU,EAASV,EAAO,GAMpB,OAJIC,EAAQ,IACRS,EAASN,GAAWI,IAAIR,GAAUC,GAG/BS,GAGXE,MAAO,SAASZ,GAGZ,IAFA,IAAId,EAASc,EAAOd,OAEXgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI9B,EAAQ4B,EAAOE,GACnB,GAAc,OAAV9B,GAAkBnD,EAAQmD,GAC1B,OAAOA,EAIf,OAAO4B,EAAO,KAItB,SAASa,GAASC,EAAOC,GACrB,OAAY,OAARA,EACOA,EAGD7F,EAAO4F,GAAO,EACjBE,CAAID,GAGf,IAAIE,GAAepH,EAAMiE,OAAO,CAC5BC,KAAM,WAEFE,KAAKiD,aAAe,GACpBjD,KAAKkD,aAAe,GACpBlD,KAAKmD,WAAa,GAClBnD,KAAKoD,gBAAkB,IAG3BC,SAAU,SAASC,EAAaC,EAAaC,GACzC,IAAIC,EAAWzD,UACK,IAAhBuD,IAA0BA,EAAc,CAAErH,SAC1B,IAAhBsH,IAA0BA,EAAc,IAE5C,IAAK,IAAIvB,EAAI,EAAGA,EAAIqB,EAAYrC,OAAQgB,IAAK,CACzC,IAAIyB,EAAOJ,EAAYrB,GAEvBwB,EAASR,aAAaS,GAAQH,EAC9BE,EAASP,aAAaQ,GAAQF,EAC9BC,EAASN,WAAWO,GAAQD,EAASE,WAAWJ,EAAa,MAC7DE,EAASL,gBAAgBM,GAAQD,EAASE,WAAWJ,OAAaK,KAI1EC,gBAAiB,SAASC,GACtB,OAAO9D,KAAKuD,YAAYO,GAAQC,OAAO/D,KAAKwD,YAAYM,KAG5DP,YAAa,SAASO,GAClB,OAAO9D,KAAKiD,aAAaa,EAAOJ,OAAS,CAAExH,IAG/CsH,YAAa,SAASM,GAClB,OAAO9D,KAAKkD,aAAaY,EAAOJ,OAAS,CAAExH,IAG/C8H,UAAW,SAASF,EAAQG,EAASC,GACjC,IAKIC,EAAQhE,EALRiE,EAAON,EAAOM,KACdC,EAAYrH,EAAQkH,GAAQA,EAAOE,EAAKH,GACxCxB,EAAS,CAAEc,YAAa,CAAEpD,MAAOkE,IACjCd,EAAcvD,KAAKuD,YAAYO,GAC/BN,EAAcxD,KAAKkD,aAAaY,EAAOJ,MAG3C,GAAkB,OAAdW,EACAlE,EAAQH,KAAKmD,WAAWW,EAAOJ,WAC5B,GAAK1G,EAAQqH,IAEb,GAAIC,MAAMpH,QAAQmH,GAAY,CACjC,IAAIE,EAAYF,EAAUG,MAAMjB,EAAYtC,QAC5Cd,EAAQH,KAAKyE,eAAeJ,EAAWd,GACvCY,EAASnE,KAAKyE,eAAeF,EAAWf,QACrC,GAAyB,iBAAda,EAAwB,CACtC,IAAIK,EAAiB1E,KAAK2E,aAAab,EAAQP,GAC3CqB,EAAiB5E,KAAK2E,aAAab,EAAQN,GAE/CrD,EAAQH,KAAK6E,gBAAgBR,EAAWd,EAAamB,GACrDP,EAASnE,KAAK6E,gBAAgBR,EAAWb,EAAaoB,SAVtDzE,EAAQH,KAAKoD,gBAAgBU,EAAOJ,MAuBxC,OAVI1G,EAAQmD,KACmB,IAAvBoD,EAAYtC,OACZwB,EAAOc,YAAYpD,MAAQA,EAAMoD,EAAY,IAE7Cd,EAAOc,YAAcpD,GAI7BsC,EAAO0B,OAASA,GAAU,GAEnB1B,GAGXkB,WAAY,SAASQ,EAAQW,GAIzB,IAHA,IAAI3E,EAAQ,GACRc,EAASkD,EAAOlD,OAEXgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAE7B9B,EADgBgE,EAAOlC,IACJ6C,EAGvB,OAAO3E,GAGXsE,eAAgB,SAASM,EAAOZ,GAC5B,IAAIhE,EAAQ,GAEZ,GAAIgE,EAGA,IAFA,IAAIlD,EAASoB,KAAKD,IAAI+B,EAAOlD,OAAQ8D,EAAM9D,QAElCgB,EAAI,EAAGA,EAAIhB,EAAQgB,IACxB9B,EAAMgE,EAAOlC,IAAM8C,EAAM9C,GAIjC,OAAO9B,GAGX0E,gBAAiB,SAASG,EAAQb,EAAQc,QACpB,IAAdA,IAAwBA,EAAYd,GAExC,IAAIhE,EAAQ,GAEZ,GAAIgE,EAGA,IAFA,IAAIlD,EAASkD,EAAOlD,OAEXgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIiD,EAAYf,EAAOlC,GACnBkD,EAAeF,EAAUhD,GACR,OAAjBkD,IACAhF,EAAM+E,GAAatC,GAASuC,EAAcH,IAKtD,OAAO7E,GAGXwE,aAAc,SAASb,EAAQD,GAC3B,IAAIc,EAAe,GAEnB,GAAId,EAGA,IAFA,IAAI5C,EAAS4C,EAAgB5C,OAEpBgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIiD,EAAYrB,EAAgB5B,GAC5BmD,EAAkBF,IAAchJ,EAAQ,QAAUgJ,EAAY,QAElEP,EAAaU,KAAiC,OAA5BvB,EAAOsB,GAA6BtB,EAAOsB,IAAoBF,EAAa,MAItG,OAAOP,KAIf3B,GAAasC,QAAU,IAAItC,GAE3B,IAEIuC,GAAe,0BACfC,GAAyB,IAAIC,OAAO,yCAEpCC,GAAuB9J,EAAMiE,OAAO,CACpCC,KAAM,SAAS6F,EAAY7B,EAAQjB,GAE/B7C,KAAK4F,iBAAiBD,EAAY7B,EAAQjB,IAG9C+C,iBAAkB,SAASD,EAAY7B,EAAQjB,GAC3C,IAAIuB,EAAON,EAAOM,KACdyB,EAAiBL,GAAuBM,KAAKH,GAEjD,GAAIE,EAAgB,CAChB7F,KAAK+F,YAAc/F,KAAKgG,kBAAkBlC,EAAQjB,GAElD,IAAIoD,EAAUjG,KAAKkG,WAAW9B,GAC1B+B,EAAYnG,KAAKoG,qBAAqBhC,EAAM6B,GAAS,GACrDI,EAAWR,EAAe,GAAKS,WAAWT,EAAe,IAAM,EAC/DU,EAAa,CAAEC,IAAKP,EAAQ9F,MAAQgG,EAAYE,EAAUI,KAAMR,EAAQ9F,MAAQgG,EAAYE,GAEhGrG,KAAK0G,YAAc,WACf,OAAOH,QAER,GAAIZ,EAAWgB,SAAWhB,EAAWgB,QA1BtC,WA0B0D,EAAG,CAC/D3G,KAAK+F,YAAc/F,KAAKgG,kBAAkBlC,EAAQjB,GAClD,IAAI+D,EAAgB5G,KAAK6G,iBAAiBzC,EAAMpE,KAAKkG,WAAW9B,IAEhEpE,KAAK0G,YAAc,SAASvG,GACxB,MAAO,CAAEqG,IAAKrG,EAAQyG,EAAeH,KAAMtG,EAAQyG,MAK/DZ,kBAAmB,SAASlC,EAAQjB,GAChC,IAIIkD,EAJA3B,EAAON,EAAOM,KACd0C,EAAS9D,GAAasC,QACtB/B,EAAcuD,EAAOvD,YAAYO,GACjCI,EAAOlH,EAAQoH,EAAK,IAAMA,EAAK,GAAK,GAGxC,GAAIlH,EAAQgH,GAAO,CACf,IAAI6C,EAAQlE,EAAQU,EAAYoD,QAAQ9D,GAAS,EACjDkD,EAAc9I,EAAO,IAAM8J,EAAQ,UAChC,GAAIlL,EAASqI,GAChB6B,EAAc9I,SACX,UAAWiH,IAASpI,EAAiBkL,OAAQ,CAChD,IAAItC,EAAiBoC,EAAOnC,aAAab,EAAQP,GACjDwC,EAAc9I,EAAOyH,EAAenB,EAAYoD,QAAQ9D,KAG5D,OAAOkD,GAGXkB,cAAe,SAASC,EAAYvB,GAChC,IAAIa,EAAKC,EAAMtG,EAEf,IAAKnD,EAAQ2I,GACT,OAAO,KAGX,GAAI3F,KAAK0G,YACL,OAAO1G,KAAK0G,YAAYQ,GAG5B,GAAIhK,EAAQyI,GACRa,EAAMU,EAAavB,EAAW,GAC9Bc,EAAOS,EAAavB,EAAW,QAC5B,GAAI9J,EAASsE,EAAQmG,WAAWX,IACnCa,EAAMU,EAAa/G,EACnBsG,EAAOS,EAAa/G,MACjB,MAAKA,EAAQoF,GAAaO,KAAKH,IAKlC,MAAM,IAAIwB,MAAM,2BAA6BxB,GAJ7C,IAAIyB,EAAeF,GAAcZ,WAAWnG,EAAM,IAAM,KACxDqG,EAAMU,EAAa7E,KAAKgF,IAAID,GAC5BX,EAAOS,EAAa7E,KAAKgF,IAAID,GAKjC,MAAO,CAAEZ,IAAKA,EAAKC,KAAMA,IAG7BI,iBAAkB,SAASzC,EAAM6B,GAC7B,OAAOjG,KAAKoG,qBAAqBhC,EAAM6B,GAAS,GAAQ5D,KAAKiF,KAAKrB,EAAQjE,QAG9EoE,qBAAsB,SAAShC,EAAM6B,EAASsB,GAO1C,IANA,IAEItG,EAASmD,EAAKnD,OACduG,EAAQD,EAAWtB,EAAQjE,MAAQ,EAAIiE,EAAQjE,MAC/CyF,EAAsB,EAEjBzG,EAAM,EAAGA,EAAMC,EAAQD,IAAO,CACnC,IAAIb,EAPOH,KAOU+F,YAAY3B,EAAKpD,IAClCnF,EAASsE,KACTsH,GAAuBpF,KAAKqF,IAAIvH,EAAQ8F,EAAQ9F,MAAO,IAI/D,OAAOkC,KAAKiF,KAAKG,EAAsBD,IAG3CtB,WAAY,SAAS9B,GAOjB,IANA,IAEInD,EAASmD,EAAKnD,OACdsB,EAAM,EACNP,EAAQ,EAEHhB,EAAM,EAAGA,EAAMC,EAAQD,IAAO,CACnC,IAAIb,EAPOH,KAOU+F,YAAY3B,EAAKpD,IAClCnF,EAASsE,KACToC,GAAOpC,EACP6B,KAIR,MAAO,CACH7B,MAAOoC,EAAMP,EACbA,MAAOA,MAKf2F,GAAUzI,GAAQyI,SAAW,GAE7BC,GAA6B,IAC7BC,GAAS,SAGTC,GAAoB,GAEpBC,GAAcJ,GAAQK,KAAO,KAAQ,EACrCC,GAAkB,WAClBC,GAAmB,YACnBC,GAAoB,YACpBC,GAAqB,aACrBC,GAAoB,YACpBC,GAAqB,aAErBC,GAAO,OACPC,GAAc,cACdC,GAAM,MACNC,GAAQ,QACRC,GAAQ,QAERC,GAAS,SACTC,GAAO,OAEPC,GAAO,OACPC,GAAM,MACNC,GAAW,UACXC,GAAS,SACTC,GAAS,SACTC,GAAc,cACdC,GAAS,SACTC,GAAQ,QACRC,GAAS,SACTC,GAAU,UACVC,GAAU,UACVC,GAAuB,sBACvBC,GAAO,OACPC,GAAO,OACPC,GAAM,MACNC,GAAa,YACbC,GAAa,YACbC,GAAgB,eAChBC,GAAa,YACbC,GAAe,cACfC,GAAa,YACbC,GAAa,YACbC,GAAY,WACZC,GAAe,cACfC,GAAU,UACVC,GAAe,cACfC,GAAgB,eAChBC,GAAoB,kBACpBC,GAAkB,iBAClBC,GAAgB,eAChBC,GAAsB,oBACtBC,GAAY,YACZC,GAAwB,CACxB/B,GAAKK,GAAQO,GAAMR,GAAaH,GAAUyB,GAC1CvB,GAAQmB,GAAcD,GAAWS,GAAWpB,IAG5CsB,GAAoB,kBACpBC,GAAoB,kBACpBC,GAAoB,kBACpBC,GAAe,cACfC,GAAe,cACfC,GAAc,aACdC,GAAe,cACfC,GAAkB,gBAClBC,GAAkB,gBAClBC,GAAkB,gBAClBC,GAAO,OACPC,GAAW,UACXC,GAAa,YACbC,GAAa,YACbC,GAAO,OACPC,GAAW,UACXC,GAAe,cACfC,GAAS,SACTC,GAAa,YACbC,GAAS,SACTC,GAAe,cACfC,GAAe,cACfC,GAAc,aAEdC,GAAc,MACdC,GAAW,WAEXC,GAAa,YACbC,GAAc,aACdC,GAAc,aAEdC,GAAa,QACbC,GAAmB,IAGnBC,GAAY,YACZC,GAAkB,YAElB/Q,GAAY,CACf6L,2BAA4BA,GAC5BC,OAAQA,GACRkD,kBAAmBA,GACnBC,kBAAmBA,GACnBC,kBAAmBA,GACnBC,aAAcA,GACdC,aAAcA,GACdC,YAAaA,GACbC,aAAcA,GACd0B,MAzGW,QA0GXjF,kBAAmBA,GACnBkF,eAzGoB,EA0GpBjF,YAAaA,GACbE,gBAAiBA,GACjBC,iBAAkBA,GAClBC,kBAAmBA,GACnBC,mBAAoBA,GACpBC,kBAAmBA,GACnBC,mBAAoBA,GACpB2E,iBAzGsB,EA0GtBzE,YAAaA,GACbD,KAAMA,GACNK,OAAQA,GACRC,KAAMA,GACN0D,SAAUA,GACVjD,OAAQA,GACRC,QAASA,GACTR,IAAKA,GACLI,YAAaA,GACbS,IAAKA,GACLR,OAAQA,GACRN,KAAMA,GACN4B,gBAAiBA,GACjB1B,SAAUA,GACVW,KAAMA,GACNkB,UAAWA,GACXnB,KAAMA,GACNR,OAAQA,GACRyB,cAAeA,GACfH,cAAeA,GACfL,WAAYA,GACZS,oBAAqBA,GACrBP,aAAcA,GACdI,kBAAmBA,GACnBL,UAAWA,GACXX,qBAAsBA,GACtBa,QAASA,GACTC,aAAcA,GACdtB,OAAQA,GACRe,WAAYA,GACZE,WAAYA,GACZD,aAAcA,GACdH,WAAYA,GACZD,WAAYA,GACZE,cAAeA,GACfmC,OAAQA,GACRZ,gBAAiBA,GACjBC,gBAAiBA,GACjBC,gBAAiBA,GACjBc,YAAaA,GACbb,KAAMA,GACNE,WAAYA,GACZD,SAAUA,GACVE,WAAYA,GACZC,KAAMA,GACNC,SAAUA,GACVC,aAAcA,GACdC,OAAQA,GACRC,WAAYA,GACZI,YAAaA,GACb5D,IAAKA,GACLY,MAAOA,GACPmD,WAAYA,GACZC,YAAaA,GACbC,YAAaA,GACbC,WAAYA,GACZC,iBAAkBA,GAClBM,qBAnF0B,GAoF1Bf,aAAcA,GACdC,aAAcA,GACdtB,sBAAuBA,GACvBpC,MAAOA,GACPC,MAAOA,GACPa,QAASA,GACTqD,UAAWA,GACXC,gBAAiBA,IAKdK,GAAehQ,EAAa0C,OAAO,CACnCC,KAAM,SAAS0G,EAAKC,EAAM2G,EAAYC,EAAOvJ,EAAQ5D,GACjD/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKwG,IAAMA,EACXxG,KAAKyG,KAAOA,EACZzG,KAAKoN,WAAaA,EAClBpN,KAAKqN,MAAQA,EACbrN,KAAK8D,OAASA,GAGlB0J,OAAQ,SAASC,GACb,IASIC,EATAC,EAAU3N,KAAKE,QAAQyN,QACvBP,EAAapN,KAAKoN,WAElBQ,EADO5N,KAAK6N,UACIC,QAAQ9N,KAAKwG,IAAKxG,KAAKyG,MACvCsH,EAAYN,EAAUO,SACtBC,EAAYjO,KAAKkO,aAAaT,EAAWL,GACzCe,EAAWf,EAAaW,EAAUK,EAAIL,EAAUM,EAChDC,EAAWH,EAAWF,EACtBM,EAASJ,EAAWF,EAGpBb,GACAM,EAAa,CACT,IAAItQ,EAAM2Q,EAAUK,EAAGR,EAASY,IAChC,IAAIpR,EAAM2Q,EAAUK,EAAGR,EAASa,KAEhCd,GACAD,EAAWrI,KAAK,IAAIjI,EAAMkR,EAAUV,EAASY,IACzC,IAAIpR,EAAMmR,EAAQX,EAASY,IAC3B,IAAIpR,EAAMkR,EAAUV,EAASa,IAC7B,IAAIrR,EAAMmR,EAAQX,EAASa,KAEnCzO,KAAK0O,IAAM,IAAIrR,EAAIiR,EAAUV,EAASY,GAAID,EAAQX,EAASa,MAE3Df,EAAa,CACT,IAAItQ,EAAMwQ,EAASe,GAAIZ,EAAUM,GACjC,IAAIjR,EAAMwQ,EAASgB,GAAIb,EAAUM,IAEjCV,GACAD,EAAWrI,KAAK,IAAIjI,EAAMwQ,EAASe,GAAIL,GACnC,IAAIlR,EAAMwQ,EAASe,GAAIJ,GACvB,IAAInR,EAAMwQ,EAASgB,GAAIN,GACvB,IAAIlR,EAAMwQ,EAASgB,GAAIL,IAE/BvO,KAAK0O,IAAM,IAAIrR,EAAIuQ,EAASe,GAAIL,EAAUV,EAASgB,GAAIL,IAG3DvO,KAAK0N,WAAaA,GAGtBQ,aAAc,SAASQ,EAAKtB,GACxB,IAAIyB,EAAUzB,EAAasB,EAAII,QAAUJ,EAAIK,SAG7C,OAFgB1M,KAAKD,IAAIC,KAAK2M,MAAMH,EAAU,GAxDxB,OA6D1BI,aAAc,WACV,IAAIxL,EAAWzD,KAEXE,EAAUF,KAAKE,QACfmB,EAASnB,EAAQmB,OAEjBA,EACArB,KAAKqB,OAASA,EAAO,CACjBmF,IAAKxG,KAAKwG,IACVC,KAAMzG,KAAKyG,KACXyI,KAAMlP,KAAK0O,IAAIS,SACfC,OAAQpP,KAAKqP,YACbnP,QAAS,CACLyN,QAASzN,EAAQyN,QACjB2B,MAAOpP,EAAQoP,MACfC,KAAMrP,EAAQqP,MAElBN,aAAc,WACVxL,EAAS+L,sBACT,IAAIC,EAAgBhM,EAASpC,OAE7B,cADOoC,EAASpC,OACToO,KAIfzP,KAAKwP,uBAIbA,oBAAqB,WACjB,IAGItP,EADMF,KACQE,QACdwN,EAFM1N,KAEW0N,WACjBgC,EAAc,CACdC,OAAQ,CACJL,MAAOpP,EAAQoP,MACfR,MAAO5O,EAAQqP,KAAKT,MACpBc,SAAU1P,EAAQqP,KAAKK,WAI/BzS,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElC,IAAK,IAAIgB,EAAM,EAAGA,EAAM0M,EAAWzM,OAAQD,GAAO,EAAG,CACjD,IAAIuO,EAAO,IAAInQ,GAAKsQ,GACfG,OAAOnC,EAAW1M,GAAKoN,EAAGV,EAAW1M,GAAKqN,GAC1CyB,OAAOpC,EAAW1M,EAAM,GAAGoN,EAAGV,EAAW1M,EAAM,GAAGqN,GAEvD/Q,EAAiBiS,GApBNvP,KAqBFqB,OAAOjD,OAAOmR,OAKnChS,EAAkB4P,GAAc,CAC5B4C,UAAW,CACPrM,KAAMmE,GACNmI,MAAOpI,IAEX+F,SAAS,EACT4B,KAAM,CACFT,MAAO,GAEXmB,OAAQ,IAGZ,IAAIC,GAAsB/C,GAAatN,OAAO,CAC1CgO,QAAS,WAGL,OAFW7N,KAAKqN,MAAM8C,gBAAgBnQ,KAAK8D,WAQnD,SAASsM,GAAYlQ,EAASmQ,EAASC,EAAOC,QAC5B,IAAVD,IAAoBA,EAAQ,SACjB,IAAXC,IAAqBA,GAAS,GAElC,IAAIC,EAAWF,EAAME,SAAWF,EAAME,UAAY,GAC9CC,EAAQH,EAAMG,MAAQH,EAAMG,OAAS,EACrCC,GAAY,EAIhB,GAFAJ,EAAMK,SAAWL,EAAMK,UAAY,GAE/BF,EAZe,EAaf,OAAO,KAGX,IAAK,IAAIG,KAAY1Q,EACjB,IAAK1C,EAAQoT,EAAUN,EAAMK,WAAazQ,EAAQ2Q,eAAeD,GAAW,CACxE,IAAIE,EAAY5Q,EAAQ0Q,GACpBnT,EAAWqT,IACXJ,GAAY,EACPH,IACDrQ,EAAQ0Q,GAAYlT,EAAeoT,EAAUT,GAAUG,EAASI,MAE7DjT,EAASmT,KACXP,IACDD,EAAME,SAAWA,EAASI,IAE9BN,EAAMG,QACNC,EAAYN,GAAYU,EAAWT,EAASC,EAAOC,IAAWG,EAC9DJ,EAAMG,SAKlB,OAAOC,EAGX,SAASK,GAAgBjN,GAIrB,IAHA,IAAIkN,EAAclN,EAAO7C,OACrBgQ,EAAa,EAERhP,EAAI,EAAGA,EAAI+O,EAAa/O,IAC7BgP,EAAa5O,KAAKC,IAAI2O,EAAYnN,EAAO7B,GAAGmC,KAAKnD,QAGrD,OAAOgQ,EAGX,IAAIC,GAAmB/T,EAAa0C,OAAO,CACvCC,KAAM,SAAS4B,EAAUxB,GACrB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK0B,SAAWA,EAChB1B,KAAKmR,aAAezP,EAASyP,aAC7BnR,KAAKoR,aAAe1P,EAAS2P,mBAAmBnR,EAAQ4D,OAAO,IAI/D9D,KAAKsR,gBAAkB,GAEvBtR,KAAKuR,OAAS,GACdvR,KAAKwR,eAAiB,GACtBxR,KAAKyR,aAAe,GACpBzR,KAAK0R,cAAgB,GACrB1R,KAAK2R,YAAc,GAEnB3R,KAAK4R,UAGTA,OAAQ,WACJ5R,KAAK6R,mBAAmB7R,KAAK8R,SAASC,KAAK/R,QAG/CgS,aAAc,SAASlO,EAAQmO,GAC3B,IAAI/R,EAAUF,KAAK0R,cAAcO,GACjC,IAAK/R,EAAS,CACV,IAAIsQ,EAAWxQ,KAAKkS,YAAYC,UAAU3B,SAC1CxQ,KAAK0R,cAAcO,GAAY/R,EAAUtC,EAAW,GAAK4S,EAAU,CAC/D4B,UAAWpS,KAAKE,QAAQmS,YACzBvO,GAGP,OAAO5D,GAGXoS,UAAW,SAASlS,GAChB,IAAKA,EACD,OAAO,EAGX,GAAIJ,KAAKE,QAAQqS,cAAgB1W,EAASuE,EAAMD,OAAQ,CAMpD,IALA,IAAIqS,EAAapS,EAAMoS,WACnBhB,EAAiBxR,KAAKwR,eAAegB,GACrCC,EAAc,GACdC,EAAc,EAETzQ,EAAI,EAAGA,EAAIuP,EAAevQ,OAAQgB,IAAK,CAC5C,IAAI0Q,EAAQnB,EAAevP,GAC3B,GAAI0Q,EAAO,CACP,IAAIC,EAAQxS,EAAM0D,OAAO8O,MACrBC,EAAaF,EAAM7O,OAAO8O,MAE9B,GAAKA,GAASC,GAAeD,EAAME,QAAUD,EAAWC,MACpD,SAGAjX,EAAS8W,EAAMxS,SACfuS,GAAerQ,KAAKgF,IAAIsL,EAAMxS,OAC9BsS,EAAYpN,KAAKhD,KAAKgF,IAAIsL,EAAMxS,UAK5C,GAAIuS,EAAc,EACd,OAAOtS,EAAMD,MAAQuS,EAI7B,OAAOtS,EAAMD,OAGjB4S,UAAW,SAAS3S,EAAO4S,QAEJ,IAAfA,IAAyBA,EAAa,GAE1C,IAAIxB,EAAiBxR,KAAKwR,eAAepR,EAAMoS,YAE/C,GAAIxS,KAAKE,QAAQ+S,UAAW,CAMxB,IALA,IAAIX,EAAYtS,KAAKsS,UAAUlS,GAC3B8S,EAAWZ,GAAa,EACxBa,EAAYH,EACZI,GAAe,EAEVnR,EAAI,EAAGA,EAAIuP,EAAevQ,OAAQgB,IAAK,CAC5C,IAAI0Q,EAAQnB,EAAevP,GAE3B,GAAI7B,IAAUuS,EACV,MAGJ,IAAIC,EAAQxS,EAAM0D,OAAO8O,MACrBC,EAAaF,EAAM7O,OAAO8O,MAC9B,GAAIA,GAASC,EAAY,CACrB,UAAWD,IAAU9W,EAAiBuX,QAAUT,IAAUC,EACtD,SAGJ,GAAID,EAAME,OAASF,EAAME,QAAUD,EAAWC,MAC1C,SAIR,IAAIQ,EA9BGtT,KA8BmBsS,UAAUK,IAC/BW,GAAc,GAAKJ,GACnBI,EAAa,IAAMJ,KACpBC,GAAaG,EACbhB,GAAagB,EACbF,GAAe,EAnCZpT,KAqCUE,QAAQqS,eACjBD,EAAYjQ,KAAKD,IAAIkQ,EAAW,KAS5C,OAJIc,IACAD,GAAaH,GAGV,CAAEG,EAAWb,GAGxB,IAAIxO,EAAS1D,EAAM0D,OACfyP,EAAYvT,KAAKmQ,gBAAgBrM,GACjC0P,EAAoBxT,KAAKyT,0BAA0BF,GAEvD,MAAO,CAAEC,EAAmB7X,EAAQ+X,oBAAoBtT,EAAMD,OAASC,EAAMD,MAAQqT,IAGzFG,YAAa,SAASC,EAAUC,GAM5B,IALA,IAEIzR,EAAMpG,EACNsG,EAAMrG,EAEDgG,EAAI,EAAGA,EAAIjC,KAAKwR,eAAevQ,OAAQgB,IAAK,CACjD,IAAIuP,EANOxR,KAMmBwR,eAAevP,GAC7C,GAAKuP,EAIL,IAAK,IAAIsC,EAAM,EAAGA,EAAMtC,EAAevQ,OAAQ6S,IAAO,CAClD,IAAI1T,EAAQoR,EAAesC,GAC3B,GAAI1T,IACIA,EAAM0D,OAAO8O,QAAUiB,GAAazT,EAAM0D,OAAO/D,OAAS6T,GAAU,CACpE,IAAInT,EAfLT,KAemB+S,UAAU3S,EAAO,GAAG,GAClCpD,EAAQyD,IAAOsT,SAAStT,KACxB6B,EAAMD,KAAKC,IAAIA,EAAK7B,GACpB2B,EAAMC,KAAKD,IAAIA,EAAK3B,MAOxC,MAAO,CAAE2B,IAAKA,EAAKE,IAAKA,IAG5B0R,iBAAkB,WACd,IAAIvQ,EAAWzD,KAEXiU,EAAMjU,KAAKE,QACX+S,EAAYgB,EAAIhB,UAChBiB,EAAcD,EAAInQ,OAClBqQ,EAAc,GAElB,GAAIlB,EACA,IAAK,IAAIhR,EAAI,EAAGA,EAAIiS,EAAYjT,OAAQgB,IAAK,CACzC,IAAI6B,EAASoQ,EAAYjS,GACrB2R,EAAW9P,EAAO/D,KAClBqU,EAAMR,EAAW9P,EAAO8O,MAExByB,EAASF,EAAYC,GACzB,IAAKC,EAAQ,CACTA,EAAS5Q,EAASkQ,YAAYC,EAAU9P,EAAO8O,OAE/C,IAAI0B,EAAc7Q,EAAS6Q,YACvBA,IACIA,EAAYC,SAAStT,SACrBoT,EAAOjS,IAAMC,KAAKD,IAAIiS,EAAOjS,IAAKzG,EAAQ6Y,kBAAkBF,EAAYC,UAAUnS,MAElFkS,EAAYpB,SAASjS,SACrBoT,EAAO/R,IAAMD,KAAKC,IAAI+R,EAAO/R,IAAK3G,EAAQ6Y,kBAAkBF,EAAYpB,UAAU5Q,OAItF+R,EAAOjS,MAAQpG,GAAaqY,EAAO/R,MAAQrG,EAC3CkY,EAAYC,GAAOC,EAEnBA,EAAS,KAIbA,IACA5Q,EAAS6N,gBAAgBsC,GAAYS,KAMrDI,YAAa,SAASrU,EAAOgE,EAAMoO,GAC/B,IAMIjM,EANApG,EAAQC,EAAMD,MACd2D,EAAS1D,EAAM0D,OACfmO,EAAW7R,EAAM6R,SACjByC,EAAYtU,EAAMF,QAAQwU,UAC1BC,EAAWvQ,EAAKD,OAAsB,SACtCyQ,EAAYxQ,EAAKD,OAAuB,UAGxCtI,EAAS8Y,IAAa9Y,EAAS+Y,GAC/BrO,EAAa,CAAEC,IAAKmO,EAAUlO,KAAMmO,GAC7BF,GAAa1X,EAAQ0X,EAAUvU,SACtCH,KAAK6U,kBAAoB7U,KAAK6U,mBAAqB,GACnD7U,KAAK6U,kBAAkB5C,GAAYjS,KAAK6U,kBAAkB5C,IACtD,IAAIvM,GAAqBgP,EAAUvU,MAAO2D,EAAQ5H,GAEtDqK,EAAavG,KAAK6U,kBAAkB5C,GAAUhL,cAAc9G,EAAOuU,EAAUvU,QAG7EoG,IACAnG,EAAMoG,IAAMD,EAAWC,IACvBpG,EAAMqG,KAAOF,EAAWE,KACxBzG,KAAK8U,iBAAiB1U,EAAOoS,KAIrCsC,iBAAkB,SAAS1U,EAAOoS,GAC9B,IAAIpF,GAAcpN,KAAKE,QAAQmS,WAC3BnS,EAAUE,EAAMF,QAAQwU,UACxB5Q,EAAS1D,EAAM0D,OACf0C,EAAMpG,EAAMoG,IACZC,EAAOrG,EAAMqG,KAEjB,GAAIzG,KAAKE,QAAQ+S,UAAW,CACxB,IAAI8B,EAAoB/U,KAAK+U,kBAAkB3U,EAAOoS,GACtDhM,EAAMuO,EAAkBvO,IACxBC,EAAOsO,EAAkBtO,SACtB,CACH,IAAItC,EAAS,CAAEqO,WAAYA,EAAY1O,OAAQA,GAC/C9D,KAAKgV,YAAY,CAAE7U,MAAOqG,GAAOrC,GACjCnE,KAAKgV,YAAY,CAAE7U,MAAOsG,GAAQtC,GAGtC,IAAI8Q,EAAW,IAAI/E,GAAoB1J,EAAKC,EAAM2G,EAAYpN,KAAM8D,EAAQ5D,GAC5EE,EAAMsU,UAAY,CAAEO,GACpB7U,EAAMhC,OAAO6W,IAGjBF,kBAAmB,SAAS3U,EAAOoS,GAC/B,IAAIF,EAAYtS,KAAK+S,UAAU3S,EAAO,GAAG,GAAKA,EAAMD,MAChDqG,EAAMpG,EAAMoG,IAAM8L,EAClB7L,EAAOrG,EAAMqG,KAAO6L,EAYxB,OAVAtS,KAAKsU,YAActU,KAAKsU,aAAe,CAAEpB,SAAU,GAAIqB,SAAU,IAE7D/N,EAAM,IACNxG,KAAKsU,YAAYC,SAAS/B,GAAcnQ,KAAKD,IAAIpC,KAAKsU,YAAYC,SAAS/B,IAAe,EAAGhM,IAG7FC,EAAO,IACPzG,KAAKsU,YAAYpB,SAASV,GAAcnQ,KAAKC,IAAItC,KAAKsU,YAAYpB,SAASV,IAAe,EAAG/L,IAG1F,CAAED,IAAKA,EAAKC,KAAMA,IAG7BqL,SAAU,SAAS1N,EAAMD,GACrB,IAAIqO,EAAarO,EAAOqO,WACpB1O,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAElBT,EAAiBxR,KAAKwR,eAAegB,GACpChB,IACDxR,KAAKwR,eAAegB,GAAchB,EAAiB,IAGvD,IAAIC,EAAezR,KAAKyR,aAAaQ,GAChCR,IACDzR,KAAKyR,aAAaQ,GAAYR,EAAe,IAGjD,IAAIrR,EAAQJ,KAAKkV,YAAY9Q,EAAMD,GAC/B/D,IACA5E,EAAEqE,OAAOO,EAAO+D,GAEhB/D,EAAM+U,MAAQnV,KACdI,EAAMgV,SAAWhR,EAAKD,OAAOiR,SACxBpY,EAAQoD,EAAMiV,YACfjV,EAAMiV,SAAWvR,EAAOM,KAAKoO,IAEjCxS,KAAKyU,YAAYrU,EAAOgE,EAAMoO,IAGlCxS,KAAKuR,OAAOlM,KAAKjF,GACjBqR,EAAapM,KAAKjF,GAClBoR,EAAenM,KAAKjF,GAEpBJ,KAAKgV,YAAY5Q,EAAKb,YAAaY,IAGvCmR,iBAAkB,SAASpV,EAASC,EAAOgE,GACvC,IAAIqO,EAAarO,EAAOqO,WACpB+C,EAAWpR,EAAOoR,SAClBzR,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAClB3B,EAAQ,CACRE,SAAU1M,EAAO0R,UACjB7E,SAAU,CACN,OAAQ,YAAa,UAAW,UAAW,UAAW,WACtD,SAAU,SAAU,sBAAuB,sBAC3C,2BAIJ8E,EAASzV,KAAK2R,YAAYM,GACzBjV,EAAQyY,KACTzV,KAAK2R,YAAYM,GAAYwD,EAASrF,GAAYlQ,EAAS,GAAIoQ,GAAO,IAG1E,IAAI0B,EAAe9R,EAYnB,OAXIuV,GAEArF,GADA4B,EAAepU,EAAW,GAAIoU,GACJ,CACtB7R,MAAOA,EACPoV,SAAUA,EACVxO,MAAOyL,EACP1O,OAAQA,EACRuR,SAAUvR,EAAOM,KAAKoO,IACvBlC,GAGA0B,GAGXgD,YAAa,SAAS5Q,EAAMD,GACxB,IAAIyP,EAAWzP,EAAOL,OAAO/D,KACzBI,EAAQiE,EAAKjE,MACbuV,EAAY1V,KAAKsR,gBAAgBsC,GAEjCG,SAAS5T,IAAoB,OAAVA,KACnBuV,EAAY1V,KAAKsR,gBAAgBsC,GAC7B8B,GAAa,CAAEtT,IAAKpG,EAAWsG,IAAKrG,IAE9BmG,IAAMC,KAAKD,IAAIsT,EAAUtT,IAAKjC,GACxCuV,EAAUpT,IAAMD,KAAKC,IAAIoT,EAAUpT,IAAKnC,KAIhDgQ,gBAAiB,SAASrM,GACtB,IAAIpC,EAAW1B,KAAK0B,SAChBkS,EAAW9P,EAAO/D,KAClBA,EAAO6T,EAAWlS,EAASiU,eAAe/B,GAAYlS,EAAS6R,UAEnE,IAAKxT,EACD,MAAM,IAAIoH,MAAM,yCAA2CyM,GAG/D,OAAO7T,GAGXyN,OAAQ,SAASC,GACb,IAAIhK,EAAWzD,KAEX4V,EAAgB5V,KAAK4V,cAAgB,GACrCC,EAAc7V,KAAKuR,OACnBH,EAAepR,KAAKoR,aACpBnN,EAAU,EAEdjE,KAAK6R,oBAAmB,SAAUzN,EAAMD,GACpC,IAAIqO,EAAarO,EAAOqO,WACpBsD,EAAgB3R,EAAOL,OAEvByP,EAAY9P,EAAS0M,gBAAgB2F,GACrC1V,EAAQyV,EAAY5R,KAEpB8R,EAAeH,EAAcpD,GAMjC,GALKuD,IACDH,EAAcpD,GAAcuD,EACxBtS,EAASsS,aAAa3E,EAAcoB,EAAYe,IAGpDnT,EAAO,CACP,IAAI2S,EAAYtP,EAASsP,UAAU3S,EAAOmT,EAAUP,cAChDgD,EAAYvS,EAASuS,UAAUzC,EAAWR,GAC9C,GAAIiD,EAAW,CACX,IAAIC,EAAYxS,EAASwS,UAAUF,EAAcC,GAEjD5V,EAAM8V,UAAYzS,EAASyS,UAAU9V,EAAOmT,GAC5CnT,EAAM+V,WAAapD,EAAU,GAEzBtP,EAASvD,QAAQqS,eACjBnS,EAAMgW,WAAa3S,EAAS6O,UAAUlS,IAG1CqD,EAAS4S,YAAYjW,EAAO6V,QAE5B7V,EAAMkW,SAAU,MAK5BtW,KAAKuW,iBAAiBX,IACjB5V,KAAKE,QAAQsW,MAAQxW,KAAKE,QAAQuW,aAAezW,KAAKuR,OAAOtQ,QAC9DjB,KAAKyW,cAGTzW,KAAK0O,IAAMjB,GAGfuI,UAAW,SAASzC,EAAWR,GAC3B,OAAOQ,EAAUzF,QAAQiF,EAAU,GAAIA,EAAU,IAAK/S,KAAKE,QAAQsW,OAGvEC,YAAa,WAKT,IAJA,IAEIjF,EAAiBxR,KAAKwR,eACtBD,EAASC,EAAe,GAAGzN,OAAOlG,EAAK2T,IAClCxQ,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAC/BuQ,EAAOvQ,IALAhB,KAME0W,WAAWnF,EAAOvQ,KAKvC0V,WAAY,SAAStW,GACjB,IAAIuW,EAAe3W,KAAKoR,aAAawF,UAAUxW,EAAMsO,KAChDiI,EAAaE,OAAOzW,EAAMsO,MAC3BtO,EAAMoN,OAAOmJ,IAIrBT,UAAW,SAAS9V,EAAOmT,GACvB,IAAIC,EAAoBxT,KAAKyT,0BAA0BF,GACnDpT,EAAQC,EAAMD,MAElB,OAAOoT,EAAUrT,QAAQ4W,QACrB3W,EAAQqT,EAAoBrT,GAASqT,GAG7CC,0BAA2B,SAASF,GAChC,IAAInC,EAAepR,KAAKoR,aACpBlR,EAAUqT,EAAUrT,QAKxB,MAJqB,GAAG6D,OACpB7D,EAAQ6W,oBAAsB7W,EAAQsT,mBAGpBpC,EAAa4F,WAAa,IAAM,GAG1DX,YAAa,SAASjW,EAAO6V,GACzB7V,EAAMoN,OAAOyI,IAGjBM,iBAAkB,aAElBN,UAAW,SAASF,EAAcC,GAC9B,IACI3D,EADUrS,KAAKE,QACMmS,WACrB4E,EAAQ5E,EAAa2D,EAAYD,EACjCmB,EAAQ7E,EAAa0D,EAAeC,EAExC,OAAO,IAAI3Y,EAAI4Z,EAAMtI,GAAIuI,EAAM1I,GAAIyI,EAAMrI,GAAIsI,EAAMzI,KAGvDsH,aAAc,SAAS3E,EAAcoB,GACjC,OAAOpB,EAAatD,QAAQ0E,IAGhCX,mBAAoB,SAASsF,GAOzB,IANA,IAAI1T,EAAWzD,KAEX8D,EAAS9D,KAAKE,QAAQ4D,OACtB9B,EAAQ+O,GAAgBjN,GACxBkN,EAAclN,EAAO7C,OAEhBgR,EAAW,EAAGA,EAAWjB,EAAaiB,IAC3CxO,EAAS2T,oBAAoBtT,EAAOmO,GAAW,sBAAuBA,EAAUkF,GAGpF,IAAK,IAAI3E,EAAa,EAAGA,EAAaxQ,EAAOwQ,IACzC,IAAK,IAAI6E,EAAa,EAAGA,EAAarG,EAAaqG,IAAc,CAC7D,IAAIvB,EAAgBhS,EAAOuT,GACvBC,EAAkB7T,EAAS2N,aAAamG,WAAW/E,GAGvD2E,EAFgB1T,EAAS+T,WAAW1B,EAAeuB,EAAY7E,GAE3C,CAChB+C,SAAU+B,EACV9E,WAAYA,EACZzB,gBAAiB/O,EACjB8B,OAAQgS,EACR7D,SAAUoF,IAKtB,IAAK,IAAII,EAAa,EAAGA,EAAazG,EAAayG,IAC/ChU,EAAS2T,oBAAoBtT,EAAO2T,GAAa,sBAAuBA,EAAYN,IAI5FC,oBAAqB,SAAStT,EAAQjB,EAAOoP,EAAUkF,GACnD,IAAIO,EAAkB5T,EAAOjB,GAC7B,GAAI6U,EAAiB,CACjB,IAAIlF,EAAakF,EAAgBlF,WAGjC2E,EAFgBnX,KAAKwX,WAAW1T,EAAQmO,EAAUO,EAAYkF,EAAgBxT,MAE1D,CAChBqR,SAAUmC,EAAgBnC,SAC1B/C,WAAYA,EACZ1O,OAAQA,EACRmO,SAAUA,EACVoD,SAAUqC,EAAgBxT,SAKtCsT,WAAY,SAAS1T,EAAQmO,EAAUO,EAAYtO,GAC1ClE,KAAK2X,aACN3X,KAAK2X,WAAa,IAGtB,IAAIC,EAAY5X,KAAK2X,WAAW1F,GAC3B2F,IACDA,EAAY5X,KAAK2X,WAAW1F,GAAY,IAG5C,IAAI7N,EAAOwT,EAAUpF,GAKrB,OAJKpO,IACDA,EAAOwT,EAAUpF,GAAcxP,GAAasC,QAAQtB,UAAUF,EAAQ0O,EAAYtO,IAG/EE,GAGXyT,iBAAkB,SAASzX,EAAO0X,GAC9B,OAAoB,OAAhB1X,EAAMD,MACC,GAGJH,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ1X,EAAMD,QAGvD+G,WAAY,SAAS9C,GACjB,OAAOA,EAAKb,YAAYpD,SAIhC5C,EAAkB2T,GAAkB,CAChCpN,OAAQ,GACRuO,YAAY,EACZY,WAAW,EACXuD,MAAM,EACNC,aAAa,IAGjB,IAAIuB,GAAmB,CACnBC,MAAO,SAAS5K,EAAO6K,GACnB,OAAO7K,EAAM8K,QACTjN,GACAlL,KAAKoY,UAAUF,KAIvBG,MAAO,SAAShL,EAAO6K,GACnB,OAAO7K,EAAM8K,QACThN,GACAnL,KAAKoY,UAAUF,KAIvBI,KAAM,SAASjL,EAAO6K,GAClB,OAAO7K,EAAM8K,QACT/M,GACApL,KAAKoY,UAAUF,KAIvBK,IAAK,SAASlL,EAAO6K,GACjB,OAAO7K,EAAM8K,QACT9M,GACArL,KAAKoY,UAAUF,KAIvBE,UAAW,SAASF,GAChB,MAAO,CACH/X,MAAOH,KAAKG,MACZiW,WAAYpW,KAAKoW,WACjBD,WAAYnW,KAAKmW,WACjBZ,SAAUvV,KAAKuV,SACfzR,OAAQ9D,KAAK8D,OACbuR,SAAUrV,KAAKqV,SACfmD,aAAcxY,KAAKwY,aACnBhR,MAAOxH,KAAKwH,MACZiR,QAAS3a,EAAaoa,GACtBQ,cAAeR,EACf9X,MAAOJ,QAKf2Y,GAAY,CACZC,WAAY,WACR,IAAI1Y,EAAUF,KAAKE,QAAQ2Y,MACvBC,EAAO9Y,KAAKoV,UAAYlV,EAAQ6Y,MAAMD,MAElB,IAApB5Y,EAAQoW,SAAqBtZ,EAAQ8b,IAAkB,OAATA,IAC9C9Y,KAAKgZ,KAAO,IAAIrd,EAAQsd,KAAK,CACzB9Y,MAAOH,KAAKG,MACZ2Y,KAAMA,EACNzD,SAAUrV,KAAKqV,SACfE,SAAUvV,KAAKuV,SACfzR,OAAQ9D,KAAK8D,QACd9D,KAAKE,QAAQ2Y,MAAO7Y,KAAKmV,MAAMhE,cAElCnR,KAAK5B,OAAO4B,KAAKgZ,SAKzBE,GAAY/b,EAAa0C,OAAO,CAChCC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAKG,MAAQA,EACbH,KAAKE,QAAUA,EACfF,KAAKkW,UAAYxY,EAAesC,KAAKE,QAAQgW,WAAW,GACxDlW,KAAKmZ,iBAAkB,GAG3BvH,OAAQ,WACJ,IAAIqC,EAAMjU,KAAKE,QACXkZ,EAAUnF,EAAImF,QACdC,EAASpF,EAAIoF,OAEjB,IAAIrZ,KAAKsZ,UAAT,CAWA,GAPAtZ,KAAKsZ,WAAY,EAEbF,EAAQ9C,SAAW8C,EAAQG,OAC3BvZ,KAAKwZ,OAASxZ,KAAKyZ,eACnBzZ,KAAK5B,OAAO4B,KAAKwZ,SAGjBH,EAAO/C,QAAS,CAChB,IAAIoD,EAAgB3b,EAAYsb,GAC5BhV,EAAYrE,KAAKqE,YACjBsV,EAAY3Z,KAAKG,MACjBuZ,EACAC,EAAYD,EAAcrV,GACnBgV,EAAOvB,SACd6B,EAAY3Z,KAAK4Z,YAAYP,EAAOvB,SAExC9X,KAAK+Y,MAAQ,IAAI/a,EAAQ2b,EACrB/b,EAAW,CACPic,MAAO1d,EACP2d,OAAQ3d,EACR4d,OAAQ,CACJC,KAAM,EACNC,MAAO,GAEXhK,OAAQvS,EAAe2b,EAAOpJ,OAAQjQ,KAAK8D,OAAOmM,SACnDoJ,GACHhV,GAEJrE,KAAK5B,OAAO4B,KAAK+Y,OAGrB/Y,KAAK4Y,aAED5Y,KAAKiV,UACLjV,KAAK5B,OAAO4B,KAAKiV,YAIzBiF,aAAc,WACV,IAAIha,EAAUF,KAAKE,QAAQkZ,QACvBe,EAAaja,EAAQia,WACrBC,EAASxc,EAAW,CAAE0R,MAAOtP,KAAKsP,OAASpP,EAAQka,QAMvD,OAJKpd,EAAQod,EAAO9K,SAChB8K,EAAO9K,MAAQ,IAAI9P,GAAM2a,GAAYE,WAAWvS,IAAmBwS,SAGhEF,GAGXnL,aAAc,aAEdwK,aAAc,WACV,IAAIvZ,EAAUF,KAAKE,QAAQkZ,QAmB3B,OAlBa,IAAInb,EAAa,CAC1ByF,KAAMxD,EAAQwD,KACdoL,MAAO5O,EAAQqZ,KACfxK,OAAQ7O,EAAQqZ,KAChBgB,SAAUra,EAAQqa,SAClBJ,WAAYja,EAAQia,WACpBC,OAAQpa,KAAKka,eACbM,QAASta,EAAQsa,QACjBvK,OAAQvS,EAAewC,EAAQ+P,OAAQjQ,KAAK8D,OAAOmM,QACnDF,UAAW7P,EAAQ6P,UACnB1O,OAAQnB,EAAQmB,QACjB,CACCgU,SAAUrV,KAAKqV,SACflV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,OACbyR,SAAUvV,KAAKuV,YAMvBkF,UAAW,WAMP,OALKza,KAAKwZ,SACNxZ,KAAKwZ,OAASxZ,KAAKyZ,eACnBzZ,KAAKwZ,OAAOhM,OAAOxN,KAAK0a,YAGrB1a,KAAKwZ,OAAO9K,KAGvBlB,OAAQ,SAASC,GACb,IAGIvN,EADMF,KACQE,QACdgW,EAFMlW,KAEUkW,UAChB9D,EAAWlS,EAAQkS,SAEvBpS,KAAK4R,SAEL5R,KAAK0O,IAAMjB,EACX,IAAIkN,EAAWlN,EAAUmN,QAuBzB,GArBIxI,EACI8D,EACAyE,EAASnM,IAAMmM,EAAS5L,SAExB4L,EAASlM,IAAMkM,EAAS5L,SAGxBmH,EACAyE,EAAShM,IAAMgM,EAAS7L,QAExB6L,EAAS/L,IAAM+L,EAAS7L,QAIhC9O,KAAK0a,UAAYC,EACb3a,KAAKwZ,QACLxZ,KAAKwZ,OAAOhM,OAAOmN,GAGvB3a,KAAK6a,YAAYF,GAEb3a,KAAK0U,UACL,IAAK,IAAIzS,EAAI,EAAGA,EAAIjC,KAAK0U,UAAUzT,OAAQgB,IAlChCjC,KAmCE0U,UAAUzS,GAAGuL,OAAOmN,GAIrC,GAAI3a,KAAKgZ,KAAM,CACX,IAAI8B,EAAgB9a,KAAKya,YAEzB,IAAMva,EAAQkZ,QAAQ9C,UAAWpW,EAAQkZ,QAAQG,KAAO,CACpD,IAAIvL,EAAS8M,EAAc9M,SAC3B8M,EAAgB,IAAIzd,EAAI2Q,EAAOI,EAAGJ,EAAOK,EAAGL,EAAOI,EAAGJ,EAAOK,GAGjErO,KAAKgZ,KAAKxL,OAAOsN,KAIzBD,YAAa,SAASnM,GAClB,IACIxO,EADMF,KACQE,QACd6Y,EAFM/Y,KAEM+Y,MACZgC,EAAS7a,EAAQmZ,OAAO2B,SAExBjC,IAEAgC,GADAA,EAASA,IAAWrS,GAAQtM,EAAM2e,KACdpS,GAAQtM,EAAS0e,EAErChC,EAAMvL,OAAOkB,GACbqK,EAAMrK,IAAIuM,QAAQjb,KAAKya,YAAaM,GACpChC,EAAMvL,OAAOuL,EAAMrK,OAI3BwM,gBAAiB,WACb,IAAI9B,EAAUpZ,KAAKE,QAAQib,UAAU/B,QACjCgC,EAAepb,KAAKka,eAAe5K,MACnCpP,EAAUF,KAAKE,QAAQkZ,QACvBG,EAAOrZ,EAAQqZ,MAAQrZ,EAAQka,OAAOtL,OAAS,IAAMsK,EAAQgB,OAAOtL,OAAS,GAE7EuM,EAAS,IAAIpd,EAAa,CAC1ByF,KAAMxD,EAAQwD,KACdoL,MAAOyK,EACPxK,OAAQwK,EACRgB,SAAUra,EAAQqa,SAClBJ,WAAYf,EAAQ9J,OAAS8L,EAC7BhB,OAAQ,CACJ9K,MAAO8J,EAAQgB,OAAO9K,MACtBR,MAAOsK,EAAQgB,OAAOtL,MACtB0L,QAAS9c,EAAe0b,EAAQgB,OAAOI,QAAS,IAEpDA,QAAS9c,EAAe0b,EAAQoB,QAAS,KAI7C,OAFAa,EAAO7N,OAAOxN,KAAK0a,WAEZW,EAAOC,cAGlBC,gBAAiB,WACb,OAAQvb,KAAKwZ,QAAU,IAAInY,QAG/Bma,oBAAqB,WACjB,IACIna,EAAQ6N,EADRsK,EAASxZ,KAAKwZ,OAGlB,GAAIA,EACAtK,EAAOsK,EAAOiC,WAAWtM,SACzB9N,EAASmY,EAAOnY,WACb,CACH,IAAIkY,EAAOvZ,KAAKE,QAAQkZ,QAAQG,KAC5BmC,EAAWnC,EAAO,EAClBvL,EAAShO,KAAK0O,IAAIV,SACtBkB,EAAO,IAAIzP,GAASkc,KAAK,CAAE3N,EAAOI,EAAIsN,EAAU1N,EAAOK,EAAIqN,GAAY,CAAEnC,EAAMA,IAGnF,MAAO,CACHrZ,QAASF,KAAKE,QACdgP,KAAMA,EACN7N,OAAQA,IAIhBua,cAAe,WACX,IAAInB,EAAYza,KAAKya,YACjBoB,EAAU7b,KAAKmV,MAAM/T,KAAKya,UAG9B,IAFmBA,GAAWA,EAAQC,SAASrB,GAE9B,CACb,IAEIpM,EAAG0N,EAFH3N,EAAIqM,EAAU7L,GAjsCT,EAksCLoN,EAAkB1f,EAWtB,OARI0D,KAAKkW,WACL7H,EAAIoM,EAAUjM,GACduN,EAAgB1f,IAEhBgS,EAAIoM,EAAUhM,GACdsN,EAAgB3f,GAGb,CACHgE,MAAO,IAAIhD,EAAMgR,EAAGC,GACpBwL,MAAO,CACHoC,WAAYD,EACZ5J,SAAU2J,MAM1BnC,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CoE,YAAa,SAASxN,GAElB,OADgB1O,KAAKya,YACJqB,SAASpN,IAG9ByN,eAAgB,WACRnc,KAAK+Y,QACL/Y,KAAK+Y,MAAM7Y,QAAQkc,QAAS,GAG5Bpc,KAAKgZ,OACLhZ,KAAKgZ,KAAK9Y,QAAQkc,QAAS,IAInC/X,UAAW,WACP,MAAO,CACHgR,SAAUrV,KAAKqV,SACfE,SAAUvV,KAAKuV,SACfpV,MAAOH,KAAKG,MACZiW,WAAYpW,KAAKoW,WACjBD,WAAYnW,KAAKmW,WACjBrS,OAAQ9D,KAAK8D,WAKzBoV,GAAU/G,UAAU3B,SAAW,CAC3B4B,UAAU,EACVgH,QAAS,CACL9C,SAAS,EACT6D,WAAY5d,EACZgd,KAnvCe,EAovCf7V,KAAMlH,EACN4d,OAAQ,CACJtL,MAAO,GAEX0L,QAAS,GAEbnB,OAAQ,CACJ/C,SAAS,EACT0E,SAAUtS,GACVqR,OAAQ7b,EAAW,GACnBme,QAASne,EAAW,GACpB6R,UAAW,CACPrM,KAAMmE,GACNmI,MAAOpI,KAGfiR,MAAO,CACHE,MAAO,IAEXoC,UAAW,CACP/B,QAAS,CACLgB,OAAQ,CACJ9K,MAAO,OACPR,MAAO,IAGfmB,OAAQnU,EAAiBwgB,kBAE7B5H,UAAW,CACPnF,KAAM,CACFT,MAAO,KAKnBlR,EAAWsb,GAAU/G,UAAW6F,IAChCpa,EAAWsb,GAAU/G,UAAWwG,IAEhC,IAAI4D,GAAcpf,EAAa0C,OAAO,CAClCC,KAAM,SAAS4N,EAAY5J,EAAQmO,GAC/B9U,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAK0N,WAAaA,EAClB1N,KAAK8D,OAASA,EACd9D,KAAKiS,SAAWA,GAGpBV,OAAQ,WACJ,OAAOvR,KAAKwc,iBAAiBxc,KAAK0N,aAGtC8O,iBAAkB,SAASjL,GAEvB,IADA,IAAI9O,EAAS,GACJR,EAAI,EAAGhB,EAASsQ,EAAOtQ,OAAQgB,EAAIhB,EAAQgB,IAC5CsP,EAAOtP,KAA4B,IAAtBsP,EAAOtP,GAAGqU,SACvB7T,EAAO4C,KAAKkM,EAAOtP,GAAGyY,UAAUvL,SAASnB,UAIjD,OAAOvL,GAGXwM,aAAc,WACV,IAAIxL,EAAWzD,KAEXyc,EAAezc,KAAK8D,OAAOzC,OAC3Bob,GACAzc,KAAKqB,OAASob,EAAa,CACvBlL,OAAQvR,KAAKwc,iBAAiBxc,KAAK0N,YACnC5J,OAAQ9D,KAAK8D,OACbsL,OAAQpP,KAAKqP,YACbJ,aAAc,WAGV,OAFAxL,EAASiZ,gBAEFjZ,EAASpC,UAGpBrB,KAAKqB,SAAWrE,EAAQgD,KAAKqB,OAAOnB,QAAQ+P,UAC5CjQ,KAAKqB,OAAOnB,QAAQ+P,OAASjQ,KAAK8D,OAAOmM,SAG7CjQ,KAAK0c,iBAIbA,cAAe,WACX,IACIxc,EADMF,KACQE,QACd4D,EAFM9D,KAEO8D,OACbwL,EAAQxL,EAAOwL,MACfkB,EAAW1M,EAAO0R,UAElB/X,EAAW6R,IAAUkB,IACrBlB,EAAQkB,EAASlB,OAGrB,IAAIC,EAAOnQ,GAAKud,WAAW3c,KAAKuR,SAAU,CACtC5B,OAAQ,CACJL,MAAOA,EACPR,MAAOhL,EAAOgL,MACd0L,QAAS1W,EAAO0W,QAChB5K,SAAU9L,EAAO8L,UAErBK,OAAQnM,EAAOmM,SAGf/P,EAAQ0c,QACRrN,EAAKsN,QAGT7c,KAAKqB,OAASkO,GAGlBuN,SAAU,SAAS5E,EAAG6E,GAClB,OAAO/c,KAAKgd,OAAOC,gBAAgBF,EAAO3O,EAAG2O,EAAO1O,EAAGrO,KAAKiS,aAIpE1U,EAAkBgf,GAAa,CAC3BK,QAAQ,IAGZ,IAAIM,GAAgB,CAChBC,oBAAqB,SAAS5L,GAe1B,IAdA,IACI0C,EADejU,KAAKgd,OAAOtb,SAAS2P,mBAAmBrR,KAAK8D,QACzC5D,QACnBkd,EAAYnJ,EAAImJ,UAChBhL,EAAW6B,EAAI7B,SACf0E,EAAU7C,EAAI6C,QAEduG,EAAWjL,EAAW3V,EAAIC,EAC1BqD,EAAOqS,EAAW1V,EAAID,EACtB6gB,EAAUxG,EAAU,EAAI,EACxByG,EAAMD,EAENE,EAAgBC,GAAgBlM,EAAO,GAAI8L,EAAUC,EAASvd,EAAMwd,GACpE9a,EAAS,CAAE+a,GAENxc,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQqd,GAAgBlM,EAAOvQ,GAAMqc,EAAUC,EAASvd,EAAMwd,GAElE,GAAIC,EAAcH,KAAcjd,EAAMid,GAAW,CAC7C,IAAIK,EAAY,IAAIhe,GACpBge,EAAUL,GAAYG,EAAcH,GACpCK,EAAU3d,GAAQK,EAAML,GAExB0C,EAAO4C,KAAKqY,EAAWtd,GAG3Bod,EAAgBpd,EASpB,OANKgd,EAEMI,IAAkB3f,EAAK4E,IAC9BA,EAAO4C,KAAKmY,GAFZ/a,EAAO4C,KAAKoY,GAAgB5f,EAAK0T,GAAS8L,EAAUC,EAASvd,EAAM+W,EAAU,EAAI,IAK9ErU,IAKf,SAASgb,GAAgBE,EAAWN,EAAUC,EAASvd,EAAMwd,GACzD,IAAI7O,EAAMiP,EAAUjP,IAChBjM,EAAS,IAAI/C,GAKjB,OAHA+C,EAAO4a,GAAY3O,EAAI2O,EAAWC,GAClC7a,EAAO1C,GAAQ2O,EAAI3O,EAAOwd,GAEnB9a,EAGX,IAAImb,GAAkBrB,GAAY1c,OAAO,CACrC0R,OAAQ,WACJ,OAAOvR,KAAKmd,oBAAoBnd,KAAK0N,eAI7C9P,EAAWggB,GAAgBzL,UAAW+K,IAEtC,IAAIW,GAAgBtB,GAAY1c,OAAO,CACnC6c,cAAe,WACX,IAAI5Y,EAAS9D,KAAK8D,OACd0M,EAAW1M,EAAO0R,UAClBlG,EAAQxL,EAAOwL,MAEf7R,EAAW6R,IAAUkB,IACrBlB,EAAQkB,EAASlB,OAGrB,IACIwO,EADiB,IAAI3f,EAAe6B,KAAKE,QAAQ0c,QACvBmB,QAAQ/d,KAAKuR,UACvCyM,EAAQ,IAAI5e,GAAK,CACjBuQ,OAAQ,CACJL,MAAOA,EACPR,MAAOhL,EAAOgL,MACd0L,QAAS1W,EAAO0W,QAChB5K,SAAU9L,EAAO8L,UAErBK,OAAQnM,EAAOmM,SAGnB+N,EAAMF,SAASzY,KAAK4Y,MAAMD,EAAMF,SAAUA,GAE1C9d,KAAKqB,OAAS2c,KAIlBE,GAAiB,CACjBC,eAAgB,WACZ,IAOIC,EAPA3a,EAAWzD,KAGXE,EADMF,KACQE,QACduR,EAFMzR,KAEayR,aACnB3N,EAAS5D,EAAQ4D,OACjBkN,EAAcS,EAAaxQ,OAG/BjB,KAAKqe,UAAY,GAEjB,IAAK,IAAIpM,EAAW,EAAGA,EAAWjB,EAAaiB,IAAY,CAMvD,IALA,IAAI6D,EAAgBhS,EAAOmO,GACvBqM,EAAe7a,EAAS8a,WAAW9M,EAAaQ,IAChDuM,EAAaF,EAAard,OAC1ByM,EAAa,GAERzJ,EAAU,EAAGA,EAAUua,EAAYva,IAAW,CACnD,IAAI7D,EAAQke,EAAara,GACrB7D,EACAsN,EAAWrI,KAAKjF,GACTqD,EAASgb,oBAAoB3I,KAAmBtN,KACnDkF,EAAWzM,OAAS,IACpBmd,EAAc3a,EAASib,cACnBhR,EAAYoI,EAAe7D,EAAUmM,GAEzC3a,EAASkb,YAAYP,IAEzB1Q,EAAa,IAIjBA,EAAWzM,OAAS,IACpBmd,EAAc3a,EAASib,cACnBhR,EAAYoI,EAAe7D,EAAUmM,GAEzC3a,EAASkb,YAAYP,IAI7Bpe,KAAK4e,SAASC,QAAQZ,MAAMje,KAAK4e,SAAU5e,KAAKqe,YAGpDM,YAAa,SAASG,GAClB9e,KAAKqe,UAAUhZ,KAAKyZ,GACpBA,EAAQ9B,OAAShd,MAGrBue,WAAY,SAAShN,GACjB,OAAOA,GAGXkN,oBAAqB,SAAS3a,GAC1B,IAAIib,EAAgBjb,EAAOib,cAG3B,OAFkBA,GAAiB/e,KAAKE,QAAQ+S,UAE5B1K,GAAOwW,GAAiBvW,IAGhDyU,gBAAiB,SAAS7O,EAAGC,EAAG4D,GAM5B,IALA,IAGI+M,EAHAC,EAAS,IAAI7hB,EAAMgR,EAAGC,GACtB6Q,EAAYlf,KAAKyR,aAAaQ,GAC9BkN,EAAuBnjB,EAGlBiG,EAAI,EAAGA,EAAIid,EAAUje,OAAQgB,IAAK,CACvC,IAAI7B,EAAQ8e,EAAUjd,GAEtB,GAAI7B,GAASpD,EAAQoD,EAAMD,QAA0B,OAAhBC,EAAMD,QAAoC,IAAlBC,EAAMkW,QAAmB,CAClF,IACI8I,EADWhf,EAAMsO,IACQV,SAASqR,WAAWJ,GAE7CG,EAAgBD,IAChBH,EAAe5e,EACf+e,EAAuBC,IAKnC,OAAOJ,IAIXM,GAAgBjgB,GAAUQ,OAAO,CACjC0f,MAAO,WACHvf,KAAKwf,QAAQxf,KAAKE,QAAQwO,IAAIC,KAGlC8Q,KAAM,SAASC,GACX,IAAIhR,EAAM1O,KAAKE,QAAQwO,IACvB1O,KAAKwf,QAAQ7jB,EAAQgkB,iBAAiBjR,EAAIC,GAAID,EAAIE,GAAI8Q,KAG1DF,QAAS,SAASpR,GACd,IAAIqK,EAAUzY,KAAKyY,QACfqF,EAAWrF,EAAQqF,SACnB8B,EAAW9B,EAAS,GAAG/C,SACvB8E,EAAc/B,EAAS,GAAG/C,SAE9BtC,EAAQqH,UACRF,EAASG,KAAK3R,GACdqK,EAAQuH,SACRH,EAAYE,KAAK3R,MAUzB,SAAS6R,GAAaC,GAClB,IAAK,IAAIlf,EAAM,EAAGA,EAAMkf,EAASjf,OAAQD,IACrC,GAAIhE,EAAQkjB,EAASlf,GAAKiP,QACtB,OAAO,EATnB1S,EAAkB+hB,GAAe,CAC7Ba,SAAUvY,KAGdtI,GAAiBgG,QAAQjC,SAAS,OAAQic,IAU1C,IAAIc,GAAqB,CACrBC,gBAAiB,WACb,IAAIC,EAAOtgB,KAAKugB,UAChB,GAAID,IAA6C,KAApCA,EAAKpgB,SAAW,IAAIsgB,YAAuB,CACpD,IAAI9R,EAAM4R,EAAK/G,OACXkH,EAAWrhB,GAAKshB,SAAShS,EAAIS,UACjCnP,KAAKqB,OAAOmV,KAAKiK,GACjBzgB,KAAK+P,UAAY,IAAIuP,GAAcmB,EAAU,CACzC/R,IAAKA,IAELuR,GAAajgB,KAAKE,QAAQ4D,SAC1B9D,KAAK2gB,sBAAsBF,KAKvCE,sBAAuB,SAASF,GAG5B,IAFA,IAAIlP,EAASvR,KAAK4gB,kBAET5f,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQmR,EAAOvQ,GACfZ,GAASA,EAAMiB,QAAUrE,EAAQoD,EAAMiB,OAAOnB,QAAQ+P,SACtD7P,EAAMiB,OAAOmV,KAAKiK,MAM9BI,GAAY3P,GAAiBrR,OAAO,CACpC+R,OAAQ,WAEJV,GAAiB5D,GAAGsE,OAAOrE,KAAKvN,MAEhCA,KAAKgU,mBACLhU,KAAKme,kBAGTjM,UAAW,WACP,OAAOgH,IAGXhE,YAAa,SAAS9Q,EAAMD,GACxB,IAAIL,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAClB8M,EAAgB/e,KAAKye,oBAAoB3a,GACzC3D,EAAQiE,EAAKb,YAAYpD,MAE7B,IAAKnD,EAAQmD,IAAoB,OAAVA,EAAgB,CACnC,GAAI4e,IAAkBxW,GAGlB,OAAO,KAFPpI,EAAQ,EAMhB,IAAI6R,EAAehS,KAAKgS,aAAalO,EAAQmO,GAC7CD,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GAE1D,IAAImL,EAAQlL,EAAKD,OAAOmL,OAASxL,EAAOwL,MACpC7R,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB,IAAIlP,EAAQ,IAAI8Y,GAAU/Y,EAAO6R,GAKjC,OAJA5R,EAAMkP,MAAQA,EAEdtP,KAAK5B,OAAOgC,GAELA,GAGX2S,UAAW,SAAS3S,GAChB,IAEIkS,EAAYtS,KAAKsS,UAAUlS,GAE/B,GAAIJ,KAAKE,QAAQ+S,UAIb,IAHA,IAAIT,EAAapS,EAAMoS,WACnBhB,EAAiBxR,KAAKwR,eAAegB,GAEhCvQ,EAAI,EAAGA,EAAIuP,EAAevQ,OAAQgB,IAAK,CAC5C,IAAI0Q,EAAQnB,EAAevP,GAE3B,GAAI7B,IAAUuS,EACV,MAGJL,GAfOtS,KAeesS,UAAUK,GAfzB3S,KAiBME,QAAQqS,eACjBD,EAAYjQ,KAAKD,IAAIkQ,EAAW,IAM5C,MAAO,CAAEA,EAAWA,IAGxBoM,cAAe,SAAShR,EAAYoI,EAAe7D,GAC/C,IAAI6O,EAAQhL,EAAcgL,MAW1B,OAAO,IARHA,IAAUjY,GACE+U,GACLkD,IAAUlY,GACLiV,GAEAtB,IAGK7O,EAAYoI,EAAe7D,IAGpD2O,gBAAiB,WAGb,IAFA,IAAIrP,EAASvR,KAAKuR,OACd9O,EAAS,GACJzB,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnCyB,EAAO4C,MAAMkM,EAAOvQ,IAAQ,IAAIwY,QAEpC,OAAO/W,EAAOsB,OAAO/D,KAAKqe,YAG9B0C,6BAA8B,WAC1B,OAAO,KAIfnjB,EAAWijB,GAAU1O,UAAW+L,GAAgBkC,IAEhD,IAAIY,GAAczE,GAAY1c,OAAO,CACjCC,KAAM,SAAS4N,EAAYoI,EAAe7D,EAAUgP,EAAaC,GAC7D3E,GAAYjP,GAAGxN,KAAKyN,KAAKvN,KAAM0N,EAAYoI,EAAe7D,GAE1DjS,KAAKihB,YAAcA,EACnBjhB,KAAKkhB,YAAcA,GAGvBjS,aAAc,WACV,IAAInL,EAAS9D,KAAK8D,OACd0M,EAAW1M,EAAO0R,UAClB9F,EAAc5L,EAAOyL,MAAQ,GAC7BD,EAAQxL,EAAOwL,MAEf7R,EAAW6R,IAAUkB,IACrBlB,EAAQkB,EAASlB,OAGrBtP,KAAKqB,OAAS,IAAI9B,GAAM,CACpB0Q,OAAQnM,EAAOmM,SAGnBjQ,KAAKmhB,WAAW,CACZC,KAAM,CACF9R,MAAOA,EACPkL,QAAS1W,EAAO0W,SAEpB7K,OAAQ,OAGRD,EAAYZ,MAAQ,IAA6B,IAAxBY,EAAY4G,SACrCtW,KAAKqhB,aAAa,CACd1R,OAAQ/R,EAAW,CACf0R,MAAOA,EACPkL,QAAS1W,EAAO0W,QAChB8G,QAAS,QACV5R,MAKf6R,eAAgB,WACZ,IAAIzD,EAAW9d,KAAKwhB,gBAMpB,OAJK1D,IACDA,EAAW9d,KAAKwhB,gBAAkBxhB,KAAKyhB,wBAGpC3D,GAGX2D,qBAAsB,WAClB,OAAOzhB,KAAK0hB,mBAAmB1hB,KAAKuR,WAGxCoQ,cAAe,WACX,OAAI3hB,KAAKihB,YACEjhB,KAAKihB,YAAYW,oBAAoB5hB,KAAKkhB,aAG9ClhB,KAAK4hB,oBAAoB5hB,KAAKkhB,cAGzCU,oBAAqB,SAASV,GAC1B,OAAOlhB,KAAK0hB,mBAAmB1hB,KAAKwc,iBAAiB0E,IAAcpK,WAGvE4K,mBAAoB,SAASnQ,GACzB,OAAOA,EAAOsQ,KAAI,SAAUzhB,GAAS,OAAO,IAAIX,GAASqiB,QAAQ1hB,OAGrEihB,aAAc,SAASP,GACnB,IAAInR,EAAS,IAAIvQ,GAAK0hB,GACtBnR,EAAOmO,SAASzY,KAAK4Y,MAAMtO,EAAOmO,SAAU9d,KAAKuhB,kBAEjDvhB,KAAKqB,OAAOjD,OAAOuR,IAGvBoS,gBAAiB,WACb,OAAO/hB,KAAKihB,aAAgBjhB,KAAKkhB,aAAelhB,KAAKkhB,YAAYjgB,QAGrEkgB,WAAY,SAASL,GACjB,IAAIS,EAAiBvhB,KAAKuhB,iBACtBS,EAAeT,EAAe/c,MAAM,GACpCyd,EAAmBjiB,KAAK+hB,kBAE5B,GAAIE,EAAkB,CAClB,IAAIN,EAAgB3hB,KAAK2hB,gBAEzBvjB,EAAO4jB,EAAcL,GAGzB,IAAIP,EAAO,IAAIhiB,GAAK0hB,GACpBM,EAAKtD,SAASzY,KAAK4Y,MAAMmD,EAAKtD,SAAUkE,IAEnCC,GAAoBV,EAAetgB,OAAS,GAC7CjB,KAAKkiB,WAAWd,GAGpBphB,KAAKqB,OAAOjD,OAAOgjB,IAGvBc,WAAY,SAASC,GACjB,IAAI9U,EAAQrN,KAAKgd,OACb3K,EAAahF,EAAMnN,QAAQmS,WAC3BkB,EAAYlG,EAAM8C,gBAAgBnQ,KAAK8D,QACvCse,EAAgB/U,EAAMoG,0BAA0BF,GAChD8O,EAAU9O,EAAUzF,QAAQsU,EAAeA,GAAe,GAC1DtE,EAAW9d,KAAKuhB,iBAChBe,EAAaxE,EAAS,GAAG/C,SACzBwH,EAAY1kB,EAAKigB,GAAU/C,SAC3ByH,EAAMnQ,EAAagQ,EAAQ1T,GAAK0T,EAAQ7T,GAExC6D,EACA8P,EAASrS,OAAO0S,EAAKD,EAAUlU,GACtByB,OAAO0S,EAAKF,EAAWjU,GAEhC8T,EAASrS,OAAOyS,EAAUnU,EAAGoU,GACpB1S,OAAOwS,EAAWlU,EAAGoU,MAKtCC,GAAkBzB,GAAYnhB,OAAO,CACrC4hB,qBAAsB,WAClB,OAAOzhB,KAAK0hB,mBAAmB1hB,KAAKmd,oBAAoBnd,KAAK0N,cAGjEkU,oBAAqB,SAASV,GAC1B,OAAOlhB,KAAK0hB,mBAAmB1hB,KAAKmd,oBAAoB+D,IAAcpK,aAI9ElZ,EAAW6kB,GAAgBtQ,UAAW+K,IAEtC,IAAIwF,GAAoB1B,GAAYnhB,OAAO,CACvC4hB,qBAAsB,WAClB,IAAIkB,EAAiB,IAAIxkB,EAAe6B,KAAKE,QAAQ0c,QACjDlP,EAAa1N,KAAKuR,SAEtB,OAAOoR,EAAe5E,QAAQrQ,IAGlCkU,oBAAqB,WAGjB,IAFA,IAAIL,EAAiBvhB,KAAKuhB,iBACtBI,EAAgB,GACX3gB,EAAMugB,EAAetgB,OAAS,EAAGD,GAAO,EAAGA,IAAO,CACvD,IAAI8d,EAAUyC,EAAevgB,GAC7B2gB,EAActc,KAAK,IAAI5F,GAASqiB,QAC5BhD,EAAQ/D,SACR+D,EAAQ8D,aACR9D,EAAQ+D,cAIhB,OAAOlB,KAIXmB,GAAYjC,GAAUhhB,OAAO,CAC7B6e,cAAe,SAAShR,EAAYoI,EAAe7D,EAAUgP,GACzD,IAEI8B,EAEA7B,EAJAjO,EAAYjT,KAAKE,QAAQ+S,UACzB6N,GAAShL,EAAcvG,MAAQ,IAAIuR,MAInC7N,GAAahB,EAAW,GAAKgP,IAEP,QADFjhB,KAAKye,oBAAoB3I,IAEzCoL,EAAcD,EAAYvT,WAC1BqV,EAAkB9B,GAElBC,EAAclhB,KAAKgjB,gBAAgBtV,EAAYuE,EAAU6O,IAajE,OAAO,IARHA,IAAUjY,GACE4Z,GACL3B,IAAUlY,GACL8Z,GAEA1B,IAGKtT,EAAYoI,EAAe7D,EAAU8Q,EAAiB7B,IAG/E1T,OAAQ,SAASC,GAGboT,GAAUvT,GAAGE,OAAOD,KAAKvN,KAAMyN,GAE/B,IAAIyT,EAAclhB,KAAKijB,aACvB,GAAI/B,EACA,IAAK,IAAIlgB,EAAM,EAAGA,EAAMkgB,EAAYjgB,OAAQD,IAAO,CAC/C,IAAIkiB,EAAahC,EAAYlgB,GACzBiV,EARGjW,KAQkBoR,aAAatD,QAAQoV,EAAW1Q,YACzD0Q,EAAW1V,OAAOyI,KAK9B+M,gBAAiB,SAAStV,EAAYuE,EAAU6O,GAC5C,IAAIrd,EAAWzD,KAEXyR,EAAezR,KAAKyR,aACpB0R,EAAWzV,EAAW,GAAG8E,WACzBvR,EAASyM,EAAWzM,OACpBkiB,EAAW,IACXA,EAAW,EACXliB,KAGJ,IAAImiB,EAASD,EAAWliB,EACpBoiB,EAAcrjB,KAAK0R,cAAc,GAAG4R,oBAAsB,EAAI,EAC9DpC,EAAc,GAElBlhB,KAAKijB,aAAejjB,KAAKijB,cAAgB,GACzC,IAAK,IAAIzQ,EAAa2Q,EAAU3Q,EAAa4Q,EAAQ5Q,IAAc,CAC/D,IAAIvO,EAAUuO,EAAa6Q,EACvBE,EAAkBtR,EAClB7R,OAAQ,EAEZ,GAEIA,EAAQqR,IADR8R,GACsCtf,SACjCsf,EAAkB,IAAMnjB,GAEjC,GAAIA,EACI0gB,IAAUjY,IAAQ2J,EAAa2Q,IAAa1R,EAAa8R,GAAiBtf,EAAU,IACpFid,EAAY7b,KAAK5B,EAAS+f,sBAAsBhR,EAAYvO,EAASA,EAAU,EAAGsf,IAGtFrC,EAAY7b,KAAKjF,GAEb0gB,IAAUjY,IAAQ2J,EAAa,EAAI4Q,IAAW3R,EAAa8R,GAAiBtf,EAAU,IACtFid,EAAY7b,KAAK5B,EAAS+f,sBAAsBhR,EAAYvO,EAASA,EAAU,EAAGsf,QAEnF,CACH,IAAIE,EAAgBhgB,EAASigB,qBAAqBlR,GAClD/O,EAASwf,aAAa5d,KAAKoe,GAC3BvC,EAAY7b,KAAKoe,IAIzB,OAAOvC,GAGXsC,sBAAuB,SAAShR,EAAYvO,EAAS0f,EAAWC,GAK5D,IAJA,IAEIxjB,EAFAqR,EAAezR,KAAKyR,aACpB1K,EAAQ6c,EAGL7c,EAAQ,IAAM3G,GAEjBA,EAAQqR,IADR1K,GAC4B4c,GAUhC,OAPKvjB,EAIDA,EAAQqR,EAAa1K,GAAO9C,IAH5B7D,EAAQJ,KAAK0jB,qBAAqBlR,GAClCxS,KAAKijB,aAAa5d,KAAKjF,IAKpBA,GAGXsjB,qBAAsB,SAASlR,GAC3B,IAAItS,EAAUF,KAAKgS,aAAa,GAAI,GAChC5R,EAAQ,IAAI8Y,GAAU,EAAGhZ,GAI7B,OAHAE,EAAMoS,WAAaA,EACnBpS,EAAM0D,OAAS,GAER1D,GAGXqe,oBAAqB,SAAS3a,GAC1B,OAAOA,EAAOib,eAAiBxW,IAGnCwY,6BAA8B,WAC1B,OAAO,KAIX8C,GAAwBjoB,EAAMiE,OAAO,CACrCC,KAAM,WAEFE,KAAK8jB,WAAa,IAGtBC,OAAQ,SAASC,GACb,IAAIF,EAAa9jB,KAAK8jB,WAEtB,IAAK,IAAIlQ,KAAYoQ,EAAiB,CAClC,IAAIC,EAAaD,EAAgBpQ,GAC7BjT,EAAQmjB,EAAWlQ,GACvBkQ,EAAWlQ,GAAYjT,EAAQA,GAAS,CAAEyB,IAAKpG,EAAWsG,IAAKrG,GAE/D0E,EAAMyB,IAAMC,KAAKD,IAAIzB,EAAMyB,IAAK6hB,EAAW7hB,KAC3CzB,EAAM2B,IAAMD,KAAKC,IAAI3B,EAAM2B,IAAK2hB,EAAW3hB,OAInD4hB,MAAO,SAAStQ,GACZ5T,KAAK8jB,WAAWlQ,QAAYhQ,GAGhCugB,MAAO,SAASvQ,GACZ,OAAO5T,KAAK8jB,WAAWlQ,MAI3BwQ,GAAWjnB,EAAa0C,OAAO,CAC/BC,KAAM,SAASukB,EAASnkB,EAASmE,GAC7BlH,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKskB,QAAU,IAAItmB,EAAQqmB,EAASrkB,KAAKE,QAASmE,GAClDrE,KAAK5B,OAAO4B,KAAKskB,UAGrBrV,aAAc,WACVjP,KAAKskB,QAAQpkB,QAAQkc,OAASpc,KAAKE,QAAQkc,QAG/C5O,OAAQ,SAASC,GACb,IAAIvN,EAAUF,KAAKE,QACfkS,EAAWlS,EAAQkS,SACnB8D,EAAYhW,EAAQgW,UACpB4C,EAAO9Y,KAAK4e,SAAS,GACrB2F,EAAczL,EAAK5Y,QACnBwO,EAAMoK,EAAKpK,IACX2N,EAAUvD,EAAK5Y,QAAQmc,QACvBmI,EAAW/W,EAEf8W,EAAY1K,MAAQzH,EAAWjW,EAASG,EACxCioB,EAAYzK,OAAS1H,EAAWhW,EAAMD,EAElC+D,EAAQ8a,WAAaxO,GACjB4F,GACAmS,EAAYzK,OAAS1d,GAEhB8Z,GAAaxH,EAAIK,SAAWtB,EAAUsB,WACvCwV,EAAYzK,OAASzd,IAGzBkoB,EAAY1K,MAAQ3D,EAAYvZ,EAAQL,EAErC4D,EAAQ8a,WAAa7e,GAC5BooB,EAAYzK,OAAS3d,EACrBooB,EAAY1K,MAAQ1d,GACb+D,EAAQ8a,WAAavO,GACxB2F,EACAmS,EAAYzK,OAAS5D,EAAY7Z,EAASD,EAE1CmoB,EAAY1K,MAAQ3D,EAAY5Z,EAAOK,EAEpCuD,EAAQ8a,WAAatO,KACxB0F,EAEIoS,EADAtO,EACW,IAAI7Y,EACXoQ,EAAUkB,GAAIlB,EAAUe,GAAKE,EAAIK,SACjCtB,EAAUmB,GAAInB,EAAUe,IAGjB,IAAInR,EACXoQ,EAAUkB,GAAIlB,EAAUgB,GACxBhB,EAAUmB,GAAInB,EAAUgB,GAAKC,EAAIK,WAIzCwV,EAAY1K,MAAQ1d,EAEhBqoB,EADAtO,EACW,IAAI7Y,EACXoQ,EAAUmB,GAAInB,EAAUe,GACxBf,EAAUmB,GAAKF,EAAII,QAASrB,EAAUgB,IAG/B,IAAIpR,EACXoQ,EAAUkB,GAAKD,EAAII,QAASrB,EAAUe,GACtCf,EAAUkB,GAAIlB,EAAUgB,MAMnCvO,EAAQqa,WACLnI,EACAiK,EAAQrC,KAAOqC,EAAQpC,OAClBuK,EAAS1V,QAAUgK,EAAK2L,WAAW3V,SAAW,EAEnDuN,EAAQqI,IAAMrI,EAAQsI,QACjBH,EAASzV,SAAW+J,EAAK2L,WAAW1V,UAAY,GAI7D+J,EAAKtL,OAAOgX,IAGhBI,eAAgB,SAAS/I,GACrB,IACIhZ,EADW7C,KAAKE,QAAQkS,SACL1V,EAAID,EACvBooB,EAAQhiB,EAAQ,IAChB2f,EAAM3f,EAAQ,IACdiW,EAAO9Y,KAAK4e,SAAS,GACrBkG,EAAY9kB,KAAKgd,OAAOtO,IAE5B,GAAIoW,EAAUD,GAAShJ,EAAQgJ,IAAUhJ,EAAQ2G,GAAOsC,EAAUtC,GAAM,CACpE,IAAI/U,EAAYqL,EAAK2C,WAAWb,QAChCnN,EAAUoX,GAASxiB,KAAKC,IAAIwiB,EAAUD,GAAQhJ,EAAQgJ,IACtDpX,EAAU+U,GAAOngB,KAAKD,IAAI0iB,EAAUtC,GAAM3G,EAAQ2G,IAElDxiB,KAAKwN,OAAOC,OAwBxB,SAASsX,GAAmB7kB,GACxB,IAAI8kB,EAAU9kB,EAAQ8kB,QAEtB,OAAOA,GAAWA,EAAQC,UAAiC,SAArBD,EAAQC,SAtBlD1nB,EAAkB6mB,GAAU,CACxBpJ,SAAUtO,GACVqN,OAAQ7b,EAAW,GACnBme,QAASne,EAAW,GACpBoR,MAAO1S,EACPud,WAAY,GACZC,OAAQ,CACJtL,MAAO,EACPQ,MAAO,IAEX4G,WAAW,EACX9D,UAAU,EACVrC,UAAW,CACPrM,KAAMmE,GACNmI,MAAOpI,IAEXqI,OAAQ,IASZ,IAEIiV,GAAM/nB,EAAa0C,OAAO,CAC1BC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAKE,QAAUA,EACfF,KAAKsP,MAAQpP,EAAQoP,OAAS/S,EAC9ByD,KAAKkW,UAAYxY,EAAesC,KAAKE,QAAQgW,WAAW,GACxDlW,KAAKG,MAAQA,GAGjByR,OAAQ,WACA5R,KAAKsZ,YAITtZ,KAAKsZ,WAAY,EAEjBtZ,KAAKmlB,cACLnlB,KAAK4Y,aAED5Y,KAAKiV,UACLjV,KAAK5B,OAAO4B,KAAKiV,YAIzBkQ,YAAa,WACT,IAAIjlB,EAAUF,KAAKE,QACfmZ,EAASnZ,EAAQmZ,OAErB,GAAIA,EAAO/C,QAAS,CAChB,IAEIqD,EAFAtV,EAAYrE,KAAKqE,YACjBqV,EAAgB3b,EAAYsb,GAI5BM,EADAD,EACYA,EAAcrV,GAEdrE,KAAK4Z,YAAYP,EAAOvB,QAGxC9X,KAAK+Y,MAAQ,IAAIqL,GAASzK,EACtB/b,EAAW,CACPwU,SAAUlS,EAAQkS,UAEtBiH,GACDhV,GACHrE,KAAK5B,OAAO4B,KAAK+Y,SAIzBa,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CtK,OAAQ,SAASC,GAGbzN,KAAK4R,SAEL,IAAImH,EAAQ/Y,KAAK+Y,MAajB,GAXA/Y,KAAK0O,IAAMjB,EAEPsL,IACAA,EAAM7Y,QAAQgW,UAAYlW,KAAKkW,UAC/B6C,EAAMvL,OAAOC,IAGbzN,KAAKgZ,MACLhZ,KAAKgZ,KAAKxL,OAAOC,GAGjBzN,KAAK0U,UACL,IAAK,IAAIzS,EAAI,EAAGA,EAAIjC,KAAK0U,UAAUzT,OAAQgB,IAlBhCjC,KAmBE0U,UAAUzS,GAAGuL,OAAOC,IAKzCwB,aAAc,WACV,IAAIxL,EAAWzD,KAGX0O,EADM1O,KACI0O,IACVxO,EAFMF,KAEQE,QACduc,EAAevc,EAAQmB,OAE3B,IAAqB,IAAjBrB,KAAKsW,QAGL,GAFAnZ,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAE9Byc,EAAc,CACd,IAAIpb,EAASrB,KAAKolB,WAAa3I,EAAa,CACxClH,SAAUvV,KAAKuV,SACfF,SAAUrV,KAAKqV,SACflV,MAAOH,KAAKG,MACZiP,OAAQpP,KAAKqP,YACbvL,OAAQ9D,KAAK8D,OACbsS,WAAYpW,KAAKoW,WACjBD,WAAYnW,KAAKmW,WACjBqC,aAAcxY,KAAKwY,aACnBhR,MAAOxH,KAAKwH,MACZ0H,KAAMR,EAAIS,SACVF,aAAc,WACV,IAAI6D,EAAQ,IAAIvT,GAEhB,OADAkE,EAAS4hB,WAAWvS,GACbA,GAEX5S,QAASA,IAGTmB,GACArB,KAAKqB,OAAOjD,OAAOiD,QAEhBqN,EAAII,QAAU,GAAKJ,EAAIK,SAAW,GACzC/O,KAAKqlB,WAAWrlB,KAAKqB,SAKjCgkB,WAAY,SAAShkB,GACjB,IAAInB,EAAUF,KAAKE,QACfka,EAASla,EAAQka,OACjBkL,EAAgBtoB,EAAQod,EAAOI,SAAWJ,EAAOI,QAAUta,EAAQsa,QACnEtL,EAAOlP,KAAK0O,IAAIS,SAEpBD,EAAKqK,KAAKzK,MAAQzM,KAAK1D,MAAMuQ,EAAKqK,KAAKzK,OAEvC,IAAIyW,EAAOvlB,KAAKolB,WAAahmB,GAAKshB,SAASxR,EAAM,CAC7CkS,KAAM,CACF9R,MAAOtP,KAAKsP,MACZkL,QAASta,EAAQsa,SAErB7K,OAAQ,CACJL,MAAOtP,KAAKwlB,iBACZ1W,MAAOsL,EAAOtL,MACd0L,QAAS8K,EACT1V,SAAUwK,EAAOxK,YAIrBd,EAAQ9O,KAAK0O,IAAII,QACjBC,EAAS/O,KAAK0O,IAAIK,SAetB,IAbW7O,EAAQkS,SAAWtD,EAAQC,GAjJpB,IAoJdzR,EAAiBioB,IAGbzW,EAAQ,GAAKC,EAAS,KACtBwW,EAAKrlB,QAAQyP,OAAO8V,SAAW,UAIvCpkB,EAAOjD,OAAOmnB,GAEVR,GAAmB7kB,GAAU,CAC7B,IAAI8kB,EAAUhlB,KAAK0lB,sBAAsBH,EAAM,CAAEI,UAAW3lB,KAAKsP,OAAS1R,EAAW,CACjF4kB,IAAMtiB,EAAQkS,cAAsBxO,EAAX,CAAE,EAAG,IAC/B1D,EAAQ8kB,UAEX3jB,EAAOjD,OAAO4mB,KAItB9J,gBAAiB,SAAS4F,GACtB,IAAI3F,EAAY/b,GAAKshB,SAAS1gB,KAAK0O,IAAIS,SAAU2R,GAEjD,OAAOxjB,EAAiB6d,IAG5BI,gBAAiB,WACb,OAAOvb,KAAKolB,YAGhB5J,oBAAqB,WACjB,MAAO,CACHtb,QAASF,KAAKE,QACdgP,KAAMlP,KAAK0O,IAAIS,SACf9N,OAAQrB,KAAKolB,aAIrBI,eAAgB,WACZ,IAAIlW,EAAQtP,KAAKsP,MACb8K,EAASpa,KAAKE,QAAQka,OACtBC,EAAaD,EAAOwL,aAAe9d,GACnC+d,EAAczL,EAAO9K,MAMzB,OAJKtS,EAAQ6oB,KACTA,EAAc,IAAIrmB,GAAM8P,GAAO+K,WAAWA,GAAYC,SAGnDuL,GAGXjK,cAAe,WACX,IAOIxN,EAAGC,EAPH4F,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdwO,EAAMuF,EAAIvF,IACVwH,EAAYjC,EAAIiC,UAChB2F,EAAU7b,KAAKmV,MAAM/T,KAAKya,WAAanN,EACvCsN,EAAkB1f,EAClByf,EAAgB3f,EAGpB,GAAI8D,EAAQkS,SACRhE,EAAI/L,KAAKD,IAAIsM,EAAIE,GAAIiN,EAAQjN,IAv1EpB,EAw1ELsH,EACA7H,EAAIhM,KAAKC,IAAIoM,EAAIF,GAAIqN,EAAQrN,KAE7BH,EAAIhM,KAAKD,IAAIsM,EAAID,GAAIoN,EAAQpN,IAC7BsN,EAAgB1f,OAEjB,CACH,IAAIsS,EAAKtM,KAAKC,IAAIoM,EAAIC,GAAIkN,EAAQlN,IAC9BC,EAAKvM,KAAKD,IAAIsM,EAAIE,GAAIiN,EAAQjN,IAE9B1O,EAAQ+S,WACR8I,EAAgB1f,EACZ6Z,GACA8F,EAAkBrf,EAClByR,EAAIQ,GAEJR,EAAIO,EAERN,EAAIhM,KAAKC,IAAIoM,EAAIF,GAAIqN,EAAQrN,IA12ExB,IA42ED0H,EACA9H,EAAIQ,EA72EH,GA+2EDR,EAAIO,EA/2EH,EAg3EDqN,EAAkBrf,GAEtB0R,EAAIhM,KAAKC,IAAIoM,EAAIF,GAAIqN,EAAQrN,KAIrC,MAAO,CACHpO,MAAO,IAAIhD,EAAMgR,EAAGC,GACpBwL,MAAO,CACHoC,WAAYD,EACZ5J,SAAU2J,KAKtBG,YAAa,SAASxN,GAClB,OAAO1O,KAAK0O,IAAIoN,SAASpN,IAG7BrK,UAAW,WACP,MAAO,CACHgR,SAAUrV,KAAKqV,SACfE,SAAUvV,KAAKuV,SACfpV,MAAOH,KAAKG,MACZiW,WAAYpW,KAAKoW,WACjBD,WAAYnW,KAAKmW,WACjBqC,aAAcxY,KAAKwY,aACnBhR,MAAOxH,KAAKwH,MACZ1D,OAAQ9D,KAAK8D,WA0BzB,SAASgiB,GAAQ5F,EAAU/I,GACvB+I,EAAS4F,QAAQ3O,GAGrB,SAAS4O,GAAe7F,EAAU/I,GAG9B,IAFA,IAAIlW,EAASif,EAASjf,OAEbD,EAAMC,EAAS,EAAGD,GAAO,EAAGA,IACjCmW,EAAS+I,EAASlf,GAAMA,EAAMC,EAAS,GA7B/CrD,EAAWsnB,GAAI/S,UAAW6F,IAC1Bpa,EAAWsnB,GAAI/S,UAAWwG,IAE1BuM,GAAI/S,UAAU3B,SAAW,CACrB4J,OAAQ,CACJtL,MAAO,GAEXsD,UAAU,EACV4S,QAAS,CACLC,SAAU,SAEd5L,OAAQ,CACJ/C,SAAS,EACTwB,OAAQ,OAEZ0C,QAAS,EACT3B,MAAO,CACHE,MAAO,KAgBf,IAAIiN,GAAgB7oB,EAAa0C,OAAO,CACpCC,KAAM,SAASI,GACX/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK8lB,QAAU5lB,EAAQ+lB,IAAMF,GAAiBD,IAGlDtY,OAAQ,SAASkB,GACb,IAAIuF,EAAMjU,KAAKE,QACXkS,EAAW6B,EAAI7B,SACf8T,EAAMjS,EAAIiS,IACVC,EAAUlS,EAAIkS,QACdvH,EAAW5e,KAAK4e,SAChB5c,EAAQ4c,EAAS3d,OACjBlB,EAAOqS,EAAW1V,EAAID,EACtB2pB,EAAQpkB,EAAQkkB,EAAOC,GAAWnkB,EAAQ,GAC1CqkB,GAAYjU,EAAW1D,EAAIK,SAAWL,EAAII,SAAWsX,EACrDpL,EAAWtM,EAAI3O,EAAO,GAAKsmB,GAAYH,EAAM,GAEjDlmB,KAAK8lB,QAAQlH,GAAU,SAAU0H,EAAOtlB,GACpC,IAAI2Z,GAAY2L,EAAM5X,KAAOA,GAAKkM,QAElCD,EAAS5a,EAAO,GAAKib,EACrBL,EAAS5a,EAAO,GAAKib,EAAWqL,EAEhCC,EAAM9Y,OAAOmN,GACT3Z,EAAMgB,EAAQ,IACdgZ,GAAaqL,EAAWF,GAG5BnL,GAAYqL,QAKxB9oB,EAAkByoB,GAAe,CAC7B5T,UAAU,EACV8T,IAAK,EACLC,QAAS,IAGb,IAAII,GAAYppB,EAAa0C,OAAO,CAChC2N,OAAQ,SAASC,GAQb,IAPA,IAEI+Y,EAAexmB,KAAKE,QAAQkS,SAAW3V,EAAIC,EAC3CkiB,EAAW5e,KAAK4e,SAChB6H,EAAgB7H,EAAS3d,OACzByN,EAAM1O,KAAK0O,IAAM,IAAIrR,EAEhB4E,EAAI,EAAGA,EAAIwkB,EAAexkB,IAAK,CACpC,IAAIykB,EAAe9H,EAAS3c,GAE5B,IAA6B,IAAzBykB,EAAapQ,QAAmB,CAChC,IAAIqE,EAAW+L,EAAahY,IAAIkM,QAChCD,EAASgM,OAAOlZ,EAAW+Y,GAEjB,IAANvkB,IACAyM,EAfG1O,KAeY0O,IAAMiM,EAASC,SAGlC8L,EAAalZ,OAAOmN,GACpBjM,EAAIkY,KAAKjM,QAMzBpd,EAAkBgpB,GAAW,CACzBnU,UAAU,IAGd,IAAIyU,GAAW3V,GAAiBrR,OAAO,CACnC+R,OAAQ,WACJV,GAAiB5D,GAAGsE,OAAOrE,KAAKvN,MAChCA,KAAKgU,oBAGT9B,UAAW,WACP,OAAOgT,IAGX4B,YAAa,WACT,OAAOd,IAGXe,UAAW,WACP,OAAOR,IAGX5S,YAAa,SAASC,EAAUC,GAG5B,OAFa3C,GAAiB5D,GAAGqG,YAAYpG,KAAKvN,KAAM4T,EAAUC,IAKtEqB,YAAa,SAAS9Q,EAAMD,GACxB,IAAIqO,EAAarO,EAAOqO,WACpB1O,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAElB/R,EADMF,KACQE,QACd0e,EAFM5e,KAES4e,SACf3L,EAAY/S,EAAQ+S,UACpB9S,EAAQH,KAAKkH,WAAW9C,GACxB4N,EAAehS,KAAKgS,aAAalO,EAAQmO,GAEzC+U,EAAehV,EAAaqH,OAC5BpG,GACI+T,EAAahM,WAAatO,KAC1Bsa,EAAahM,SAAWxO,IAIhCwF,EAAaiB,UAAYA,EAEzB,IAAI3D,EAAQlL,EAAKD,OAAOmL,OAASxL,EAAOwL,MACpCnP,EAAQ,GAAK6R,EAAaiV,gBAC1B3X,EAAQ0C,EAAaiV,eAGzBjV,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GACtD1G,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB,IACIlP,EAAQ,IADIJ,KAAKkS,YACT,CAAc/R,EAAO6R,GACjC5R,EAAMkP,MAAQA,EAEd,IAAI4X,EAAUtI,EAASpM,GAClB0U,IAEDA,EAAU,IADQlnB,KAAK8mB,cACb,CAAgB,CACtB1U,SAAUlS,EAAQmS,WAClB6T,IAAKhmB,EAAQgmB,IACbC,QAASjmB,EAAQimB,QACjBF,KAAM/lB,EAAQmS,aAAerS,KAAKmR,cAAgB,IAAI8U,MAE1DjmB,KAAK5B,OAAO8oB,IAGZjU,EACgBjT,KAAKmnB,aAAarjB,EAAQojB,GAChC9oB,OAAOgC,GAEjB8mB,EAAQ9oB,OAAOgC,GAGnB,OAAOA,GAGX+mB,aAAc,SAASrjB,EAAQojB,GAC3B,IAGIE,EAHAxU,EAAQ9O,EAAO8O,MACfyU,EAAazU,GAAQA,EAAME,OAAiBF,EAC5C0U,EAAQJ,EAAQtI,SAGpB,UAAWyI,IAAevrB,EAAiBuX,QACvC,IAAK,IAAIpR,EAAI,EAAGA,EAAIqlB,EAAMrmB,OAAQgB,IAC9B,GAAIqlB,EAAMrlB,GAAGslB,cAAgBF,EAAY,CACrCD,EAAYE,EAAMrlB,GAClB,YAIRmlB,EAAYE,EAAM,GAGjBF,KAEDA,EAAY,IADIpnB,KAAK+mB,YACT,CAAc,CACtB3U,UAAWpS,KAAKE,QAAQmS,cAElBkV,YAAcF,EACxBH,EAAQ9oB,OAAOgpB,IAGnB,OAAOA,GAGXrR,aAAc,SAAS3E,EAAcoB,EAAYe,GAC7C,IAAIrT,EAAUF,KAAKE,QACf6V,EAAe3E,EAAatD,QAAQ0E,GACpCQ,EAAaO,EAAUP,aAE3B,GAAI9S,EAAQ+S,UAAW,CACnB,IAAIuU,EAAWjU,EAAUzF,QAAQkF,EAAYA,GAAY,GACrDyU,EAAYvnB,EAAQmS,WAAa5V,EAAIC,EACzCqZ,EAAa0R,EAAY,GAAK1R,EAAa0R,EAAY,GAAKD,EAASC,EAAY,GAGrF,OAAO1R,GAGXQ,iBAAkB,SAASX,GAIvB,IAHA,IAAIgJ,EAAW5e,KAAK4e,SAChB8I,EAAiB9I,EAAS3d,OAErBgB,EAAI,EAAGA,EAAIylB,EAAgBzlB,IAChC2c,EAAS3c,GAAGuL,OAAOoI,EAAc3T,KAIzCoe,gBAAiB,WACbrgB,KAAK2nB,uBACLzW,GAAiB5D,GAAG+S,gBAAgB9S,KAAKvN,MAErCigB,GAAajgB,KAAKE,QAAQ4D,SAC1B9D,KAAK2gB,yBAIbA,sBAAuB,WAKnB,IAJA,IAEIpP,EAASvR,KAAKuR,OAETvQ,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQmR,EAAOvQ,GACf4mB,EAAcxnB,EAAMiB,OACpBumB,GAAe5qB,EAAQ4qB,EAAY1nB,QAAQ+P,UAC3C7P,EAAMF,QAAQ6P,UARP/P,KAQ4BE,QAAQ6P,UAC3C3P,EAAMigB,qBAKlBsH,qBAAsB,WAClB,IAEIE,EAFA3nB,EAAUF,KAAKE,QACf6P,EAAY7P,EAAQ6P,WAAa,GAGrC,GAAI7P,EAAQ+S,UAAW,CACnB,IAAIM,EAAYvT,KAAKmQ,gBAAgBjQ,EAAQ4D,OAAO,IACpD+jB,EAAStU,EAAUzF,QAAQyF,EAAUP,mBAErC6U,EAAS7nB,KAAKoR,aAAatD,QAAQ,GAGvCiC,EAAU8X,OAAS,IAAInoB,GAAcmoB,EAAOlZ,GAAIkZ,EAAOrZ,IACvDuB,EAAUqC,UAAYlS,EAAQmS,cAItC9U,EAAkBspB,GAAU,CACxB9W,UAAW,CACPrM,KAAMqF,MAId,IAAI+e,GAAc3qB,EAAa0C,OAAO,CAClCC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAChCF,KAAKG,MAAQA,GAGjBqN,OAAQ,SAASkB,GACb,IAAIuF,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdC,EAAQ8T,EAAI9T,MAEZoT,EADQU,EAAIkB,MACMhF,gBAAgBjQ,GAClC6nB,EAASxU,EAAUzF,QAAQ3N,EAAM6nB,KAAM7nB,EAAM0c,OAC7CoL,EAAS1U,EAAUzF,QAAQ3N,EAAMqG,IAAKrG,EAAMsG,MAEhDshB,EAAOpZ,GAAKsZ,EAAOtZ,GAAKD,EAAIC,GAC5BoZ,EAAOnZ,GAAKqZ,EAAOrZ,GAAKF,EAAIE,GAE5B5O,KAAKkoB,SAAWH,EAEhB,IAAII,EAAMF,EAAOja,SAASI,EACtBmD,EAAS,GAEbA,EAAOlM,KAAK,CAAE,CAAE8iB,EAAKF,EAAOzZ,IAAM,CAAE2Z,EAAKJ,EAAOvZ,MAChD+C,EAAOlM,KAAK,CAAE,CAAE8iB,EAAKJ,EAAOtZ,IAAM,CAAE0Z,EAAKF,EAAOxZ,MAEhDzO,KAAKooB,MAAQ7W,EAEbvR,KAAK0O,IAAMuZ,EAAOrN,QAAQgM,KAAKmB,GAE1B/nB,KAAKsZ,YACNtZ,KAAKsZ,WAAY,EACjBtZ,KAAK4Y,cAGT5Y,KAAKqoB,cAGTA,WAAY,WACJroB,KAAKgZ,MACLhZ,KAAKgZ,KAAKxL,OAAOxN,KAAK0O,MAI9BO,aAAc,WACV9R,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAClCA,KAAKsoB,YAActoB,KAAKuoB,WAAWvoB,KAAKE,SACxCF,KAAKqB,OAAOjD,OACR4B,KAAKsoB,aAGTtoB,KAAKwoB,iBAGTD,WAAY,SAASroB,GACjB,IAAI4S,EAAQ,IAAIvT,GAKhB,OAHAS,KAAKyoB,WAAW3V,EAAO5S,GACvBF,KAAK0oB,YAAY5V,EAAO5S,GAEjB4S,GAGX2V,WAAY,SAASE,EAAWzoB,GAC5B,IAAI0oB,EAAOxpB,GAAKshB,SAAS1gB,KAAKkoB,SAAS/Y,SAAU,CAC7CiS,KAAM,CACF9R,MAAOtP,KAAKsP,MACZkL,QAASta,EAAQsa,SAErB7K,OAAQ,OAGRzP,EAAQka,OAAOtL,MAAQ,GACvB8Z,EAAK1oB,QAAQ2oB,IAAI,SAAU,CACvBvZ,MAAOtP,KAAKwlB,iBACZ1W,MAAO5O,EAAQka,OAAOtL,MACtBc,SAAU1P,EAAQka,OAAOxK,SACzB4K,QAAS9c,EAAewC,EAAQka,OAAOI,QAASta,EAAQsa,WAIhEld,EAAiBsrB,GACjBD,EAAUvqB,OAAOwqB,GAEb7D,GAAmB7kB,IACnByoB,EAAUvqB,OAAO4B,KAAK0lB,sBAAsBkD,EAAM,CAAEjD,UAAW3lB,KAAKsP,OAAS1R,EAAW,CACpF4kB,IAAMtiB,EAAQkS,cAAsBxO,EAAX,CAAE,EAAG,IAC/B1D,EAAQ8kB,YAInB0D,YAAa,SAASC,EAAWzoB,GAC7BF,KAAK8oB,UAAUH,EAAWzoB,EAASF,KAAKooB,MAAOloB,EAAQqP,OAG3DuZ,UAAW,SAASH,EAAWzoB,EAASkoB,EAAO1Y,GAC3C,GAAK0Y,EAcL,IAVA,IAAIW,EAAY,CACZpZ,OAAQ,CACJL,MAAOI,EAAYJ,OAAStP,KAAKsP,MACjCkL,QAAS9c,EAAegS,EAAY8K,QAASta,EAAQsa,SACrD1L,MAAOY,EAAYZ,MACnBc,SAAUF,EAAYE,SACtB0R,QAAS,SAIRrf,EAAI,EAAGA,EAAImmB,EAAMnnB,OAAQgB,IAAK,CACnC,IAAIsN,EAAOnQ,GAAKud,WAAWyL,EAAMnmB,GAAI8mB,GACrCzrB,EAAiBiS,GACjBoZ,EAAUvqB,OAAOmR,KAIzBiW,eAAgB,WACZ,IAAIpL,EAASpa,KAAKE,QAAQka,OACtByL,EAAczL,EAAO9K,MAMzB,OAJKtS,EAAQ6oB,KACTA,EAAc,IAAIrmB,GAAMQ,KAAKsP,OAAO+K,WAAWD,EAAOwL,aAAatL,SAGhEuL,GAGX2C,cAAe,WACX,IAAIxD,EAAU5lB,GAAKshB,SAAS1gB,KAAK0O,IAAIS,SAAU,CAC3CiS,KAAM,CACF9R,MAAO/S,EACPie,QAAS,GAEb7K,OAAQ,OAGZ3P,KAAKqB,OAAOjD,OAAO4mB,IAGvB9J,gBAAiB,WACb,IAAIC,EAAYnb,KAAKE,QAAQib,UACzB6N,EAAchpB,KAAKsP,MAEvBtP,KAAKsP,MAAQ6L,EAAU7L,OAAStP,KAAKsP,MACrC,IAAI0V,EAAUhlB,KAAKuoB,WACf3qB,EAAW,GAAIoC,KAAKE,QAAS,CACzBqP,KAAM,CACFD,MAAOtP,KAAKwlB,mBAEjBrK,IAIP,OAFAnb,KAAKsP,MAAQ0Z,EAENhE,GAGXzJ,gBAAiB,WACb,OAAOvb,KAAKsoB,aAGhB9M,oBAAqB,WACjB,MAAO,CACHtb,QAASF,KAAKE,QACdgP,KAAMlP,KAAK0O,IAAIS,SACf9N,OAAQrB,KAAKsoB,cAIrB1M,cAAe,WACX,IAAIlN,EAAM1O,KAAK0O,IACXmN,EAAU7b,KAAKmV,MAAM/T,KAAKya,WAAanN,EAE3C,MAAO,CACHtO,MAAO,IAAIhD,EAAMsR,EAAIE,GA31FZ,EA21FiCvM,KAAKC,IAAIoM,EAAIF,GAAIqN,EAAQrN,IA31F1D,GA41FTqL,MAAO,CACHoC,WAAY3f,EACZ8V,SAAUhW,KAKtBwd,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CoE,YAAa,SAASxN,GAClB,OAAO1O,KAAK0O,IAAIoN,SAASpN,MA4CjC,SAASua,GAAWlnB,GAChB,OAAOD,GAAaC,KAAYA,EAAOd,OAzC3C1D,EAAkBuqB,GAAa,CAC3B1V,UAAU,EACVgI,OAAQ,CACJwL,YAAa,IAEjBrW,KAAM,CACFT,MAAO,GAEXkW,QAAS,CACLC,SAAU,SAEdiE,QAAS,CACLpR,OAAQ,0MAQZqD,UAAW,CACPX,QAAS,EACTJ,OAAQ,CACJtL,MAAO,EACP0L,QAAS,GAEbjL,KAAM,CACFT,MAAO,EACP0L,QAAS,IAGjB3B,MAAO,CACHvC,SAAS,EACTyC,MAAO,MAIfnb,EAAWkqB,GAAY3V,UAAW6F,IAClCpa,EAAWkqB,GAAY3V,UAAWwG,IAMlC,IAAIwQ,GAAmBjY,GAAiBrR,OAAO,CAC3C0W,iBAAkB,SAASX,GAIvB,IAHA,IAAIgJ,EAAW5e,KAAK4e,SAChB8I,EAAiB9I,EAAS3d,OAErBgB,EAAI,EAAGA,EAAIylB,EAAgBzlB,IAChC2c,EAAS3c,GAAGuL,OAAOoI,EAAc3T,KAIzC6P,SAAU,SAAS1N,EAAMD,GACrB,IAYI/D,EAZAoS,EAAarO,EAAOqO,WACpB+C,EAAWpR,EAAOoR,SAClBzR,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAElB2M,EADM5e,KACS4e,SACf1e,EAFMF,KAEQE,QACdC,EAAQiE,EAAKb,YAEb6lB,EAAWH,GADEjpB,KAAKqpB,WAAWlpB,IAE7BkV,EAAWvR,EAAOM,KAAKoO,GACvBhB,EAAiBxR,KAAKwR,eAAegB,GAGpChB,IACDxR,KAAKwR,eAAegB,GAAchB,EAAiB,IAGnD4X,IACAhpB,EAAQJ,KAAKkV,YAAY9Q,EAAMD,IAGnC,IAAI+iB,EAAUtI,EAASpM,GAClB0U,IACDA,EAAU,IAAIlB,GAAc,CACxB5T,SAAUlS,EAAQmS,WAClB6T,IAAKhmB,EAAQgmB,IACbC,QAASjmB,EAAQimB,QACjBF,KAAM/lB,EAAQmS,aAAerS,KAAKmR,cAAgB,IAAI8U,MAE1DjmB,KAAK5B,OAAO8oB,IAGZ9mB,IACAJ,KAAKgV,YAAY7U,EAAOgE,GAExB+iB,EAAQ9oB,OAAOgC,GAEfA,EAAMoS,WAAaA,EACnBpS,EAAMmV,SAAWA,EACjBnV,EAAM0D,OAASA,EACf1D,EAAM6R,SAAWA,EACjB7R,EAAM+U,MAAQnV,KACdI,EAAMiV,SAAWA,EACjBjV,EAAMgV,SAAWhR,EAAKD,OAAOiR,UAGjCpV,KAAKuR,OAAOlM,KAAKjF,GACjBoR,EAAenM,KAAKjF,IAGxB8R,UAAW,WACP,OAAO4V,IAGX5S,YAAa,SAAS9Q,EAAMD,GACxB,IAAIL,EAASK,EAAOL,OAChBoO,EAAYlS,KAAKkS,YACjB/R,EAAQiE,EAAKb,YACbyO,EAAepU,EAAW,GAAIkG,GAC9BwL,EAAQlL,EAAKD,OAAOmL,OAASxL,EAAOwL,MAExC0C,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GAEtDL,EAAOJ,OAASyF,IACZhJ,EAAM6nB,KAAO7nB,EAAM0c,QACnBvN,EAAQlL,EAAKD,OAAOmlB,WAAaxlB,EAAOwlB,WAAaxlB,EAAOwL,OAIhE7R,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB0C,EAAaI,UAAYpS,KAAKE,QAAQmS,WAEtC,IAAIjS,EAAQ,IAAI8R,EAAU/R,EAAO6R,GAGjC,OAFA5R,EAAMkP,MAAQA,EAEPlP,GAGXipB,WAAY,SAASlpB,GACjB,MAAO,CAAEA,EAAMqG,IAAKrG,EAAM6nB,KAAM7nB,EAAM0c,MAAO1c,EAAMsG,OAGvDuO,YAAa,SAAS7U,EAAOgE,GACzB,IAAIyP,EAAWzP,EAAOL,OAAO/D,KACzBwpB,EAAQvpB,KAAKqpB,WAAWlpB,GACxBuV,EAAY1V,KAAKsR,gBAAgBsC,GAErC8B,EAAY1V,KAAKsR,gBAAgBsC,GAC7B8B,GAAa,CAAEtT,IAAKpG,EAAWsG,IAAKrG,GAExCyZ,EAAY1V,KAAKsR,gBAAgBsC,GAAY,CACzCxR,IAAKC,KAAKD,IAAI6b,MAAM5b,KAAMknB,EAAMxlB,OAAO,CAAE2R,EAAUtT,OACnDE,IAAKD,KAAKC,IAAI2b,MAAM5b,KAAMknB,EAAMxlB,OAAO,CAAE2R,EAAUpT,SAI3DuV,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAElB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EACjC3X,EAAM6nB,KAAM7nB,EAAMsG,KAClBtG,EAAMqG,IAAKrG,EAAM0c,MAAOzc,EAAMmV,WAItCqL,gBAAiB,WACb,OAAO5gB,KAAKuR,UAIpB3T,EAAWurB,GAAiBhX,UAAWiO,IAEvC,IAAIoJ,GAAU1B,GAAYjoB,OAAO,CAC7BC,KAAM,SAASK,EAAOD,GAClB4nB,GAAYxa,GAAGxN,KAAKyN,KAAKvN,KAAMG,EAAOD,GAEtCF,KAAK4Y,cAGTpL,OAAQ,SAASkB,GACb,IAKI+a,EAAaC,EALbzV,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdC,EAAQ8T,EAAI9T,MAEZoT,EADQU,EAAIkB,MACMhF,gBAAgBjQ,GAGtCF,KAAK0pB,QAAUA,EAAUnW,EAAUzF,QAAQ3N,EAAMwpB,GAAIxpB,EAAMypB,IAC3D5pB,KAAKkoB,SAAWwB,EAChB1pB,KAAK6pB,cAAcnb,GAEnB1O,KAAKypB,YAAcA,EAAclW,EAAUzF,QAAQ3N,EAAM2pB,MAAO3pB,EAAM4pB,OACtE/pB,KAAKgqB,kBAAkBtb,GAEvB,IAAIub,EAAa1W,EAAUzF,QAAQ3N,EAAM+pB,QAEzC,GAAI/pB,EAAMgqB,KAAM,CACZ,IAAIC,EAAW7W,EAAUzF,QAAQ3N,EAAMgqB,MACvCnqB,KAAKqqB,WAAarqB,KAAKsqB,eAAe5b,EAAK0b,GAG/CpqB,KAAKuqB,cAAgBvqB,KAAKwqB,kBAAkBd,EAASD,GACrDzpB,KAAKyqB,aAAezqB,KAAK0qB,iBAAiBhc,EAAKub,GAE/CjqB,KAAK0O,IAAM+a,EAAY7O,QAAQgM,KAAK8C,GACpC1pB,KAAKqoB,cAGTwB,cAAe,SAASnb,GACpB1O,KAAK0pB,QAAQ/a,GAAKD,EAAIC,GACtB3O,KAAK0pB,QAAQ9a,GAAKF,EAAIE,IAG1Bob,kBAAmB,SAAStb,GACxB1O,KAAKypB,YAAY9a,GAAKD,EAAIC,GAC1B3O,KAAKypB,YAAY7a,GAAKF,EAAIE,IAG9B0b,eAAgB,SAAS5b,EAAK0b,GAC1B,MAAO,CACH,CAAE,CAAE1b,EAAIC,GAAIyb,EAAS5b,IAAM,CAAEE,EAAIE,GAAIwb,EAAS5b,OAItDgc,kBAAmB,SAASd,EAASD,GACjC,IAAItB,EAAMsB,EAAYzb,SAASI,EAC/B,MAAO,CAAE,CACL,CAAE+Z,EAAM,EAAGsB,EAAYjb,IAAM,CAAE2Z,EAAM,EAAGsB,EAAYjb,IACpD,CAAE2Z,EAAKsB,EAAYjb,IAAM,CAAE2Z,EAAKuB,EAAQlb,KACzC,CACC,CAAE2Z,EAAM,EAAGsB,EAAYhb,IAAM,CAAE0Z,EAAM,EAAGsB,EAAYhb,IACpD,CAAE0Z,EAAKsB,EAAYhb,IAAM,CAAE0Z,EAAKuB,EAAQjb,OAIhDic,iBAAkB,SAAShc,EAAKub,GAC5B,MAAO,CACH,CAAE,CAAEvb,EAAIC,GAAIsb,EAAWzb,IAAM,CAAEE,EAAIE,GAAIqb,EAAWzb,OAI1Dmc,eAAgB,SAASzqB,GASrB,IARA,IAEIC,EAAQH,KAAKG,MACbyqB,EAAWzqB,EAAMyqB,UAAY,GAC7BC,EAA6C,EAAhCxoB,KAAKgF,IAAIlH,EAAMypB,GAAKzpB,EAAMwpB,IACvCzJ,EAAW,GACX9G,EAAUlZ,EAAQkZ,SAAW,GAExBnX,EAAI,EAAGA,EAAI2oB,EAAS3pB,OAAQgB,IAAK,CACtC,IAAI6oB,EAAeF,EAAS3oB,GAExBmX,EADA0R,EAAe3qB,EAAMypB,GAAKiB,GAAcC,EAAe3qB,EAAMwpB,GAAKkB,EACxD3qB,EAAQ0qB,SAER1qB,EAAQ6qB,SAEtB,IAAIC,EAAgBptB,EAAW,GAAIwb,EAAQgB,QAEtCpd,EAAQguB,EAAc1b,SACnBtS,EAlBGgD,KAkBcsP,OACjB0b,EAAc1b,MAnBXtP,KAmB4BsP,MAE/B0b,EAAc1b,MACV,IAAI9P,GAAM4Z,EAAQe,YAAYE,WAAWvS,IAAmBwS,SAIxE,IAAI2Q,EAAQ,IAAIhtB,EAAa,CACzByF,KAAM0V,EAAQ1V,KACdoL,MAAOsK,EAAQG,KACfxK,OAAQqK,EAAQG,KAChBgB,SAAUnB,EAAQmB,SAClBJ,WAAYf,EAAQe,WACpBC,OAAQ4Q,EACRxQ,QAASpB,EAAQoB,UAGrByQ,EAAM9qB,MAAQ2qB,EAEd5K,EAAS7a,KAAK4lB,GAIlB,OADAjrB,KAAKkrB,eAAehL,GACbA,GAGXgL,eAAgB,SAASN,GAMrB,IALA,IAAInnB,EAAWzD,KAEXuT,EAAYvT,KAAKmV,MAAMhF,gBAAgBnQ,KAAKE,SAC5C8N,EAAShO,KAAK0O,IAAIV,SAEb/L,EAAI,EAAGA,EAAI2oB,EAAS3pB,OAAQgB,IAAK,CACtC,IAAI6oB,EAAeF,EAAS3oB,GAAG9B,MAC3Bsa,EAAYlH,EAAUzF,QAAQgd,GAE9BrnB,EAASvD,QAAQkS,SACjBqI,EAAU0Q,KAAKnd,EAAOI,GAEtBqM,EAAU0Q,UAAKvnB,EAAWoK,EAAOK,GAGrC5K,EAASiL,IAAMjL,EAASiL,IAAIkY,KAAKnM,GACjCmQ,EAAS3oB,GAAGuL,OAAOiN,KAI3B8N,WAAY,SAASroB,GAIjB,IAHA,IAAI4S,EAAQgV,GAAYxa,GAAGib,WAAWhb,KAAKvN,KAAME,GAC7C0qB,EAAW5qB,KAAK2qB,eAAezqB,GAE1B+B,EAAI,EAAGA,EAAI2oB,EAAS3pB,OAAQgB,IAAK,CACtC,IAAIwW,EAAUmS,EAAS3oB,GAAGqZ,aACtB7C,GACA3F,EAAM1U,OAAOqa,GAIrB,OAAO3F,GAGX4V,YAAa,SAASC,EAAWzoB,GAC7BF,KAAK8oB,UAAUH,EAAWzoB,EAASF,KAAKuqB,cAAerqB,EAAQkrB,UAC/DprB,KAAK8oB,UAAUH,EAAWzoB,EAASF,KAAKyqB,aAAcvqB,EAAQgqB,QAC9DlqB,KAAK8oB,UAAUH,EAAWzoB,EAASF,KAAKqqB,WAAYnqB,EAAQiqB,OAGhE3E,eAAgB,WACZ,OAAKxlB,KAAKE,QAAQka,QAAU,IAAI9K,MACrBtP,KAAKE,QAAQka,OAAO9K,MAG3BtP,KAAKsP,MACEtP,KAAKsP,MAGTwY,GAAYxa,GAAGkY,eAAejY,KAAKvN,SAIlDzC,EAAkBisB,GAAS,CACvBpP,OAAQ,CACJwL,YAAa,IAEjBrW,KAAM,CACFT,MAAO,GAEXob,OAAQ,CACJ5a,MAAO,WAEX6a,KAAM,CACFrb,MAAO,EACPc,SAAU,OACVN,MAAO,WAEX0V,QAAS,CACLC,SAAU,SAEdiE,QAAS,CACLpR,OAAQ,oRAUZqD,UAAW,CACPX,QAAS,EACTJ,OAAQ,CACJtL,MAAO,EACP0L,QAAS,GAEbjL,KAAM,CACFT,MAAO,EACP0L,QAAS,IAGjB3B,MAAO,CACHvC,SAAS,EACTyC,MAAO,IAEX6R,SAAU,CACNtU,SAAS,EACTiD,KAtuGe,EAuuGf7V,KAAM5H,EAAiBuvB,MACvBlR,WAAY5d,EACZ6d,OAAQ,CACJtL,MAAO,EACP0L,QAAS,GAEbA,QAAS,GAEbuQ,SAAU,CACNzU,SAAS,EACTiD,KAjvGe,EAkvGf7V,KAAMlH,EACN2d,WAAY5d,EACZ6d,OAAQ,CACJtL,MAAO,EACP0L,QAAS,GAEbA,QAAS,KAIjB5c,EAAW4rB,GAAQrX,UAAW6F,IAE9B,IAAIsT,GAAkB9B,GAAQ3pB,OAAO,CACjCgqB,cAAe,SAASnb,GACpB1O,KAAK0pB,QAAQlb,GAAKE,EAAIF,GACtBxO,KAAK0pB,QAAQjb,GAAKC,EAAID,IAG1Bub,kBAAmB,SAAStb,GACxB1O,KAAKypB,YAAYjb,GAAKE,EAAIF,GAC1BxO,KAAKypB,YAAYhb,GAAKC,EAAID,IAG9B6b,eAAgB,SAAS5b,EAAK0b,GAC1B,MAAO,CACH,CAAE,CAAEA,EAASzb,GAAID,EAAIF,IAAM,CAAE4b,EAASzb,GAAID,EAAID,OAItD+b,kBAAmB,SAASd,EAASD,GACjC,IAAItB,EAAMsB,EAAYzb,SAASK,EAC/B,MAAO,CAAE,CACL,CAAEob,EAAY9a,GAAIwZ,EAAM,GAAK,CAAEsB,EAAY9a,GAAIwZ,EAAM,GACrD,CAAEsB,EAAY9a,GAAIwZ,GAAO,CAAEuB,EAAQ/a,GAAIwZ,IACxC,CACC,CAAEsB,EAAY7a,GAAIuZ,EAAM,GAAK,CAAEsB,EAAY7a,GAAIuZ,EAAM,GACrD,CAAEsB,EAAY7a,GAAIuZ,GAAO,CAAEuB,EAAQ9a,GAAIuZ,MAI/CuC,iBAAkB,SAAShc,EAAKub,GAC5B,MAAO,CACH,CAAE,CAAEA,EAAWtb,GAAID,EAAIF,IAAM,CAAEyb,EAAWtb,GAAID,EAAID,SAK1D8c,GAAepC,GAAiBtpB,OAAO,CACvCiS,SAAU,SAAS1N,EAAMD,GACrB,IAYI/D,EAZAoS,EAAarO,EAAOqO,WACpB+C,EAAWpR,EAAOoR,SAClBzR,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAElB2M,EADM5e,KACS4e,SACf1e,EAFMF,KAEQE,QACdC,EAAQiE,EAAKb,YAEb6lB,EAAWH,GADEjpB,KAAKqpB,WAAWlpB,IAE7BkV,EAAWvR,EAAOM,KAAKoO,GACvBhB,EAAiBxR,KAAKwR,eAAegB,GAGpChB,IACDxR,KAAKwR,eAAegB,GAAchB,EAAiB,IAGnD4X,IACAhpB,EAAQJ,KAAKkV,YAAY9Q,EAAMD,IAGnC,IAAI+iB,EAAUtI,EAASpM,GAClB0U,IACDA,EAAU,IAAIlB,GAAc,CACxB5T,SAAUlS,EAAQmS,WAClB6T,IAAKhmB,EAAQgmB,IACbC,QAASjmB,EAAQimB,QACjBF,KAAM/lB,EAAQmS,aAAerS,KAAKmR,cAAgB,IAAI8U,MAE1DjmB,KAAK5B,OAAO8oB,IAGZ9mB,IACAJ,KAAKgV,YAAY7U,EAAOgE,GAExB+iB,EAAQ9oB,OAAOgC,GAEfA,EAAMoS,WAAaA,EACnBpS,EAAMmV,SAAWA,EACjBnV,EAAM0D,OAASA,EACf1D,EAAM6R,SAAWA,EACjB7R,EAAM+U,MAAQnV,KACdI,EAAMiV,SAAWA,GAGrBrV,KAAKuR,OAAOlM,KAAKjF,GACjBoR,EAAenM,KAAKjF,IAGxB8R,UAAW,WACP,OAAIlS,KAAKE,QAAQmS,WACNiZ,GAGJ9B,IAGXH,WAAY,SAASlpB,GACjB,MAAO,CACHA,EAAM2pB,MAAO3pB,EAAMwpB,GAAIxpB,EAAM+pB,OAC7B/pB,EAAMypB,GAAIzpB,EAAM4pB,QAIxB/U,YAAa,SAAS7U,EAAOgE,GACzB,IAAIyP,EAAWzP,EAAOL,OAAO/D,KACzB2V,EAAY1V,KAAKsR,gBAAgBsC,GACjC2V,EAAQvpB,KAAKqpB,WAAWlpB,GAAO4D,OAAO/D,KAAKwrB,eAAerrB,EAAMyqB,WAEhE5tB,EAAQmD,EAAMgqB,QACdZ,EAAQA,EAAMxlB,OAAO5D,EAAMgqB,OAG/BzU,EAAY1V,KAAKsR,gBAAgBsC,GAC7B8B,GAAa,CAAEtT,IAAKpG,EAAWsG,IAAKrG,GAExCyZ,EAAY1V,KAAKsR,gBAAgBsC,GAAY,CACzCxR,IAAKC,KAAKD,IAAI6b,MAAM5b,KAAMknB,EAAMxlB,OAAO,CAAE2R,EAAUtT,OACnDE,IAAKD,KAAKC,IAAI2b,MAAM5b,KAAMknB,EAAMxlB,OAAO,CAAE2R,EAAUpT,SAI3DuV,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAElB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EACjC3X,EAAM2pB,MAAO3pB,EAAMwpB,GAAIxpB,EAAM+pB,OAC7B/pB,EAAMypB,GAAIzpB,EAAM4pB,MAAO5pB,EAAMgqB,KAAM/pB,EAAMmV,WAIjDiW,eAAgB,SAASC,GAIrB,IAHA,IAAIxqB,GAAUwqB,GAAS,IAAIxqB,OACvBwB,EAAS,GAEJR,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIiC,EAAOunB,EAAMxpB,GACbjF,EAAQkH,IAAkB,OAATA,GACjBzB,EAAO4C,KAAKnB,GAIpB,OAAOzB,GAGXse,6BAA8B,WAC1B,OAAO,KAIX2K,GAAkBve,GAAatN,OAAO,CACtCgO,QAAS,WACL,IAAI9M,EAAOf,KAAKqN,MAAMse,WAAW3rB,KAAK8D,QAGtC,OAFW9D,KAAKoN,WAAarM,EAAKsN,EAAItN,EAAKqN,KAMnD,SAASgb,GAASjpB,GACd,OAAOnD,EAAQmD,IAAoB,OAAVA,EAG7B,IAAIyrB,GAAezuB,EAAa0C,OAAO,CACnCC,KAAM,SAAS4B,EAAUxB,GAErB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK0B,SAAWA,EAChB1B,KAAKmR,aAAezP,EAASyP,aAC7BnR,KAAK6rB,cAEL7rB,KAAK4R,UAGTia,YAAa,WAGT7rB,KAAK8rB,YAAc,GACnB9rB,KAAK+rB,YAAc,GAEnB/rB,KAAKuR,OAAS,GACdvR,KAAKyR,aAAe,GACpBzR,KAAK0R,cAAgB,GACrB1R,KAAK2R,YAAc,IAGvBC,OAAQ,WACJ5R,KAAK6R,mBAAmB7R,KAAK8R,SAASC,KAAK/R,QAG/CyU,YAAa,SAASrU,EAAOyC,EAAOsB,GAChC,IAWQoC,EAXJpG,EAAQC,EAAMD,MAAM0C,GACpBmpB,EAAkBnpB,EAAQ,QAC1BopB,EAAWppB,EAAQ,WACnBqpB,EAAYrpB,EAAQ,YACpBoP,EAAW9N,EAAO8N,SAClBnO,EAASK,EAAOL,OAChB4Q,EAAYtU,EAAMF,QAAQwU,UAC1BC,EAAWxQ,EAAO8nB,GAClBrX,EAAYzQ,EAAO+nB,GAEnBrwB,EAASsE,KAELtE,EAAS8Y,IAAa9Y,EAAS+Y,KAC/BrO,EAAa,CAAEC,IAAKmO,EAAUlO,KAAMmO,IAGpCF,GAAa1X,EAAQ0X,EAAUsX,MAC/BhsB,KAAK6U,kBAAoB7U,KAAK6U,mBAAqB,CAAEzG,EAAG,GAAIC,EAAG,IAC/DrO,KAAK6U,kBAAkBhS,GAAOoP,GAAYjS,KAAK6U,kBAAkBhS,GAAOoP,IACpE,IAAIvM,GAAqBgP,EAAUsX,GAAkBloB,EAAQjB,GAEjE0D,EAAavG,KAAK6U,kBAAkBhS,GAAOoP,GAAUhL,cAAc9G,EAAOuU,EAAUsX,KAGpFzlB,GACAvG,KAAK8U,iBAAiBvO,EAAYnG,EAAOyC,KAKrDiS,iBAAkB,SAASvO,EAAYnG,EAAOyC,GAC1C,IAAI2D,EAAMD,EAAWC,IACjBC,EAAOF,EAAWE,KAClB3C,EAAS1D,EAAM0D,OACf5D,EAAUE,EAAMF,QAAQwU,UACxBtH,EAAavK,IAAUnG,EACvBwH,EAAO,GAEX9D,EAAMyC,EAAQ,OAAS2D,EACvBpG,EAAMyC,EAAQ,QAAU4D,EAExBrG,EAAMsU,UAAYtU,EAAMsU,WAAa,GACrC,IAAIO,EAAW,IAAIyW,GAAgBllB,EAAKC,EAAM2G,EAAYpN,KAAM8D,EAAQ5D,GACxEE,EAAMsU,UAAUrP,KAAK4P,GACrB7U,EAAMhC,OAAO6W,GAEb/Q,EAAKrB,GAAS2D,EACdxG,KAAKgV,YAAY9Q,EAAMJ,GACvBI,EAAKrB,GAAS4D,EACdzG,KAAKgV,YAAY9Q,EAAMJ,IAG3BgO,SAAU,SAAS3R,EAAOgE,GACtB,IAYI/D,EAZAgO,EAAIjO,EAAMiO,EACVC,EAAIlO,EAAMkO,EACV4D,EAAW9N,EAAO8N,SAClBnO,EAAS9D,KAAKE,QAAQ4D,OAAOmO,GAC7B8M,EAAgB/e,KAAKye,oBAAoB3a,GACzC2N,EAAezR,KAAKyR,aAAaQ,GAEjC/K,EAAa/G,EACXipB,GAAShb,IAAMgb,GAAS/a,KAC1BnH,EAAalH,KAAKmsB,mBAAmBjlB,EAAY6X,IAIjD7X,KACA9G,EAAQJ,KAAKkV,YAAYhO,EAAY/C,MAEjC3I,EAAEqE,OAAOO,EAAO+D,GAChBnE,KAAKyU,YAAYrU,EAAO3D,EAAG0H,GAC3BnE,KAAKyU,YAAYrU,EAAO1D,EAAGyH,IAE/BnE,KAAKgV,YAAY9N,EAAY/C,EAAOL,SAGxC9D,KAAKuR,OAAOlM,KAAKjF,GACjBqR,EAAapM,KAAKjF,IAGtBqe,oBAAqB,SAAS3a,GAC1B,OAAOA,EAAOib,eAGlBoN,mBAAoB,aAEpBnX,YAAa,SAAS7U,EAAO2D,GACzB,IAAIsoB,EAAcpsB,KAAKmR,aAAakb,KAChCC,EAAYxoB,EAAOyoB,MACnBC,EAAY1oB,EAAO2oB,MACnBre,EAAIjO,EAAMiO,EACVC,EAAIlO,EAAMkO,EACVqe,EAAa1sB,KAAK8rB,YAAYQ,GAC9BK,EAAa3sB,KAAK+rB,YAAYS,GAE9BpD,GAAShb,KACTse,EAAa1sB,KAAK8rB,YAAYQ,GAC1BI,GAAc,CAAEtqB,IAAKpG,EAAWsG,IAAKrG,GAErCoC,EAAS+P,KACTA,EAAI9P,EAAU8tB,EAAahe,IAG/Bse,EAAWtqB,IAAMC,KAAKD,IAAIsqB,EAAWtqB,IAAKgM,GAC1Cse,EAAWpqB,IAAMD,KAAKC,IAAIoqB,EAAWpqB,IAAK8L,IAG1Cgb,GAAS/a,KACTse,EAAa3sB,KAAK+rB,YAAYS,GAC1BG,GAAc,CAAEvqB,IAAKpG,EAAWsG,IAAKrG,GAErCoC,EAASgQ,KACTA,EAAI/P,EAAU8tB,EAAa/d,IAG/Bse,EAAWvqB,IAAMC,KAAKD,IAAIuqB,EAAWvqB,IAAKiM,GAC1Cse,EAAWrqB,IAAMD,KAAKC,IAAIqqB,EAAWrqB,IAAK+L,KAIlDiH,iBAAkB,SAASpV,EAASC,EAAOgE,GACvC,IAAIL,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAClB3B,EAAQ,CACRE,SAAU1M,EAAO0R,UACjB7E,SAAU,CACN,OAAQ,UAAW,UAAW,WAAY,SAAU,SACpD,sBAAuB,sBACvB,2BAIJ8E,EAASzV,KAAK2R,YAAYM,GACzBjV,EAAQyY,KACTzV,KAAK2R,YAAYM,GAAYwD,EAASrF,GAAYlQ,EAAS,GAAIoQ,GAAO,IAG1E,IAAI0B,EAAe9R,EAUnB,OATIuV,GAEArF,GADA4B,EAAepU,EAAW,GAAIsC,GACJ,CACtBC,MAAOA,EACP2D,OAAQA,EACRuR,SAAUlR,EAAOkR,UAClB/E,GAGA0B,GAGXE,UAAW,WACP,OAAOgH,IAGXlH,aAAc,SAASlO,EAAQmO,GAC3B,IAAI/R,EAAUF,KAAK0R,cAAcO,GACjC,IAAK/R,EAAS,CACV,IAAIsQ,EAAWxQ,KAAKkS,YAAYC,UAAU3B,SAC1CxQ,KAAK0R,cAAcO,GAAY/R,EAAUtC,EAAW,GAAI4S,EAAU,CAC9D4I,QAAS,CACLoB,QAAS1W,EAAO0W,SAEpB0O,QAAS,CACLpR,OAAQ9X,KAAKE,QAAQgpB,QAAQpR,QAEjCuB,OAAQ,CACJvB,OAAQ9X,KAAKE,QAAQmZ,OAAOvB,SAEjChU,GAGP,OAAO5D,GAGXgV,YAAa,SAAS/U,EAAOgE,GACzB,IAAIL,EAASK,EAAOL,OAChBkO,EAAehS,KAAKgS,aAAalO,EAAQK,EAAO8N,UAChD3C,EAAQnL,EAAOmL,OAASxL,EAAOwL,MAEnC0C,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GAEtD1G,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB,IAAIlP,EAAQ,IAAI8Y,GAAU/Y,EAAO6R,GAKjC,OAJA5R,EAAMkP,MAAQA,EAEdtP,KAAK5B,OAAOgC,GAELA,GAGXurB,WAAY,SAAS7nB,GACjB,IAAIwoB,EAAYxoB,EAAOyoB,MACnBC,EAAY1oB,EAAO2oB,MACnB/qB,EAAW1B,KAAK0B,SAChB6qB,EAAQD,EAAY5qB,EAASkrB,WAAWN,GAAa5qB,EAASmrB,MAC9DJ,EAAQD,EAAY9qB,EAASorB,WAAWN,GAAa9qB,EAASqrB,MAElE,IAAKR,EACD,MAAM,IAAIplB,MAAM,qCAAuCmlB,GAG3D,IAAKG,EACD,MAAM,IAAItlB,MAAM,qCAAuCqlB,GAG3D,MAAO,CACHpe,EAAGme,EACHle,EAAGoe,IAIXjf,OAAQ,SAASC,GACb,IAAIhK,EAAWzD,KAEX6V,EAAc7V,KAAKuR,OACnB7Q,GAASV,KAAKE,QAAQsW,KACtBvS,EAAU,EAEdjE,KAAK6R,oBAAmB,SAAU1R,EAAOgE,GACrC,IAAI/D,EAAQyV,EAAY5R,KACpB0nB,EAAaloB,EAASkoB,WAAWxnB,EAAOL,QACxCmT,EAAQ0U,EAAWvd,EAAEN,QAAQ3N,EAAMiO,EAAGjO,EAAMiO,EAAG1N,GAC/CwW,EAAQyU,EAAWtd,EAAEP,QAAQ3N,EAAMkO,EAAGlO,EAAMkO,EAAG3N,GAEnD,GAAIN,EACA,GAAI6W,GAASC,EAAO,CAChB,IAAIjB,EAAYxS,EAASwS,UAAUgB,EAAOC,GAC1C9W,EAAMoN,OAAOyI,QAEb7V,EAAMkW,SAAU,KAK5BtW,KAAK0O,IAAMjB,GAGfwI,UAAW,SAASgB,EAAOC,GACvB,OAAO,IAAI7Z,EAAI4Z,EAAMtI,GAAIuI,EAAM1I,GAAIyI,EAAMrI,GAAIsI,EAAMzI,KAGvDoD,mBAAoB,SAASsF,GAOzB,IANA,IAGIrT,EADM9D,KACOE,QAAQ4D,OACrB2N,EAFMzR,KAEayR,aAEdQ,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAAY,CACzD,IAAI6D,EAAgBhS,EAAOmO,GACDR,EAAaQ,KAEnCR,EAAaQ,GAAY,IAG7B,IAAK,IAAIhO,EAAU,EAAGA,EAAU6R,EAAc1R,KAAKnD,OAAQgD,IAAW,CAClE,IAAI+oB,EAdGhtB,KAccwX,WAAW1B,EAAe7D,EAAUhO,GACrD9D,EAAQ6sB,EAAMzpB,YACdY,EAAS6oB,EAAM7oB,OAEnBgT,EAAShX,EAAOvC,EAAW,CACvBqG,QAASA,EACTH,OAAQgS,EACR7D,SAAUA,EACVoD,SAAUS,EAAc1R,KAAKH,GAC7BkR,MAvBGnV,MAwBJmE,OAKf0T,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAClB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ3X,EAAMiO,EAAGjO,EAAMkO,IAGhEuS,gBAAiB,WAGb,IAFA,IAAIrP,EAASvR,KAAKuR,OACd9O,EAAS,GACJzB,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnCyB,EAAO4C,MAAMkM,EAAOvQ,IAAQ,IAAIwY,QAEpC,OAAO/W,KAGflF,EAAkBquB,GAAc,CAC5B9nB,OAAQ,GACRolB,QAAS,CACLpR,OAAQ,YAEZuB,OAAQ,CACJvB,OAAQ,YAEZtB,MAAM,IAEV5Y,EAAWguB,GAAazZ,UAAWiO,GAAoB,CACnD5I,WAAYtG,GAAiBiB,UAAUqF,aAG3C,IAAIyV,GAAS/T,GAAUrZ,OAAO,CAC1BC,KAAM,SAASK,EAAOD,GAClBgZ,GAAU5L,GAAGxN,KAAKyN,KAAKvN,KAAMG,EAAOD,GAEpCF,KAAKuV,SAAWpV,EAAMoV,UAG1B2F,gBAAiB,WACb,IAAIC,EAAYnb,KAAKE,QAAQib,UACzBf,EAASe,EAAUf,OACnBhB,EAAUpZ,KAAKE,QAAQkZ,QACvBpL,EAAShO,KAAK0O,IAAIV,SAClBkf,GAAU9T,EAAQG,KAAOH,EAAQgB,OAAOtL,MAAQsL,EAAOtL,OAAS,EAChEqe,EAAiB,IAAI5tB,GACrB8b,EAAS,IAAIlc,GAAQiuB,OAAO,IAAI3tB,GAAS2tB,OAAO,CAAEpf,EAAOI,EAAGJ,EAAOK,EAAI6e,EAAS,EAAI9S,EAAOtL,MAAQ,GAAKoe,EAAS9S,EAAOtL,MAAQ,GAAI,CACpIa,OAAQ,CACJL,MAAO,QAEX8R,KAAMphB,KAAKqtB,eAAe,CACtBpI,SAAU,eACV3V,MAAO8J,EAAQe,WACfmT,MAAO,CAAE,CACLC,OAAQ,EACRje,MAAO8J,EAAQe,WACfK,QAAS,IACV,CACC+S,OAAQ,EACRje,MAAO8J,EAAQe,WACfK,QAAS,QAIjBwK,EAAU,IAAI7lB,GAAQiuB,OAAO,IAAI3tB,GAAS2tB,OAAO,CAAEpf,EAAOI,EAAGJ,EAAOK,GAAK6e,GAAS,CAClFvd,OAAQ,CACJL,MAAO8K,EAAO9K,OACV,IAAI9P,GAAM4Z,EAAQe,YAAYE,WAAWvS,IAAmBwS,QAChExL,MAAOsL,EAAOtL,MACd0L,QAASJ,EAAOI,SAEpB4G,KAAM,CACF9R,MAAO8J,EAAQe,WACfK,QAASW,EAAUX,WAM3B,OAFA2S,EAAe/uB,OAAOid,EAAQ2J,GAEvBmI,KAIfF,GAAO9a,UAAU3B,SAAW5S,EAAW,GAAIqvB,GAAO9a,UAAU3B,SAAU,CAClE6I,OAAQ,CACJ2B,SAAU7e,GAEdgf,UAAW,CACPX,QAAS,EACTJ,OAAQ,CACJ9K,MAAO,OACPR,MAAO,EACP0L,QAAS,MAKrByS,GAAO9a,UAAU3B,SAAS2K,UAAUlL,YAASrM,EAE7C,IAAI4pB,GAAc5B,GAAa/rB,OAAO,CAClCgsB,YAAa,WACT7rB,KAAKytB,SAAWxxB,EAChB2vB,GAAate,GAAGue,YAAYte,KAAKvN,OAGrC8R,SAAU,SAAS3R,EAAOgE,GACH,OAAfhE,EAAMoZ,OAAkBpZ,EAAMoZ,KAAO,GAAMpZ,EAAMoZ,KAAO,GAAKpV,EAAOL,OAAO4pB,eAAepX,UAC1FtW,KAAKytB,SAAWprB,KAAKC,IAAItC,KAAKytB,SAAUprB,KAAKgF,IAAIlH,EAAMoZ,OACvDqS,GAAate,GAAGwE,SAASvE,KAAKvN,KAAMG,EAAOgE,KAE3CnE,KAAKuR,OAAOlM,KAAK,MACjBrF,KAAKyR,aAAatN,EAAO8N,UAAU5M,KAAK,QAIhDmI,OAAQ,SAASkB,GACb1O,KAAK2tB,kBAAkBjf,GACvBkd,GAAate,GAAGE,OAAOD,KAAKvN,KAAM0O,IAGtCwD,UAAW,WACP,OAAO+a,IAGX/X,YAAa,SAAS/U,EAAOgE,GACzB,IAAIL,EAASK,EAAOL,OAChB8pB,EAAc9pB,EAAOM,KAAKnD,OAC1B+O,EAAQ7L,EAAOF,SAAW2D,GAA6BgmB,GACvDC,EAAmB,CACnB7d,MAAOA,EACPmQ,SAAUvY,GAA6BoI,EACvCtM,KAAMuF,IAGNqG,EAAQnL,EAAOmL,OAASxL,EAAOwL,MAC/BnP,EAAMoZ,KAAO,GAAKzV,EAAO4pB,eAAepX,UACxChH,EAAQ5R,EACJoG,EAAO4pB,eAAepe,MAAOA,IAIrC,IAAI0C,EAAepU,EAAW,CAC1Byb,OAAQ,CACJtJ,UAAW,CACPC,MAAOA,EACPmQ,SAAUvY,GAA6BoI,KAGhDhQ,KAAKgS,aAAalO,EAAQK,EAAO8N,UAAW,CAC3CmH,QAAS,CACL1V,KAAMlH,EACN4d,OAAQtW,EAAOsW,OACfI,QAAS1W,EAAO0W,QAChBzK,UAAW8d,KAInB7b,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GACtD1G,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB0C,EAAaoH,QAAQe,WAAa7K,EAElC,IAAIlP,EAAQ,IAAI6sB,GAAO9sB,EAAO6R,GAK9B,OAJA5R,EAAMkP,MAAQA,EAEdtP,KAAK5B,OAAOgC,GAELA,GAGXutB,kBAAmB,SAASjf,GAOxB,IANA,IAGI5K,EADM9D,KACOE,QAAQ4D,OACrB+K,EAAUxM,KAAKD,IAAIsM,EAAII,QAASJ,EAAIK,UAE/BkD,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAY7C,IAXA,IAAI6D,EAAgBhS,EAAOmO,GACvBR,EAROzR,KAQiByR,aAAaQ,GAGrC6b,GAFUhY,EAAciY,SAAW1rB,KAAKC,IAAc,IAAVuM,EAAgB,KAE3C,EACjBmf,GAFUlY,EAAcmY,SAAqB,GAAVpf,GAElB,EACjBqf,EAAU7rB,KAAK8rB,GAAKL,EAAOA,EAG3BM,GAFU/rB,KAAK8rB,GAAKH,EAAOA,EACLE,GAffluB,KAgB0BytB,SAE5BxpB,EAAU,EAAGA,EAAUwN,EAAaxQ,OAAQgD,IAAW,CAC5D,IAAI7D,EAAQqR,EAAaxN,GACzB,GAAI7D,EAAO,CACP,IAAIiuB,EAAOhsB,KAAKgF,IAAIjH,EAAMD,MAAMoZ,MAAQ6U,EACpClB,EAAS7qB,KAAKiF,MAAM4mB,EAAUG,GAAQhsB,KAAK8rB,IAE3Cle,EADavS,EAAe0C,EAAMF,QAAQ+P,OAAQ,IAC3B,EAAIid,EAASc,GAExCpwB,EAAWwC,EAAMF,QAAS,CACtB+P,OAAQA,EACRmJ,QAAS,CACLG,KAAe,EAAT2T,EACNjd,OAAQA,GAEZoJ,OAAQ,CACJpJ,OAAQA,EAAS,QAQzC4H,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAClB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ3X,EAAMiO,EAAGjO,EAAMkO,EAAGlO,EAAMoZ,KAAMnZ,EAAMmV,WAGrF8K,gBAAiB,aAEjBpR,aAAc,eAGlB1R,EAAkBiwB,GAAa,CAC3BtE,QAAS,CACLpR,OAAQ,OAEZuB,OAAQ,CACJvB,OAAQ,SAIhB,IAAIwW,GAASrwB,EAAa4B,OAAO,IAIjCjC,EAAW0wB,GAAOnc,UAAW6F,IAE7B,IAAIuW,GAASpxB,EAAa0C,OAAO,CAC7BC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKkW,UAAYlW,KAAKE,QAAQgW,UAC9BlW,KAAKsP,MAAQpP,EAAQoP,OAAS/S,EAC9ByD,KAAKG,MAAQA,GAGjByR,OAAQ,WACJ,IAAI1R,EAAUF,KAAKE,QAEdF,KAAKsZ,YACNtZ,KAAKsZ,WAAY,EAEbtc,EAAQgD,KAAKG,MAAM8e,UACnBjf,KAAKif,OAAS,IAAIqP,GAAO,CACrB5qB,KAAMxD,EAAQ+e,OAAOgM,MACrB9Q,WAAYja,EAAQ+e,OAAO3P,OAAStP,KAAKsP,MACzCkL,QAASta,EAAQsa,QACjBvK,OAAQ/P,EAAQ+P,OAChBmK,OAAQla,EAAQ+e,OAAO7E,OACvBN,OAAQ1d,EACRyd,MAAOld,IAGXqD,KAAKif,OAAO9e,MAAQH,KAAKG,MACzBH,KAAKif,OAAO5J,SAAWrV,KAAKqV,SAC5BrV,KAAKif,OAAOnb,OAAS9D,KAAK8D,OAE1B9D,KAAK5B,OAAO4B,KAAKif,SAGrBjf,KAAKmlB,cACLnlB,KAAK4Y,eAIbuM,YAAa,WACT,IACI9L,EADUrZ,KAAKE,QACEmZ,OAErB,GAAIA,EAAO/C,QAAS,CAChB,IAEIqD,EAFAtV,EAAYrE,KAAKqE,YACjBqV,EAAgB3b,EAAYsb,GAI5BM,EADAD,EACYA,EAAcrV,GAEdrE,KAAK4Z,YAAYP,EAAOvB,QAGxC9X,KAAK+Y,MAAQ,IAAIqL,GAASzK,EAAWN,EAAQhV,GAC7CrE,KAAK5B,OAAO4B,KAAK+Y,SAIzBvL,OAAQ,SAASkB,GACb1O,KAAK4R,SAEL,IAAIqC,EAAMjU,KACNE,EAAU+T,EAAI/T,QACd+e,EAAShL,EAAIgL,OACb5R,EAAQ4G,EAAIkB,MACZ9C,EAAanS,EAAQmS,WACrBkB,EAAYlG,EAAM8C,gBAAgBnQ,KAAKE,SACvC6V,EAAe1I,EAAM0I,aAAa1I,EAAM+D,aAAclR,EAAQsS,WAAYe,GAC1Eib,EAAkBjb,EAAUzF,QAAQ9N,KAAKG,MAAM8e,QAC/CwP,EAAcpc,EAAamc,EAAkBzY,EAC7C2Y,EAAcrc,EAAa0D,EAAeyY,EAE9C,GAAIvP,EAAQ,CACR,IAAI0P,EAAa,IAAItxB,EACjBoxB,EAAY9f,GAAI+f,EAAYlgB,GAC5BigB,EAAY7f,GAAI8f,EAAYjgB,IAEhCwQ,EAAO/e,QAAQ6O,OAASsD,EAAasc,EAAW5f,SAAW7O,EAAQ+e,OAAO1P,KAAKT,MAC/EmQ,EAAO/e,QAAQ4O,MAAQuD,EAAanS,EAAQ+e,OAAO1P,KAAKT,MAAQ6f,EAAW7f,QAC3EmQ,EAAOzR,OAAOmhB,GAGlB,IAAI5V,EAAQ/Y,KAAK+Y,MACbA,IACAA,EAAM7Y,QAAQgW,UAAYlW,KAAKkW,UAC/B6C,EAAMvL,OAAOkB,IAGb1O,KAAKgZ,MACLhZ,KAAKgZ,KAAKxL,OAAOkB,GAGrB1O,KAAK0O,IAAMA,GAGfO,aAAc,WACV9R,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElC,IAAIE,EAAUF,KAAKE,QACf0oB,EAAOxpB,GAAKshB,SAAS1gB,KAAK0O,IAAIS,SAAU,CACxCiS,KAAM,CACF9R,MAAOtP,KAAKsP,MACZkL,QAASta,EAAQsa,SAErB7K,OAAQ,OAGRzP,EAAQka,OAAOtL,MAAQ,GACvB8Z,EAAK1oB,QAAQ2oB,IAAI,SAAU,CACvBvZ,MAAOpP,EAAQka,OAAO9K,OAAStP,KAAKsP,MACpCR,MAAO5O,EAAQka,OAAOtL,MACtBc,SAAU1P,EAAQka,OAAOxK,SACzB4K,QAAS9c,EAAewC,EAAQka,OAAOI,QAASta,EAAQsa,WAIhExa,KAAK4uB,WAAahG,EAElBtrB,EAAiBsrB,GACjB5oB,KAAKqB,OAAOjD,OAAOwqB,IAGvBvI,gBAAiB,WACTrgB,KAAK4uB,aACL5uB,KAAK+P,UAAY1Q,GAAUwvB,OACvB7uB,KAAK4uB,WAAY5uB,KAAKE,QAAQ6P,aAK1CmL,gBAAiB,SAAS4F,GACtB,OAAO1hB,GAAKshB,SAAS1gB,KAAK0O,IAAIS,SAAU2R,IAG5CvF,gBAAiB,WACb,OAAOvb,KAAK4uB,YAGhBpT,oBAAqB,WACjB,MAAO,CACHtM,KAAMlP,KAAK0O,IAAIS,SACf9N,OAAQrB,KAAK4uB,WACb1uB,QAASF,KAAKE,UAItB0Z,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CzT,UAAW,WACP,MAAO,CACHgR,SAAUrV,KAAKqV,SACfE,SAAUvV,KAAKuV,SACfpV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,SAIrBoY,YAAa,SAASxN,GAClB,OAAO1O,KAAK0O,IAAIoN,SAASpN,MAIjC6f,GAAOpc,UAAUyJ,cAAgBsJ,GAAI/S,UAAUyJ,cAE/Cre,EAAkBgxB,GAAQ,CACtBnU,OAAQ,CACJtL,MAAO,GAEXsD,UAAU,EACVoI,QAAS,EACTyE,OAAQ,CACJgM,MAAO,GACP7Q,OAAQ,CACJtL,MAAO,EACPQ,MAAO,SAEXC,KAAM,CACFT,MAAO,IAGfuK,OAAQ,CACJ/C,SAAS,GAEb4S,QAAS,CACLpR,OAAQ,iCAEZe,MAAO,CACHE,MAAO,MAIfnb,EAAW2wB,GAAOpc,UAAW6F,IAC7Bpa,EAAW2wB,GAAOpc,UAAWwG,IAE7B,IAAImW,GAAc5d,GAAiBrR,OAAO,CACtCC,KAAM,SAAS4B,EAAUxB,IAoH7B,SAAkBA,GAGd,IAFA,IAAI4D,EAAS5D,EAAQ4D,OAEZ7B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI8sB,EAAajrB,EAAO7B,GACpBmC,EAAO2qB,EAAW3qB,MAClBA,GAASlH,EAAQkH,EAAK,KAAQzG,EAASyG,EAAK,MAC5C2qB,EAAW3qB,KAAO,CAAEA,KAzHxB4qB,CAAS9uB,GAETgR,GAAiB5D,GAAGxN,KAAKyN,KAAKvN,KAAM0B,EAAUxB,IAGlDqW,iBAAkB,SAASX,GAIvB,IAHA,IAAIgJ,EAAW5e,KAAK4e,SAChB8I,EAAiB9I,EAAS3d,OAErBgB,EAAI,EAAGA,EAAIylB,EAAgBzlB,IAChC2c,EAAS3c,GAAGuL,OAAOoI,EAAc3T,KAIzC8Q,UAAW,SAAS3S,GAChB,IAAI0D,EAAS1D,EAAM0D,OACfyP,EAAYvT,KAAKmQ,gBAAgBrM,GACjC0P,EAAoBxT,KAAKyT,0BAA0BF,GAEvD,MAAO,CAAEC,EAAmBpT,EAAMD,MAAMmF,SAAWkO,IAGvD0B,YAAa,SAAS9Q,EAAMD,GACxB,IAAIqO,EAAarO,EAAOqO,WACpB1O,EAASK,EAAOL,OAEhB5D,EADMF,KACQE,QACd0e,EAFM5e,KAES4e,SACfze,EAAQiE,EAAKb,YAEb0rB,EAAgBrxB,EAAW,CAC3BwU,UAAWlS,EAAQmS,WACnB2S,QAASlhB,EAAOkhB,QAChBxS,WAAYA,EACZH,WAAYnS,EAAQmS,YACrBvO,GAECwL,EAAQlL,EAAKD,OAAOmL,OAASxL,EAAOwL,MACxC2f,EAAgBjvB,KAAKsV,iBAAiB2Z,EAAe9uB,EAAOgE,GACxD1G,EAAWqG,EAAOwL,SAClBA,EAAQ2f,EAAc3f,OAG1B,IAAI4f,EAAS,IAAIX,GAAOpuB,EAAO8uB,GAC/BC,EAAO5f,MAAQA,EAEf,IAAI4X,EAAUtI,EAASpM,GAavB,OAZK0U,IACDA,EAAU,IAAIlB,GAAc,CACxB5T,SAAUlS,EAAQmS,WAClB6T,IAAKhmB,EAAQgmB,IACbC,QAASjmB,EAAQimB,QACjBF,KAAM/lB,EAAQmS,aAAerS,KAAKmR,cAAgB,IAAI8U,MAE1DjmB,KAAK5B,OAAO8oB,IAGhBA,EAAQ9oB,OAAO8wB,GAERA,GAGXla,YAAa,SAAS7U,EAAOgE,GACzB,IAAImB,EAAUnF,EAAMmF,QAChB2Z,EAAS9e,EAAM8e,OACfrL,EAAWzP,EAAOL,OAAO/D,KACzB2V,EAAY1V,KAAKsR,gBAAgBsC,GAEjC5W,EAAQsI,KAAa6pB,MAAM7pB,IAAYtI,EAAQiiB,IAAWkQ,MAAMlQ,OAChEvJ,EAAY1V,KAAKsR,gBAAgBsC,GAC7B8B,GAAa,CAAEtT,IAAKpG,EAAWsG,IAAKrG,IAE9BmG,IAAMC,KAAKD,IAAIsT,EAAUtT,IAAKkD,EAAS2Z,GACjDvJ,EAAUpT,IAAMD,KAAKC,IAAIoT,EAAUpT,IAAKgD,EAAS2Z,KAIzDpH,iBAAkB,SAASzX,EAAO0X,GAC9B,OAAO9X,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ1X,EAAMD,MAAMmF,QAASlF,EAAMD,MAAM8e,SAGlF/X,WAAY,SAAS9C,GACjB,OAAOA,EAAKb,YAAY+B,SAG5B4Q,UAAW,SAAS9V,GAGhB,OAFYA,EAAMD,MAAMmF,QAET,GAGnB+a,gBAAiB,WACb,IAEI9O,EAASvR,KAAKuR,OAElBvR,KAAK2nB,uBAEL,IAAK,IAAI3mB,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQmR,EAAOvQ,GACnBZ,EAAMF,QAAQ6P,UARH/P,KAQwBE,QAAQ6P,UAC3C3P,EAAMigB,sBAKlByO,GAAY3c,UAAUwV,qBAAuBd,GAAS1U,UAAUwV,qBAEhEpqB,EAAkBuxB,GAAa,CAC3B/e,UAAW,CACPrM,KAAMqF,MAgBd,IAAIqmB,GAAcxzB,EAAMiE,OAAO,CAC3BC,KAAM,SAASqR,EAAcjR,GAEzBF,KAAKmR,aAAeA,EACpBnR,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASA,IAGhDmvB,SAAU,SAASnvB,EAASE,GACxB,IAAI+Z,EAAaja,EAAQia,WACrBC,EAASla,EAAQka,OAAO9K,MAE5B,GAAIlP,EAAO,CACP,IAAIkvB,EAAalvB,EAAMkP,OAASlP,EAAMF,QAAQoP,MAC9C6K,EAAazc,EAAeyc,EAAYmV,GACxClV,EAAS1c,EAAe0c,EAAQkV,GAGpC,IAAIjT,EAAUne,EAAWgC,EAAQmc,SAAW,GAAI,QAEhD,MAAO,CACHkT,gBAAiBpV,EACjB0L,YAAazL,EACboV,KAAMtvB,EAAQsvB,KACdlgB,MAAOpP,EAAQoP,MACfkL,QAASta,EAAQsa,QACjBiV,YAAalxB,EAAW2B,EAAQka,OAAOtL,OACvC4gB,WAAYnxB,EAAW8d,EAAQqI,KAC/BiL,cAAepxB,EAAW8d,EAAQsI,QAClCiL,YAAarxB,EAAW8d,EAAQrC,MAChC6V,aAActxB,EAAW8d,EAAQpC,SAIzC6V,KAAM,SAAS5vB,EAAS6vB,EAAgB3vB,GACpCF,EAAQ4X,OAASiY,EAAejY,OAEhC,IAAIgJ,EAAQ9gB,KAAKqvB,SAASU,EAAgB3vB,GAC1CF,EAAQ4gB,MAAQA,EAEhB,IAAI3G,EAAa,IAAI3a,GAAMshB,EAAMyO,iBAC5BvyB,EAAQ+yB,EAAezgB,QAAW6K,EAAW6V,WAC9C9vB,EAAQ+vB,UAAY,2BAGxBjwB,KAAKmR,aAAa+e,OAAO/jB,GAAcjM,GAEvCF,KAAKsW,SAAU,GAGnB6Z,KAAM,WACEnwB,KAAKmR,cACLnR,KAAKmR,aAAa+e,OAAO9jB,IAG7BpM,KAAKsW,SAAU,GAGnB8Z,QAAS,kBACEpwB,KAAKmR,gBAIpB5T,EAAkB6xB,GAAa,CAC3BhV,OAAQ,CACJtL,MAAO,GAEX0L,QAAS,IAGb,IAAI6V,GAAmBjB,GAAYvvB,OAAO,CACtCC,KAAM,SAASqR,EAAcmf,EAAWpwB,GACpCkvB,GAAY9hB,GAAGxN,KAAKyN,KAAKvN,KAAMmR,EAAcjR,GAE7CF,KAAKswB,UAAYA,EACjBtwB,KAAKuwB,cAAgBpf,EAAa2G,OAClC9X,KAAKwwB,gBAGTA,aAAc,WACV,IAEI1vB,EAFAf,EAAOC,KAAKswB,UAAUvwB,KAItBe,EAHWf,EAAK2B,SAEP0P,aACFrR,EAAKM,YAAc,eAAiB,YAEpCN,EAAKG,QAAQkS,SAAW,QAAU,QAE7CpS,KAAK4T,SAAW9S,GAGpB2vB,OAAQ,SAASrwB,GACb,IACIL,EADMC,KACKswB,UAAUvwB,KACrBG,EAFMF,KAEQE,QACdC,EAAQJ,EAAKG,EAAQwwB,WAAa,cAAgB,YAAYtwB,GAC9DuwB,EAAiBxwB,EAEjBD,EAAQ4X,OACR6Y,EAAiB3wB,KAAKuwB,cAAcxY,KAAK7X,EAAQ4X,OAAQ3X,GAClDJ,EAAKG,QAAQwD,OAAS7G,IAC7B8zB,EAAiB3wB,KAAKuwB,cAAcxY,KAAKhY,EAAKG,QAAQmZ,OAAOuX,YAAY7wB,EAAKG,QAAQ2wB,UAAW1wB,IAGrGH,KAAK8vB,KAAK,CACN1vB,MAAOA,EACP2a,OAAQ/a,KAAK8wB,YACbR,UAAWtwB,KAAKswB,UAChBnwB,MAAOwwB,EACP/c,SAAU5T,KAAK4T,SACfoD,UAAWhX,KAAKswB,UAAUvwB,KAAKiX,WAChChX,KAAKE,UAGZiwB,KAAM,WACFnwB,KAAKmR,aAAa+e,OAAO9jB,GAAc,CACnCkkB,UAAWtwB,KAAKswB,UAChB1c,SAAU5T,KAAK4T,SACfoD,UAAWhX,KAAKswB,UAAUvwB,KAAKiX,aAIvC8Z,UAAW,WACP,IAOI9U,EAAiBD,EAAe3b,EANhCkwB,EADMtwB,KACUswB,UAChBS,EAFM/wB,KAEYE,QAClB8a,EAAW+V,EAAY/V,SACvBqB,EAAU0U,EAAY1U,QACtBjK,GAAYke,EAAUvwB,KAAKG,QAAQkS,SACnC4e,EAAUV,EAAU/gB,KAAK0hB,OAuB7B,OApBI7e,GACA4J,EAAkB7f,EACd6e,IAAa3e,GACb0f,EAAgB3f,EAChBgE,EAAQ4wB,EAAQE,aAAaC,UAAU,EAAG9U,KAE1CN,EAAgB1f,EAChB+D,EAAQ4wB,EAAQI,UAAUD,UAAU,GAAI9U,MAG5CN,EAAgB5f,EACZ6e,IAAa1e,GACb0f,EAAkBrf,EAClByD,EAAQ4wB,EAAQI,UAAUD,WAAW9U,EAAS,KAE9CL,EAAkB1f,EAClB8D,EAAQ4wB,EAAQpR,WAAWuR,UAAU9U,EAAS,KAI/C,CACHjc,MAAOA,EACPyZ,MAAO,CACHoC,WAAYD,EACZ5J,SAAU2J,OAM1Bxe,EAAkB8yB,GAAkB,CAChChU,QAAS,KAGb,IAAIgV,GAAYl0B,EAAa0C,OAAO,CAChCC,KAAM,SAASqR,EAAcpR,EAAMG,GAC/B/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKD,KAAOA,EACZC,KAAK0wB,WAAa3wB,aAAgBvB,EAElC,IAAIuxB,EAAiB/vB,KAAKE,QAAQgpB,QAE9B6G,EAAezZ,UACftW,KAAKkpB,QAAU,IAAImH,GAAiBlf,EAAcnR,KAC9CpC,EAAW,GAAImyB,EAAgB,CAAEW,WAAY1wB,KAAK0wB,gBAK9DD,OAAQ,SAASrwB,GACbJ,KAAKI,MAAQA,EACbJ,KAAKsxB,WACLtxB,KAAKuP,KAAK+G,SAAQ,GAEdtW,KAAKkpB,SACLlpB,KAAKkpB,QAAQuH,OAAOrwB,IAI5B+vB,KAAM,WACFnwB,KAAKuP,KAAK+G,SAAQ,GAEdtW,KAAKkpB,SACLlpB,KAAKkpB,QAAQiH,QAIrBmB,SAAU,WACN,IAOIC,EANAxxB,EADMC,KACKD,KACXK,EAFMJ,KAEMI,MACZgS,EAAWrS,EAAKG,QAAQkS,SACxB1D,EAAM1O,KAAKwxB,SACXC,EAAMrf,EAAW1V,EAAID,EACrBi1B,EAAY,IAAIhyB,GAAcgP,EAAIC,GAAID,EAAIF,IAS9C,GALI+iB,EADAnf,EACU,IAAI1S,GAAcgP,EAAIE,GAAIF,EAAIF,IAE9B,IAAI9O,GAAcgP,EAAIC,GAAID,EAAID,IAGxCrO,EACA,GAAIJ,KAAK0wB,WAAY,CACjB,IAAInwB,EAAOR,EAAK+N,QAAQ/N,EAAK4xB,mBAAmBvxB,IAChDsxB,EAAUD,GAAOF,EAAQE,GAAOlxB,EAAKyN,SAASyjB,QAE9CC,EAAUD,GAAOF,EAAQE,GAAOrxB,EAAMqxB,GAI9CzxB,KAAK0O,IAAMA,EAEX1O,KAAKuP,KAAKM,OAAO6hB,GAAW5hB,OAAOyhB,IAGvCC,OAAQ,WASJ,IARA,IAMII,EANA7xB,EAAOC,KAAKD,KACZgB,EAAOhB,EAAKqB,KAAKL,KACjBE,EAASF,EAAKE,OACdmR,EAAWrS,EAAKG,QAAQkS,SACxB1D,EAAM3O,EAAKixB,UAAUpW,QACrB6W,EAAMrf,EAAW3V,EAAIC,EAGhBuF,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAI4vB,EAAc9wB,EAAKkB,GACnB4vB,EAAY3xB,QAAQkS,WAAaA,IAC5Bwf,EAGDA,EAAYhL,KAAKiL,EAAYb,WAF7BY,EAAcC,EAAYb,UAAUpW,SAUhD,OAHAlM,EAAI+iB,EAAM,GAAKG,EAAYH,EAAM,GACjC/iB,EAAI+iB,EAAM,GAAKG,EAAYH,EAAM,GAE1B/iB,GAGXO,aAAc,WACV9R,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElC,IAAIE,EAAUF,KAAKE,QACnBF,KAAKuP,KAAO,IAAInQ,GAAK,CACjBuQ,OAAQ,CACJL,MAAOpP,EAAQoP,MACfR,MAAO5O,EAAQ4O,MACf0L,QAASta,EAAQsa,QACjB5K,SAAU1P,EAAQ0P,UAEtB0G,SAAS,IAGbtW,KAAKsxB,WACLtxB,KAAKqB,OAAOjD,OAAO4B,KAAKuP,OAG5B6gB,QAAS,WACDpwB,KAAKkpB,SACLlpB,KAAKkpB,QAAQkH,UAGjBjzB,EAAamQ,GAAG8iB,QAAQ7iB,KAAKvN,SAIrCzC,EAAkB8zB,GAAW,CACzB/hB,MAAO1S,EACPkS,MAAO,EACPmB,QAAS,EACTiZ,QAAS,CACL5S,SAAS,KAIjB,IAAIwb,GAAiB30B,EAAa0C,OAAO,CACrCC,KAAM,SAASI,EAASkB,GACpBjE,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAChCF,KAAKoB,KAAOA,GAGhB2wB,WAAY,WAIR,IAHA,IAAInT,EAAW5e,KAAK4e,SAChB3d,EAAS2d,EAAS3d,OAEbgB,EAAI,EAAGA,EAAIhB,EAAQgB,IACxB,IAAiC,IAA7B2c,EAAS3c,GAAG/B,QAAQsW,KACpB,OAAO,EAGf,OAAO,GAGXwb,SAAU,WACN,OAAOhyB,KAAKoB,KAAK6wB,aAGrBhjB,aAAc,WAKV,GAJAjP,KAAKqB,OAAS,IAAI9B,GAAM,CACpB0Q,OAAQ,IAGRjQ,KAAK+xB,aAAc,CACnB,IACIG,GADUlyB,KAAK6b,QAAU7b,KAAKgyB,YACX7iB,SACnBsR,EAAWrhB,GAAKshB,SAASwR,GAC7B50B,EAAiBmjB,GAEjBzgB,KAAKqB,OAAOmV,KAAKiK,GACjBzgB,KAAKmyB,iBAIbC,UAAW,WACP,OAAOpyB,MAGXmyB,aAAc,WAKV,IAJA,IACIE,EADMryB,KACO4e,SACb/C,EAFM7b,KAEQ6b,QAET5Z,EAAI,EAAGA,EAAIowB,EAAOpxB,OAAQgB,IAI/B,IAHA,IAAIsP,EAAS8gB,EAAOpwB,GAAGsP,QAAU,GAC7BtQ,EAASsQ,EAAOtQ,OAEXqxB,EAAI,EAAGA,EAAIrxB,EAAQqxB,IAAK,CAC7B,IAAIlyB,EAAQmR,EAAO+gB,GACnB,GAAIlyB,IAA2B,IAAlBA,EAAMkW,SAAqBlW,EAAM8b,aAAe9b,EAAM8b,YAAYL,GAC3E,GAAIzb,EAAM+b,eACN/b,EAAM+b,qBACH,CACH,IAAIpD,EAAQ3Y,EAAM2Y,MACdC,EAAO5Y,EAAM4Y,KAEbD,GAASA,EAAM7Y,QAAQoW,UACnByC,EAAM6L,gBACN7L,EAAM6L,eAAe/I,GAEzB9C,EAAM7Y,QAAQkc,QAAS,GAGvBpD,GAAQA,EAAK9Y,QAAQoW,UACrB0C,EAAK9Y,QAAQkc,QAAS,MAQ9CgU,QAAS,WACLjzB,EAAamQ,GAAG8iB,QAAQ7iB,KAAKvN,aAEtBA,KAAKgd,UAIpB8U,GAAe3f,UAAUogB,aAAc,EAEvC,IAAIC,GAAO/zB,EAAWoB,OAAO,CACzBC,KAAM,SAASI,GACXzB,EAAW6O,GAAGxN,KAAKyN,KAAKvN,KAAME,GAE9BF,KAAKyyB,GAyMF,OAASC,KAvMZ1yB,KAAK2yB,cAEL3yB,KAAKqkB,QAAU,IAAIlnB,EAEnB6C,KAAKuB,eAAiB,IAAIuwB,GAAe,GAAI9xB,MAC7CA,KAAK5B,OAAO4B,KAAKqkB,SAEjBrkB,KAAKe,KAAO,GACZf,KAAKqyB,OAAS,IAGlBM,YAAa,WACT,IAAIC,EAAe5yB,KAAKE,QAAQ2yB,MAC5Bl1B,EAASi1B,KACTA,EAAeh1B,EAAW,GAAIg1B,EAAc,CACxC/Y,MAAO+Y,EAAa5X,SACpBA,SAAU5e,KAIlB4D,KAAK6yB,MAAQn0B,EAAMo0B,WAAWF,EAAcJ,GAAKrgB,UAAUjS,QAAQ2yB,OAC/D7yB,KAAK6yB,OACL7yB,KAAK5B,OAAO4B,KAAK6yB,QAIzBE,WAAY,SAAShzB,GACjBC,KAAKqkB,QAAQjmB,OAAO2B,GACpBC,KAAKe,KAAKsE,KAAKtF,GACfA,EAAKqB,KAAOpB,MAGhBgzB,aAAc,SAASjzB,EAAM2f,GACzB1f,KAAKqkB,QAAQjmB,OAAO2B,GACpBC,KAAKe,KAAKkyB,OAAOvT,EAAK,EAAG3f,GACzBA,EAAKqB,KAAOpB,MAGhBkzB,YAAa,SAAS7lB,GACdrN,KAAKuB,eAAeyb,SAAWhd,KAAKqkB,SACpCrkB,KAAKqkB,QAAQjmB,OAAO4B,KAAKuB,gBAG7BvB,KAAKqyB,OAAOhtB,KAAKgI,GACjBrN,KAAKuB,eAAenD,OAAOiP,GAC3BA,EAAMjM,KAAOpB,MAGjBmzB,MAAO,WACH,IAEIzxB,EAAW1B,KAAKgd,OAEpB,GAAItb,EAAU,CACV,IAAK,IAAIO,EAAI,EAAGA,EAAIjC,KAAKe,KAAKE,OAAQgB,IAClCP,EAAS0xB,WANFpzB,KAMsBe,KAAKkB,IAGtC,IAAK,IAAIoxB,EAAM,EAAGA,EAAMrzB,KAAKqyB,OAAOpxB,OAAQoyB,IACxC3xB,EAAS4xB,YAVFtzB,KAUuBqyB,OAAOgB,IAI7CrzB,KAAKe,KAAO,GACZf,KAAKqyB,OAAS,GAEdryB,KAAKqkB,QAAQ+L,UACbpwB,KAAKqkB,QAAQzF,SAAW,GACxB5e,KAAKuB,eAAeqd,SAAW,IAGnCpR,OAAQ,SAASC,GAEb,IAAI4W,EACAxmB,EAAKmC,KAAK4e,YAAc5e,KAAKqkB,UAC7BA,EAAUrkB,KAAK4e,SAAS2U,OAG5B90B,EAAW6O,GAAGE,OAAOD,KAAKvN,KAAMyN,GAE5B4W,GACArkB,KAAK4e,SAASvZ,KAAKgf,GAGnBrkB,KAAK6yB,QACL7yB,KAAKykB,WAAWjW,IAAMxO,KAAK6yB,MAAMnkB,IAAIK,WAI7CykB,YAAa,WACT,IAAI1S,EAAQriB,EAAW6O,GAAGkmB,YAAYjmB,KAAKvN,MAG3C,OAFA8gB,EAAM7Q,QAAU,GAET6Q,GAGX2S,eAAgB,WACRzzB,KAAKE,QAAQoW,SACbtW,KAAK0zB,mBAIbtB,UAAW,WACP,OAAOpyB,MAGX2zB,SAAU,WACN,OAAO3zB,MAGX0zB,gBAAiB,WAQb,IAPA,IAAI3yB,EAAOf,KAAKe,KACZ6yB,EAAU7yB,EAAKgD,OAAO/D,KAAKgd,OAAOjc,MAClC8yB,EAAa,GACbC,EAAa,GAIR7xB,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAI7B,IAHA,IAAIlC,EAAOgB,EAAKkB,GACZmQ,EAAWrS,EAAKG,QAAQkS,SACxB2hB,EAAY3hB,EAAWyhB,EAAaC,EAC/BxB,EAAI,EAAGA,EAAIsB,EAAQ3yB,OAAQqxB,IAChC,GAAyB,IAArByB,EAAU9yB,OAAc,CACxB,IAAI+yB,EAAUJ,EAAQtB,GAClBlgB,IAAa4hB,EAAQ9zB,QAAQkS,UAC7BhU,EAAO21B,EAAWh0B,EAAK2zB,gBAAgBM,MAO3DC,QAAS,WACLj0B,KAAKqB,OAAO6yB,QAEZl0B,KAAKqkB,QAAQrH,OAAS,KACtBhd,KAAKqkB,QAAQgJ,eAAiBrtB,KAAKqtB,eAAetb,KAAK/R,MACvDA,KAAKqkB,QAAQ8P,eACbn0B,KAAKqkB,QAAQrH,OAAShd,KAElBA,KAAK6yB,OACL7yB,KAAKqB,OAAOjD,OAAO4B,KAAK6yB,MAAMxxB,QAGlCrB,KAAKqB,OAAOjD,OAAO4B,KAAKqkB,QAAQhjB,QAEhCrB,KAAKyzB,iBACLzzB,KAAKo0B,gBAGTnC,UAAW,WAKP,IAJA,IAAIlxB,EAAOf,KAAKe,KACZE,EAASF,EAAKE,OACdgxB,EAAY,IAAI50B,EAEX2D,EAAM,EAAGA,EAAMC,EAAQD,IAAO,CACnC,IAAIjB,EAAOgB,EAAKC,GACZqzB,EAAiBt0B,EAAKG,QAAQkS,SAAW1V,EAAID,EAC7Cu0B,EAAUjxB,EAAKixB,UACnBiB,EAAUoC,EAAiB,GAAKrD,EAAQqD,EAAiB,GACzDpC,EAAUoC,EAAiB,GAAKrD,EAAQqD,EAAiB,GAG7D,GAAqB,IAAjBpC,EAAUrjB,GAIV,IAHA,IAAIglB,EAAU5zB,KAAKgd,OAAOjc,KACtBuzB,EAAWV,EAAQ3yB,OAEdszB,EAAQ,EAAGA,EAAQD,EAAUC,IAAS,CAC3C,IAAIC,EAASZ,EAAQW,GACrB,IAAKC,EAAOt0B,QAAQkS,SAAU,CAC1B,IAAIqiB,EAAYD,EAAOxD,UACvBiB,EAAUtjB,GAAK8lB,EAAU9lB,GACzBsjB,EAAUrjB,GAAK6lB,EAAU7lB,IAIrC,OAAOqjB,GAGXpW,QAAS,WACL,OAAO7b,KAAKuB,eAAesa,SAG/BuY,aAAc,WACV,IAAIM,EAAU10B,KAAK20B,aACfD,GACAA,EAAQxE,OAAO7jB,GAAa,CACxBjL,KAAM,IAAID,GAAUnB,MACpB+G,MAAO/G,KAAK40B,UACZ9zB,KAAMd,KAAKE,QAAQY,UAM/B4xB,GAAK,EAiBT,SAASmC,GAAgB9vB,EAAO0T,GACZ,OAAZA,GACA1T,EAAMM,KAAKoT,GAInB,SAASqc,GAAehxB,EAAQK,EAAQ4C,GACpC,IAAIuP,EAAUnS,EAAOmS,QACrB,GAAItZ,EAAQsZ,GACR,OAAOA,EAGX,IAAIye,EAAkBjxB,EAAOixB,gBAC7B,OAAIA,EACOA,EAAgBhuB,QAD3B,EAKJ,SAASiuB,GAAalxB,GAMlB,IALA,IAAIM,EAAON,EAAOM,KACdmN,EAAS,GACThP,EAAM,EACNP,EAAQ,EAEHhB,EAAM,EAAGA,EAAMoD,EAAKnD,OAAQD,IAAO,CACxC,IAAIqD,EAAYrB,GAAasC,QAAQtB,UAAUF,EAAQ9C,GACnDb,EAAQkE,EAAUd,YAAYpD,MAE9B9B,EAAS8B,KACTA,EAAQmG,WAAWnG,IAGnBtE,EAASsE,IACTkE,EAAUiS,SAA4D,IAAlDwe,GAAehxB,EAAQO,EAAUF,OAAQnD,GAE7DqD,EAAUlE,MAAQkC,KAAKgF,IAAIlH,GAC3BoR,EAAOlM,KAAKhB,GAERA,EAAUiS,UACV/T,GAAO8B,EAAUlE,OAGP,IAAVA,GACA6B,KAGJuP,EAAOlM,KAAK,MAIpB,MAAO,CACHmC,MAAOjF,EACPgP,OAAQA,EACRvP,MAAOA,GAIf,SAASizB,GAAiBC,EAAGC,GACzB,OAAID,GAAKC,EACED,EAAEE,gBAAkBD,EAAEC,cAG1BF,IAAMC,EAGjB,SAASE,GAAmBvxB,EAAQwxB,GAIhC,IAHA,IAAI7yB,EAAS,GAETa,EAAc,GAAGS,OAAOuxB,GACnBt0B,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IAAO,CAC1C,IAAI8U,EAAgBhS,EAAO9C,GACvBxD,EAAQsY,EAAcpS,KAAMJ,IAC5Bb,EAAO4C,KAAKyQ,GAIpB,OAAOrT,EAGX,SAAS8yB,GAAa1yB,EAAOC,EAAKspB,GAC9B,GAAY,OAARtpB,EACA,OAAOA,EAGX,IAAIsR,EAAM,SAAWvR,EACjB1C,EAAQ2C,EAAIsR,GAOhB,OALKjU,IACDA,EAAQ7B,EAAU8tB,EAAanvB,EAAO4F,GAAO,EAAd5F,CAAoB6F,IACnDA,EAAIsR,GAAOjU,GAGRA,EAGX,SAASq1B,GAAWC,EAAaC,GAC7B,IAAIhyB,EAAO+xB,EAAY/xB,KACnBiyB,EAAeD,aAA0BE,KAE7C,OAASlyB,GAAQiyB,GAAiBV,GAAiBvxB,EAAM7G,GAG7D,SAASg5B,GAAkB9wB,GACvB,OAAwB,IAAjBA,EAAM9D,OAAe8D,EAAM,GAAKA,EAlH3CytB,GAAKrgB,UAAUogB,aAAc,EAE7Bh1B,EAAkBi1B,GAAM,CACpBviB,QAAS,EACT6lB,aAAa,EACbjD,MAAO,CACHhZ,MAAOvd,GAEXga,SAAS,IA6Gb,IAAIyf,GAAa,QAUjB,SAASC,GAAWlyB,EAAQI,GACxB,IACIX,EADSP,GAAasC,QAAQtB,UAAUF,EAAQ,KAAMI,GACjCX,YAEzB,IAAK,IAAIV,KAASU,EACd,GAAI5H,EAAQ+X,oBAAoBnQ,EAAYV,IACxC,OAAO,EAKnB,SAASozB,GAAShiB,GACd,IAQIiiB,EAAeC,EARftR,EAAQ5Q,EAAI4Q,MACZtH,EAAMtJ,EAAIsJ,IACVnb,EAAM6R,EAAI7R,IACVE,EAAM2R,EAAI3R,IACV8zB,EAAYniB,EAAIhX,OAChBo5B,EAAUpiB,EAAIoiB,QACdvyB,EAASmQ,EAAInQ,OAGb9C,EAAM6jB,EACV,GAIQwR,EAHJr1B,GAAOuc,KAKH2Y,EAAgBF,GAAWlyB,GAD3BqyB,EAAWC,EAAUp1B,IACuBkD,aAE3C9B,GAAOpB,GAAOA,GAAOsB,IAAQ4zB,GAEtC,GAAIA,EACA,OAAOC,EAIf,SAASG,GAAuBxyB,EAAQnD,EAAOqB,EAAOo0B,EAAWC,GAC7D,IAAIj0B,EAAMzB,EAAMyB,IACZE,EAAM3B,EAAM2B,IACZi0B,EAAcn0B,EAAM,GAAKA,EAAMJ,EAC/Bw0B,EAAcl0B,EAAM,EAAIN,EAE5B,GAAIu0B,GAAeC,EAAa,CAC5B,IACIC,EAAUC,EAUNP,EAXJpX,EApDZ,SAA6Bjb,GACzB,OAAIA,EAAOib,cACAjb,EAAOib,cAGXgX,GAAWY,KAAK7yB,EAAOJ,OAASI,EAAO8O,MAAQrK,GAAOC,GA+CrCiW,CAAoB3a,GAExC,GAAIib,IAAkBvW,GACd+tB,IACAE,EAAWL,EAAUh0B,EAAM,IAG3Bo0B,IACAE,EAAWN,EAAU9zB,EAAM,SAI3Bi0B,IAcIE,EAZYT,GAAWlyB,GAD3BqyB,EAAWC,EAAUh0B,EAAM,IACiB8B,MAY7BiyB,EAVAF,GAAS,CAChBpR,MAAOziB,EACPmb,KAAM,EACNnb,IAAK,EACLE,IAAKN,EAAQ,EACb/E,OAAQm5B,EACRC,QAASA,EACTvyB,OAAQA,KAOhB0yB,IAcIE,EAZYV,GAAWlyB,GAD3BqyB,EAAWC,EAAU9zB,EAAM,IACiB4B,MAY7BiyB,EAVAF,GAAS,CAChBpR,MAAOviB,EACPib,IAAK,EACLnb,IAAK,EACLE,IAAKN,EAAQ,EACb/E,OAAQm5B,EACRC,QAASA,EACTvyB,OAAQA,KAQpB2yB,IACA3yB,EAAOwf,oBAAsBmT,GAG7BC,IACA5yB,EAAO8yB,oBAAsBF,IAKzC,IAAIG,GAAe15B,EAAa0C,OAAO,CACnCC,KAAM,SAASgE,EAAQ5D,EAASiR,GAC5BhU,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK82B,WAAWhzB,EAAQ5D,GACxBF,KAAK8D,OAASA,EACd9D,KAAK+2B,aACL/2B,KAAKqyB,OAAS,GACdryB,KAAKE,QAAQ82B,OAASh3B,KAAKE,QAAQ82B,QAAU,GAC7Ch3B,KAAKE,QAAQ82B,OAAOvL,MAAQ,GAC5BzrB,KAAKe,KAAO,GACZf,KAAKi3B,WAAa,GAClBj3B,KAAKmR,aAAeA,EACpBnR,KAAKk3B,gBAAkBh3B,EAEvBF,KAAKm3B,cACLn3B,KAAK4R,SACL5R,KAAKo3B,oBAGTN,WAAY,aAEZC,WAAY,WAGR,IAFA,IAAIjzB,EAAS9D,KAAK8D,OAET7B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAC/B6B,EAAO7B,GAAG8E,MAAQ9E,GAI1Bk1B,YAAa,WAeT,IAdA,IAEIvE,EAAe5yB,KAAKE,QAAQ2yB,OAAS,GACrCwE,EAAer3B,KAAKE,QAAQm3B,aAC5BC,EAAct3B,KAAKE,QAAQq3B,OAAS,GACpCC,EAAcn1B,KAAKC,IAAIg1B,EAAYr2B,OAAQ,GAC3Cs2B,EAAQ,GAER/mB,EAAW5S,EAAW,CACtBi1B,MAAO,CACHvjB,MAAOsjB,EAAatjB,QAEzB+nB,GAEMp1B,EAAI,EAAGA,EAAIu1B,EAAav1B,IAAK,CAClC,IAAI/B,EAAUtC,EAAW,GAAI4S,EAAU8mB,EAAYr1B,IAC/C5D,EAAS6B,EAAQ2yB,SACjB3yB,EAAQ2yB,MAAQj1B,EAAW,CAAEkb,KAAM5Y,EAAQ2yB,OAASriB,EAASqiB,QAGjE,IAAI4E,EAAc,IAAIjF,GAAKtyB,GAC3Bu3B,EAAY7C,UAAY3yB,EAExBs1B,EAAMlyB,KAAKoyB,GAvBAz3B,KAwBF5B,OAAOq5B,GAGpBz3B,KAAKu3B,MAAQA,GAGjBG,iBAAkB,SAAS33B,GACvB,OAAOA,EAAKG,QAAQowB,WAGxB8G,iBAAkB,SAASG,GACvB,IAAI9zB,EAAWzD,UACD,IAAVu3B,IAAoBA,EAAQv3B,KAAKu3B,OAErC,IAAK,IAAIt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAE9B,IADA,IAAIb,EAAOm2B,EAAMt1B,GACRqwB,EAAI,EAAGA,EAAIlxB,EAAKL,KAAKE,OAAQqxB,IAAK,CACvC,IAAIvyB,EAAOqB,EAAKL,KAAKuxB,GACjBpyB,EAAUuD,EAASi0B,iBAAiB33B,GACxC,GAAIG,GAAWA,EAAQoW,QAAS,CAC5B,IAAIqhB,EAAmB,IAAItG,GAAU5tB,EAAS0N,aAAcpR,EAAMG,GAElEuD,EAASwzB,WAAW5xB,KAAKsyB,GACzBv2B,EAAKijB,QAAQjmB,OAAOu5B,MAMpCC,iBAAkB,SAASx2B,GAIvB,IAHA,IAAI61B,EAAaj3B,KAAKi3B,WAClBl2B,EAAOK,EAAKL,KAEPkB,EAAIg1B,EAAWh2B,OAAS,EAAGgB,GAAK,EAAGA,IACxC,IAAK,IAAIqwB,EAAI,EAAGA,EAAIvxB,EAAKE,OAAQqxB,IAC7B,GAAI2E,EAAWh1B,GAAGlC,OAASgB,EAAKuxB,GAAI,CAChC2E,EAAWhE,OAAOhxB,EAAG,GACrB,QAMhB41B,eAAgB,WAEZ,IADA,IAAIZ,EAAaj3B,KAAKi3B,WACbj2B,EAAM,EAAGA,EAAMi2B,EAAWh2B,OAAQD,IACvCi2B,EAAWj2B,GAAKmvB,QAIxB2H,SAAU,SAASh3B,GAIf,IAHA,IACIi3B,EADAR,EAAQv3B,KAAKu3B,MAGRt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAC9B,GAAIs1B,EAAMt1B,GAAG/B,QAAQY,OAASA,EAAM,CAChCi3B,EAAeR,EAAMt1B,GACrB,MAIR,OAAO81B,GAAgBR,EAAM,IAGjCS,cAAe,SAAS53B,GAIpB,IAHA,IACI23B,EADAR,EAAQv3B,KAAKu3B,MAGRt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAC9B,GAAIs1B,EAAMt1B,GAAGyM,IAAIupB,cAAc73B,GAAQ,CACnC23B,EAAeR,EAAMt1B,GACrB,MAIR,OAAO81B,GAGXhF,WAAY,SAAShzB,GACNC,KAAK83B,SAAS/3B,EAAKG,QAAQkB,MAEjC2xB,WAAWhzB,GAChBC,KAAKe,KAAKsE,KAAKtF,GACfA,EAAK2B,SAAW1B,MAGpBozB,WAAY,SAAS8E,GAKjB,IAJA,IAEIC,EAAe,GAEVl2B,EAAI,EAAGA,EAAIjC,KAAKe,KAAKE,OAAQgB,IAAK,CACvC,IAAIlC,EALOC,KAKSe,KAAKkB,GACrBi2B,IAAiBn4B,EACjBo4B,EAAa9yB,KAAKtF,GAElBA,EAAKqwB,UAIbpwB,KAAKe,KAAOo3B,GAGhBjF,YAAa,SAAS7lB,EAAOjM,GACzBpB,KAAKqyB,OAAOhtB,KAAKgI,GACbjM,EACAA,EAAK8xB,YAAY7lB,GAEjBrN,KAAK5B,OAAOiP,IAIpBimB,YAAa,SAAS8E,GAKlB,IAJA,IAEIC,EAAiB,GAEZp2B,EAAI,EAAGA,EAAIjC,KAAKqyB,OAAOpxB,OAAQgB,IAAK,CACzC,IAAIoL,EALOrN,KAKUqyB,OAAOpwB,GACxBoL,IAAU+qB,EACVC,EAAehzB,KAAKgI,GAEpBA,EAAM+iB,UAIdpwB,KAAKqyB,OAASgG,GAGlBC,YAAa,SAASx0B,GAQlB,IAPA,IAAI9B,EAAQ8B,EAAO7C,OACf+1B,EAASh3B,KAAKE,QAAQ82B,OACtB3d,EAAS2d,EAAO3d,QAAU,GAC1Bkf,EAAgBvB,EAAOuB,eAAiB,GACxCC,EAAsBD,EAAclf,QAAU,GAC9CjV,EAAO,GAEFnC,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAI6T,EAAgBhS,EAAO7B,GACvBw2B,GAA0C,IAA1B3iB,EAAcQ,QAClC,IAAsC,IAAlCR,EAAc4iB,gBAAlB,CAIA,IAAI5f,EAAOhD,EAAchV,KACrB4Y,EAAgB+e,EAAgB16B,EAAYsb,GAAUtb,EAAYy6B,IAAwBz6B,EAAYsb,GACtGK,IACAZ,EAAOY,EAAc,CACjBZ,KAAMsQ,GAAStQ,GAAQA,EAAO,GAC9BhV,OAAQgS,KAIhB,IAAItF,EAAWsF,EAAcN,UACzBlG,EAAQwG,EAAcxG,MACtB7R,EAAW6R,IAAUkB,IACrBlB,EAAQkB,EAASlB,OAGrB,IAAIqpB,OAAmB,EAAUC,OAAc,EAC3CH,GACAE,EAAmB,GACnBC,EAActpB,IAEdqpB,EAAmB,CACfrpB,MAAOkpB,EAAoBlpB,MAC3BkgB,KAAMgJ,EAAoBhJ,MAE9BoJ,EAAcL,EAAcnf,QAAQ9J,OAGpC8Z,GAAStQ,IAAkB,KAATA,GAClB1U,EAAKiB,KAAK,CACNyT,KAAMA,EACNO,OAAQsf,EACRC,YAAaA,EACb90B,OAAQgS,EACR+iB,OAAQJ,KAKpBr6B,EAAO44B,EAAOvL,MAAOrnB,IAGzB00B,UAAW,SAASvB,GAIhB,IAHA,IAAIwB,EAAQ,GACRC,EAAQ,GAEHC,EAAS,EAAGA,EAAS1B,EAAMt2B,OAAQg4B,IAExC,IADA,IAAIC,EAAW3B,EAAM0B,GAAQl4B,KACpBo4B,EAAS,EAAGA,EAASD,EAASj4B,OAAQk4B,IAAU,CACrD,IAAIp5B,EAAOm5B,EAASC,GAChBp5B,EAAKG,QAAQkS,SACb4mB,EAAM3zB,KAAKtF,GAEXg5B,EAAM1zB,KAAKtF,GAKvB,MAAO,CAAEqO,EAAG2qB,EAAO1qB,EAAG2qB,EAAOI,IAAKL,EAAMh1B,OAAOi1B,KAGnDK,kBAAmB,WAMf,IALA,IAEIv1B,EAAS9D,KAAK8D,OACdw1B,EAAe,GAEVr3B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI6T,EAAgBhS,EAAO7B,GACvBb,EAPOpB,KAOSu5B,eAAezjB,GAE/BwjB,EAAal4B,GACbk4B,EAAal4B,GAAMiE,KAAKyQ,GAExBwjB,EAAal4B,GAAQ,CAAE0U,GAI/B,OAAOwjB,GAGXE,oBAAqB,SAAS11B,GAG1B,IAFA,IAAIrB,EAAS,GAEJR,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI6T,EAAgBhS,EAAO7B,IACG,IAA1B6T,EAAcQ,SACd7T,EAAO4C,KAAKyQ,GAIpB,OAAOrT,GAGX+K,OAAQ,SAASC,GACb,IAAIvN,EAAUF,KAAKE,QAAQwB,SACvB61B,EAAQv3B,KAAKu3B,MACbxd,EAAS7b,EAAWgC,EAAQ6Z,QAEhC/Z,KAAK0O,IAAMjB,EAAUmN,QAAQ6e,MAAM1f,GACnC/Z,KAAK05B,cAEL15B,KAAK25B,eACL35B,KAAK45B,WAAWrC,GAChBv3B,KAAK65B,aAAatC,IAGtBuC,OAAQ,SAASvC,GACb,IAEIwC,EAAa,GAAGh2B,OAAOwzB,GAC3Bv3B,KAAK+2B,aAGL,IAAIzW,EAAOtgB,KAAKugB,UACZD,GACAA,EAAK0Z,iBAGT,IAAK,IAAI/3B,EAAI,EAAGA,EAAI83B,EAAW94B,OAAQgB,IAXxBjC,KAYF43B,iBAAiBmC,EAAW93B,IACrC83B,EAAW93B,GAAGkxB,QAGlBnzB,KAAK4R,OAAOmoB,GACZ/5B,KAAK25B,eACL35B,KAAK45B,WAAW55B,KAAKu3B,OACrBv3B,KAAK65B,aAAaE,GAElB/5B,KAAKo3B,iBAAiB2C,GAEtB,IAAK,IAAI1G,EAAM,EAAGA,EAAM0G,EAAW94B,OAAQoyB,IACvC0G,EAAW1G,GAAKY,WAIxBld,mBAAoB,SAAShX,EAAMk6B,GAQ/B,IAPA,IAAI/5B,EAAUH,EAAKG,QACfg6B,EAAiB,GAAGn2B,OACpB7D,EAAQ6W,oBAAsB7W,EAAQsT,mBAEtC2mB,EAAcF,EAAah5B,OAASi5B,EAAej5B,OACnDm5B,EAAeF,EAAe,IAAM,EAE/Bj4B,EAAI,EAAGA,EAAIk4B,EAAal4B,IAC7Bi4B,EAAe70B,KAAK+0B,GAGxB,OAAOF,GAGXG,YAAa,SAASt6B,EAAMu6B,EAAYlY,EAAemY,GACnD,IAAIh6B,EAAOR,EAAK+N,QAAQsU,EAAeA,GAAe,GAClDoY,EAAWz6B,EAAKG,QAAQ4W,QAAU,EAAI,EACtC6X,EAAa2L,EAAWxsB,QAAQysB,EAAqBA,GAAqB,GAC1EE,EAAaH,EAAWp6B,QAAQ4W,QAAU,EAAI,EAC9C4jB,EAAU36B,EAAK2O,IAAIyiB,UACnBxC,EAAWlyB,EAAIg+B,GAAcl6B,EAAK9D,EAAI+9B,GACtC7L,EAAWjyB,EAAI+9B,GAAcl6B,EAAK7D,EAAI89B,IAGtCz6B,EAAKqB,OAASk5B,EAAWl5B,MACzBs5B,EAAQvJ,UAAU,EAAGpxB,EAAKqB,KAAKsN,IAAIF,GAAK8rB,EAAWl5B,KAAKsN,IAAIF,IAGhEzO,EAAKyN,OAAOktB,IAGhBC,UAAW,SAAS5B,EAAOC,GAYvB,IAXA,IAAIv1B,EAAWzD,KAEX46B,EAAU7B,EAAM,GAChB8B,EAAU7B,EAAM,GAChB8B,EAAmB96B,KAAK+W,mBAAmB6jB,EAAS5B,GACpD+B,EAAmB/6B,KAAK+W,mBAAmB8jB,EAAS9B,GACpDiC,EAAc,GACdC,EAAe,GACfC,EAAa,GACbC,EAAgB,GAEXl5B,EAAI,EAAGA,EAAI+2B,EAAM/3B,OAAQgB,IAAK,CACnC,IAAIlC,EAAOi5B,EAAM/2B,GACbb,EAAOrB,EAAKqB,KACZg6B,EAASh6B,EAAKqxB,GACdnc,GAAmC,IAAzBvW,EAAKG,QAAQoW,QAGvByE,EAASsgB,GAAWtC,EAAO33B,IAASw5B,EACpCU,EAAkBR,EAElB/f,IAAW6f,IACXU,EAAkB73B,EAASsT,mBAAmBgE,EAAQie,IAG1Dv1B,EAAS42B,YAAYt6B,EAAMgb,EAAQggB,EAAiB94B,GAAIq5B,EAAgBr5B,IAEpElC,EAAKG,QAAQq7B,WAIb58B,EAAMoB,EAAKixB,UAAUriB,MAAQhQ,EAAMoc,EAAOiW,UAAUriB,MAEhDqsB,EAAYI,IACZr7B,EAAKyN,OAAOzN,EAAK2O,IACZuM,QAAQ+f,EAAYI,GAAQ1sB,IAAKpS,GACjC60B,WAAWpxB,EAAKG,QAAQ6Z,OAAQ,IAIrCzD,IACA0kB,EAAYI,GAAUr7B,IAI1BpB,EAAMoB,EAAKixB,UAAUpiB,MAAQjQ,EAAMoc,EAAOiW,UAAUpiB,MAE/C7O,EAAKy7B,YACNz7B,EAAKG,QAAQmZ,OAAOoiB,QAAU17B,EAAKG,QAAQmZ,OAAOoiB,OAClD17B,EAAKy7B,WAAY,GAGrB/3B,EAAS42B,YAAYt6B,EAAMgb,EAAQggB,EAAiB94B,GAAIq5B,EAAgBr5B,IAGpEg5B,EAAaG,IACbr7B,EAAKyN,OAAOzN,EAAK2O,IACZuM,QAAQggB,EAAaG,GAAQ1sB,IAAK/R,GAClCw0B,UAAUpxB,EAAKG,QAAQ6Z,OAAQ,IAIpCzD,IACA2kB,EAAaG,GAAUr7B,IAIrB,IAANkC,GAAW44B,EAAQz5B,OAASrB,EAAKqB,OACjCrB,EAAKkb,QAAQ4f,GACb96B,EAAKyN,OAAOzN,EAAK2O,OAIzB,IAAK,IAAI2kB,EAAM,EAAGA,EAAM0F,EAAM93B,OAAQoyB,IAAO,CACzC,IAAImB,EAASuE,EAAM1F,GACfqI,EAASlH,EAAOpzB,KAChBu6B,EAAWD,EAAOjJ,GAClBmJ,GAAuC,IAA3BpH,EAAOt0B,QAAQoW,QAG3BulB,EAAWR,GAAWrC,EAAO0C,IAAWb,EACxCiB,EAAoBf,EACpBc,IAAahB,IACbiB,EAAoBr4B,EAASsT,mBAAmB8kB,EAAU9C,IAG9Dt1B,EAAS42B,YAAY7F,EAAQqH,EAAUf,EAAiBzH,GAAMyI,EAAkBzI,IAE5EmB,EAAOt0B,QAAQq7B,WAIf58B,EAAM61B,EAAOxD,UAAUxiB,MAAQ7P,EAAMk9B,EAAS7K,UAAUxiB,MAEnDgmB,EAAOgH,YACRhH,EAAOt0B,QAAQmZ,OAAOoiB,QAAUjH,EAAOt0B,QAAQmZ,OAAOoiB,OACtDjH,EAAOgH,WAAY,GAEvB/3B,EAAS42B,YAAY7F,EAAQqH,EAAUf,EAAiBzH,GAAMyI,EAAkBzI,IAG5E6H,EAAWS,IACXnH,EAAOhnB,OAAOgnB,EAAO9lB,IAChBuM,QAAQigB,EAAWS,GAAUjtB,IAAKtS,GAClC+0B,UAAU,GAAIqD,EAAOt0B,QAAQ6Z,SAIlC6hB,IACAV,EAAWS,GAAYnH,IAI3B71B,EAAM61B,EAAOxD,UAAUviB,GAAI3S,EAAiBigC,mBAAqBp9B,EAAMk9B,EAAS7K,UAAUviB,GAAI3S,EAAiBigC,mBAE3GZ,EAAcQ,IACdnH,EAAOhnB,OAAOgnB,EAAO9lB,IAChBuM,QAAQkgB,EAAcQ,GAAUjtB,IAAKrS,GACrC80B,UAAU,EAAGqD,EAAOt0B,QAAQ6Z,SAIjC6hB,IACAT,EAAcQ,GAAYnH,IAItB,IAARnB,IACAmB,EAAOvZ,QAAQ2f,GACfpG,EAAOhnB,OAAOgnB,EAAO9lB,SAKjCstB,gBAAiB,SAASzE,GAKtB,IAJA,IAAIx2B,EAAOf,KAAK84B,UAAUvB,GAAO6B,IAC7BsB,EAAUuB,GAAal7B,GACvBm7B,EAAY,EAEPj6B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIw1B,EAAcF,EAAMt1B,GAEpBw1B,EAAY12B,KAAKE,OAAS,IAC1Bi7B,EAAY75B,KAAKC,IACb45B,EACAxB,EAAQ5rB,QAAU2oB,EAAYhT,WAAW3V,UAKrD,GAAkB,IAAdotB,EACA,IAAK,IAAI7I,EAAM,EAAGA,EAAMtyB,EAAKE,OAAQoyB,IAAO,CACxC,IAAIxB,EAAc9wB,EAAKsyB,GAElBxB,EAAY3xB,QAAQkS,UACrByf,EAAYrkB,OAAOqkB,EAAYnjB,IAAIytB,OAAOD,EAAW,MAMrEE,iBAAkB,SAAS7E,GAGvB,IAFA,IAAI8E,EAEKp6B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIw1B,EAAcF,EAAMt1B,GACpBlB,EAAO02B,EAAY12B,KACnBu7B,EAAYj6B,KAAKC,IAAI,EAAG25B,GAAal7B,GAAMgO,SAAW0oB,EAAYhT,WAAW1V,UAEjF,GAAkB,IAAdutB,EAAiB,CACjB,IAAK,IAAIhK,EAAI,EAAGA,EAAIvxB,EAAKE,OAAQqxB,IAAK,CAClC,IAAIT,EAAc9wB,EAAKuxB,GAEnBT,EAAY3xB,QAAQkS,UACpByf,EAAYrkB,OACRqkB,EAAYnjB,IAAIytB,OAAO,EAAGG,IAItCD,GAAW,GAInB,OAAOA,GAGXE,QAAS,SAAShF,GAId,IAHA,IAAIx2B,EAAOf,KAAK84B,UAAUvB,GAAO6B,IAC7BoD,EAAU,EAELv6B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIw1B,EAAcF,EAAMt1B,GACpBi3B,EAAWzB,EAAY12B,KACvB07B,EAAUhF,EAAYhT,WAE1B,GAAIyU,EAASj4B,OAAS,EAAG,CACrB,IAAIy5B,EAAUuB,GAAa/C,GAEvBwD,EAAUr6B,KAAKC,IAAIm6B,EAAQjuB,GAAKksB,EAAQlsB,GAAIiuB,EAAQhuB,GAAKisB,EAAQjsB,IAGrE+tB,EAAUn6B,KAAKC,IAAIk6B,EAASC,EAAQ9tB,GAAK+rB,EAAQ/rB,IAEjD,IAAK,IAAI2jB,EAAI,EAAGA,EAAI4G,EAASj4B,OAAQqxB,IAAK,CACtC,IAAIT,EAAcqH,EAAS5G,GAE3BT,EAAYrkB,OACRqkB,EAAYnjB,IAAIyiB,UAAU,EAAGuL,MAM7C,IAAK,IAAIrJ,EAAM,EAAGA,EAAMtyB,EAAKE,OAAQoyB,IAAO,CACxC,IAAIsJ,EAAgB57B,EAAKsyB,GAEzBsJ,EAAcnvB,OACVmvB,EAAcjuB,IAAIyiB,UAAUqL,EAAS,MAKjD5C,WAAY,SAASrC,GAKjB,IAJA,IAEIx2B,EAAOf,KAAK84B,UAAUvB,GAEjBt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAJnBjC,KAKF48B,eAAerF,EAAMt1B,IAG9BlB,EAAKqN,EAAEnN,OAAS,GAAKF,EAAKsN,EAAEpN,OAAS,IACrCjB,KAAK26B,UAAU55B,EAAKqN,EAAGrN,EAAKsN,GAC5BrO,KAAKg8B,gBAAgBzE,GAErBv3B,KAAK68B,qBAAqB97B,GAE1Bf,KAAK26B,UAAU55B,EAAKqN,EAAGrN,EAAKsN,GACxBrO,KAAKg8B,gBAAgBzE,IACrBv3B,KAAK26B,UAAU55B,EAAKqN,EAAGrN,EAAKsN,GAGhCrO,KAAKo8B,iBAAiB7E,GACtBv3B,KAAK26B,UAAU55B,EAAKqN,EAAGrN,EAAKsN,GAExBrO,KAAKo8B,iBAAiB7E,IACtBv3B,KAAK26B,UAAU55B,EAAKqN,EAAGrN,EAAKsN,GAGhCrO,KAAKu8B,QAAQhF,KAIrBsF,qBAAsB,SAASC,GAQ3B,IAPA,IAKIC,EAFAxF,EADMv3B,KACMu3B,MACZx2B,EAAOi8B,GAAYzF,GAGdv2B,EAAM,EAAGA,EAAMD,EAAKE,OAAQD,IAAO,CAC7BD,EAAKC,GACPi8B,qBACLF,GAAU,GAIlB,GAAIA,EAAS,CACT,IAAK,IAAIxI,EAAQ,EAAGA,EAAQgD,EAAMt2B,OAAQszB,IAf/Bv0B,KAgBE48B,eAAerF,EAAMhD,IAG9BuI,EAAY1uB,EAAEnN,OAAS,GAAK67B,EAAYzuB,EAAEpN,OAAS,IACnDjB,KAAK26B,UAAUmC,EAAY1uB,EAAG0uB,EAAYzuB,GAC1CrO,KAAKg8B,gBAAgBzE,MAKjCqF,eAAgB,SAASx7B,GACrB,IAAIL,EAAOK,EAAKL,KACZE,EAASF,EAAKE,OAElB,GAAIA,EAAS,EACT,IAAK,IAAIgB,EAAI,EAAGA,EAAIhB,EAAQgB,IACxBlB,EAAKkB,GAAGuL,OAAOpM,EAAKqjB,aAKhCoV,aAAc,SAAStC,GAKnB,IAJA,IAAIlF,EAASryB,KAAKqyB,OACdrwB,EAAQqwB,EAAOpxB,OACfyN,EAAM1O,KAAK0O,IAENzM,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAIi7B,EAAY7K,EAAOpwB,GAAGb,KACrB87B,IAAa1/B,EAAQ0/B,EAAW3F,IACjClF,EAAOpwB,GAAGuL,OAAOkB,KAK7BgrB,YAAa,WAUT,IATA,IACIhrB,EADM1O,KACI0O,IACV6oB,EAFMv3B,KAEMu3B,MACZC,EAAcD,EAAMt2B,OACpBk8B,EAAkBzuB,EAAIK,SAEtBquB,EAAkB,EAClB1Y,EAAMhW,EAAIF,GAELvM,EAAI,EAAGA,EAAIu1B,EAAav1B,IAAK,CAClC,IAAIw1B,EAAcF,EAAMt1B,GACpB8M,EAAS0oB,EAAYv3B,QAAQ6O,OAIjC,GAFA0oB,EAAYv3B,QAAQ4O,MAAQJ,EAAII,QAE3B2oB,EAAYv3B,QAAQ6O,OAElB,CACH,GAAIA,EAAOpI,SAAWoI,EAAOpI,QAAQ,KAAM,CACvC,IAAI02B,EAAWC,SAASvuB,EAAQ,IAAM,IACtC0oB,EAAYv3B,QAAQ6O,OAASsuB,EAAW3uB,EAAIK,SAGhD0oB,EAAYjqB,OAAOkB,EAAIkM,SAEvBuiB,GAAmB1F,EAAYv3B,QAAQ6O,YATvCquB,IAaR,IAAK,IAAI/J,EAAM,EAAGA,EAAMmE,EAAanE,IAAO,CACxC,IAAIkK,EAAgBhG,EAAMlE,GAErBkK,EAAcr9B,QAAQ6O,SACvBwuB,EAAcr9B,QAAQ6O,OAASouB,EAAkBC,GAIzD,IAAK,IAAII,EAAM,EAAGA,EAAMhG,EAAagG,IAAO,CACxC,IAAIC,EAAgBlG,EAAMiG,GACtBf,EAAU/tB,EACTkM,QACAuQ,KAAKzc,EAAIC,GAAI+V,GAElB+Y,EAAcjwB,OAAOivB,GAGrB/X,GAAO+Y,EAAcv9B,QAAQ6O,SAIrC2uB,cAAe,WAKX,IAJA,IAEIhvB,EAFA3N,EAAOf,KAAKe,KACZ48B,EAAY58B,EAAKE,OAGZgB,EAAI,EAAGA,EAAI07B,EAAW17B,IAG3B,IAFA,IAAI27B,EAAQ78B,EAAKkB,GAERqwB,EAAI,EAAGA,EAAIqL,EAAWrL,IAAK,CAChC,IAAIuL,EAAQ98B,EAAKuxB,GAEjB,GAAIsL,EAAM19B,QAAQkS,WAAayrB,EAAM39B,QAAQkS,SAAU,CACnD,IAAI4e,EAAU4M,EAAM5M,UAAUpW,QAAQgM,KAAKiX,EAAM7M,WAK7CtiB,EAHCA,EAGKA,EAAIkY,KAAKoK,GAFTA,GAQtB,OAAOtiB,GAAO1O,KAAK0O,KAGvBovB,YAAa,WAIT,IAHA,IAAIvG,EAAQv3B,KAAKu3B,MACbwG,EAAQ,GAEH/8B,EAAM,EAAGA,EAAMu2B,EAAMt2B,OAAQD,IAClC+8B,EAAM14B,KAAKkyB,EAAMv2B,GAAKixB,aAG1B,OAAO8L,GAGXC,mBAAoB,SAASC,GAEzB,IADA,IAAIF,EAAQ/9B,KAAK89B,cACR98B,EAAM,EAAGA,EAAM+8B,EAAM98B,OAAQD,IAClCi9B,EAAUC,MAAM74B,KAAKjG,GAAKshB,SAASqd,EAAM/8B,GAAKmO,YAItDgvB,wBAAyB,SAAS/9B,GAE9B,IADA,IAAI29B,EAAQ/9B,KAAK89B,cACR98B,EAAM,EAAGA,EAAM+8B,EAAM98B,OAAQD,IAClC,GAAI+8B,EAAM/8B,GAAKi3B,cAAc73B,GACzB,OAAO,GAKnB6O,aAAc,WACV9R,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElC,IAqNesP,EArNXpP,EAAUF,KAAKE,QAAQwB,SACvB8Y,EAAUta,EAAQsa,QAClBL,EAAaja,EAAQia,WACrBC,EAASla,EAAQka,YAAuB,IAAXA,IAAqBA,EAAS,IAmNlD,MADE9K,EAjNG6K,IAkNW,OAAV7K,GAA4B,SAAVA,GAA8B,gBAAVA,GAA4BtS,EAAQsS,KAjNzF6K,EAAa5d,EACbie,EAAU,GAGd,IAAI4jB,EAAKp+B,KAAK6B,UAAY,IAAI1C,GAAQk/B,UAAU,CAC5Cjd,KAAM,CACF9R,MAAO6K,EACPK,QAASA,GAEb7K,OAAQ,CACJL,MAAO8K,EAAOtL,MAAQsL,EAAO9K,MAAQ,GACrCR,MAAOsL,EAAOtL,MACdc,SAAUwK,EAAOxK,UAErBK,QAAS,IAGbjQ,KAAKg+B,mBAAmBI,GAExBp+B,KAAKs+B,aAAaF,IAGtBG,sBAAuB,SAASC,GAC5B,IAAInM,EAASryB,KAAKqyB,OACd5vB,EAAS,GAEb,GAAsB,OAAlB+7B,EACA,IAAK,IAAIv8B,EAAI,EAAGA,EAAIowB,EAAOpxB,OAAQgB,IAAK,CAEpC,GAAgC,eADpBowB,EAAOpwB,GACTb,KAAKlB,QAAQY,KAAvB,CAIA,IAAIyQ,EAAS8gB,EAAOpwB,GAAGuP,eAAegtB,GACtC,GAAIjtB,GAAUA,EAAOtQ,OACjB,IAAK,IAAIqxB,EAAI,EAAGA,EAAI/gB,EAAOtQ,OAAQqxB,IAAK,CACpC,IAAIlyB,EAAQmR,EAAO+gB,GACflyB,GAASpD,EAAQoD,EAAMD,QAA0B,OAAhBC,EAAMD,OACvCsC,EAAO4C,KAAKjF,KAOhC,OAAOqC,GAGXg8B,oBAAqB,SAASC,GAC1B,OAAO1+B,KAAK2+B,cAAa,SAASv+B,GAC9B,OAAOA,EAAM0D,OAAOiD,QAAU23B,MAItCE,mBAAoB,SAAS99B,GACzB,OAAOd,KAAK2+B,cAAa,SAASv+B,GAC9B,OAAOA,EAAM0D,OAAOhD,OAASA,MAIrC69B,aAAc,SAASxnB,GAInB,IAHA,IAAIkb,EAASryB,KAAKqyB,OACd5vB,EAAS,GAEJR,EAAI,EAAGA,EAAIowB,EAAOpxB,OAAQgB,IAG/B,IAFA,IACIsP,EADQ8gB,EAAOpwB,GACAsP,OACV+gB,EAAI,EAAGA,EAAI/gB,EAAOtQ,OAAQqxB,IAAK,CACpC,IAAIlyB,EAAQmR,EAAO+gB,GACflyB,IAA2B,IAAlBA,EAAMkW,SAAqBa,EAAS/W,IAC7CqC,EAAO4C,KAAKjF,GAKxB,OAAOqC,GAGXo8B,UAAW,SAAS1nB,GAGhB,IAFA,IAAIkb,EAASryB,KAAKqyB,OAETpwB,EAAI,EAAGA,EAAIowB,EAAOpxB,OAAQgB,IAG/B,IAFA,IACIsP,EADQ8gB,EAAOpwB,GACAsP,OACV+gB,EAAI,EAAGA,EAAI/gB,EAAOtQ,OAAQqxB,IAAK,CACpC,IAAIlyB,EAAQmR,EAAO+gB,GACnB,GAAIlyB,IAA2B,IAAlBA,EAAMkW,SAAqBa,EAAS/W,GAC7C,OAAOA,IAMvB0+B,YAAa,SAAS1+B,GAGlB,IAFA,IAAIm3B,EAAQv3B,KAAKu3B,MAERt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIb,EAAOm2B,EAAMt1B,GACjB,GAAIb,EAAKsN,IAAIupB,cAAc73B,GACvB,OAAOgB,IAKnBu4B,aAAc,WACV,IAAI54B,EAAOf,KAAK84B,UAAU94B,KAAKu3B,OAC3BwB,EAAQh4B,EAAKqN,EACb4qB,EAAQj4B,EAAKsN,EAEjBrO,KAAK++B,sBAAsB/F,EAAOD,GAClC/4B,KAAK++B,sBAAsBhG,EAAOC,IAGtC+F,sBAAuB,SAASh+B,EAAMk5B,GAKlC,IAJA,IAEI+E,EAAiB,EAEZ/8B,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAIlC,EAAOgB,EAAKkB,GACZb,EAAOrB,EAAKqB,KACZ2Z,EAASsgB,GAAWpB,EAAc74B,IAAS64B,EAAa,GACxDjjB,EAAY/U,EAAI+8B,EAChBC,EATOj/B,KASck/B,gBAAgBn/B,EAAMiX,EAAW+D,GAE1D,GAAIkkB,EAAW,CACXD,IAEA,IAAItf,EAAMte,EAAKL,KAAK4F,QAAQ5G,GAAQi/B,EACpC59B,EAAK4xB,aAAaiM,EAAWvf,MAKzCwf,gBAAiB,SAASn/B,EAAMiX,EAAW+D,GACvC,IAAIiM,EAAejnB,EAAKG,QAAQmZ,OAC5B2B,EAAWgM,EAAahM,SACxBmkB,EAASnkB,IAAalf,EAAiBsjC,KAAOpkB,IAAalf,EAAiBujC,MAC5E/oB,EAAU0Q,EAAa1Q,QAE3B,GAAI6oB,IAAsB,IAAZ7oB,EACV,OAAO,KAGX,IAAIsd,EAAU5zB,KAAK84B,UAAU94B,KAAKu3B,OAC9B0C,EAAelf,EAAO7a,QAAQkS,SAAWwhB,EAAQxlB,EAAIwlB,EAAQvlB,EAC7DitB,EAAkBt7B,KAAK+W,mBAAmBgE,EAAQkf,GAClDzX,EAAMxH,IAAalf,EAAiBsjC,IACpCz+B,EAAQoa,EAAOpa,QACf2+B,EAAO9c,EAAM7hB,EAAM2B,IAAM3B,EAAMyB,IAGnC,GAFoBxD,EAAW08B,EAAgBtkB,GAAYrW,EAAMyB,IAAKzB,EAAM2B,KAExDg9B,GAAS,EACzB,OAAO,KAGXhE,EAAgBrI,OAAOjc,EAAY,EAAG,EAAGsoB,GACzCvkB,EAAO7a,QAAQ6W,mBAAqBukB,EAEpC,IAAI2D,EAAYl/B,EAAK6a,QAUrB,OATA7a,EAAKm0B,QAEL+K,EAAU/+B,QAAQY,UAAO8C,EACzBq7B,EAAU/+B,QAAQqP,KAAK+G,SAAU,EAEjC2oB,EAAU/+B,QAAQowB,eAAY1sB,EAC9Bq7B,EAAU/+B,QAAQ2Y,WAAQjV,EAC1Bq7B,EAAU/+B,QAAQq/B,eAAY37B,EAEvBq7B,KAIf,SAASO,GAAaz/B,GAClB,OAAQA,EAAKqB,KAAKL,KAAK0+B,MAAK,SAAUvK,GAAK,OAAOA,EAAEh1B,QAAQkS,WAAarS,EAAKG,QAAQkS,UAAY8iB,IAAMn1B,IAA8B,IAAtBm1B,EAAEh1B,QAAQoW,WAI9H,SAAS2lB,GAAal7B,GAIlB,IAHA,IACI2N,EADAzN,EAASF,EAAKE,OAGTgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIlC,EAAOgB,EAAKkB,GACZqU,GAAmC,IAAzBvW,EAAKG,QAAQoW,QAC3B,GAAIA,GAAWkpB,GAAaz/B,GAAO,CAC/B,IAAI26B,EAAUpkB,EAAUvW,EAAK0kB,aAAe1kB,EAAKixB,UAE5CtiB,EAGDA,EAAIkY,KAAK8T,GAFThsB,EAAMgsB,EAAQ9f,SAO1B,OAAOlM,GAAO,IAAIrR,EAGtB,SAASg+B,GAAWt6B,EAAMK,GACtB,IAAK,IAAIa,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAI8Y,EAASha,EAAKkB,GAClB,GAAI8Y,GAAUA,EAAO3Z,OAASA,EAC1B,OAAO2Z,GASnB,IAAIiiB,GAAc,SAAUzF,GAAS,OAAOA,EAAMmI,QAAO,SAAUC,EAAKv+B,GAAQ,OAAOu+B,EAAI57B,OAAO3C,EAAKL,QAAU,KAEjHxD,EAAkBs5B,GAAc,CAC5B/yB,OAAQ,GACRpC,SAAU,CACNqY,OAAQ,IAEZI,WAAY,GACZC,OAAQ,CACJ9K,MAAO1S,EACPkS,MAAO,GAEXuoB,aAAc,CACVxE,MAAO,IAEXmE,OAAQ,CACJuB,cAAe,CACXlf,OAAQ,CACJ/J,MAAO,WAEX8J,QAAS,CACL9J,MAAO,eAMvB,IAAIswB,GAAsB,CACtBvnB,MAAO,SAAShL,EAAO6K,GACnBlY,KAAK6/B,eAAexyB,EAAO6K,EAAG3M,KAGlC0M,MAAO,SAAS5K,EAAO6K,GACnBlY,KAAK6/B,eAAexyB,EAAO6K,EAAG5M,MAIlCw0B,GAAmBlkC,EAAMiE,OAAO,CAChCC,KAAM,SAASgE,EAAQgD,EAAQi5B,GAE3B,IAAIl8B,EAAkBiD,EAAOjD,gBAAgBC,GACzCP,EAAcuD,EAAOvD,YAAYO,GACjCa,EAAemC,EAAOnC,aAAab,EAAQD,GAC3Cm8B,EAAehgC,KAAKigC,cAAgB,GACpCzvB,EAAWuvB,EAAkB5b,MAAMrgB,EAAOJ,MAC1Cw8B,EAAgBp8B,EAAOq8B,WAAa3vB,EAExCxQ,KAAKogC,QAAUt8B,EACf9D,KAAKqgC,QAAUv5B,EAEf,IAAK,IAAI7E,EAAI,EAAGA,EAAI4B,EAAgB5C,OAAQgB,IAAK,CAC7C,IAAIY,EAAQgB,EAAgB5B,GACxBq+B,OAAiB,EAErB,GAAI3iC,EAASuiC,GACTI,EAAiBJ,EAAcr9B,OAC5B,IAAU,IAANZ,IAAWzE,EAAQqF,EAAOU,GAGjC,MAFA+8B,EAAiBJ,EAKjBI,GACAN,EAAa36B,KAAK,CACdk7B,cAAe19B,EACf/B,KAAM6D,EAAa1C,GACnBtC,UAAWlC,EAAW6iC,GAAkBA,EAAiBn+B,GAAWm+B,OAMpFE,gBAAiB,SAASC,EAAW3tB,GACjC,IAGIhP,EADM9D,KACOogC,QACbJ,EAFMhgC,KAEaigC,cACnB77B,EAAOpE,KAAK0gC,YAAYD,GAAa,IACrCE,EAAgBv8B,EAAKw8B,UAAU,GAC/Bn+B,EAAS,GAEb,GAAIk+B,IAAkB9kC,EAAS8kC,KAAmBzjC,EAAQyjC,GAAgB,CACtE,IAAIrzB,EAAK,aACTA,EAAG6E,UAAYwuB,EACfl+B,EAAS,IAAI6K,EAGjB,IAAK,IAAIrL,EAAI,EAAGA,EAAI+9B,EAAa/+B,OAAQgB,IAAK,CAC1C,IAAIY,EAAQm9B,EAAa/9B,GACrB4+B,EAjBO7gC,KAiBc8gC,WAAW18B,EAAKrC,OAAQc,EAAM09B,eACnDpgC,EAAQ0C,EAAMlD,UAAUkhC,EAAW/8B,EAAQM,EAAKw8B,UAAW9tB,GAE/D,KAAc,OAAV3S,IAAkBxC,EAASwC,IAAWnD,EAAQmD,EAAMc,SAAad,aAAiBy1B,MAAO,CACzFnzB,EAAStC,EACT,MAEInD,EAAQmD,IACR4gC,GAASl+B,EAAM/B,KAAM2B,EAAQtC,GAKzC,OAAOsC,GAGXi+B,YAAa,SAASnvB,GAOlB,IANA,IACIzK,EADM9G,KACOqgC,QACbv8B,EAFM9D,KAEOogC,QACbr+B,EAAS,GACT6+B,EAAY,GAEP3+B,EAAI,EAAGA,EAAIsP,EAAOtQ,OAAQgB,IAAK,CACpC,IAAIgC,EAAUsN,EAAOtP,GAErBF,EAAOsD,KAAKyB,EAAO9C,UAAUF,EAAQG,IACrC28B,EAAUv7B,KAAKvB,EAAOM,KAAKH,IAG/B,MAAO,CACHlC,OAAQA,EACR6+B,UAAWA,IAInBE,WAAY,SAAS18B,EAAMvB,GAIvB,IAHA,IAAId,EAAS,GACTC,EAAQoC,EAAKnD,OAERgB,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAIiC,EAAOE,EAAKnC,GACZsB,EAAcW,EAAKX,YACnBpD,OAAQ,EAGRA,EADAnD,EAAQuG,EAAYV,IACZU,EAAYV,GAEZqB,EAAKC,OAAOtB,GAGxBd,EAAOsD,KAAKlF,GAGhB,OAAO4B,KAIf,SAASg/B,GAAS77B,EAAW+Z,EAAQ9e,GACjC,IAAI6gC,EAAY/hB,EACZpc,EAAQqC,EAEZ,GAAIA,EAAUyB,QAAQ,MAAQ,EAAG,CAG7B,IAFA,IAAI4iB,EAAQrkB,EAAU+7B,MAAM,KAErB1X,EAAMtoB,OAAS,GAClB4B,EAAQ0mB,EAAM2X,QACTlkC,EAAQgkC,EAAUn+B,MACnBm+B,EAAUn+B,GAAS,IAEvBm+B,EAAYA,EAAUn+B,GAE1BA,EAAQ0mB,EAAM2X,QAGlBF,EAAUn+B,GAAS1C,EAGvB,IAAIghC,GAAoBvlC,EAAMiE,OAAO,CACjCC,KAAM,WAEFE,KAAKwV,UAAY,IAGrBnS,SAAU,SAASC,EAAa89B,GAG5B,IAFA,IAESn/B,EAAI,EAAGA,EAAIqB,EAAYrC,OAAQgB,IAFzBjC,KAGFwV,UAAUlS,EAAYrB,IAAMm/B,GAI7Cjd,MAAO,SAASkd,GACZ,OAAOrhC,KAAKwV,UAAU6rB,MAI9BF,GAAkB77B,QAAU,IAAI67B,GAEhC,IAAIG,GAAWpc,GAAIrlB,OAAO,CACtBslB,YAAa,WACT,IAAI9L,EAASrZ,KAAKE,QAAQmZ,OACtBkoB,EAAc3jC,EAAW,GAAIyb,EAAQA,EAAO7Y,MAC5CghC,EAAY5jC,EAAW,GAAIyb,EAAQA,EAAO5Y,IAE1C8gC,EAAYjrB,UACZtW,KAAKyhC,UAAYzhC,KAAK0hC,aAAaH,GACnCvhC,KAAK5B,OAAO4B,KAAKyhC,YAGjBD,EAAUlrB,UACVtW,KAAK2hC,QAAU3hC,KAAK0hC,aAAaF,GACjCxhC,KAAK5B,OAAO4B,KAAK2hC,WAIzBD,aAAc,SAASxhC,GACnB,IAGIyZ,EAHAD,EAAgB3b,EAAYmC,GAC5BmE,EAAYrE,KAAKqE,YAUrB,OALIsV,EADAD,EACYA,EAAcrV,GAEdrE,KAAK4Z,YAAY1Z,EAAQ4X,QAGlC,IAAIsM,GAASzK,EAChB/b,EAAW,CACPwU,SAAUpS,KAAKE,QAAQkS,UAE3BlS,GACDmE,IAGPmJ,OAAQ,SAASC,GACbzN,KAAK4R,SAEL,IAAIqC,EAAMjU,KACNyhC,EAAYxtB,EAAIwtB,UAChBE,EAAU1tB,EAAI0tB,QACdxhC,EAAQ8T,EAAI9T,MAEhBH,KAAK0O,IAAMjB,EAEPg0B,IACAA,EAAUvhC,QAAQgW,UAAY/V,EAAMK,KAAOL,EAAMM,GACjDghC,EAAUj0B,OAAOC,IAGjBk0B,IACAA,EAAQzhC,QAAQgW,UAAY/V,EAAMM,GAAKN,EAAMK,KAC7CmhC,EAAQn0B,OAAOC,IAGfzN,KAAKgZ,MACLhZ,KAAKgZ,KAAKxL,OAAOC,MAK7B6zB,GAASnvB,UAAU3B,SAAW5S,EAAW,GAAI0jC,GAASnvB,UAAU3B,SAAU,CACtE6I,OAAQ,CACJvB,OAAQ,aAEZoR,QAAS,CACLpR,OAAQ,SAIhB,IAAI8pB,GAAgB/a,GAAShnB,OAAO,CAChCqS,UAAW,WACP,OAAOovB,IAGXp6B,WAAY,SAAS9C,GACjB,OAAOA,EAAKb,aAGhBsU,iBAAkB,SAASzX,EAAO0X,GAC9B,OAAyB,OAArB1X,EAAMD,MAAMK,MAAoC,OAAnBJ,EAAMD,MAAMM,GAClC,GAGJT,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ1X,EAAMD,MAAMK,KAAMJ,EAAMD,MAAMM,KAG/EsS,UAAW,SAAS3S,GAChB,OAAKA,EAIE,CAAEA,EAAMD,MAAMK,KAAMJ,EAAMD,MAAMM,IAH5B,GAMfuU,YAAa,SAAS7U,EAAOgE,GACzB,IAAIyP,EAAWzP,EAAOL,OAAO/D,KACzBS,EAAOL,EAAMK,KACbC,EAAKN,EAAMM,GACXiV,EAAY1V,KAAKsR,gBAAgBsC,GAEvB,OAAVzT,GAAkBtE,EAAS2E,IAAS3E,EAAS4E,MAC7CiV,EAAY1V,KAAKsR,gBAAgBsC,GAAY8B,GAAa,CAAEtT,IAAKpG,EAAWsG,IAAKrG,IAEvEmG,IAAMC,KAAKD,IAAIsT,EAAUtT,IAAK5B,GACxCkV,EAAUpT,IAAMD,KAAKC,IAAIoT,EAAUpT,IAAK9B,GAExCkV,EAAUtT,IAAMC,KAAKD,IAAIsT,EAAUtT,IAAK3B,GACxCiV,EAAUpT,IAAMD,KAAKC,IAAIoT,EAAUpT,IAAK7B,KAIhDyV,UAAW,SAAS9V,GAChB,IAAID,EAAQC,EAAMD,MAClB,OAAOA,EAAMK,KAAOL,EAAMM,MAIlCmhC,GAAczvB,UAAU0vB,WAAa3wB,GAAiBiB,UAAU0vB,WAEhE,IAAIC,GAAiB5oB,GAAUrZ,OAAO,CAClCid,SAAU,WACN,OAAO9c,KAAKgd,UAIhB+kB,GAAO,OAIPC,GAAiB7kC,EAAa0C,OAAO,CACrCC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAKG,MAAQA,EACbH,KAAKE,QAAUA,EACfF,KAAKkW,UAAYxY,EAAesC,KAAKE,QAAQgW,WAAW,GACxDlW,KAAKmZ,iBAAkB,EACvBnZ,KAAKiiC,oBAGTrwB,OAAQ,WACJ,IAAI5R,KAAKsZ,UAAT,CAIAtZ,KAAKsZ,WAAY,EAEjB,IAAIrF,EAAMjU,KAAKE,QACXkZ,EAAUnF,EAAImF,QACdC,EAASpF,EAAIoF,OACblZ,EAAQH,KAAKG,MAEb+hC,EAAYliC,KAAKkiC,UAAY,IAAIJ,GAAe3hC,EAAOvC,EAAW,GAAIoC,KAAKE,QAAS,CACpFmZ,OAAQA,EAAO7Y,KACf4Y,QAASA,EAAQ5Y,QAGjB2hC,EAAUniC,KAAKmiC,QAAU,IAAIL,GAAe3hC,EAAOvC,EAAW,GAAIoC,KAAKE,QAAS,CAChFmZ,OAAQA,EAAO5Y,GACf2Y,QAASA,EAAQ3Y,MAGrBT,KAAKoiC,WAAWF,GAChBliC,KAAKoiC,WAAWD,GAEhBniC,KAAK5B,OAAO8jC,GACZliC,KAAK5B,OAAO+jC,KAGhB30B,OAAQ,SAASC,GACbzN,KAAK4R,SAEL,IAAIywB,EAAU50B,EAAUjN,KACpB8hC,EAAQ70B,EAAUhN,GAEtBT,KAAKuiC,eAAeF,EAASC,GAE7BtiC,KAAKkiC,UAAU10B,OAAO60B,GACtBriC,KAAKmiC,QAAQ30B,OAAO80B,GAEpBtiC,KAAK0O,IAAM1O,KAAKkiC,UAAUznB,YAAYG,QAAQgM,KAAK5mB,KAAKmiC,QAAQ1nB,cAGpES,gBAAiB,WACb,IAAIpI,EAAQ,IAAIvT,GAIhB,OAHAuT,EAAM1U,OAAO4B,KAAKkiC,UAAUhnB,mBAC5BpI,EAAM1U,OAAO4B,KAAKmiC,QAAQjnB,mBAEnBpI,GAGXyI,gBAAiB,WACb,OAAOvb,KAAKqB,QAGhBma,oBAAqB,WACjB,MAAO,CACHtb,QAASF,KAAKE,QACdM,KAAMR,KAAKkiC,UAAU1mB,sBACrB/a,GAAIT,KAAKmiC,QAAQ3mB,wBAIzBI,cAAe,WACX,IAAIC,EAAU7b,KAAKmV,MAAM/T,KAAKya,UAG9B,IAFmBA,GAAWA,EAAQC,SAAS9b,KAAK0O,KAEnC,CACb,IAGIN,EAAGC,EAAG0N,EAHNrN,EAAM1O,KAAK0O,IACXV,EAASU,EAAIV,SACbgO,EAAkB1f,EAatB,OAVI0D,KAAKE,QAAQkS,UACbhE,EAAIJ,EAAOI,EACXC,EAAIK,EAAIF,GA96MH,EA+6MLuN,EAAgB1f,IAEhB+R,EAAIM,EAAIE,GAj7MH,EAk7MLP,EAAIL,EAAOK,EACX0N,EAAgB5f,GAGb,CACHiE,MAAO,IAAIhD,EAAMgR,EAAGC,GACpBwL,MAAO,CACHoC,WAAYD,EACZ5J,SAAU2J,MAM1BnC,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CoE,YAAa,SAASxN,GAClB,OAAO1O,KAAK0O,IAAIoN,SAASpN,IAG7ByN,eAAgB,WACZnc,KAAKkiC,UAAU/lB,iBACfnc,KAAKmiC,QAAQhmB,kBAGjB8lB,iBAAkB,WACd,IAAI5oB,EAASrZ,KAAKE,QAAQmZ,OACrBA,EAAOvB,SACHuB,EAAO7Y,MAAS6Y,EAAO7Y,KAAKsX,SAC7BuB,EAAO7Y,KAAOhF,EAAEqE,OAAO,GAAIwZ,EAAO7Y,KAAM,CACpCsX,OA7HM,SAiITuB,EAAO5Y,IAAO4Y,EAAO5Y,GAAGqX,SACzBuB,EAAO5Y,GAAKjF,EAAEqE,OAAO,GAAIwZ,EAAO5Y,GAAI,CAChCqX,OAlII,WAwIpByqB,eAAgB,SAASF,EAASC,GAC9B,IAKQE,EAAmBC,EALvBxuB,EAAMjU,KAAKE,QACXmZ,EAASpF,EAAIoF,OACbjH,EAAW6B,EAAI7B,SAEfiH,EAAO2B,WAAa+mB,KAEhB3vB,EACIkwB,EAAM9zB,IAAM6zB,EAAQ7zB,IACpBi0B,EAAkB/5B,GAClB85B,EAAoB75B,KAEpB85B,EAAkB95B,GAClB65B,EAAoB95B,IAGpB45B,EAAM3zB,IAAM0zB,EAAQ1zB,IACpB8zB,EAAkBnmC,EAClBkmC,EAAoB7lC,IAEpB8lC,EAAkB9lC,EAClB6lC,EAAoBlmC,GAIvB+c,EAAO7Y,MAAS6Y,EAAO7Y,KAAKwa,WAC7Bhb,KAAKkiC,UAAUhiC,QAAQmZ,OAAO2B,SAAWwnB,GAGxCnpB,EAAO5Y,IAAO4Y,EAAO5Y,GAAGua,WACzBhb,KAAKmiC,QAAQjiC,QAAQmZ,OAAO2B,SAAWynB,KAKnDL,WAAY,SAAShiC,GACjBA,EAAMiV,SAAWrV,KAAKqV,SACtBjV,EAAMmV,SAAWvV,KAAKuV,SACtBnV,EAAM0D,OAAS9D,KAAK8D,OACpB1D,EAAMkP,MAAQtP,KAAKsP,MACnBlP,EAAM+U,MAAQnV,KAAKmV,SAI3BvX,EAAWokC,GAAe7vB,UAAW6F,IACrCpa,EAAWokC,GAAe7vB,UAAWwG,IAErCqpB,GAAe7vB,UAAU3B,SAAW,CAChC4I,QAAS,CACL9C,SAAS,EACT6D,WAAY5d,EACZgd,KAzgNe,EA0gNf7V,KAAMlH,EACN4d,OAAQ,CACJtL,MAAO,GAEX0L,QAAS,GAEbnB,OAAQ,CACJ/C,SAAS,EACTyD,OAAQ7b,EAAW,GACnBme,QAASne,EAAW,GACpB6R,UAAW,CACPrM,KAAMmE,GACNmI,MAAOpI,IAEXoT,SAAU+mB,IAEdlpB,MAAO,CACHE,MAAO,IAEXoC,UAAW,CACP/B,QAAS,CACLgB,OAAQ,CACJ9K,MAAO/S,EACPuS,MAAO,IAGfmB,OAAQnU,EAAiBwgB,kBAE7B4M,QAAS,CACLpR,OAAQ,cAIhB,IAAI4qB,GAAmB1hB,GAAYnhB,OAAO,CACtC4hB,qBAAsB,WAClB,OAAOzhB,KAAK0hB,mBAAmB1hB,KAAKwc,iBAAiBxc,KAAK2iC,cAG9DhhB,cAAe,WACX,IAAIihB,EAAe5iC,KAAK4iC,aAKxB,OAJK5iC,KAAK4iC,eACNA,EAAe5iC,KAAK4iC,aAAe5iC,KAAK0hB,mBAAmB1hB,KAAKwc,iBAAiBxc,KAAK2c,aAAa7F,aAGhG8rB,GAGXvhB,aAAc,SAASP,GACnB,IAAI+hB,EAAS,IAAIzjC,GAAK0hB,GAClBgiB,EAAW,IAAI1jC,GAAK0hB,GAExB+hB,EAAO/kB,SAASzY,KAAK4Y,MAAM4kB,EAAO/kB,SAAU9d,KAAKuhB,kBACjDuhB,EAAShlB,SAASzY,KAAK4Y,MAAM6kB,EAAShlB,SAAU9d,KAAK2hB,iBAErD3hB,KAAKqB,OAAOjD,OAAOykC,GACnB7iC,KAAKqB,OAAOjD,OAAO0kC,IAGvB/gB,gBAAiB,WACb,OAAO,GAGXpF,WAAY,WACR,OAAO3c,KAAK0N,WAAWmU,KAAI,SAAUzhB,GAAS,OAAOA,EAAM8hC,cAG/DS,SAAU,WACN,OAAO3iC,KAAK0N,WAAWmU,KAAI,SAAUzhB,GAAS,OAAOA,EAAM+hC,cAI/DY,GAAyBL,GAAiB7iC,OAAO,CACjD4hB,qBAAsB,WAClB,OAAOzhB,KAAKgjC,oBAAoBhjC,KAAK2iC,aAGzChhB,cAAe,WACX,IAAIihB,EAAe5iC,KAAK4iC,aAKxB,OAJK5iC,KAAK4iC,eACNA,EAAe5iC,KAAK4iC,aAAe5iC,KAAKgjC,oBAAoBhjC,KAAK2c,aAAa7F,YAG3E8rB,GAGXI,oBAAqB,SAASzxB,GAG1B,OAFqB,IAAIpT,GAEH4f,QAAQ/d,KAAKwc,iBAAiBjL,OAIxD0xB,GAAuBP,GAAiB7iC,OAAO,CAC/C4hB,qBAAsB,WAClB,OAAOzhB,KAAK0hB,mBAAmB1hB,KAAKmd,oBAAoBnd,KAAK2iC,cAGjEhhB,cAAe,WACX,IAAIihB,EAAe5iC,KAAK4iC,aAMxB,OALK5iC,KAAK4iC,eACNA,EAAe5iC,KAAK4iC,aAAe5iC,KAAK0hB,mBAAmB1hB,KAAKmd,oBAAoBnd,KAAK2c,gBAC5E7F,UAGV8rB,KAIfhlC,EAAWqlC,GAAqB9wB,UAAW+K,IAE3C,IAAIgmB,GAAiBhyB,GAAiBrR,OAAO,CACzC+R,OAAQ,WACJV,GAAiB5D,GAAGsE,OAAOrE,KAAKvN,MAEhCA,KAAKme,kBAGTjM,UAAW,WACP,OAAO8vB,IAGX9sB,YAAa,SAAS9Q,EAAMD,GACxB,IAAIL,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAClB9R,EAAQiE,EAAKb,YAEjB,IAAK6lB,GAASjpB,EAAMK,QAAU4oB,GAASjpB,EAAMM,IAAK,CAC9C,GAAIT,KAAKye,oBAAoB3a,KAAYyE,GAMrC,OAAO,KALPpI,EAAQ,CACJK,KAAM,EACNC,GAAI,GAOhB,IAAIuR,EAAehS,KAAKgS,aAAalO,EAAQmO,GAC7CD,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GAE1D,IAAImL,EAAQlL,EAAKD,OAAOmL,OAASxL,EAAOwL,MACpC7R,EAAWqG,EAAOwL,SAClBA,EAAQ0C,EAAa1C,OAGzB,IAAIlP,EAAQ,IAAI4hC,GAAe7hC,EAAO6R,GAKtC,OAJA5R,EAAMkP,MAAQA,EAEdtP,KAAK5B,OAAOgC,GAELA,GAGXse,cAAe,SAAShR,EAAYoI,EAAe7D,GAC/C,IAAI6O,GAAShL,EAAcvG,MAAQ,IAAIuR,MAUvC,OAAO,IARO,WAAVA,EACciiB,GACG,SAAVjiB,EACOmiB,GAEAP,IAGKh1B,EAAYoI,EAAe7D,IAGtDc,UAAW,SAAS3S,EAAO4S,GACvB,OAAK5S,EAIE,CAAEA,EAAMD,MAAMK,KAAMJ,EAAMD,MAAMM,IAH5B,CAAEuS,EAAYA,IAM7BgD,UAAW,SAASzC,EAAWR,GAC3B,IAAIowB,EAAW5vB,EAAUzF,QAAQiF,EAAU,GAAIA,EAAU,IAAK/S,KAAKE,QAAQsW,MACvE4sB,EAAS7vB,EAAUzF,QAAQiF,EAAU,GAAIA,EAAU,IAAK/S,KAAKE,QAAQsW,MACzE,GAAI2sB,GAAYC,EACZ,MAAO,CACH5iC,KAAM2iC,EACN1iC,GAAI2iC,IAKhBntB,UAAW,SAASF,EAAcC,GAC9B,IAEImtB,EAAUC,EAFV5iC,EAAOwV,EAAUxV,KACjBC,EAAKuV,EAAUvV,GAWnB,OARIT,KAAKE,QAAQmS,YACb8wB,EAAW,IAAI9lC,EAAImD,EAAKmO,GAAIoH,EAAavH,GAAIhO,EAAKoO,GAAImH,EAAatH,IACnE20B,EAAS,IAAI/lC,EAAIoD,EAAGkO,GAAIoH,EAAavH,GAAI/N,EAAGmO,GAAImH,EAAatH,MAE7D00B,EAAW,IAAI9lC,EAAI0Y,EAAapH,GAAInO,EAAKgO,GAAIuH,EAAanH,GAAIpO,EAAKiO,IACnE20B,EAAS,IAAI/lC,EAAI0Y,EAAapH,GAAIlO,EAAG+N,GAAIuH,EAAanH,GAAInO,EAAGgO,KAG1D,CACHjO,KAAM2iC,EACN1iC,GAAI2iC,IAIZtxB,SAAU,SAAS1N,EAAMD,GACrB,IAAIZ,EAAca,EAAKb,YAClB1H,EAAS0H,EAAY/C,QACtB+C,EAAY/C,KAAO+C,EAAY9C,IAG9B5E,EAAS0H,EAAY9C,MACtB8C,EAAY9C,GAAK8C,EAAY/C,MAGjC0Q,GAAiB5D,GAAGwE,SAASvE,KAAKvN,KAAMoE,EAAMD,IAGlD6Q,YAAa,SAAS7U,EAAOgE,GACzB,GAAc,OAAVhE,GAAkBtE,EAASsE,EAAMK,OAAS3E,EAASsE,EAAMM,IAAK,CAC9D,IAAImT,EAAWzP,EAAOL,OAAO/D,KACzB2V,EAAY1V,KAAKsR,gBAAgBsC,GAAY5T,KAAKsR,gBAAgBsC,IAAa,CAAExR,IAAKpG,EAAWsG,IAAKrG,GACtGuE,EAAOL,EAAMK,KACbC,EAAKN,EAAMM,GAEfiV,EAAUtT,IAAMC,KAAKD,IAAIsT,EAAUtT,IAAK5B,EAAMC,GAC9CiV,EAAUpT,IAAMD,KAAKC,IAAIoT,EAAUpT,IAAK9B,EAAMC,KAItDoX,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAElB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ3X,EAAMK,KAAML,EAAMM,KAGnEmgB,gBAAiB,WAGb,IAFA,IAAIrP,EAASvR,KAAKuR,OACd9O,EAAS,GACJzB,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQmR,EAAOvQ,GACfZ,IACAqC,EAAO4C,MAAMjF,EAAM8hC,WAAa,IAAI1oB,QACpC/W,EAAO4C,MAAMjF,EAAM+hC,SAAW,IAAI3oB,SAI1C,OAAO/W,EAAOsB,OAAO/D,KAAKqe,cAIlCzgB,EAAWslC,GAAe/wB,UAAW+L,GAAgBkC,IAErD,IAAIijB,GAAYvb,GAAYjoB,OAAO,CAC/B2N,OAAQ,SAASkB,GACb,IAAIuF,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdC,EAAQ8T,EAAI9T,MAEZoT,EADQU,EAAIkB,MACMhF,gBAAgBjQ,GAClCojC,EAAU,GACVC,EAAU,GACVC,EAAW,GAEXvb,EAAS1U,EAAUzF,QAAQ3N,EAAMqG,IAAKrG,EAAMsG,MAC5Cg9B,EAAQlwB,EAAUzF,QAAQ3N,EAAM6nB,KAAM7nB,EAAM6nB,MAC5C0b,EAAQnwB,EAAUzF,QAAQ3N,EAAM0c,MAAO1c,EAAM0c,OAEjD4mB,EAAM90B,GAAK+0B,EAAM/0B,GAAKsZ,EAAOtZ,GAAKD,EAAIC,GACtC80B,EAAM70B,GAAK80B,EAAM90B,GAAKqZ,EAAOrZ,GAAKF,EAAIE,GAEtC,IAAIuZ,EAAMF,EAAOja,SAASI,EAE1Bk1B,EAAQj+B,KAAK,CAAEo+B,EAAM90B,GAAI80B,EAAMj1B,KAC/B80B,EAAQj+B,KAAK,CAAE8iB,EAAKsb,EAAMj1B,KAC1B+0B,EAAQl+B,KAAK,CAAE8iB,EAAKub,EAAMl1B,KAC1B+0B,EAAQl+B,KAAK,CAAEq+B,EAAM90B,GAAI80B,EAAMl1B,KAC/Bg1B,EAASn+B,KAAK,CAAE8iB,EAAKF,EAAOzZ,KAC5Bg1B,EAASn+B,KAAK,CAAE8iB,EAAKF,EAAOxZ,KAE5BzO,KAAKooB,MAAQ,CACTkb,EAASC,EAASC,GAGtBxjC,KAAK0O,IAAMuZ,EAAOrN,QAAQgM,KAAK6c,EAAM7oB,QAAQgM,KAAK8c,IAElD1jC,KAAKqoB,cAGTI,WAAY,eAGZkb,GAAYxa,GAAiBtpB,OAAO,CACpCqS,UAAW,WACP,OAAOmxB,MAIXO,GAAmBzmC,EAAa0C,OAAO,CACvCC,KAAM,SAASU,EAAMC,EAAIqD,GACrB3G,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAKQ,KAAOA,EACZR,KAAKS,GAAKA,EACVT,KAAK8D,OAASA,GAGlB4J,WAAY,WACR,IAAIlN,EAAOR,KAAKQ,KAEZ6hC,EADMriC,KACQQ,KAAKkO,IACnB4zB,EAFMtiC,KAEMS,GAAGiO,IACf6C,EAAS,GAEb,GAAI/Q,EAAK4M,WAAY,CACjB,IAAIiB,EAAI7N,EAAK0V,UAAYmsB,EAAQ7zB,GAAK6zB,EAAQ5zB,GAC9C8C,EAAOlM,KACH,CAAEg9B,EAAQ1zB,GAAIN,GACd,CAAEi0B,EAAM1zB,GAAIP,QAEb,CACH,IAAID,EAAI5N,EAAK0V,UAAYmsB,EAAQzzB,GAAKyzB,EAAQ1zB,GAC9C4C,EAAOlM,KACH,CAAE+I,EAAGi0B,EAAQ7zB,IACb,CAAEJ,EAAGk0B,EAAM7zB,KAInB,OAAO8C,GAGXtC,aAAc,WACV9R,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElC,IAAIuP,EAAOvP,KAAK8D,OAAOyL,MAAQ,GAE3BgW,EAAOnmB,GAAKud,WAAW3c,KAAK0N,aAAc,CAC1CiC,OAAQ,CACJL,MAAOC,EAAKD,MACZR,MAAOS,EAAKT,MACZ0L,QAASjL,EAAKiL,QACd5K,SAAUL,EAAKK,YAIvBtS,EAAiBioB,GACjBvlB,KAAKqB,OAAOjD,OAAOmnB,MAI3BhoB,EAAkBqmC,GAAkB,CAChC7zB,UAAW,CACPrM,KAAMmE,GACNmI,MAAOpI,MAIf,IAAIi8B,GAAiBhd,GAAShnB,OAAO,CACjC+R,OAAQ,WACJiV,GAASvZ,GAAGsE,OAAOrE,KAAKvN,MACxBA,KAAK8jC,kBAGTjyB,mBAAoB,SAASsF,GAOzB,IANA,IAEIrT,EAAS9D,KAAKE,QAAQ4D,OACtBigC,EAAkBhzB,GAAgBjN,GAClCsJ,GAAcpN,KAAKE,QAAQmS,WAEtBJ,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAK7C,IAJA,IAAI6D,EAAgBhS,EAAOmO,GACvBzK,EAAQ,EACRgR,EAAe,EAEVhG,EAAa,EAAGA,EAAauxB,EAAiBvxB,IAAc,CACjE,IAAIpO,EAAOpB,GAAasC,QAAQtB,UAAU8R,EAAetD,GACrDrS,EAAQiE,EAAKb,YAAYpD,MACzB6jC,EAAU5/B,EAAKD,OAAO6/B,QACtBxjC,EAAOgH,EACP/G,OAAK,EAELujC,EAC8B,UAA1BA,EAAQ5O,eACRhxB,EAAKb,YAAYpD,MAAQqH,EACzBhH,EAAO,EACPC,EAAK+G,IAELpD,EAAKb,YAAYpD,MAAQqY,EACzB/X,EAAKD,EAAOgY,EACZA,EAAe,GAEZ3c,EAASsE,KAChBqY,GAAgBrY,EAEhBM,EADA+G,GAASrH,GAIbgX,EAAS/S,EAAM,CACXmR,SAnCGvV,KAmCgBoR,aAAamG,WAAW/E,GAC3CA,WAAYA,EACZ1O,OAAQgS,EACR7D,SAAUA,EACVzK,MAAOA,EACPgR,aAAcA,EACdhY,KAAMA,EACNC,GAAIA,EACJ2M,WAAYA,MAM5B4H,YAAa,SAAS7U,EAAOgE,GACzB0iB,GAASvZ,GAAG0H,YAAYzH,KAAKvN,KAAM,CAAEG,MAAOgE,EAAO1D,IAAM0D,IAG7D+R,UAAW,SAAS9V,GAChB,OAAOA,EAAMD,OAAS,GAG1B4S,UAAW,SAAS3S,GAChB,MAAO,CAAEA,EAAMI,KAAMJ,EAAMK,KAG/BqjC,eAAgB,WAOZ,IANA,IAEIhgC,EAAS9D,KAAKE,QAAQ4D,OACtB2N,EAAezR,KAAKyR,aACpBqM,EAAW9d,KAAK8d,SAAW,GAEtB7L,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAAY,CACzD,IAAI6D,EAAgBhS,EAAOmO,GACvBV,EAASE,EAAaQ,GAE1B,GAAIV,EAEA,IADA,IAAI0yB,OAAY,EACPhgC,EAAU,EAAGA,EAAUsN,EAAOtQ,OAAQgD,IAAW,CACtD,IAAI7D,EAAQmR,EAAOtN,GAEnB,GAAI7D,GAAS6jC,EAAW,CACpB,IAAInlB,EAAU,IAAI8kB,GAAiBK,EAAW7jC,EAAO0V,GACrDgI,EAASzY,KAAKyZ,GAjBf9e,KAkBU5B,OAAO0gB,GAGpBmlB,EAAY7jC,OAO5B8jC,GAAc,CAAEp7B,GAAM0B,GAAeL,GAAYS,IACjDu5B,GAAsB,CAAEz6B,GAAMiB,IAAgB5G,OAAOmgC,IAErDE,GAAsBvN,GAAah3B,OAAO,CAC1Ci3B,WAAY,SAAShzB,GAOjB,GAJA9D,KAAKqkC,kBAAoB,GACzBrkC,KAAK2V,eAAiB,GACtB3V,KAAKskC,sBAAwB,IAAIzgB,GAE7B/f,EAAO7C,OAAS,EAAG,CACnBjB,KAAKqS,WAAa7U,EACdsG,EAAO,GAAGJ,KAAM,CAAEqF,GAAKG,GAAQyB,GAAeH,GAAeI,GAC5CR,GAAWX,GAAsBgB,KAGtD,IAAK,IAAIxI,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI2Q,EAAQ9O,EAAO7B,GAAG2Q,MACtB,GAAIA,GAAwB,SAAfA,EAAMlP,KAAiB,CAd7B1D,KAeMukC,UAAW,EACpB,UAOhB3yB,OAAQ,SAAS2lB,QACC,IAAVA,IAAoBA,EAAQv3B,KAAKu3B,OAErCv3B,KAAKwkC,mBAAmBjN,GACxBv3B,KAAKykC,oBAAoBlN,GACzBv3B,KAAK0kC,yBAAyBnN,GAC9Bv3B,KAAK2kC,aAAapN,GAClBv3B,KAAK4kC,gBAAgBrN,IAGzBnE,WAAY,SAASrzB,GACjB,IAAI6T,EAAW7T,EAAKG,QAAQY,KAE5B+1B,GAAavpB,GAAG8lB,WAAW7lB,KAAKvN,KAAMD,GAElCA,aAAgBvB,SACTwB,KAAKqkC,kBAAkBzwB,IAE9B5T,KAAKskC,sBAAsBpgB,MAAMtQ,UAC1B5T,KAAK2V,eAAe/B,IAG3B7T,IAASC,KAAKoR,qBACPpR,KAAKoR,aAGZrR,IAASC,KAAKuT,kBACPvT,KAAKuT,WAIpBoxB,aAAc,SAASpN,GAKnB,IAJA,IAAI9zB,EAAWzD,KAEXs5B,EAAet5B,KAAKq5B,oBAEfp3B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIb,EAAOm2B,EAAMt1B,GACb4iC,EAAavL,EAAal4B,EAAKlB,QAAQY,MAAQ,YAAc,GACjE2C,EAAS60B,YAAYuM,GAErB,IAAIC,EAAgBrhC,EAAS+1B,oBAAoBqL,GACjD,GAAKC,EAKL,IADA,IAAIC,EAASthC,EAASuhC,0BAA0BF,GACvCG,EAAU,EAAGA,EAAUF,EAAO9jC,OAAQgkC,IAC3CxhC,EAASyhC,iBAAiBH,EAAOE,GAAU7jC,KAKvD8jC,iBAAkB,SAASphC,EAAQ1C,GAC/BpB,KAAKmlC,gBACD9P,GAAmBvxB,EAAQ,CAAEgF,GAAM0B,KAAkBpJ,GAGzDpB,KAAKolC,qBACD/P,GAAmBvxB,EAAQ,CAAEqG,GAAYS,KAAwBxJ,GAGrEpB,KAAKqlC,eACDhQ,GAAmBvxB,EAAQ,CAAEsF,GAAQL,KAAQ3H,GAGjDpB,KAAKslC,oBACDjQ,GAAmBvxB,EAAQ,CAAEuG,GAAcD,KAAchJ,GAG7DpB,KAAKulC,kBACDlQ,GAAmBvxB,EAAQ,CAAEoF,GAAQwB,KAAoBtJ,GAG7DpB,KAAKwlC,uBACDnQ,GAAmBvxB,EAAQqF,IAAc/H,GAG7CpB,KAAKylC,mBACDpQ,GAAmBvxB,EAAQ,CAAEkF,GAAUyB,KAAsBrJ,GAGjEpB,KAAK0lC,gBACDrQ,GAAmBvxB,EAAQ6F,IAAOvI,GAGtCpB,KAAK2lC,qBACDtQ,GAAmBvxB,EAAQ,CAAE+G,GAAWpB,KAAyBrI,GAGrEpB,KAAK4lC,gBACDvQ,GAAmBvxB,EAAQ,CAAE4F,GAAMiB,KAAkBvJ,IAI7DqjC,oBAAqB,SAASlN,GAC1B,IAAI9zB,EAAWzD,KAEX8D,EAAS9D,KAAK6lC,WAAa7lC,KAAK8D,OAChCgiC,EAAkB,GACtB9lC,KAAK+lC,oBAAsB,GAC3B/lC,KAAKgmC,mBAAqBhmC,KAAKgmC,oBAAsB,GAErD,IAAK,IAAI/jC,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI6T,EAAgBhS,EAAO7B,GACvBmP,EAAe3N,EAAS4N,mBAAmByE,GAC3CmwB,EAAWxiC,EAASq0B,SAAS1mB,EAAalR,QAAQkB,MAIlD0U,GAHWmf,GAAiB7jB,EAAalR,QAAQwD,KAAM7G,IAE1CiZ,EAAcowB,gBAAkB1oC,EAAQyoC,EAAU1O,GAC/C9zB,EAAS0iC,gBAAgBrwB,EAAe1E,GAExC3N,EAAS2iC,aAAatwB,EAAe1E,GAGzD00B,EAAgBzgC,KAAKyQ,GAGzB9V,KAAKgmC,mBAAqBhmC,KAAK+lC,oBAC/B/lC,KAAK+lC,oBAAsB,KAE3B/lC,KAAK6lC,UAAY/hC,EACjB9D,KAAK8D,OAASgiC,GAGlBM,aAAc,SAAStiC,EAAQsN,GAC3B,IAAIi1B,GAAcviC,EAAOM,MAAQ,IAAInD,OAGrC,GAFAmQ,EAAak1B,WAAajkC,KAAKC,IAAI8O,EAAak1B,YAAc,EAAGD,IAE3DxqC,EAASuV,EAAalR,QAAQkC,OAAQvG,EAASuV,EAAalR,QAAQoC,KACtE,OAAOwB,EAGX,IAAInD,EAAQyQ,EAAam1B,sBACrBC,EAAmBhpC,EAAQsG,EAAOJ,KAAMygC,IACxCruB,EAAgBlY,EAAW,GAAIkG,GAYnC,OAVAgS,EAAc1R,MAAQ0R,EAAc1R,MAAQ,IAAII,MAAM7D,EAAMyB,IAAKzB,EAAM2B,IAAM,GAEzEkkC,GACAlQ,GAAuBxgB,EAAenV,EAAO0lC,GAAY,SAAUrlC,GAAO,MAAO,CAC7EkD,KAAMJ,EAAOM,KAAKpD,GAClBuU,SAAUnE,EAAamG,WAAWvW,GAAK,GACvCwR,WAAYxR,EAAML,EAAMyB,QACrB,SAAUpB,GAAO,OAAOhE,EAAQ8G,EAAOM,KAAKpD,OAGhD8U,GAGX2wB,uBAAwB,WACpBzmC,KAAKgmC,mBAAqB,IAG9BU,mBAAoB,SAAS5iC,EAAQsN,GACjC,IAEIgD,EAAOtQ,EAAY,MAAI,IAAOsN,EAAau1B,iBAC/C,GAAI3mC,KAAKgmC,mBAAmB5xB,GAExB,OADApU,KAAK+lC,oBAAoB3xB,GAAOpU,KAAKgmC,mBAAmB5xB,GACjDpU,KAAKgmC,mBAAmB5xB,GAGnC,IAAIqhB,EAAcrkB,EAAalR,QAC3B0mC,EAAgBnR,EAAYmR,cAC5BC,EAAW5R,GAAiBQ,EAAY/xB,KAAM7G,GAC9CiqC,EAAUhjC,EAAOM,KACjB2iC,EAAQF,EAAWtR,GAAe3yB,GAClCH,EAAS,GACRokC,GACDz1B,EAAa41B,gBAGjB,IAAK,IAAIhmC,EAAM,EAAGA,EAAM8lC,EAAQ7lC,OAAQD,IAAO,CAC3C,IAAIuU,OAAW,EAOf,GALIA,EADAzR,EAAOoiC,cACIa,EAAMjjC,EAAOoiC,cAAeY,EAAQ9lC,GArBxChB,KAqBuDmR,aAAakb,MAEhEua,EAAc5lC,GAGzBhE,EAAQuY,IAA0B,OAAbA,EAAmB,CACxC,IAAI/C,EAAapB,EAAa61B,WAAW1xB,GACzC9S,EAAO+P,GAAc/P,EAAO+P,IAAe,CAAEiZ,MAAO,GAAIlW,SAAUA,GAClE9S,EAAO+P,GAAYiZ,MAAMpmB,KAAKrE,IAMtC,OAFAhB,KAAK+lC,oBAAoB3xB,GAAO3R,EAEzBA,GAGX0jC,gBAAiB,SAASriC,EAAQsN,GAE9B,IADctN,EAAOM,KACRnD,OACT,OAAO6C,EA4BX,IAzBA,IAAI28B,EAAYzgC,KAAK0mC,mBAAmB5iC,EAAQsN,GAC5C3O,EAAS7E,EAAW,GAAIkG,GACxBojC,EAAa,IAAIpH,GAAiBliC,EAAW,GAAIkG,GAASd,GAAasC,QAAS67B,GAAkB77B,SAClGlB,EAAO3B,EAAO2B,KAAO,GACrBw8B,EAAYxvB,EAAalR,QAAQ0gC,WAAa,GAE9CjgC,EAAQyQ,EAAam1B,sBACrBY,EAAe,SAAUnmC,GACzB,IAAIomC,EAAcpmC,EAAML,EAAMyB,IAC1BhC,EAAQqgC,EAAUz/B,GAOtB,GANKZ,IACDA,EAAQqgC,EAAUz/B,GAAO,IAG7BZ,EAAMoS,WAAa40B,GAEdhnC,EAAM8D,KAAM,CACb,IAAIqR,EAAWnE,EAAamG,WAAWvW,GAAK,GAC5CZ,EAAMmV,SAAWA,EACjBnV,EAAM8D,KAAOgjC,EAAW1G,gBAAgBpgC,EAAMqrB,MAAOlW,GAGzD,OAAOnV,GAGFY,EAAML,EAAMyB,IAAKpB,GAAOL,EAAM2B,IAAKtB,IAAO,CAC/C,IAAIZ,EAAQ+mC,EAAanmC,GACzBoD,EAAKhE,EAAMoS,YAAcpS,EAAM8D,KAE3B9D,EAAMqrB,OAASrrB,EAAMqrB,MAAMxqB,SAC3B2/B,EAAUxgC,EAAMoS,YAAcpS,EAAM8D,MAU5C,OANI1G,EAAQiF,EAAOiB,KAAMygC,KACrB7N,GAAuB7zB,EAAQ9B,EAAOyQ,EAAai2B,aAAcF,GAAc,SAAUnmC,GAAO,OAAOy/B,EAAUz/B,MAGrHoQ,EAAalR,QAAQ0gC,UAAYA,EAE1Bn+B,GAGXywB,YAAa,SAAS7lB,EAAOjM,GACzB,IAAI0C,EAASuJ,EAAMnN,QAAQ4D,OACvBsN,EAAepR,KAAKqR,mBAAmBvN,EAAO,IAC9CmN,EAAaG,EAAalR,QAAQ+Q,WAClCq2B,EAAkBjlC,KAAKC,IAAI,EAAGyO,GAAgBjN,GAAUmN,EAAWhQ,QAEvE,GAAIqmC,EAAkB,EAElB,IADAr2B,EAAaG,EAAalR,QAAQ+Q,WAAaG,EAAalR,QAAQ+Q,WAAWzM,MAAM,GAC9E8iC,KACHr2B,EAAW5L,KAAK,IAIxBrF,KAAKskC,sBAAsBvgB,OAAO1W,EAAMiE,iBAExCulB,GAAavpB,GAAG4lB,YAAY3lB,KAAKvN,KAAMqN,EAAOjM,IAGlDm4B,eAAgB,SAASz1B,GACrB,IAAI5D,EAAUF,KAAKE,QACf0T,EAAW9P,EAAO/D,KAClB01B,EAAc,GAAG1xB,OAAO7D,EAAQqT,WAChCxT,EAAOlB,EAAK42B,GAAa,SAASP,GAAK,OAAOA,EAAEp0B,OAAS8S,KAAa,GAEtE2zB,IADQrnC,EAAQq3B,OAAS,CAAE,KACF,IAAM,IAAIz2B,MAAQ,UAG/C,OAFgBf,GAAQ,IAAIqB,MAAQmmC,GAKxCl2B,mBAAoB,SAASvN,GACzB,IAAI8P,EAAW9P,EAAOsN,aAClBrR,EAAO6T,EAAW5T,KAAKqkC,kBAAkBzwB,GAAY5T,KAAKoR,aAE9D,IAAKrR,EACD,MAAM,IAAIoH,MAAM,4CAA8CyM,GAGlE,OAAO7T,GAGXynC,sBAAuB,SAASC,EAAarmC,GACzC,IAAIwR,EAAQ60B,EAAY70B,MAIxB,MAAO,CACHK,UAAWL,EACXL,aALeK,GAAwB,SAAfA,EAAMlP,KAM9B8S,KALOpV,EAAKlB,QAAQsW,OAS5BwuB,0BAA2B,SAASlhC,GAGhC,IAFA,IAAI4jC,EAAe,GACfC,EAAS,GACJ3mC,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IAAO,CAC1C,IAAIF,EAAOgD,EAAO9C,GAAKoQ,cAAgB,cAClCu2B,EAAO92B,eAAe/P,KACvB6mC,EAAO7mC,IAAQ,EACf4mC,EAAariC,KAAKvE,IAK1B,IADA,IAAIikC,EAAS,GACJ5L,EAAS,EAAGA,EAASuO,EAAazmC,OAAQk4B,IAAU,CACzD,IACIyO,EAAaC,GAAY/jC,EADlB4jC,EAAavO,GACmBA,GACjB,IAAtByO,EAAW3mC,QAIf8jC,EAAO1/B,KAAKuiC,GAGhB,OAAO7C,GAGXM,eAAgB,SAASvhC,EAAQ1C,GAC7B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBgkC,EAAW,IAAIjhB,GAAS7mB,KAAMxE,EAAEqE,OAAO,CACvCiE,OAAQA,EACRuO,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBC,QAASshB,EAAYthB,SACtBnmB,KAAKwnC,sBAAsBC,EAAarmC,KAE3CpB,KAAKkzB,YAAY4U,EAAU1mC,KAG/BkkC,oBAAqB,SAASxhC,EAAQ1C,GAClC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBikC,EAAmB,IAAInG,GAAc5hC,KAAM,CAC3C8D,OAAQA,EACRuO,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBC,QAASshB,EAAYthB,UAGzBnmB,KAAKkzB,YAAY6U,EAAkB3mC,KAGvCmkC,kBAAmB,SAASzhC,EAAQ1C,GAChC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBkkC,EAAc,IAAIlZ,GAAY9uB,KAAM,CACpC8D,OAAQA,EACRuO,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBC,QAASshB,EAAYthB,QACrB3P,KAAMpV,EAAKlB,QAAQsW,OAGvBxW,KAAKkzB,YAAY8U,EAAa5mC,KAGlCwkC,gBAAiB,SAAS9hC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBmkC,EAAY,IAAIpnB,GAAU7gB,KAAMxE,EAAEqE,OAAO,CACzCwS,WAAYrS,KAAKqS,WACjBvO,OAAQA,GACT9D,KAAKwnC,sBAAsBC,EAAarmC,KAE3CpB,KAAKkzB,YAAY+U,EAAW7mC,KAGhC+jC,gBAAiB,SAASrhC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBokC,EAAY,IAAIplB,GAAU9iB,KAAMxE,EAAEqE,OAAO,CACzCwS,WAAYrS,KAAKqS,WACjBvO,OAAQA,GACT9D,KAAKwnC,sBAAsBC,EAAarmC,KAE3CpB,KAAKkzB,YAAYgV,EAAW9mC,KAGhCgkC,qBAAsB,SAASthC,EAAQ1C,GACnC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIknC,EAAiB,IAAIjF,GAAeljC,KAAM,CAC1CqS,WAAYrS,KAAKqS,WACjBvO,OAAQA,EACR0S,KAAMpV,EAAKlB,QAAQsW,OAGvBxW,KAAKkzB,YAAYiV,EAAgB/mC,KAGrCskC,gBAAiB,SAAS5hC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBuJ,EAAQ,IAAIs2B,GAAU3jC,KAAM,CAC5BqS,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBpiB,OAAQA,EACRqiB,QAASshB,EAAYthB,QACrB3P,KAAMpV,EAAKlB,QAAQsW,OAGvBxW,KAAKkzB,YAAY7lB,EAAOjM,KAG5BokC,uBAAwB,SAAS1hC,EAAQ1C,GACrC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBuJ,EAAQ,IAAI8b,GAAiBnpB,KAAM,CACnCqS,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBpiB,OAAQA,EACRqiB,QAASshB,EAAYthB,QACrB3P,KAAMpV,EAAKlB,QAAQsW,OAGvBxW,KAAKkzB,YAAY7lB,EAAOjM,KAG5BqkC,mBAAoB,SAAS3hC,EAAQ1C,GACjC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBuJ,EAAQ,IAAIke,GAAavrB,KAAM,CAC/BqS,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBpiB,OAAQA,EACRqiB,QAASshB,EAAYthB,QACrB3P,KAAMpV,EAAKlB,QAAQsW,OAGvBxW,KAAKkzB,YAAY7lB,EAAOjM,KAG5BukC,qBAAsB,SAAS7hC,EAAQ1C,GACnC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrBskC,EAAiB,IAAIvE,GAAe7jC,KAAM,CAC1C8D,OAAQA,EACRuO,WAAYrS,KAAKqS,WACjB6T,IAAKuhB,EAAYvhB,IACjBC,QAASshB,EAAYthB,UAGzBnmB,KAAKkzB,YAAYkV,EAAgBhnC,KAGrCinC,qBAAsB,SAASC,EAAkBC,GAK7C,IAJA,IAEIC,EAAiBnT,GAAmBr1B,KAAK8D,OAAQgH,IAE5CmH,EAAW,EAAGA,EAAWjS,KAAK8D,OAAO7C,OAAQgR,IAAY,CAC9D,IAAI6D,EALO9V,KAKkB8D,OAAOmO,GACpC,GAAIzU,EAAQsY,EAAcpS,KAAMwgC,IAAc,CAC1C,IAAI30B,EAAOuG,EAAcvG,KACrBA,GAAQA,EAAKuR,QAAUjY,IACvB2/B,EAAenjC,KAAKyQ,IAKhC,IAAK,IAAIuB,EAAa,EAAGA,EAAamxB,EAAevnC,OAAQoW,IAAc,CACvE,IAAIoxB,EAAaD,EAAenxB,GAAYjG,cAAgB,GAC5D,GAAIq3B,IAAeH,IAAsBG,GAAoC,IAAtBF,EACnD,OAAO,IAKnBG,eAAgB,SAASJ,EAAkBC,GAGvC,IAFA,IAAIzkC,EAAS9D,KAAK8D,OAETmO,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAAY,CACzD,IAAIw2B,EAAa3kC,EAAOmO,GAAUb,cAAgB,GAClD,IAAKq3B,IAAeH,IAAsBG,GAAoC,IAAtBF,IAA6BzkC,EAAOmO,GAAUi0B,cAClG,OAAO,IAKnBxB,yBAA0B,WAEtB,IADA,IAAI3jC,EAAOf,KAAKe,KACPkB,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IACzBlB,EAAKkB,aAAczD,GACnBuC,EAAKkB,GAAG0mC,gBAKpBnE,mBAAoB,SAASjN,GAOzB,IANA,IAAI9zB,EAAWzD,KAEXqS,EAAarS,KAAKqS,WAClBu2B,EAAc,GAAG7kC,OAAO/D,KAAKE,QAAQkR,cACrCrQ,EAAO,GAEFkB,EAAI,EAAGA,EAAI2mC,EAAY3nC,OAAQgB,IAAK,CACzC,IAAIwzB,EAAcmT,EAAY3mC,GAC1BgkC,EAAWxiC,EAASq0B,SAASrC,EAAYr0B,MAE7C,GAAI5D,EAAQyoC,EAAU1O,GAAQ,CAC1B,IAAIz2B,EAAO20B,EAAY30B,KACnBmQ,EAAawkB,EAAYxkB,gBAA+B,IAAfA,IAAyBA,EAAa,IACnFwkB,EAAc73B,EAAW,CACrBwU,SAAUC,EACVyE,SAAUzE,GAAc5O,EAAS0N,aAAa8U,IAC9CzS,kBAAmBnB,EAAarW,EAAY,GAC7Cy5B,GAEEz4B,EAAQy4B,EAAYrY,aACrBqY,EAAYrY,UAAY3Z,EAASolC,eAGjCplC,EAAS4kC,qBAAqBvnC,EAAMmB,KACpCwzB,EAAYrY,WAAY,GAG5B,IAAIhM,OAAe,EAUnB,GAPIA,EADAokB,GAAWC,EAAaxkB,EAAW,IACpB,IAAItV,EAAQmtC,iBAAiBrT,EAAahyB,EAAS0N,cAEnD,IAAI3S,EAAai3B,EAAahyB,EAAS0N,cAG1Dy3B,EAAY3mC,GAAGgP,WAAaG,EAAalR,QAAQ0mC,cAE7C9lC,EAAM,CACN,GAAI2C,EAAS4gC,kBAAkBvjC,GAC3B,MAAM,IAAIqG,MAAO,2BAA6BrG,EAAO,uBAEzD2C,EAAS4gC,kBAAkBvjC,GAAQsQ,EAGvCA,EAAa4F,UAAY/U,EACzBlB,EAAKsE,KAAK+L,GACV3N,EAASsvB,WAAW3hB,IAI5B,IAAI23B,EAAc/oC,KAAKoR,cAAgBrQ,EAAK,GAC5Cf,KAAKoR,aAAe23B,EAEhB12B,EACArS,KAAK+sB,MAAQgc,EAEb/oC,KAAK6sB,MAAQkc,GAIrBF,YAAa,WAGT,IAFA,IAAI/kC,EAAS9D,KAAK8D,OAET7B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI6T,EAAgBhS,EAAO7B,GAC3B,IAAKzE,EAAQsY,EAAcpS,KAAMwgC,IAC7B,OAAO,EAIf,OAAO,GAGXU,gBAAiB,SAASrN,GACtB,IAAI9zB,EAAWzD,KAEXgpC,EAAUhpC,KAAKskC,sBACf2E,EAAeD,EAAQ7kB,QACvBykB,EAAc,GAAG7kC,OAAO/D,KAAKE,QAAQqT,WACrClB,EAAarS,KAAKqS,WAClB62B,EAAc,CAAE92B,UAAWC,EAAYyE,QAASzE,GAAcrS,KAAKmR,aAAa8U,KAChFllB,EAAO,GAEPf,KAAKukC,WACL2E,EAAYC,kBAAmB,EAC/BD,EAAY7vB,OAAS,CAAEvB,OAAQ,OAGnC,IAAK,IAAI7V,EAAI,EAAGA,EAAI2mC,EAAY3nC,OAAQgB,IAAK,CACzC,IAAIwzB,EAAcmT,EAAY3mC,GAC1BgkC,EAAWxiC,EAASq0B,SAASrC,EAAYr0B,MAE7C,GAAI5D,EAAQyoC,EAAU1O,GAAQ,CAC1B,IAAIz2B,EAAO20B,EAAY30B,KACnBsoC,EAAmBnU,GAAiBQ,EAAY/xB,KAAM4I,IAAe,CAAElK,IAAK,GAAKE,IAAK,GAAM,CAAEF,IAAK,EAAGE,IAAK,GAC3G3B,EAAQqoC,EAAQ7kB,MAAMrjB,IAASmoC,GAAgBG,EAEzC,IAANnnC,GAAWtB,GAASsoC,IACpBtoC,EAAMyB,IAAMC,KAAKD,IAAIzB,EAAMyB,IAAK6mC,EAAa7mC,KAC7CzB,EAAM2B,IAAMD,KAAKC,IAAI3B,EAAM2B,IAAK2mC,EAAa3mC,MAGjD,IAOIiR,EAAY,IANZ0hB,GAAiBQ,EAAY/xB,KAAM4I,IACxB3Q,EAAQ0tC,gBAER1tC,EAAQ2tC,aAGM3oC,EAAMyB,IAAKzB,EAAM2B,IAC1C1E,EAAW,GAAIsrC,EAAazT,GAC5BhyB,EAAS0N,cAGb,GAAIrQ,EAAM,CACN,GAAI2C,EAASkS,eAAe7U,GACxB,MAAM,IAAIqG,MAAO,wBAA0BrG,EAAO,uBAEtD2C,EAASkS,eAAe7U,GAAQyS,EAEpCA,EAAUyD,UAAY/U,EAEtBlB,EAAKsE,KAAKkO,GACV9P,EAASsvB,WAAWxf,IAI5B,IAAIw1B,EAAc/oC,KAAKuT,WAAaxS,EAAK,GACzCf,KAAKuT,UAAYw1B,EAEb12B,EACArS,KAAK6sB,MAAQkc,EAEb/oC,KAAK+sB,MAAQgc,GAIrBlJ,eAAgB,SAASxyB,EAAO6K,EAAGqxB,GAC/B,IAAIxsB,EAAS1P,EAAMm8B,kBAAkBtxB,GACjC9X,EAAQ,IAAIhD,EAAM2f,EAAO3O,EAAG2O,EAAO1O,GACnCjN,EAAOpB,KAAKypC,UAAUrpC,GACtB6Q,EAAa,GACblP,EAAS,GAEb,GAAKX,EAAL,CAKA,IADA,IAAIwyB,EAAUxyB,EAAKL,KACVkB,EAAI,EAAGA,EAAI2xB,EAAQ3yB,OAAQgB,IAAK,CACrC,IAAIlC,EAAO6zB,EAAQ3xB,GACflC,EAAKO,SACLu0B,GAAgB9yB,EAAQhC,EAAKO,SAASF,IAEtCy0B,GAAgB5jB,EAAYlR,EAAKM,YAAYD,IAI3B,IAAtB6Q,EAAWhQ,QACX4zB,GAAgB5jB,EAAYjR,KAAKoR,aAAa/Q,YAAYD,IAG1D6Q,EAAWhQ,OAAS,GAAKc,EAAOd,OAAS,GACzCoM,EAAM8K,QAAQoxB,EAAW,CACrB9wB,QAAS3a,EAAaoa,GACtBQ,cAAeR,EACf3C,SAAUsgB,GAAkB5kB,GAC5B9Q,MAAO01B,GAAkB9zB,OAKrC0nC,UAAW,SAASrpC,GAGhB,IAFA,IAAIm3B,EAAQv3B,KAAKu3B,MAERt1B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIw1B,EAAcF,EAAMt1B,GACxB,GAAIw1B,EAAYhT,WAAWwT,cAAc73B,GACrC,OAAOq3B,IAKnBiS,kBAAmB,SAAS3pC,EAAMG,GAC9BwpC,GAAkB1pC,KAAKE,QAASH,EAAMG,GACtCwpC,GAAkB1pC,KAAKk3B,gBAAiBn3B,EAAMG,MAItD,SAASwpC,GAAkBC,EAAe5pC,EAAMG,GAC5C,IAAI0pC,EAA6C,GAAG7lC,OAAlChE,aAAgBvB,EAAyBmrC,EAAcv4B,aAA0Bu4B,EAAcp2B,WACjH3V,EAAWgsC,EAAY7pC,EAAKiX,WAAY9W,GAG5C,SAAS2nC,GAAY/jC,EAAQ/D,EAAMo5B,GAC/B,OAAOt6B,EAAKiF,GAAQ,SAAS+lC,GACzB,OAAmB,IAAX1Q,IAAiB0Q,EAAEz4B,cAAkBy4B,EAAEz4B,eAAiBrR,KAIxExC,EAAkB6mC,GAAqB,CACnChzB,aAAc,GACdmC,UAAW,KAGf3V,EAAWwmC,GAAoBjyB,UAAWytB,IAE1C,IAAIkK,GAAYluC,EAAMiE,OAAO,CACzBC,KAAM,WAEFE,KAAK+pC,QAAU,IAGnB3Z,QAAS,WACLpwB,KAAK+pC,QAAU,IAGnBja,KAAM,SAASve,EAAQiJ,GACnB,IAEIwvB,EAAc,GAAGjmC,OAAOwN,GAC5BvR,KAAKmwB,OAEL,IAAK,IAAIluB,EAAI,EAAGA,EAAI+nC,EAAY/oC,OAAQgB,IAAK,CACzC,IAAI7B,EAAQ4pC,EAAY/nC,GACpB7B,GAASA,EAAM6pC,iBAAmB7pC,EAAM8pC,iBAPjClqC,KAQEmqC,qBAAqB/pC,GAAO,EAAMoa,GARpCxa,KASE+pC,QAAQ1kC,KAAKjF,MAKlC+pC,qBAAsB,SAAS/pC,EAAO0vB,EAAMtV,GACxC,IAAI4vB,GAAiBhqC,EAAMF,QAAQib,WAAa,IAAIkvB,OACpD,GAAID,EAAe,CACf,IAAIhyB,EAAY,CACZ7C,SAAUnV,EAAMmV,SAChBzR,OAAQ1D,EAAM0D,OACduR,SAAUjV,EAAMiV,SAChBlV,MAAOC,EAAMD,MACbgW,WAAY/V,EAAM+V,WAClBm0B,eAAgBA,GAChBjpC,OAAQjB,EAAMmb,kBACduU,KAAMA,GAEVsa,EAAchyB,GACTA,EAAUmyB,mBACXnqC,EAAM6pC,gBAAgBna,EAAMtV,QAGhCpa,EAAM6pC,gBAAgBna,EAAMtV,IAIpC2V,KAAM,WAIF,IAHA,IAEI5e,EAASvR,KAAK+pC,QACXx4B,EAAOtQ,QAHCjB,KAIFmqC,qBAAqB54B,EAAOgiB,OAAO,IAIpDiX,cAAe,SAAS/xB,GAGpB,IAFA,IAAIlH,EAASvR,KAAK+pC,QAET9nC,EAAI,EAAGA,EAAIsP,EAAOtQ,OAAQgB,IAAK,CAEpC,GAAIwW,IADQlH,EAAOtP,GAEf,OAAO,EAIf,OAAO,KAIf,SAASqoC,KACLtqC,KAAKuqC,mBAAoB,EAG7B,SAASE,GAAUvyB,EAAGwyB,GAClB,IAAIt2B,GAAOs2B,GAAY,IAAItV,cACvBuV,EAAQzyB,EAAEyyB,MAGd,MAFsB,SAARv2B,KAAoBu2B,EAAMC,SAAWD,EAAME,UAAYF,EAAMG,SAAYH,EAAMv2B,EAAM,OAKvG,SAAS22B,GAAkBjnB,GAEvB,IADA,IAAIknB,EAAS,GACJhqC,EAAM,EAAGA,EAAM8iB,EAAW7iB,OAAQD,IAAO,CAC9C,IAAI0U,EAAYoO,EAAW9iB,GACvB0U,EAAU3V,KAAKG,QAAQY,OACvBkqC,EAAOt1B,EAAU3V,KAAKG,QAAQY,MAAQ,CAClCsB,IAAKsT,EAAU/U,MAAMyB,IACrBE,IAAKoT,EAAU/U,MAAM2B,MAIjC,OAAO0oC,EAGX,IAAIC,GAAWrvC,EAAMiE,OAAO,CACxBC,KAAM,SAAS4B,EAAUxB,GAErBF,KAAK0B,SAAWA,EAChB1B,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASA,IAGhD2kB,MAAO,SAAS3M,GAEZ,OADAlY,KAAKkrC,QAAUT,GAAUvyB,EAAGlY,KAAKE,QAAQkU,KAClCpU,KAAKkrC,SAGhB/f,KAAM,SAASjT,GACX,GAAIlY,KAAKkrC,QAAS,CACd,IAAIpnB,EAAa9jB,KAAK8jB,WAAa9jB,KAAKmrC,SAASjzB,EAAGzb,GAAGsH,OAAO/D,KAAKmrC,SAASjzB,EAAGxb,IAC/E,GAAIonB,EAAW7iB,OAEX,OADAjB,KAAK8jB,WAAaA,EACXinB,GAAkBjnB,KAKrCtB,IAAK,WACD,IAAIqW,EAAS74B,KAAKkrC,QAGlB,OAFAlrC,KAAKkrC,SAAU,EAERrS,GAGXuS,IAAK,WACD,IACI1pC,EADM1B,KACS0B,SACfoiB,EAFM9jB,KAEW8jB,WACrB,GAAIA,EAAW7iB,OAAQ,CACnB,IAAK,IAAID,EAAM,EAAGA,EAAM8iB,EAAW7iB,OAAQD,IAAO,CAC9C,IAAIL,EAAQmjB,EAAW9iB,GACvBU,EAASgoC,kBAAkB/oC,EAAMZ,KAAMY,EAAMA,OAEjDe,EAASo4B,OAAOp4B,EAAS61B,SAIjCnH,QAAS,kBACEpwB,KAAK0B,UAGhBypC,SAAU,SAASjzB,EAAG8C,GAClB,IAAItZ,EAAW1B,KAAK0B,SAChB2pC,GAASnzB,EAAE8C,GAAUqwB,MACrBC,GAAQtrC,KAAKE,QAAQorC,MAAQ,IAAIlW,cACjCmW,EAAc,GAElB,GAAc,IAAVF,IAAgBC,GAAQ,IAAIlW,gBAAkBpa,EAE9C,IADA,IAAIja,EAAOW,EAASX,KACXC,EAAM,EAAGA,EAAMD,EAAKE,OAAQD,IAAO,CACxC,IAAIjB,EAAOgB,EAAKC,GAEhB,GAAIga,IAAave,IAAMsD,EAAKG,QAAQkS,UAAY4I,IAAate,GAAKqD,EAAKG,QAAQkS,SAAU,CACrF,IAAIzR,EAAQZ,EAAKqrC,IAAIC,GAEjB1qC,IACAA,EAAM6qC,YAAa,EACnBD,EAAYlmC,KAAK,CACbtF,KAAMA,EACNY,MAAOA,MAO3B,OAAO4qC,KAIfN,GAAS94B,UAAUjS,QAAU,CACzBkU,IAAK,OACLk3B,KAAM,QAGV,IAAIG,GAAgB7vC,EAAMiE,OAAO,CAC7BC,KAAM,SAASuN,EAAOnN,GAElBF,KAAKqN,MAAQA,EACbrN,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASA,GAC5CF,KAAK0rC,iBAGTA,cAAe,WACX,IAAIC,EAAU3rC,KAAK4rC,SAAWC,SAASH,cAAc,OACrDC,EAAQ1b,UAAY,YACpB,IAAI6b,EAAeD,SAASH,cAAc,OAC1CI,EAAa7b,UAAY,kBACzB0b,EAAQI,YAAYD,IAGxBE,cAAe,WACPhsC,KAAK4rC,SAASK,YACdjsC,KAAK4rC,SAASK,WAAWC,YAAYlsC,KAAK4rC,WAIlDO,UAAW,SAASC,GAChBttC,EAAckB,KAAK4rC,SAAUQ,IAGjCvnB,MAAO,SAAS3M,GACZ,GAAIuyB,GAAUvyB,EAAGlY,KAAKE,QAAQkU,KAAM,CAChC,IAAI/G,EAAQrN,KAAKqN,MACbjN,EAAQiN,EAAMm8B,kBAAkBtxB,GAChCm0B,EAAWrsC,KAAKssC,UAAYj/B,EAAM1L,UAAUm9B,YAAY1+B,GACxDyb,EAAUwwB,EAAWA,EAASpa,YAAYrX,QAAU,KAExD,GAAIyxB,GAAYxwB,EAAS,CACrB,IAAI0R,EAASvtB,KAAKusC,iBAalB,OAXA1wB,EAAQsV,UAAU5D,EAAOvT,KAAMuT,EAAO7I,KACtC1kB,KAAKwsC,iBAAmB3wB,EAExBgwB,SAASjjB,KAAKmjB,YAAY/rC,KAAK4rC,UAC/B5rC,KAAKmsC,UAAU,CACXnyB,KAAM9B,EAAEu0B,MAAQ,EAChB/nB,IAAKxM,EAAEw0B,MAAQ,EACf59B,MAAO,EACPC,OAAQ,KAGL,GAGf,OAAO,GAGXw9B,eAAgB,WACZ,IAAII,EAAe3sC,KAAKqN,MAAMoL,QAC1BxE,EAAMnV,EAAc6tC,EAAc,CAAE,cAAe,eACnD/c,EAAc3b,EAAI2b,YAClBF,EAAazb,EAAIyb,WACjBnC,EAAS5xB,EAAQixC,cAAcD,GAEnC,MAAO,CACH3yB,KAAM4V,EAAcrC,EAAOvT,KAC3B0K,IAAKgL,EAAanC,EAAO7I,MAIjCyG,KAAM,SAASjT,GACIlY,KAAKssC,WAEhBtsC,KAAKmsC,UAAUnsC,KAAK6sC,mBAAmB30B,KAI/CsK,IAAK,SAAStK,GAEV,GADelY,KAAKssC,UACN,CACV,IAAIQ,EAAmB9sC,KAAKusC,iBACxBQ,EAAoB/sC,KAAK6sC,mBAAmB30B,GAChD60B,EAAkB/yB,MAAQ8yB,EAAiB9yB,KAC3C+yB,EAAkBroB,KAAOooB,EAAiBpoB,IAE1C,IAAIG,EAAQ,CAAEzW,EAAG2+B,EAAkB/yB,KAAM3L,EAAG0+B,EAAkBroB,KAC1DlC,EAAM,CAAEpU,EAAG2+B,EAAkB/yB,KAAO+yB,EAAkBj+B,MAAOT,EAAG0+B,EAAkBroB,IAAMqoB,EAAkBh+B,QAM9G,OALA/O,KAAKgtC,kBAAkBnoB,EAAOrC,GAE9BxiB,KAAKgsC,uBACEhsC,KAAKssC,UAELvB,GAAkB/qC,KAAK8jB,cAItCmpB,KAAM,WACF,IAAInpB,EAAa9jB,KAAK8jB,WACtB,GAAIA,GAAcA,EAAW7iB,OAAQ,CAEjC,IADA,IAAIS,EAAW1B,KAAKqN,MAAM1L,UACjBX,EAAM,EAAGA,EAAM8iB,EAAW7iB,OAAQD,IAAO,CAC9C,IAAI0U,EAAYoO,EAAW9iB,GAC3BU,EAASgoC,kBAAkBh0B,EAAU3V,KAAM2V,EAAU/U,OAEzDe,EAASo4B,OAAOp4B,EAAS61B,SAIjCnH,QAAS,WACLpwB,KAAKgsC,uBACEhsC,KAAK4rC,gBACL5rC,KAAKqN,OAGhB2/B,kBAAmB,SAASnoB,EAAOrC,GAK/B,IAJA,IAAI8oB,GAAQtrC,KAAKE,QAAQorC,MAAQ,IAAIlW,cACjCtR,EAAa,GAEb/iB,EAAOf,KAAKssC,UAAUvrC,KACjBC,EAAM,EAAGA,EAAMD,EAAKE,OAAQD,IAAO,CACxC,IAAIjB,EAAOgB,EAAKC,GACZoR,EAAWrS,EAAKG,QAAQkS,SAC5B,IAAMk5B,IAAS7uC,GAAM2V,KAAek5B,IAAS5uC,IAAK0V,IAAapV,EAAQ+C,EAAKiX,WAAY,CACpF,IAAIrW,EAAQZ,EAAKmtC,YAAYroB,EAAOrC,GAChC7hB,GACAmjB,EAAWze,KAAK,CACZtF,KAAMA,EACNY,MAAOA,KAMvBX,KAAK8jB,WAAaA,GAGtB+oB,mBAAoB,SAAS30B,GACzB,IAAI2D,EAAU7b,KAAKwsC,iBACfW,EAAgB,CAChB/+B,EAAG8J,EAAE9J,EAAE++B,cACP9+B,EAAG6J,EAAE7J,EAAE8+B,eAEPV,EAAQv0B,EAAE9J,EAAEg/B,SACZV,EAAQx0B,EAAE7J,EAAE++B,SACZ9B,GAAQtrC,KAAKE,QAAQorC,MAAQ,IAAIlW,cACjCpb,EAAO3X,KAAKD,IAAI+qC,EAAc/+B,EAAGq+B,GACjC/nB,EAAMriB,KAAKD,IAAI+qC,EAAc9+B,EAAGq+B,GAChC59B,EAAQzM,KAAKgF,IAAI8lC,EAAc/+B,EAAIq+B,GACnC19B,EAAS1M,KAAKgF,IAAI8lC,EAAc9+B,EAAIq+B,GA2BxC,OAzBIpB,IAAS7uC,IACTud,EAAO6B,EAAQlN,GACfG,EAAQ+M,EAAQ/M,SAEhBw8B,IAAS5uC,IACTgoB,EAAM7I,EAAQrN,GACdO,EAAS8M,EAAQ9M,UAGjB09B,EAAQ5wB,EAAQjN,KAChBE,EAAQ+M,EAAQjN,GAAKu+B,EAAc/+B,GAGnCq+B,EAAQ5wB,EAAQlN,KAChBG,EAAQq+B,EAAc/+B,EAAIyN,EAAQlN,IAGlC+9B,EAAQ7wB,EAAQpN,KAChBM,EAAS8M,EAAQpN,GAAK0+B,EAAc9+B,GAGpCq+B,EAAQ7wB,EAAQrN,KAChBO,EAASo+B,EAAc9+B,EAAIwN,EAAQrN,IAGhC,CACHwL,KAAM3X,KAAKC,IAAI0X,EAAM6B,EAAQlN,IAC7B+V,IAAKriB,KAAKC,IAAIoiB,EAAK7I,EAAQrN,IAC3BM,MAAOA,EACPC,OAAQA,MAKpB08B,GAAct5B,UAAUjS,QAAU,CAC9BkU,IAAK,QACLk3B,KAAM,QAGV,IACI+B,GADMluC,GAAQmuC,KACK1uC,WAQnB2uC,GAAiB3xC,EAAMiE,OAAO,CAC9BC,KAAM,SAASuN,EAAOnN,GAElBF,KAAKqN,MAAQA,EACbrN,KAAKE,QAAUtC,EAAW,CACtB4vC,KAPO,IAQRxtC,KAAKE,QAASA,IAGrButC,aAAc,SAASpC,EAAOtuB,GAO1B,IANA,IAEIuuB,GAAQtrC,KAAKE,QAAQorC,MAAQ,IAAIlW,cACjCtR,EAAa,GACb/iB,EAAOf,KAAKqN,MAAM1L,UAAUZ,KAEvBC,EAAM,EAAGA,EAAMD,EAAKE,OAAQD,IAAO,CACxC,IAAIjB,EAAOgB,EAAKC,GACZoR,EAAWrS,EAAKG,QAAQkS,SAE5B,IAAMk5B,IAAS7uC,GAAM2V,KAAek5B,IAAS5uC,IAAK0V,IAAarS,EAAK2tC,UAAW,CAC3E,IAAIF,EAAOH,GAXJrtC,KAW0BE,QAAQstC,KAzB1C,IACA,IAyBK7sC,EAAQZ,EAAK2tC,WAAWrC,EAAQmC,EAAMzwB,GAEtCpc,GACAmjB,EAAWze,KAAK,CACZtF,KAAMA,EACNY,MAAOA,KAOvB,OADAX,KAAK8jB,WAAaA,EACXinB,GAAkBjnB,IAG7BmpB,KAAM,WACF,IAAInpB,EAAa9jB,KAAK8jB,WAClBpiB,EAAW1B,KAAKqN,MAAM1L,UAE1B,GAAImiB,GAAcA,EAAW7iB,QAAUS,EAASgoC,kBAAmB,CAC/D,IAAK,IAAI1oC,EAAM,EAAGA,EAAM8iB,EAAW7iB,OAAQD,IAAO,CAC9C,IAAI0U,EAAYoO,EAAW9iB,GAC3BU,EAASgoC,kBAAkBh0B,EAAU3V,KAAM2V,EAAU/U,OAEzDe,EAASo4B,OAAOp4B,EAAS61B,SAIjCnH,QAAS,kBACEpwB,KAAKqN,SAIhBsgC,GAAexwC,EAAa0C,OAAO,CACnCC,KAAM,SAASI,EAASiR,GACpBhU,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKmR,aAAeA,GAGxBS,OAAQ,WACJ,IACIgN,EADM5e,KACS4e,SACf1e,EAFMF,KAEQE,QACdkS,EAAWlS,EAAQkS,SAEvBpS,KAAKqB,OAAS,IAAIlC,GAAQyuC,OAAO,KAAM,CACnCznB,QAAS/T,EAAW,EAAIlS,EAAQimB,QAChC0nB,YAAaz7B,EAAWlS,EAAQimB,QAAU,EAC1C2nB,YAAa17B,EAAW,WAAa,aACrC0E,QAAS5W,EAAQ+lB,IACjB8nB,WAAY37B,EAAW,QAAU,WAGrC,IAAK,IAAIpR,EAAM,EAAGA,EAAM4d,EAAS3d,OAAQD,IAAO,CAC5C,IAAIgtC,EAAapvB,EAAS5d,GAC1BgtC,EAAWxgC,OAAO,IAAInQ,GACtB2wC,EAAW7Z,iBAInB3mB,OAAQ,SAASkB,GACb1O,KAAKqB,OAAO6N,KAAKR,EAAIS,UACrBnP,KAAKqB,OAAOmM,SACZ,IAAIyjB,EAAOjxB,KAAKqB,OAAO4sC,cAGnBjuC,KAAK0O,IADLuiB,EACWt1B,EAAQuyC,UAAUjd,GAElB,IAAI5zB,GAIvB82B,aAAc,WACVn0B,KAAKmuC,aAGTl/B,aAAc,eAGdm/B,GAAa3vC,EAAWoB,OAAO,CAC/BC,KAAM,SAASI,GACXzB,EAAW6O,GAAGxN,KAAKyN,KAAKvN,KAAME,GAE9BF,KAAKquC,kBACAnuC,EAAQ+lB,KAITjmB,KAAKmlB,cACLnlB,KAAKyZ,iBAJLzZ,KAAKyZ,eACLzZ,KAAKmlB,gBAObkpB,gBAAiB,WACbruC,KAAK2oB,UAAY,IAAIhtB,EAAQ2yC,aAAa,CAAEl8B,UAAU,EAAOwU,MAAM,EAAO/M,MAAO1d,EAAQgqB,QAASnmB,KAAKE,QAAQimB,UAC/GnmB,KAAK5B,OAAO4B,KAAK2oB,YAGrBlP,aAAc,WACVzZ,KAAK2oB,UAAUvqB,OAAO,IAAIH,EAAa+B,KAAKuuC,mBAGhDA,cAAe,WACX,IAAIruC,EAAUF,KAAKE,QACf04B,EAAc14B,EAAQ04B,YAC1B,OAAOh7B,EAAW,GAAIsC,EAAQkZ,QAAS,CACnCe,WAAYye,EACZxe,OAAQ,CACJ9K,MAAOspB,MAKnBzT,YAAa,WACT,IAAIjlB,EAAUF,KAAKE,QACf8mB,EAAeppB,EAAW,GAAIsC,EAAQmZ,QAE1CrZ,KAAK2oB,UAAUvqB,OAAO,IAAIJ,EAAQkC,EAAQ4Y,KAAMkO,KAGpDyM,eAAgB,WACZh1B,EAAW6O,GAAGmmB,eAAelmB,KAAKvN,MAElC,IAAIwuC,EAASxuC,KAAKE,QAAQsuC,QAAU,GAChCC,EAAYzuC,KAAK0uC,aAAetvC,GAAKshB,SAAS1gB,KAAK2oB,UAAUja,IAAIS,SAAU,CAC3EiS,KAAM,CACF9R,MAAO/S,EACPie,QAAS,GAEb7K,OAAQ,KACR6+B,OAAQA,EAAO1tB,OAAS0tB,IAG5BxuC,KAAKs+B,aAAamQ,IAGtBx2B,MAAO,SAAS02B,EAAQz2B,GACpB,IAAI02B,EAAO5uC,KAAKoY,UAAUF,IAErBy2B,EAAOx2B,QAAQpN,GAAmB6jC,IAAS12B,GAAgB,gBAAXA,EAAExU,MACnDwU,EAAEoyB,kBAIVhyB,KAAM,SAASq2B,EAAQz2B,GACnB,IAAI02B,EAAO5uC,KAAKoY,UAAUF,GAO1B,OALKy2B,EAAOx2B,QAAQnN,GAAmB4jC,IACnCD,EAAOE,iBAAiBD,EAAKlQ,YAAakQ,EAAKE,aAI5C,GAGXv2B,IAAK,SAASo2B,EAAQz2B,GAClBy2B,EAAOI,oBAEPJ,EAAOx2B,QAAQlN,GAAmBjL,KAAKoY,UAAUF,KAGrDE,UAAW,SAASF,GAChB,IAAIhY,EAAUF,KAAKE,QAEnB,MAAO,CACHuY,QAAS3a,EAAaoa,GACtBY,KAAM5Y,EAAQ4Y,KACdhV,OAAQ5D,EAAQ4D,OAChB46B,YAAax+B,EAAQ4D,OAAOiD,MAC5B+nC,WAAY5uC,EAAQ4uC,aAI5B3a,aAAc,WACV,IAAI1wB,EAAWzD,KAEXE,EAAUF,KAAKE,QACfuc,EAAevc,EAAQmB,OAEvBob,GACAzc,KAAKqB,OAASob,EAAa,CACvBoc,OAAQ34B,EAAQ24B,OAChB/0B,OAAQ5D,EAAQ4D,OAChBsL,OAAQpP,KAAKqP,YACby/B,WAAY5uC,EAAQ4uC,WACpB5uC,QAAS,CACLkZ,QAASpZ,KAAKuuC,gBACdl1B,OAAQnZ,EAAQmZ,QAEpBpK,aAAc,WACVxL,EAASwL,eACTxL,EAASurC,iBACTvrC,EAASgwB,iBAET,IAAIhkB,EAAgBhM,EAASpC,OAI7B,cAFOoC,EAASpC,OAEToO,KAGfzP,KAAKmuC,aAEL1vC,EAAW6O,GAAG6mB,aAAa5mB,KAAKvN,SAKxCivC,GAAa,aAEbC,GAAS,SAETC,GAAShyC,EAAa0C,OAAO,CAC7BC,KAAM,SAASI,EAASiR,QACC,IAAjBA,IAA2BA,EAAe,IAE9ChU,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKmR,aAAeA,EAEf3T,EAAQwC,KAAKE,QAAQ8a,SAAU,CAAE5e,EAAKO,EAAON,EAAQC,EAAM4yC,OAC5DlvC,KAAKE,QAAQ8a,SAAWre,GAG5BqD,KAAKovC,mBAELpvC,KAAKqvC,kBAAkBnvC,EAAQ2yB,OAE/B7yB,KAAKsvC,eAGTF,iBAAkB,WACd,IAAIlvC,EAAUF,KAAKE,QACf8a,EAAW9a,EAAQ8a,SACnBu0B,EAAYrvC,EAAQ2Z,MACpBA,EAAQmB,EACRlB,EAAS3d,EAET6e,IAAak0B,GACbr1B,EAAQvd,EACDkB,EAAQwd,EAAU,CAAE5e,EAAKC,KAE5Bwd,EADc,UAAd01B,EACQjzC,EACa,QAAdizC,EACC5yC,EAEAR,EAEZ2d,EAASkB,GACFu0B,IACW,UAAdA,EACAz1B,EAAS1d,EACY,QAAdmzC,IACPz1B,EAASzd,IAIjB2D,KAAK2oB,UAAY,IAAIlqB,EAAW,CAC5Bsb,OAAQ7Z,EAAQ6Z,OAChBsC,QAASnc,EAAQmc,QACjBlC,WAAYja,EAAQia,WACpBC,OAAQla,EAAQka,OAChBN,OAAQA,EACRD,MAAOA,EACP5J,OAAQ/P,EAAQ+P,OAChB6lB,aAAa,IAGb91B,KAAKwvC,WACLxvC,KAAKyvC,eAAiB,IAAIhxC,EAAW,CACjCqb,OAAQA,EACRD,MAAOA,EACP5J,OAAQ/P,EAAQ+P,OAChB6lB,aAAa,IAGjB91B,KAAKyvC,eAAiBzvC,KAAK2oB,UAG/B3oB,KAAK5B,OAAO4B,KAAK2oB,YAGrB2mB,YAAa,WACT,IAAIn+B,EAAenR,KAAK20B,aACpBz0B,EAAUF,KAAKE,QACfkS,EAAWpS,KAAKoN,aAChBsiC,EAAe,IAAI/B,GAAa,CAChCv7B,SAAUA,EACV+T,QAASjmB,EAAQimB,QACjBF,IAAK9U,EAAa8U,KACnB9U,GACCsa,EAAQvrB,EAAQurB,MAEhBvrB,EAAQ4W,UACR2U,EAAQA,EAAMjnB,MAAM,GAAGsS,WAK3B,IAFA,IAAI9U,EAAQypB,EAAMxqB,OAETgB,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAIiC,EAAOunB,EAAMxpB,GAEjBytC,EAAatxC,OAAO,IAAIgwC,GAAWxwC,EAAW,GAAI,CAC9Cwb,QAASlZ,EAAQkZ,QACjBC,OAAQnZ,EAAQmZ,OAChB4M,IAAK9U,EAAa8U,KACnB/lB,EAAQgE,KAAMA,KAGrBwrC,EAAa99B,SACb5R,KAAKyvC,eAAerxC,OAAOsxC,IAG/BtiC,WAAY,WACR,IAAI6G,EAAMjU,KAAKE,QACX4tC,EAAc75B,EAAI65B,YAClB9yB,EAAW/G,EAAI+G,SAInB,OAHgBA,IAAak0B,IAAUpB,IAAgBmB,KAC/CjyC,EAAQ8wC,GAAeA,IAAgBmB,GAAazxC,EAAQwd,EAAU,CAAE1e,EAAMK,MAK1FgzC,SAAU,WACN,OAAO3vC,KAAK2oB,UAAU/J,SAAS,GAAGA,SAAS3d,OAAS,GAGxDuM,OAAQ,SAASC,GACb,IAAIvN,EAAUF,KAAKE,QACf0vC,EAAYniC,EAAUmN,QAErB5a,KAAK2vC,YAKNzvC,EAAQ8a,WAAak0B,IACrBlvC,KAAK6vC,sBAAsBD,GAC3B5vC,KAAK0O,IAAMkhC,GAEX5vC,KAAK8vC,gBAAgBF,GAGrB5vC,KAAKwvC,YACLxvC,KAAK6yB,MAAMrlB,OAAO,IAAInQ,EAAI2C,KAAK2oB,UAAUja,IAAIC,GAAI3O,KAAK6yB,MAAMnkB,IAAIF,GAAIxO,KAAK2oB,UAAUja,IAAIE,GAAI5O,KAAK6yB,MAAMnkB,IAAID,MAZ1GzO,KAAK0O,IAAMkhC,GAgBnBE,gBAAiB,SAASriC,GACtB,IACIvN,EADMF,KACQE,QACdyoB,EAFM3oB,KAEU2oB,UAChB3N,EAAW9a,EAAQ8a,SACnBlM,EAAQ5O,EAAQ4O,MAChBC,EAAS7O,EAAQ6O,OACjB2Q,EAAM1E,IAAa5e,GAAO4e,IAAa3e,EAASI,EAAIC,EACpD0V,EAAWpS,KAAKoN,aAChB2iC,EAActiC,EAAUmN,QACxBo1B,EAAeviC,EAAUmN,QAEzBI,IAAa1e,GAAQ0e,IAAare,IAClCqzC,EAAaxhC,GAAKuhC,EAAYvhC,GAAK,GAGnC4D,GAAYrD,GACZihC,EAAavhC,GAAKuhC,EAAaxhC,GAAKO,EACpCihC,EAAan2B,MAAMk2B,EAAarzC,EAAGisB,EAAUzoB,QAAQ4Z,UAC7C1H,GAAYtD,IACpBkhC,EAAaphC,GAAKohC,EAAarhC,GAAKG,EACpCkhC,EAAan2B,MAAMk2B,EAAatzC,EAAGksB,EAAUzoB,QAAQ2Z,QAGzD8O,EAAUnb,OAAOwiC,GAGjB,IAAIthC,GAFJshC,EAAernB,EAAUja,KAEFkM,SAEnB1a,EAAQs8B,SAAWt8B,EAAQw8B,WAC3BsT,EAAa7e,UAAUjxB,EAAQs8B,QAASt8B,EAAQw8B,SAChD/T,EAAUnb,OAAOwiC,IAGrBthC,EAAIgR,EAAM,GAAKjS,EAAUiS,EAAM,GAC/BhR,EAAIgR,EAAM,GAAKjS,EAAUiS,EAAM,GAE/B1f,KAAK0O,IAAMA,GAGfmhC,sBAAuB,SAASpiC,GAC5B,IACIvN,EADMF,KACQE,QACdyoB,EAFM3oB,KAEU2oB,UAChB6T,EAAUt8B,EAAQs8B,QAClBE,EAAUx8B,EAAQw8B,QAClB5tB,EAAQ5O,EAAQ4O,MAChBC,EAAS7O,EAAQ6O,OACjBqD,EAAWpS,KAAKoN,aAChB4iC,EAAeviC,EAAUmN,QAEzBxI,GAAYrD,EACZihC,EAAavhC,GAAKuhC,EAAaxhC,GAAKO,GAC5BqD,GAAYtD,IACpBkhC,EAAaphC,GAAKohC,EAAarhC,GAAKG,GAExC6Z,EAAUnb,OAAOwiC,GACjBA,EAAernB,EAAUja,IAEzBia,EAAUnb,OAAO,IAAInQ,EACjBm/B,EAASE,EACTF,EAAUwT,EAAalhC,QAAS4tB,EAAUsT,EAAajhC,YAI/DolB,aAAc,WACNn0B,KAAK2vC,YACLxyC,EAAamQ,GAAG6mB,aAAa5mB,KAAKvN,OAI1CqvC,kBAAmB,SAASxc,GACxB,IAAID,EAAeh1B,EAAW,GAAI,CAC9B0R,MAAO1S,EACPoe,SAAU5e,EACVyd,MAAO1d,GACR02B,GACC/Z,EAAO8Z,EAAa9Z,KAExB,GAAK+Z,IAA2B,IAAlBA,EAAMvc,QAApB,CAIA,GAAItZ,EAAQ41B,IAAiBA,EAAatc,QAAS,CAC/C,IAAIoD,EAAgB3b,EAAY60B,GAC5BlZ,EACAZ,EAAOY,EAAc,CAAEZ,KAAMA,IACtB8Z,EAAa9a,SACpBgB,EAAO9Y,KAAKmR,aAAa2G,OAAOC,KAAK6a,EAAa9a,OAAQgB,IAIlE9Y,KAAK6yB,MAAQ,IAAI70B,EAAQ8a,EAAM8Z,GAE/B5yB,KAAKiwC,oBAELjwC,KAAKkwC,6BAGTD,kBAAmB,WACfjwC,KAAKmwC,OAAS,IAAIx0C,EAAQ2yC,aAAa,CACnCl8B,UAAU,EACVwU,MAAM,IAGV5mB,KAAK2oB,UAAUvqB,OAAO4B,KAAKmwC,SAG/BX,SAAU,WACN,OAAOY,QAAQpwC,KAAKE,QAAQ2yB,QAAwC,IAA/B7yB,KAAKE,QAAQ2yB,MAAMvc,UAG5D45B,yBAA0B,WACRlwC,KAAKE,QAEP2yB,MAAM7X,WAAa3e,GAC3B2D,KAAKmwC,OAAO/xC,OAAO4B,KAAKyvC,gBACxBzvC,KAAKmwC,OAAO/xC,OAAO4B,KAAK6yB,SAExB7yB,KAAKmwC,OAAO/xC,OAAO4B,KAAK6yB,OACxB7yB,KAAKmwC,OAAO/xC,OAAO4B,KAAKyvC,oBAKpClyC,EAAkB4xC,GAAQ,CACtBn0B,SAAUre,EACV8uB,MAAO,GACP+Q,QAAS,EACTE,QAAS,EACT3iB,OAAQ7b,EAAW,GACnBme,QAASne,EAAW,GACpBkc,OAAQ,CACJ9K,MAAO1S,EACPkS,MAAO,GAEX5K,KAAM,CACFsqC,OApRM,UAqRNroB,QAAS,GAEbA,QAAS,EACThM,WAAY,GACZlK,OAAQ,EACRmJ,QAAS,CACLgB,OAAQ,CACJtL,MAAO,GAEXA,MAAO,GACPC,OAAQ,EACRrL,KAAM,OACNmW,MAAOvd,EACPwd,OAAQ3d,KAIhB,IAAIk0C,GAAkBz0C,EAAMiE,OAAO,CAC/BC,KAAM,WAEFE,KAAKswC,UAAY,IAGrBjtC,SAAU,SAASK,EAAMJ,GACrBtD,KAAKswC,UAAUjrC,KAAK,CAChB3B,KAAMA,EACNJ,YAAaA,KAIrBurB,OAAQ,SAASgX,EAAW3lC,EAASiR,GAKjC,IAJA,IAEIrN,EAFAysC,EAAWvwC,KAAKswC,UAChBE,EAAQD,EAAS,GAGZvvC,EAAM,EAAGA,EAAMuvC,EAAStvC,OAAQD,IAAO,CAC5C,IAAIyvC,EAAQF,EAASvvC,GAGrB,IAFA8C,EAASuxB,GAAmBwQ,EAAW4K,EAAMntC,cAElCrC,OAAS,EAAG,CACnBuvC,EAAQC,EACR,OAIR,OAAO,IAAID,EAAM9sC,KAAKI,EAAQ5D,EAASiR,MAI/Ck/B,GAAgB/qC,QAAU,IAAI+qC,GAK9B,SAASK,GAAUC,GACf,IAAIl4B,EAAUozB,SAASH,cAAc,OAKrC,OAJIiF,IACAl4B,EAAQwX,UAAY0gB,GAGjBl4B,EAGX,SAASm4B,GAAcn4B,GAEnB,IADA,IAAInT,EAAUmT,EACPnT,IAAY3J,EAAQk1C,WAAWvrC,EAAS,aAC3CA,EAAUA,EAAQ2mC,WAGtB,OAAO3mC,EAGX,IAAIwrC,GAAYl1C,EAAMiE,OAAO,CACzBC,KAAM,SAASuN,EAAO+D,EAAclR,EAAS6wC,GAEzC,IAAIpE,EAAet/B,EAAMoL,QAEzBzY,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASA,GAC5CF,KAAKqN,MAAQA,EACbrN,KAAK+wC,SAAWA,EAChB/wC,KAAK2sC,aAAeA,EACpB3sC,KAAKoR,aAAeA,EACpBpR,KAAKgxC,UAAYhxC,KAAKoR,wBAAwBzV,EAAQmtC,iBAEtD9oC,KAAKixC,cAELjxC,KAAKsW,QAAUtW,KAAKE,QAAQoW,SAAWq2B,EAAauE,aAEhDlxC,KAAKsW,UACLtW,KAAKmxC,iBAELnxC,KAAK6oB,IAAI7oB,KAAKoxC,OAAOpxC,KAAKE,QAAQM,MAAOR,KAAKoxC,OAAOpxC,KAAKE,QAAQO,KAElET,KAAKjB,eAIbsyC,OAAQ,SAASjwC,GACb,OAAOpB,KAAKoR,aAAahQ,OAASA,GAGtC+vC,eAAgB,WACZ,IAAIjxC,EAAUF,KAAKE,QACfoxC,EAAUtxC,KAAKsxC,QAAUZ,GAAU,oCACvC5xC,EAAcwyC,EAAS,CACnB5sB,IAAKxkB,EAAQqtB,OAAO7I,IACpB1K,KAAM9Z,EAAQqtB,OAAOvT,KACrBlL,MAAO5O,EAAQ4O,MACfC,OAAQ7O,EAAQ6O,OAChBwiC,UAAW,QAGf,IAAIC,EAAYxxC,KAAKwxC,UAAYd,GAAU,qCAE3C1wC,KAAKyxC,SAAWf,GAAU,gCAC1B1wC,KAAK0xC,UAAYhB,GAAU,gCAE3BY,EAAQvF,YAAY/rC,KAAKyxC,UACzBH,EAAQvF,YAAY/rC,KAAK0xC,WACzBJ,EAAQvF,YAAYyF,GAEpB,IAAI5oB,EAAO5oB,KAAK4oB,KAAO8nB,GAAU,wCACjCc,EAAUzF,YAAYnjB,GAEtB,IAAI+oB,EAAa3xC,KAAK2xC,WAAajB,GAAU,gDACzCkB,EAAc5xC,KAAK4xC,YAAclB,GAAU,iDAC/CiB,EAAW5F,YAAY2E,MACvBkB,EAAY7F,YAAY2E,MAExBc,EAAUzF,YAAY4F,GACtBH,EAAUzF,YAAY6F,GAEtB5xC,KAAK2sC,aAAaZ,YAAYuF,GAC9B,IAAIO,EAAkB/yC,EAAc0yC,EAAW,CAAE,kBAAmB,mBAAoB,WACpFM,EAAmBhzC,EAAc6yC,EAAY,UAAU5iC,OACvDgjC,EAAoBjzC,EAAc8yC,EAAa,UAAU7iC,OAE7D7O,EAAQsxC,UAAY,CAChBp3B,OAAQ,CACJJ,KAAM63B,EAAgBG,gBACtB/3B,MAAO43B,EAAgBI,mBAI/BnzC,EAAc6yC,EAAY,CACtBjtB,KAAMmtB,EAAgB9iC,OAAS+iC,GAAoB,IAGvDhzC,EAAc8yC,EAAa,CACvBltB,KAAMmtB,EAAgB9iC,OAASgjC,GAAqB,IAGxDT,EAAQxwB,MAAMoxB,QAAUZ,EAAQxwB,MAAMoxB,SAG1CnzC,WAAY,WAGJ,IAAIozC,GAFwB,IAA5BnyC,KAAKE,QAAQkyC,aACbpyC,KAAKqyC,mBAAqBryC,KAAKsyC,YAAYvgC,KAAK/R,MAEhDjB,EAAWiB,KAAK2sC,eAAgBwF,EAAM,IAAoB,MAAInyC,KAAKqyC,mBAAoBF,KAG3FnyC,KAAKuyC,WAAavzC,EAASwzC,iBAAiB3jB,OAAO7uB,KAAK2sC,aAAc,CAClE8F,iBAAiB,EACjB5tB,MAAO7kB,KAAK0yC,OAAO3gC,KAAK/R,MACxBmrB,KAAMnrB,KAAK2yC,MAAM5gC,KAAK/R,MACtBwiB,IAAKxiB,KAAK4yC,KAAK7gC,KAAK/R,MACpB6yC,IAAK7yC,KAAK8yC,KAAK/gC,KAAK/R,MACpB+yC,MAAO/yC,KAAKgzC,OAAOjhC,KAAK/R,MACxBizC,aAAcjzC,KAAKkzC,cAAcnhC,KAAK/R,MACtCmzC,cAAenzC,KAAKozC,eAAerhC,KAAK/R,MACxCqzC,WAAYrzC,KAAKszC,YAAYvhC,KAAK/R,SAI1CixC,YAAa,WACT,IACI/wC,EADMF,KACQE,QAEdwO,EAHM1O,KAEaoR,aACAhQ,KAAK6wB,YACxB7F,EAAcpsB,KAAKqN,MAAM8D,aAAakb,KAEtCrsB,KAAKgxC,WACLpzC,EAAWsC,EAAS,CAChBkC,IAAK9D,EAAU8tB,EAAalsB,EAAQkC,KACpCE,IAAKhE,EAAU8tB,EAAalsB,EAAQoC,KACpC9B,KAAMlC,EAAU8tB,EAAalsB,EAAQM,MACrCC,GAAInC,EAAU8tB,EAAalsB,EAAQO,MAI3C,IAAIusB,EAAQluB,EAAckB,KAAK2sC,aAAc,CAAE,cAAe,eAC1D/c,EAAc5C,EAAM4C,YACpBF,EAAa1C,EAAM0C,WAEvB1vB,KAAKE,QAAUtC,EAAW,GAAI,CAC1BkR,MAAOJ,EAAII,QACXC,OAAQL,EAAIK,SAjJK,GAkJjBsN,QAAS,CACLrC,KAAM4V,EACNlL,IAAKgL,GAETnC,OAAQ,CACJvT,KAAMtL,EAAIC,GAAKihB,EACflL,IAAKhW,EAAIF,GAAKkhB,GAElBlvB,KAAMN,EAAQkC,IACd3B,GAAIP,EAAQoC,KACbpC,IAGPkwB,QAAS,WASL,GARIpwB,KAAKuyC,aACLvyC,KAAKuyC,WAAWniB,iBACTpwB,KAAKuyC,YAGhBgB,aAAavzC,KAAKwzC,YAClBxzC,KAAKyzC,OAAS,KAEVzzC,KAAKsxC,QAAS,CAEV,IAAIa,EADR,GAAInyC,KAAKqyC,mBAELpzC,GAAae,KAAK2sC,eAAgBwF,EAAM,IAAoB,MAAInyC,KAAKqyC,mBAAoBF,IACzFnyC,KAAKqyC,mBAAqB,KAG9BryC,KAAK2sC,aAAaT,YAAYlsC,KAAKsxC,SACnCtxC,KAAKsxC,QAAU,OAIvBoC,gBAAiB,SAAS/yC,GAEtB,MAAO,CACHZ,KAAMC,KAAKoR,aAAalR,QACxBM,KAAMR,KAAK2zC,OAAOhzC,EAAMH,MACxBC,GAAIT,KAAK2zC,OAAOhzC,EAAMF,MAI9BmzC,aAAc,SAASxlC,EAAGC,GACtB,IAAIouB,EAAUz8B,KAAKoR,aAAahQ,KAAKsN,IACjCmlC,EAAc7zC,KAAKqN,MAAMymC,oBAAoB1lC,EAAGC,GACpD,OAAOouB,EAAQxE,cAAc4b,IAGjCnB,OAAQ,SAASx6B,GACb,IAAIhY,EAAUF,KAAKE,QACf+e,EAASnhB,EAAaoa,GAC1B,IAAIlY,KAAKyzC,QAAWx0B,EAApB,CAIA,IAAIlC,EAASphB,EAAQo4C,iBAAiB77B,GAEtC,GADalY,KAAK4zC,aAAa72B,EAAO3O,EAAG2O,EAAO1O,GAChD,CAIA,IAAI2lC,EAASpD,GAAc3xB,GACvBg1B,EAAWj0C,KAAK4oB,KAAKsrB,wBACrBC,GAAUH,GAAUj3B,EAAO3O,GAAK6lC,EAAS7lC,GAAK2O,EAAO3O,GAAK6lC,EAAS7lC,EAAI6lC,EAASnlC,OACrEiO,EAAO1O,GAAK4lC,EAAS5lC,GAAK0O,EAAO1O,GAAK4lC,EAAS5lC,EAAI4lC,EAASllC,OAE3E/O,KAAKqN,MAAM0hC,oBACX/uC,KAAKyzC,OAAS,CACVW,WAAYJ,EACZ7G,cAAej1B,EAAE9J,EAAI8J,EAAE9J,EAAEg/B,SAAW,EACpC+G,OAAQA,EACRxzC,MAAO,CACHH,KAAMR,KAAKoxC,OAAOlxC,EAAQM,MAC1BC,GAAIT,KAAKoxC,OAAOlxC,EAAQO,MAIhC,IAAImuC,EAAO5uC,KAAK0zC,gBAAgB,CAC5BlzC,KAAMR,KAAKoxC,OAAOlxC,EAAQM,MAC1BC,GAAIT,KAAKoxC,OAAOlxC,EAAQO,MAGxBT,KAAKmY,QAAQpM,GAAc6iC,KAC3B5uC,KAAKyzC,OAAS,SAItBT,OAAQ,SAAS96B,GACb,IAAI87B,GAEAA,EADAh0C,KAAKyzC,OACIzzC,KAAKyzC,OAAOW,WAEZxD,GAAc9yC,EAAaoa,MAGpCvc,EAAQ04C,SAASL,EAAQ,oBAIjCrB,MAAO,SAASz6B,GACZ,GAAKlY,KAAKyzC,OAAV,CAIA,IAAIx/B,EAAMjU,KACNsQ,EAAQ2D,EAAIw/B,OACZvzC,EAAU+T,EAAI/T,QACdkR,EAAe6C,EAAI7C,aACnBzQ,EAAQ2P,EAAM3P,MACdse,EAAS3O,EAAM8jC,WACft9B,EAAU1F,EAAalR,QAAQ4W,QAC/BtW,EAAOR,KAAKoxC,OAAOlxC,EAAQM,MAC3BC,EAAKT,KAAKoxC,OAAOlxC,EAAQO,IACzB2B,EAAMpC,KAAKoxC,OAAOlxC,EAAQkC,KAC1BE,EAAMtC,KAAKoxC,OAAOlxC,EAAQoC,KAC1B+oC,EAAQ/6B,EAAM68B,cAAgBj1B,EAAE9J,EAAEg/B,SAClCkH,EAAmB3zC,EAAMH,KAAzB8zC,EAAmC3zC,EAAMF,GACzC8zC,EAAO5zC,EAAMF,GAAKE,EAAMH,KACxBg0C,EAAQ11C,EAAckB,KAAKsxC,QAAS,SAASxiC,OAASsC,EAAaL,kBAAoB,GACvFwc,EAASlrB,KAAK1D,MAAM0sC,EAAQmJ,IAAU19B,GAAW,EAAI,GAEzD,GAAKmI,GAAW3O,EAAM6jC,OAAtB,CAIA,IAAIxC,EAAa1yB,GAAUtjB,EAAQk1C,WAAW5xB,EAAQ,iBAClD2yB,EAAc3yB,GAAUtjB,EAAQk1C,WAAW5xB,EAAQ,kBAEnD3O,EAAM6jC,QACNxzC,EAAMH,KAAO6B,KAAKD,IACdC,KAAKC,IAAIF,EAAK5B,EAAO+sB,GACrBjrB,EAAMiyC,GAEV5zC,EAAMF,GAAK4B,KAAKD,IACZzB,EAAMH,KAAO+zC,EACbjyC,IAEIqvC,IAAe76B,GAAa86B,GAAe96B,GACnDnW,EAAMH,KAAO6B,KAAKD,IACdC,KAAKC,IAAIF,EAAK5B,EAAO+sB,GACrBjrB,EAAM,GAEV3B,EAAMF,GAAK4B,KAAKC,IAAI3B,EAAMH,KAAO,EAAGG,EAAMF,MAClCkxC,GAAc76B,GAAa86B,IAAgB96B,KACnDnW,EAAMF,GAAK4B,KAAKD,IACZC,KAAKC,IAAIF,EAAM,EAAG3B,EAAK8sB,GACvBjrB,GAEJ3B,EAAMH,KAAO6B,KAAKD,IAAIzB,EAAMF,GAAK,EAAGE,EAAMH,OAG1CG,EAAMH,OAAS8zC,GAAiB3zC,EAAMF,KAAO6zC,IAC7Ct0C,KAAKmrB,KAAKxqB,EAAMH,KAAMG,EAAMF,IAC5BT,KAAKmY,QAAQnM,GAAQhM,KAAK0zC,gBAAgB/yC,QAIlDiyC,KAAM,WACF,GAAI5yC,KAAKyzC,OAAQ,CACb,IAAIW,EAAap0C,KAAKyzC,OAAOW,WACzBA,GACAz4C,EAAQ84C,YAAYL,EAAY,mBAGpC,IAAIzzC,EAAQX,KAAKyzC,OAAO9yC,MACxBX,KAAK6oB,IAAIloB,EAAMH,KAAMG,EAAMF,IAC3BT,KAAKmY,QAAQlM,GAAYjM,KAAK0zC,gBAAgB/yC,WAEvCX,KAAKyzC,SAIpBX,KAAM,SAAS56B,GACX,IACIhY,EADMF,KACQE,QACdkR,EAFMpR,KAEaoR,aACnB2L,EAAS/c,KAAKqN,MAAMm8B,kBAAkBtxB,GACtC1F,EAAapB,EAAaugB,mBAAmB,IAAIv0B,EAAM2f,EAAO3O,EAAGgD,EAAa1C,IAAIF,KAClFhO,EAAOR,KAAKoxC,OAAOlxC,EAAQM,MAC3BC,EAAKT,KAAKoxC,OAAOlxC,EAAQO,IACzB2B,EAAMpC,KAAKoxC,OAAOlxC,EAAQkC,KAC1BE,EAAMtC,KAAKoxC,OAAOlxC,EAAQoC,KAC1BiyC,EAAO9zC,EAAKD,EACZ2nB,EAAM3nB,EAAO+zC,EAAO,EACpB5zC,EAAQ,GACR+zC,EAA+B,IAAlBx8B,EAAEyyB,MAAMgK,MACrBpnB,EAASlrB,KAAK1D,MAAMwpB,EAAM3V,GAE1BxS,KAAKyzC,QAAUiB,IAInB10C,KAAKqN,MAAM0hC,oBAEN39B,EAAalR,QAAQkd,WACtBmQ,IAGJ5sB,EAAMH,KAAO6B,KAAKD,IACdC,KAAKC,IAAIF,EAAK5B,EAAO+sB,GACrBjrB,EAAMiyC,GAGV5zC,EAAMF,GAAK4B,KAAKD,IAAIzB,EAAMH,KAAO+zC,EAAMjyC,GAEvCtC,KAAK0yC,OAAOx6B,GAERlY,KAAKyzC,SACLzzC,KAAKyzC,OAAO9yC,MAAQA,EACpBX,KAAKmY,QAAQnM,GAAQhM,KAAK0zC,gBAAgB/yC,IAC1CX,KAAK4yC,UAIbN,YAAa,SAASp6B,GAClB,IAAIzU,EAAWzD,KAEXqrC,EAAQ1vC,EAAQi5C,gBAAgB18B,GAIpC,GAFAlY,KAAK0yC,OAAOx6B,GAERlY,KAAKyzC,OAAQ,CACb,IAAI9yC,EAAQX,KAAKyzC,OAAO9yC,MAExBuX,EAAEoyB,iBACFpyB,EAAEu6B,kBAEEpwC,KAAKgF,IAAIgkC,GAAS,IAClBA,GAxXQ,GA2XRrrC,KAAKE,QAAQkyC,WAAWt7B,UACxBu0B,IAAU,GAGVrrC,KAAK60C,OAAOxJ,IACZrrC,KAAKmY,QAAQnM,GAAQ,CACjBjM,KAAMC,KAAKoR,aAAalR,QACxBmrC,MAAOA,EACP3yB,cAAeR,EACf1X,KAAMR,KAAK2zC,OAAOhzC,EAAMH,MACxBC,GAAIT,KAAK2zC,OAAOhzC,EAAMF,MAI1BT,KAAKwzC,YACLD,aAAavzC,KAAKwzC,YAGtBxzC,KAAKwzC,WAAasB,YAAW,WACzBrxC,EAASmvC,SACVhmC,MAIXsmC,cAAe,SAASh7B,GACpB,IAAIhY,EAAUF,KAAKE,QACf60C,EAAQ78B,EAAE88B,QAAQ,GAGtB,GAFah1C,KAAK4zC,aAAamB,EAAMtI,MAAOsI,EAAMrI,OAElD,CAIA1sC,KAAKyzC,OAAS,CACV9yC,MAAO,CACHH,KAAMR,KAAKoxC,OAAOlxC,EAAQM,MAC1BC,GAAIT,KAAKoxC,OAAOlxC,EAAQO,MAGhC,IAAImuC,EAAO5uC,KAAK0zC,gBAAgB1zC,KAAKyzC,OAAO9yC,OAExCX,KAAKmY,QAAQpM,GAAc6iC,GAC3B5uC,KAAKyzC,OAAS,KAEdv7B,EAAEoyB,mBAIVgJ,YAAa,WACLtzC,KAAKyzC,SACLzzC,KAAKmY,QAAQlM,GAAYjM,KAAK0zC,gBAAgB1zC,KAAKyzC,OAAO9yC,eACnDX,KAAKyzC,SAIpBL,eAAgB,SAASl7B,GACrB,GAAKlY,KAAKyzC,OAAV,CAIA,IAAIx/B,EAAMjU,KACNqN,EAAQ4G,EAAI5G,MACZiD,EAAQ2D,EAAIw/B,OACZvzC,EAAU+T,EAAI/T,QACdkR,EAAe6C,EAAI7C,aACnBzQ,EAAQ2P,EAAM3P,MACds0C,EAAK5nC,EAAMymC,oBAAoB57B,EAAE88B,QAAQ,GAAG5mC,EAAEg/B,UAAUh/B,EACxD8mC,EAAK7nC,EAAMymC,oBAAoB57B,EAAE88B,QAAQ,GAAG5mC,EAAEg/B,UAAUh/B,EACxD4L,EAAO3X,KAAKD,IAAI6yC,EAAIC,GACpBj7B,EAAQ5X,KAAKC,IAAI2yC,EAAIC,GAEzBh9B,EAAEoyB,iBAEF3pC,EAAMH,KAAO4Q,EAAaugB,mBAAmB,IAAIv0B,EAAM4c,KAAU9Z,EAAQkC,IAEzEzB,EAAMF,GAAK2Q,EAAaugB,mBAAmB,IAAIv0B,EAAM6c,KAAW/Z,EAAQoC,IAExEtC,KAAKmrB,KAAKxqB,EAAMH,KAAMG,EAAMF,IAE5BT,KAAKmY,QAAQnM,GAAQhM,KAAK0zC,gBAAgB/yC,MAG9CywC,OAAQ,SAASjxC,GACb,IAAI4G,EAAQ5G,EAMZ,OAJIA,aAAiBy1B,OACjB7uB,EAAQ/G,KAAKoR,aAAaotB,cAAcr+B,IAGrC4G,GAGX4sC,OAAQ,SAAS5sC,GACb,IAAI5G,EAAQ4G,EAQZ,OAPI/G,KAAKgxC,YACL7wC,EAAQH,KAAKoR,aAAamG,WAAWxQ,IACzB/G,KAAKE,QAAQoC,MACrBnC,EAAQH,KAAKE,QAAQoC,KAItBnC,GAGXg1C,MAAO,SAASh1C,GACZ,IAAIiR,EAAepR,KAAKoR,aACpBrK,EAAQ/G,KAAKoxC,OAAOjxC,GAExB,OAAOiR,EAAatD,QAAQ/G,EAAOA,GAAO,IAG9CokB,KAAM,SAAS3qB,EAAMC,GACjB,IAAIP,EAAUF,KAAKE,QACf4W,EAAU9W,KAAKoR,aAAalR,QAAQ4W,QACpCyW,EAASrtB,EAAQqtB,OACjBlR,EAAUnc,EAAQmc,QAClBjC,EAASla,EAAQsxC,UAAUp3B,OAC3BJ,EAAOlD,EAAUrW,EAAKD,EACtByZ,EAAQnD,EAAUtW,EAAOC,EACzB6+B,EAAO,KAAOxoB,EAAU,EAAI,GAE5BpI,EAAM1O,KAAKm1C,MAAMn7B,GACjBo7B,EAAgBz2C,EAAM+P,EAAI4wB,GAAQ/R,EAAOvT,KAAOqC,EAAQrC,MAE5Dlb,EAAckB,KAAKyxC,SAAU,CACzB3iC,MAAOsmC,IAEXt2C,EAAckB,KAAKwxC,UAAW,CAC1Bx3B,KAAMo7B,IAGV1mC,EAAM1O,KAAKm1C,MAAMl7B,GAEjB,IAAIo7B,EAAiB12C,EAAMuB,EAAQ4O,OAASJ,EAAI4wB,GAAQ/R,EAAOvT,KAAOqC,EAAQrC,OAC9Elb,EAAckB,KAAK0xC,UAAW,CAC1B5iC,MAAOumC,IAGX,IAAIC,EAAWp1C,EAAQ4O,MAAQumC,EAC3BC,IAAap1C,EAAQ4O,QACrBwmC,GAAYl7B,EAAOH,OAGvBnb,EAAckB,KAAK0xC,UAAW,CAC1B13B,KAAMs7B,IAEVx2C,EAAckB,KAAKwxC,UAAW,CAC1B1iC,MAAOzM,KAAKC,IAAIpC,EAAQ4O,OAASsmC,EAAgBC,GAAkBj7B,EAAOH,MAAO,MAIzF4O,IAAK,SAASroB,EAAMC,GAChB,IAAIP,EAAUF,KAAKE,QACfkC,EAAMpC,KAAKoxC,OAAOlxC,EAAQkC,KAC1BE,EAAMtC,KAAKoxC,OAAOlxC,EAAQoC,KAC1BizC,EAAY32C,EAAWoB,KAAKoxC,OAAO5wC,GAAO4B,EAAKE,GAC/CkzC,EAAU52C,EAAWoB,KAAKoxC,OAAO3wC,GAAK80C,EAAY,EAAGjzC,GAErDpC,EAAQoW,SACRtW,KAAKmrB,KAAKoqB,EAAWC,GAGzBt1C,EAAQM,KAAOR,KAAK2zC,OAAO4B,GAC3Br1C,EAAQO,GAAKT,KAAK2zC,OAAO6B,IAG7BX,OAAQ,SAASxJ,GACb,IAAInrC,EAAUF,KAAKE,QACfkC,EAAMpC,KAAKoxC,OAAOlxC,EAAQkC,KAC1BE,EAAMtC,KAAKoxC,OAAOlxC,EAAQoC,KAC1BmzC,EAAOv1C,EAAQkyC,WAAWnF,KAC1BzsC,EAAOR,KAAKoxC,OAAOlxC,EAAQM,MAC3BC,EAAKT,KAAKoxC,OAAOlxC,EAAQO,IACzBE,EAAQ,CAAEH,KAAMA,EAAMC,GAAIA,GAC1B6zC,EAAW12C,EAAW,GAAI+C,GAqB9B,GAnBIX,KAAKyzC,SACL9yC,EAAQX,KAAKyzC,OAAO9yC,OAGpB80C,IAAS94C,IACTgE,EAAMH,KAAO5B,EACTA,EAAW4B,EAAO6qC,EAAO,EAAG5qC,EAAK,GACjC2B,EAAKE,IAITmzC,IAASn5C,IACTqE,EAAMF,GAAK7B,EACPA,EAAW6B,EAAK4qC,EAAO1qC,EAAMH,KAAO,EAAG8B,GACvCF,EACAE,IAIJ3B,EAAMH,OAAS8zC,EAAS9zC,MAAQG,EAAMF,KAAO6zC,EAAS7zC,GAEtD,OADAT,KAAK6oB,IAAIloB,EAAMH,KAAMG,EAAMF,KACpB,GAIfwsC,KAAM,SAAS5B,EAAOtuB,GAClB,IAAI7c,EAAUF,KAAKE,QACfkC,EAAMpC,KAAKoxC,OAAOlxC,EAAQkC,KAC1BE,EAAMtC,KAAKoxC,OAAOlxC,EAAQoC,KAC1B9B,EAAOR,KAAKoxC,OAAOlxC,EAAQM,MAC3BC,EAAKT,KAAKoxC,OAAOlxC,EAAQO,IACzBE,EAAQ,CAAEH,KAAMA,EAAMC,GAAIA,GAC1B6zC,EAAW12C,EAAW,GAAI+C,GAG1BmW,EADM9W,KAAKoR,aAAalR,QACV4W,QACd+Q,EAASprB,GAAKqa,EAAU,IAAM,KAC9Bka,EAAUhxB,KAAKoR,aAAa4f,UAC5B0kB,EAAWrzC,KAAKgF,IAAI2pB,EAAQnJ,GAAU9K,EAAOtgB,IAC7C8c,EAAOyX,EAAQliB,QACfkM,EAAWrc,EAAM+2C,EAAWn8B,EAAM,GAClCo8B,EAAWh3C,EAAMqc,EAAWqwB,GAC5BuK,EAAWj3C,GAAO,EAAIqc,GAAYqwB,GAiBtC,GAfIrrC,KAAKyzC,SACL9yC,EAAQX,KAAKyzC,OAAO9yC,OAGxBA,EAAMH,KAAO5B,EACTA,EAAW4B,EAAOm1C,EAAU,EAAGl1C,EAAK,GACpC2B,EAAKE,GAGT3B,EAAMF,GAAK7B,EACPA,EAAW6B,EAAKm1C,EAAUj1C,EAAMH,KAAO,EAAG8B,GAC1CF,EACAE,GAGA3B,EAAMH,OAAS8zC,EAAS9zC,MAAQG,EAAMF,KAAO6zC,EAAS7zC,GAEtD,OADAT,KAAK6oB,IAAIloB,EAAMH,KAAMG,EAAMF,KACpB,GAIf0X,QAAS,SAASrX,EAAM8tC,GACpB,OAAQ5uC,KAAK+wC,UAAY/wC,KAAKqN,OAAO8K,QAAQrX,EAAM8tC,MAI3DrxC,EAAkBuzC,GAAW,CACzBx6B,SAAS,EACT87B,WAAY,CACRnF,KAAM,QAEV7qC,IAAKnG,EACLqG,IAAKtG,IAGT,IAAI65C,GAAUzmB,GAAYvvB,OAAO,CAC7BiwB,KAAM,SAAS1vB,GACX,GAAKA,GAAUA,EAAMwb,iBAAkB5b,KAAK81C,UAAY91C,KAAK81C,WAAa11C,GAA1E,CAIA,IAAIF,EAAUtC,EAAW,GAAIoC,KAAKE,QAASE,EAAMF,QAAQgpB,SACrDnO,EAAS3a,EAAMwb,gBAEfb,GACA/a,KAAK81C,SAAW11C,EAChBgvB,GAAY9hB,GAAGwiB,KAAKviB,KAAKvN,KAAM,CAC3BI,MAAOA,EACP2a,OAAQA,GACT7a,EAASE,IAEZJ,KAAKmwB,SAIbA,KAAM,kBACKnwB,KAAK81C,SACZ1mB,GAAY9hB,GAAG6iB,KAAK5iB,KAAKvN,SAI7B+1C,GAAgB3mB,GAAYvvB,OAAO,CACnCC,KAAM,SAAS4B,EAAUxB,GACrBkvB,GAAY9hB,GAAGxN,KAAKyN,KAAKvN,KAAM0B,EAASyP,aAAcjR,GAEtDF,KAAK0B,SAAWA,EAChB1B,KAAKuwB,cAAgB7uB,EAASyP,aAAa2G,QAG/C2Y,OAAQ,SAASlf,EAAQwL,GACrB,IAAIi5B,EAAgBn3C,EAAK0S,GAAQ,SAASnR,GACtC,IAAI8oB,EAAU9oB,EAAM0D,OAAOolB,QAG3B,QAFeA,IAA+B,IAApBA,EAAQ5S,YAKtC,GAAI0/B,EAAc/0C,OAAS,EAAG,CAC1B,IAAIb,EAAQ41C,EAAc,GACtBz1C,EAAOP,KAAK0B,SAAS0P,aAAatD,QAAQ1N,EAAMoS,YAEhDuI,EAASgC,EAAS/c,KAAKi2C,YAAYl5B,EAAQxc,GAAQP,KAAKk2C,eAAe91C,EAAOG,GAElFP,KAAK8vB,KAAK,CACN/U,OAAQA,EACRo7B,QAAQ,EACR5kC,OAAQA,EACRgE,SAAUnV,EAAMmV,SAChB6gC,aAAcp2C,KAAKuwB,cAAcxY,KAAK/X,KAAKE,QAAQm2C,eAAgBj2C,EAAMmV,UACzEzR,OAAQ9D,KAAK0B,SAASoC,QACvB9D,KAAKE,WAIhB+1C,YAAa,SAAS71C,EAAOG,GAWzB,OAVWP,KAAK0B,SAAS0P,aAMflR,QAAQkS,WACdhS,EAAMgO,EAAI7N,EAAKyN,SAASI,GAGrB,CACHhO,MAAOA,EACPyZ,MAXQ,CACRoC,WAAY,OACZ7J,SAAU,YAalB8jC,eAAgB,SAAS91C,EAAOG,GAC5B,IAAImO,EAAMtO,EAAM+U,MAAM/T,KAAK6wB,YACvB7f,EAAWpS,KAAK0B,SAAS0P,aAAalR,QAAQkS,SAC9CpE,EAASU,EAAIV,SACbsoC,EAAa/1C,EAAKyN,SAatB,MAAO,CACH5N,MAPAgS,EACc,IAAIhV,EAAM4Q,EAAOI,EAAGkoC,EAAWjoC,GAE/B,IAAIjR,EAAMk5C,EAAWloC,EAAGJ,EAAOK,GAK7CwL,MAdQ,CACRoC,WAAY,SACZ7J,SAAU,cAiBtB7U,EAAkBw4C,GAAe,CAC7BM,eAAgB,UAGpB,IAAIE,GAAoBl3C,GAAUQ,OAAO,CACrC0f,MAAO,WACH,IACI9G,EADMzY,KACQyY,QACdvY,EAFMF,KAEQE,QAGlB,GAFWuY,EAAQwY,OAET,CACNjxB,KAAK6nB,OAAS3nB,EAAQ2nB,OACtB,IAAI9nB,EAAOG,EAAQkS,SAAW1V,EAAID,EAE9B+5C,EAAYx2C,KAAKw2C,UAAY,IAAI92C,GAAc,EAAG,GACtD82C,EAAUz2C,GAAQgI,GAElB0Q,EAAQ9Y,UAAUA,KACb60C,MAAMgC,EAAUpoC,EAAGooC,EAAUnoC,SAGlCrO,KAAKy2C,SAIbh3B,KAAM,SAASC,GACX,IAAIg3B,EAAS/6C,EAAQgkB,iBAAiB3f,KAAKw2C,UAAUpoC,EAAG,EAAGsR,GACvDi3B,EAASh7C,EAAQgkB,iBAAiB3f,KAAKw2C,UAAUnoC,EAAG,EAAGqR,GAE3D1f,KAAKyY,QAAQ9Y,UAAUA,KAClB60C,MAAMkC,EAAQC,EAAQ32C,KAAK6nB,UAIpC4uB,MAAO,WACHp3C,GAAUiO,GAAGmpC,MAAMlpC,KAAKvN,MACxBA,KAAKyY,QAAQ9Y,UAAU,SAI/BpC,EAAkBg5C,GAAmB,CACjCp2B,SAAUvY,KAGdtI,GAAiBgG,QAAQjC,SAAS0F,GAAKwtC,IAEvC,IAAIK,GAAkBv3C,GAAUQ,OAAO,CACnC0f,MAAO,WACH,IAAIvR,EAAShO,KAAKgO,OAAShO,KAAKyY,QAAQwY,OAAOjjB,SAC/ChO,KAAKyY,QAAQ9Y,UAAUA,KAClB60C,MAAMzsC,GAAaA,GAAaiG,KAIzCyR,KAAM,SAASC,GACX1f,KAAKyY,QAAQ9Y,UAAUA,KAClB60C,MAAM90B,EAAKA,EAAK1f,KAAKgO,YAKlCzQ,EAAkBq5C,GAAiB,CAC/BC,OAAQ,mBAGZv3C,GAAiBgG,QAAQjC,SAAS4F,GAAQ2tC,IAE1C,IAAIE,GAAkBz3C,GAAUQ,OAAO,CACnC0f,MAAO,WACHvf,KAAK+2C,OAAS/2C,KAAKyY,QAAQ+B,UAC3Bxa,KAAKyY,QAAQ+B,QAAQ,IAGzBiF,KAAM,SAASC,GACX1f,KAAKyY,QAAQ+B,QAAQkF,EAAM1f,KAAK+2C,WAIxCx5C,EAAkBu5C,GAAiB,CAC/B32B,SAAU,IACV02B,OAAQ,WAGZv3C,GAAiBgG,QAAQjC,SAASwE,GAAQivC,IAE1C,IAAIE,GAAe33C,GAAUQ,OAAO,CAChC0f,MAAO,WACHvf,KAAKyY,QAAQ9Y,UAAUA,KAClB60C,MAAMzsC,GAAaA,GAAa/H,KAAKE,QAAQ8N,UAItDyR,KAAM,SAASC,GACX1f,KAAKyY,QAAQ9Y,UAAUA,KAClB60C,MAAM90B,EAAKA,EAAK1f,KAAKE,QAAQ8N,YAK1CzQ,EAAkBy5C,GAAc,CAC5BH,OAAQ,iBACR12B,SAAUvY,KAGdtI,GAAiBgG,QAAQjC,SAASuG,GAAKotC,IAEvC,IAAIC,GAAmBrrB,GAAa/rB,OAAO,CACvC+R,OAAQ,WACJga,GAAate,GAAGsE,OAAOrE,KAAKvN,MAE5BA,KAAKme,kBAGTO,cAAe,SAAShR,EAAYoI,EAAe7D,GAU/C,OAAO,IATK6D,EAAcgL,QAGZlY,GACEiV,GAEAtB,IAGK7O,EAAYoI,EAAe7D,IAGpD2O,gBAAiB,WAEb,OADagL,GAAate,GAAGsT,gBAAgBrT,KAAKvN,MACpC+D,OAAO/D,KAAKqe,YAG9B8N,mBAAoB,SAAShsB,EAAO4e,GAChC,GAAIA,IAAkBxW,GAAM,CACxB,IAAI2uC,EAAe,CACf9oC,EAAGjO,EAAMiO,EACTC,EAAGlO,EAAMkO,GAQb,OANK+a,GAAS8tB,EAAa9oC,KACvB8oC,EAAa9oC,EAAI,GAEhBgb,GAAS8tB,EAAa7oC,KACvB6oC,EAAa7oC,EAAI,GAEd6oC,MAKnBt5C,EAAWq5C,GAAiB9kC,UAAW+L,IAEvC,IAAIi5B,GAAatgB,GAAah3B,OAAO,CACjCi3B,WAAY,WACR92B,KAAK4sB,WAAa,GAClB5sB,KAAK8sB,WAAa,GAElB9sB,KAAKo3C,kBAAoB,IAAIvzB,GAC7B7jB,KAAKq3C,kBAAoB,IAAIxzB,IAGjCjS,OAAQ,SAAS2lB,GACb,IAAI9zB,EAAWzD,UACD,IAAVu3B,IAAoBA,EAAQv3B,KAAKu3B,OAIrC,IAFA,IAAI+B,EAAet5B,KAAKq5B,oBAEfp3B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIb,EAAOm2B,EAAMt1B,GACb4iC,EAAavL,EAAal4B,EAAKlB,QAAQY,MAAQ,YAAc,GACjE2C,EAAS60B,YAAYuM,GACrB,IAAIyS,EAAiB7zC,EAAS+1B,oBAAoBqL,GAE7CyS,IAIL7zC,EAAS8zC,mBACLliB,GAAmBiiB,EAAgBhtC,IACnClJ,GAGJqC,EAAS+zC,uBACLniB,GAAmBiiB,EAAgB/sC,IACnCnJ,GAGJqC,EAASg0C,kBACLpiB,GAAmBiiB,EAAgBruC,IACnC7H,IAIRpB,KAAK03C,WAAWngB,IAGpBrE,YAAa,SAAS7lB,EAAOjM,GACzBpB,KAAKo3C,kBAAkBrzB,OAAO1W,EAAMye,aACpC9rB,KAAKq3C,kBAAkBtzB,OAAO1W,EAAM0e,aAEpC8K,GAAavpB,GAAG4lB,YAAY3lB,KAAKvN,KAAMqN,EAAOjM,IAGlDgyB,WAAY,SAASrzB,GACjB,IAAI6T,EAAW7T,EAAKG,QAAQY,KAE5B+1B,GAAavpB,GAAG8lB,WAAW7lB,KAAKvN,KAAMD,GAElCA,EAAKG,QAAQkS,UACbpS,KAAKq3C,kBAAkBnzB,MAAMtQ,UACtB5T,KAAK8sB,WAAWlZ,KAEvB5T,KAAKo3C,kBAAkBlzB,MAAMtQ,UACtB5T,KAAK4sB,WAAWhZ,IAGvB7T,IAASC,KAAK6sB,cACP7sB,KAAK6sB,MAGZ9sB,IAASC,KAAK+sB,cACP/sB,KAAK+sB,OAIpBwM,eAAgB,SAASz1B,GACrB,IAAI5D,EAAUF,KAAKE,QACfosB,EAAYxoB,EAAOyoB,MACnBorB,EAAe,GAAG5zC,OAAO7D,EAAQqsB,OACjCA,EAAQ1tB,EAAK84C,GAAc,SAASziB,GAAK,OAAOA,EAAEp0B,OAASwrB,KAAc,GACzEE,EAAY1oB,EAAO2oB,MACnBmrB,EAAe,GAAG7zC,OAAO7D,EAAQusB,OACjCA,EAAQ5tB,EAAK+4C,GAAc,SAAS1iB,GAAK,OAAOA,EAAEp0B,OAAS0rB,KAAc,GAEzE+a,GADQrnC,EAAQq3B,OAAS,CAAE,KACH,GAAGz2B,MAAQ,UAGvC,OAFgByrB,GAAS,IAAInrB,OAASqrB,GAAS,IAAIrrB,MAAQmmC,GAK/DgQ,mBAAoB,SAASzzC,EAAQ1C,GAC7B0C,EAAO7C,OAAS,GAChBjB,KAAKkzB,YACD,IAAItH,GAAa5rB,KAAM,CAAE8D,OAAQA,EAAQ0S,KAAMpV,EAAKlB,QAAQsW,OAC5DpV,IAKZo2C,uBAAwB,SAAS1zC,EAAQ1C,GACjC0C,EAAO7C,OAAS,GAChBjB,KAAKkzB,YACD,IAAI+jB,GAAiBj3C,KAAM,CAAE8D,OAAQA,EAAQ0S,KAAMpV,EAAKlB,QAAQsW,OAChEpV,IAKZq2C,kBAAmB,SAAS3zC,EAAQ1C,GAC5B0C,EAAO7C,OAAS,GAChBjB,KAAKkzB,YACD,IAAI1F,GAAYxtB,KAAM,CAAE8D,OAAQA,EAAQ0S,KAAMpV,EAAKlB,QAAQsW,OAC3DpV,IAKZy2C,aAAc,SAAS33C,EAASkS,EAAU4E,GAYtC,IAXA,IA2BI8gC,EA3BAlkC,EAAW1T,EAAQY,KACnBi3C,EAAY3lC,EAAWpS,KAAK8sB,WAAa9sB,KAAK4sB,WAC9Coc,EAAU52B,EAAWpS,KAAKq3C,kBAAoBr3C,KAAKo3C,kBACnD3hB,EAAc73B,EAAW,CAAEkZ,SAAU1E,GAAYpS,KAAKmR,aAAa8U,KAAO/lB,EAAS,CAAEkS,SAAUA,IAC/F4lC,EAAQ/iB,GAAiBQ,EAAY/xB,KAAM4I,IAC3C28B,EAAeD,EAAQ7kB,QACvBilB,EAAmB4O,EAAQ,CAAE51C,IAAK,GAAKE,IAAK,GAAM,CAAEF,IAAK,EAAGE,IAAK,GACjE3B,EAAQqoC,EAAQ7kB,MAAMvQ,IAAaq1B,GAAgBG,EACnD6O,EAAc,CAAExiB,EAAYrzB,IAAKqzB,EAAYnzB,KAC7CwB,EAAS9D,KAAK8D,OAETmO,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAAY,CACzD,IAAI6D,EAAgBhS,EAAOmO,GACvBimC,EAAiBpiC,EAAc1D,EAAW,QAAU,SACxD,GAAK8lC,IAAmBziB,EAAY30B,MAAwB,IAAdkW,IAAoBkhC,EAAiB,CAC/E,IAAIC,EAAkBn1C,GAAasC,QAAQtB,UAAU8R,EAAe,GAAGvS,YACvE00C,EAAY5yC,KAAK8yC,EAAgB/lC,EAAW,IAAM,MAElD,OAIU,IAAd4E,GAAmBiyB,IACnBtoC,EAAMyB,IAAMC,KAAKD,IAAIzB,EAAMyB,IAAK6mC,EAAa7mC,KAC7CzB,EAAM2B,IAAMD,KAAKC,IAAI3B,EAAM2B,IAAK2mC,EAAa3mC,MAKjD,IAAK,IAAIL,EAAI,EAAGA,EAAIg2C,EAAYh3C,OAAQgB,IACpC,GAAIg2C,EAAYh2C,aAAc2zB,KAAM,CAChCkiB,GAAe,EACf,MAaR,IAAI/3C,EAAO,IARPk1B,GAAiBQ,EAAY/xB,KAAM7G,KAAW44B,EAAY/xB,MAAQo0C,EACvDn8C,EAAQy8C,cACZJ,EACIr8C,EAAQ0tC,gBAER1tC,EAAQ2tC,aAGC3oC,EAAMyB,IAAKzB,EAAM2B,IAAKmzB,EAAaz1B,KAAKmR,cAGhE,GAFApR,EAAKiX,UAAYA,EAEbpD,EAAU,CACV,GAAImkC,EAAUnkC,GACV,MAAM,IAAIzM,OAAQiL,EAAW,IAAM,KAAO,mBAAqBwB,EAAW,uBAE9EmkC,EAAUnkC,GAAY7T,EAK1B,OAFAC,KAAK+yB,WAAWhzB,GAETA,GAGX23C,WAAY,SAASngB,GASjB,IARA,IAAI9zB,EAAWzD,KAEXE,EAAUF,KAAKE,QACfm4C,EAAe,GAAGt0C,OAAO7D,EAAQqsB,OACjCwM,EAAQ,GACRuf,EAAe,GAAGv0C,OAAO7D,EAAQusB,OACjCuM,EAAQ,GAEHh4B,EAAM,EAAGA,EAAMq3C,EAAap3C,OAAQD,IAAO,CAChD,IAAIilC,EAAWxiC,EAASq0B,SAASugB,EAAar3C,GAAKI,MAC/C5D,EAAQyoC,EAAU1O,IAClBwB,EAAM1zB,KAAK5B,EAASo0C,aAAaQ,EAAar3C,IAAM,EAAOA,IAInE,IAAK,IAAIuzB,EAAQ,EAAGA,EAAQ+jB,EAAar3C,OAAQszB,IAAS,CACtD,IAAIgkB,EAAa90C,EAASq0B,SAASwgB,EAAa/jB,GAAOnzB,MACnD5D,EAAQ+6C,EAAYhhB,IACpByB,EAAM3zB,KAAK5B,EAASo0C,aAAaS,EAAa/jB,IAAQ,EAAMA,IAIpEv0B,KAAK6sB,MAAQ7sB,KAAK6sB,OAASkM,EAAM,GACjC/4B,KAAK+sB,MAAQ/sB,KAAK+sB,OAASiM,EAAM,IAGrC6G,eAAgB,SAASxyB,EAAO6K,EAAGqxB,GAQ/B,IAPA,IAAIxsB,EAAS1P,EAAMm8B,kBAAkBtxB,GACjC9X,EAAQ,IAAIhD,EAAM2f,EAAO3O,EAAG2O,EAAO1O,GACnCulB,EAAU5zB,KAAKe,KACfE,EAAS2yB,EAAQ3yB,OACjBu3C,EAAU,GACVC,EAAU,GAELx2C,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIlC,EAAO6zB,EAAQ3xB,GACfF,EAAShC,EAAKG,QAAQkS,SAAWqmC,EAAUD,EAC3CE,EAAe34C,EAAKO,SAASF,GACZ,OAAjBs4C,GACA32C,EAAOsD,KAAKqzC,GAIhBF,EAAQv3C,OAAS,GAAKw3C,EAAQx3C,OAAS,GACvCoM,EAAM8K,QAAQoxB,EAAW,CACrB9wB,QAAS3a,EAAaoa,GACtBQ,cAAeR,EACf9J,EAAGynB,GAAkB2iB,GACrBnqC,EAAGwnB,GAAkB4iB,MAKjC/O,kBAAmB,SAAS3pC,EAAMG,GAC9B,IAAIkS,EAAWrS,EAAKG,QAAQkS,SACxBrR,EAAOf,KAAK84B,UAAU94B,KAAKu3B,OAC3BxwB,GAASqL,EAAWrR,EAAKsN,EAAItN,EAAKqN,GAAGzH,QAAQ5G,GAEjD44C,GAAoB34C,KAAKE,QAAS6G,EAAOqL,EAAUlS,GACnDy4C,GAAoB34C,KAAKk3B,gBAAiBnwB,EAAOqL,EAAUlS,MAInE,SAASy4C,GAAoBhP,EAAe3yB,EAAW5E,EAAUlS,GAC7D,IAAIu1B,EAAe,GAAG1xB,OAAOqO,EAAWu3B,EAAcld,MAAQkd,EAAcpd,OAAQvV,GACpFpZ,EAAW63B,EAAav1B,GAG5B3C,EAAkB45C,GAAY,CAC1B5qB,MAAO,GACPE,MAAO,KAGX7uB,EAAWu5C,GAAWhlC,UAAWytB,IAEjC,IAAIgZ,GAAaz7C,EAAa0C,OAAO,CACjCC,KAAM,SAASK,EAAO04C,EAAQ34C,GAC1B/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKG,MAAQA,EACbH,KAAK64C,OAASA,GAGlBjnC,OAAQ,WACJ,IAAIyH,EAASrZ,KAAKE,QAAQmZ,OACtBlI,EAAenR,KAAKmV,MAAMhE,aAC1BwI,EAAY3Z,KAAKG,MAErB,IAAIH,KAAKsZ,YAA8B,IAAjBtZ,KAAKsW,QAA3B,CAGAtW,KAAKsZ,WAAY,EAEjB,IAAII,EAAgB3b,EAAYsb,GAC5BhV,EAAYrE,KAAKqE,YAQrB,GANIqV,EACAC,EAAYD,EAAcrV,GACnBgV,EAAOvB,SACd6B,EAAYxI,EAAa2G,OAAOC,KAAKsB,EAAOvB,OAAQ6B,IAGpDN,EAAO/C,UAAYqD,GAA2B,IAAdA,GAAkB,CAClD,GAAIN,EAAO2B,WAAa7e,GAAUkd,EAAO2B,WAAaxO,GAC7C6M,EAAO/J,QACR+J,EAAO/J,MAAQ3T,EAAQm9C,cAAc94C,KAAKE,QAAQoP,QAEjD+J,EAAOc,aACRd,EAAOc,WAAana,KAAKE,QAAQoP,WAElC,CACH,IAAIypC,EAAc5nC,EAAa6nC,MAAMC,eAAe5/B,OACpDA,EAAO/J,MAAQ+J,EAAO/J,OAASypC,EAAYzpC,MAC3C+J,EAAOc,WAAad,EAAOc,YAAc4+B,EAAY5+B,WAGzDna,KAAK+Y,MAAQ,IAAI/a,EAAQ2b,EAAW/b,EAAW,GAAIyb,EAAQ,CACvDQ,MAAO1d,EACP2d,OAAQ,GACR/J,UAAW,CACPrM,KAAMmE,GACNmI,MAAOhQ,KAAKk5C,kBAEhB70C,GAEJrE,KAAK5B,OAAO4B,KAAK+Y,UAIzBvL,OAAQ,SAASC,GACbzN,KAAK4R,SACL5R,KAAK0O,IAAMjB,EACXzN,KAAK6a,eAGTA,YAAa,WACT,IACIs+B,EADMn5C,KACcE,QAAQmZ,OAC5BN,EAFM/Y,KAEM+Y,MACZ8/B,EAAS74C,KAAK64C,OAAOj+B,QACrBw+B,EAAiBD,EAAc7D,SAC/B+D,EAAQR,EAAOS,SAEnB,GAAIvgC,EAAO,CACP,IAEIwgC,EAFAC,EAAczgC,EAAMrK,IAAIK,SACxB0qC,EAAa1gC,EAAMrK,IAAII,QAG3B,GAAIqqC,EAAcn+B,WAAa7e,EAC3B08C,EAAO3rB,OAAS7qB,KAAKgF,KAAKwxC,EAAO3rB,OAASssB,GAAe,GAAKA,EAC9DD,EAAKV,EAAOz4C,MAAMi5C,GAClBtgC,EAAMvL,OAAO,IAAInQ,EAAIk8C,EAAGnrC,EAAGmrC,EAAGlrC,EAAImrC,EAAc,EAAGD,EAAGnrC,EAAGmrC,EAAGlrC,SACzD,GAAI8qC,EAAcn+B,WAAaxO,GAClCqsC,EAAO3rB,OAAS2rB,EAAO3rB,OAASssB,EAAc,EAC9CD,EAAKV,EAAOz4C,MAAMi5C,GAClBtgC,EAAMvL,OAAO,IAAInQ,EAAIk8C,EAAGnrC,EAAGmrC,EAAGlrC,EAAImrC,EAAc,EAAGD,EAAGnrC,EAAGmrC,EAAGlrC,QACzD,CACH,IAAIM,GACJ4qC,EAAKV,EAAOj+B,QAAQi6B,OAAOuE,GAAgBh5C,MAAMi5C,IAC1CjrC,GAAKyqC,EAAO7qC,OAAOI,GACtBO,EAAK4qC,EAAGnrC,EAAIqrC,EACZ1gC,EAAM+0B,YAAcnxC,IAEpBgS,EAAK4qC,EAAGnrC,EAAIqrC,EACZ1gC,EAAM+0B,YAAcxxC,GAExByc,EAAMvL,OAAO,IAAInQ,EAAIsR,EAAI4qC,EAAGlrC,EAAImrC,EAAaD,EAAGnrC,EAAGmrC,EAAGlrC,OAKlEY,aAAc,WACV,IAAIxL,EAAWzD,KAGX64C,EADM74C,KACO64C,OACb34C,EAFMF,KAEQE,QAIlB,GAFA/C,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAE9BA,KAAKG,MACL,GAAID,EAAQmB,OAAQ,CAChB,IAAIq4C,GAAcb,EAAOa,WAAa,KAAO,IACzCr4C,EAASnB,EAAQmB,OAAO,CACxBkU,SAAUvV,KAAKuV,SACfF,SAAUrV,KAAKqV,SACflV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,OACbsS,WAAYpW,KAAKoW,WACjBpI,OAAQ,IAAItO,GAAcm5C,EAAO7qC,OAAOI,EAAGyqC,EAAO7qC,OAAOK,GACzD6e,OAAQ2rB,EAAO3rB,OACfysB,YAAad,EAAOc,YACpBD,WAAYA,EACZE,SAAUF,EAAab,EAAOQ,MAC9Bn5C,QAASA,EACTkP,OAAQpP,KAAKqP,YACbJ,aAAc,WACV,IAAI6D,EAAQ,IAAIvT,GAGhB,OAFAkE,EAASo2C,oBAAoB/mC,GAEtBA,KAIXzR,GACArB,KAAKqB,OAAOjD,OAAOiD,QAGvBrB,KAAK65C,oBAAoB75C,KAAKqB,SAK1Cw4C,oBAAqB,SAAS/mC,GAC1B,IACI+lC,EADM74C,KACO64C,OACb34C,EAFMF,KAEQE,QACd45C,EAAgB55C,EAAQka,QAAU,GAClCA,EAAS0/B,EAAchrC,MAAQ,EAAI,CACnCa,OAAQ,CACJL,MAAOwqC,EAAcxqC,MACrBR,MAAOgrC,EAAchrC,MACrB0L,QAASs/B,EAAct/B,QACvB5K,SAAUkqC,EAAclqC,WAE5B,GACAN,EAAQpP,EAAQoP,MAChB8R,EAAO,CACP9R,MAAOA,EACPkL,QAASta,EAAQsa,SAEjBnZ,EAASrB,KAAK0e,cAAcm6B,EAAQj7C,EAAW,CAC/CwjB,KAAMA,EACNzR,OAAQ,CACJ6K,QAASta,EAAQsa,SAErBvK,OAAQ/P,EAAQ+P,QACjBmK,IAEHtH,EAAM1U,OAAOiD,GAET0jB,GAAmB7kB,IACnB4S,EAAM1U,OAAO4B,KAAK0lB,sBAAsBrkB,EAAQ,CAC5CskB,UAAWrW,EACXyqC,aAAc34B,GACfxjB,EAAW,CACVoQ,OAAQ,CAAE6qC,EAAO7qC,OAAOI,EAAGyqC,EAAO7qC,OAAOK,GACzCsrC,YAAad,EAAOc,YACpBzsB,OAAQ2rB,EAAO3rB,OACf8sB,WAAW,GACZ95C,EAAQ8kB,YAInBtG,cAAe,SAASm6B,EAAQ34C,GAC5B,OAAIA,EAAQ+5C,cACD,IAAI96C,GAAQiuB,OAAO,IAAI3tB,GAAS2tB,OAAO,IAAI1tB,GAAcm5C,EAAO7qC,OAAOI,EAAGyqC,EAAO7qC,OAAOK,GAAIwqC,EAAO3rB,QAAShtB,GAGhHvE,EAAQu+C,aAAa50C,QAAQ60C,WAAWtB,EAAQ34C,IAG3DmgB,gBAAiB,WACb,IACIngB,EADMF,KACQE,QACd8N,EAFMhO,KAEO64C,OAAO7qC,OAExBpQ,EAAWsC,EAAS,CAChB6P,UAAW,CACP/B,OAAQ,CAAEA,EAAOI,EAAGJ,EAAOK,GAC3B2B,MAAOhQ,KAAKk5C,kBAIpB/7C,EAAamQ,GAAG+S,gBAAgB9S,KAAKvN,OAGzCkb,gBAAiB,SAAShb,GACtB,IAAIib,EAAYnb,KAAKE,QAAQib,WAAa,GACtCf,EAASe,EAAUf,QAAU,GAEjC,OAAOpa,KAAK0e,cAAc1e,KAAK64C,OAAQj7C,EAAW,GAAIsC,EAAS,CAC3DkhB,KAAM,CACF9R,MAAO6L,EAAU7L,MACjBkL,QAASW,EAAUX,SAEvB7K,OAAQ,CACJ6K,QAASJ,EAAOI,QAChB1L,MAAOsL,EAAOtL,MACdQ,MAAO8K,EAAO9K,WAK1BiM,gBAAiB,WACb,OAAOvb,KAAKqB,OAAOud,SAAS,IAGhCpD,oBAAqB,WACjB,IAAIq9B,EAAS74C,KAAK64C,OAElB,MAAO,CACH34C,QAASF,KAAKE,QACdgtB,OAAQ2rB,EAAO3rB,OACfysB,YAAad,EAAOc,YACpB3rC,OAAQ,IAAItO,GAAcm5C,EAAO7qC,OAAOI,EAAGyqC,EAAO7qC,OAAOK,GACzDqrC,WAAYb,EAAOa,WACnBE,SAAUf,EAAOQ,MAAQR,EAAOa,WAChCr4C,OAAQrB,KAAKqB,SAIrBua,cAAe,WACX,IAAIi9B,EAAS74C,KAAK64C,OAAOj+B,QAAQi6B,OA98TpB,GA+8TTuF,EAAWvB,EAAOS,SAGtB,MAAO,CACHl5C,MAHWy4C,EAAOz4C,MAAMg6C,GAIxBvgC,MAAOwgC,GAAiBD,EAAW,OAI3CxgC,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CzT,UAAW,WACP,MAAO,CACHgR,SAAUrV,KAAKqV,SACfE,SAAUvV,KAAKuV,SACfpV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,OACbsS,WAAYpW,KAAKoW,eAKzBkkC,GAAS37C,EAAMhD,EAAQ4+C,IAAI,IAAKz9C,GAChC09C,GAAS77C,EAAMhD,EAAQ4+C,IAAI,IAAKz9C,GAEpC,SAASu9C,GAAiBhB,GACtB,IAAIoB,EAAU9+C,EAAQ4+C,IAAIlB,GACtBqB,EAAO/7C,EAAM0D,KAAKs4C,IAAIF,GAAU39C,GAChC89C,EAASj8C,EAAM0D,KAAKw4C,IAAIJ,GAAU39C,GAoBtC,MAAO,CACHmf,WAlBA5Z,KAAKgF,IAAIqzC,GAAQF,GACJr+C,EACNy+C,EAAS,EACHj+C,EAEAL,EAcb8V,SAVA/P,KAAKgF,IAAIqzC,GAAQJ,GACNn+C,EACJu+C,EAAO,EACHr+C,EAEAD,GASnBmB,EAAkBq7C,GAAY,CAC1BtpC,MAAO/S,EACPyoB,QAAS,CACLC,SAAU,gBAEd7K,OAAQ,CACJtL,MAAO,IAEXuK,OAAQ,CACJ/C,SAAS,EACTg/B,SAAU,GACV9lB,KAAM1zB,EAAiBg/C,aACvB/gC,OAAQ7b,EAAW,IACnB2b,MAAOrd,EACPyT,OAAQ,EACR+K,SAAUtO,IAEdqD,UAAW,CACPrM,KAAMkG,IAEVuR,UAAW,CACP7E,SAAS,EACT8D,OAAQ,CACJtL,MAAO,IAGfwH,SAAS,IAGb1Y,EAAWg7C,GAAWzmC,UAAW6F,IAEjC,IAAI+iC,GAAgB,CAChBC,iBAAkB,SAAS76C,EAAOC,EAAOF,GACrC,IAAI+6C,EAAgBj7C,KAAKE,QAAQ82B,QAAU,GACvCmiB,EAAgB8B,EAAc5hC,QAAU,GACxCkf,EAAgB0iB,EAAc1iB,eAAiB,GAC/CC,EAAsBD,EAAclf,QAAU,GAElD,GAAInZ,IAAuC,IAA5BA,EAAQw4B,gBAA2B,CAC9C,IAeIC,EAAkBC,EAflBsiB,GAAmC,IAApBh7C,EAAQoW,QACvBoD,EAAgBwhC,EAAen9C,EAAYo7C,GAC3Cp7C,EAAYy6B,IAAwBz6B,EAAYo7C,GAChDrgC,EAAO5Y,EAAQqV,SAEfmE,IACAZ,EAAOY,EAAc,CACjBZ,KAAMA,EACNhV,OAAQ5D,EAAQ4D,OAChBuR,SAAUnV,EAAQmV,SAClBe,WAAYlW,EAAQkW,WACpBjW,MAAOA,KAKX+6C,GACAviB,EAAmB,GACnBC,EAAcx4B,EAAMkP,QAEpBqpB,EAAmB,CACfrpB,MAAOkpB,EAAoBlpB,MAC3BkgB,KAAMgJ,EAAoBhJ,MAE9BoJ,GAAeL,EAAcnf,SAAW,IAAI9J,OAG5C8Z,GAAStQ,IAAkB,KAATA,GAClB9Y,KAAKm7C,YAAY91C,KAAK,CAClBwzB,OAAQqiB,EACRpM,WAAY5uC,EAAQ6G,MACpB+R,KAAMA,EACNhV,OAAQ5D,EAAQ4D,OAChB80B,YAAaA,EACbvf,OAAQsf,OASxByiB,GAAWj+C,EAAa0C,OAAO,CAC/BC,KAAM,SAAS4B,EAAUxB,GACrB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK0B,SAAWA,EAChB1B,KAAKmR,aAAezP,EAASyP,aAC7BnR,KAAKuR,OAAS,GACdvR,KAAKm7C,YAAc,GACnBn7C,KAAK4R,UAGTA,OAAQ,WACJ5R,KAAK6R,mBAAmB7R,KAAK8R,SAASC,KAAK/R,QAG/C6R,mBAAoB,SAASsF,GACzB,IAGIjX,EADMF,KACQE,QACdm7C,EAFMr7C,KAEa0B,SAASxB,QAAQm7C,kBAAmC,IAAjBA,IAA2BA,EAAe,IAKpG,IAJA,IAAIC,EAAcD,EAAap6C,OAC3B6C,EAAS5D,EAAQ4D,OACjBkN,EAAclN,EAAO7C,OAEhBgR,EAAW,EAAGA,EAAWjB,EAAaiB,IAAY,CACvD,IAAI6D,EAAgBhS,EAAOmO,GACvB7N,EAAO0R,EAAc1R,KACrB4oB,EAAQgI,GAAalf,GACrBtO,EAAQwlB,EAAMxlB,MACd+J,EAASyb,EAAMzb,OACfvP,EAAQgrB,EAAMhrB,MACdu5C,EAAgB,IAAM/zC,EACtBg0C,OAAgB,EACfznC,SAASwnC,KACVC,EAAgB,IAAMx5C,GAE1B,IAAIy5C,OAAe,EAGfA,EADAz+C,EAAQ8Y,EAAc4jC,YACP5jC,EAAc4jC,WAEdx5C,EAAQw5C,WAGvBznC,IAAajB,EAAc,GACvB8E,EAAcuD,OAAO2B,WAAatO,KAClCoJ,EAAcuD,OAAO2B,SAAW7e,GAIxC,IAAK,IAAI8F,EAAI,EAAGA,EAAIsP,EAAOtQ,OAAQgB,IAAK,CACpC,IAAIoC,EAAYkN,EAAOtP,GACvB,GAAKoC,EAAL,CAIA,IAAIF,EAASE,EAAUF,OACnBhE,EAAQkE,EAAUlE,MAClBmW,EAAUjS,EAAUiS,QACpB+iC,EAAkB,IAAVl5C,EAAeq7C,GAAkBr7C,EAAQo7C,EAAkB,EACnEG,EAA0B,IAAhBt3C,EAAKnD,QAAgBmvC,QAAQjsC,EAAOu3C,SAE7Cj+C,EAAWqY,EAAcxG,SAC1BwG,EAAcxG,MAAQnL,EAAOmL,OAAS+rC,EAAap5C,EAAIq5C,IAG3DnkC,EAAShX,EAAO,IAAIxE,EAAQggD,KAAK,KAAM,EAAG,EAAGF,EAAcpC,GAAQ,CAC/DlkC,MApDGnV,KAqDHuV,SAAUvY,EAAQmH,EAAOoR,UAAYpR,EAAOoR,SAAW,GACvDxO,MAAO9E,EACP6B,OAAQgS,EACR7D,SAAUA,EACVoD,SAAUjR,EAAKnC,GACfmU,WAAsB,IAAV5O,EAAcrH,EAAQqH,EAAQ,EAC1Ck0C,QAASA,EACThjB,gBAAiBv0B,EAAOu0B,gBACxBpiB,QAASA,EACTrG,OAAQe,EAAciB,EACtBinC,eA/DGl5C,KA+DsBk5C,eAAej3C,EAAGgQ,EAAUjB,MAGzC,IAAZsF,IACAmlC,GAAgBpC,OAMhCuC,mBAAoB,SAAS17C,EAASC,EAAOgE,GACzC,IAAIL,EAASK,EAAOL,OAEpBsM,GAAYlQ,EAAS,CACjBC,MAAOA,EACP2D,OAAQA,EACRuR,SAAUlR,EAAOkR,SACjBE,SAAUpR,EAAOoR,SACjBa,WAAYjS,EAAOiS,YACpB,CAAE5F,SAAU1M,EAAO0R,UAAW7E,SAAU,CAAE,OAAQ,UAAW,WAAY,SAAU,aAG1FmB,SAAU,SAAS3R,EAAO04C,EAAQ10C,GAC9B,IAAI03C,EAAiBj+C,EAAW,GAAIuG,EAAOL,OAAQ,CAAEiD,MAAO5C,EAAO4C,QAKnE,GAJA/G,KAAK47C,mBAAmBC,EAAgB17C,EAAOgE,GAE/CnE,KAAKg7C,iBAAiB76C,EAAO07C,EAAgB13C,IAEtB,IAAnBA,EAAOmS,QAAX,CAIA,IAAIwI,EAAU,IAAI85B,GAAWz4C,EAAO04C,EAAQgD,GAC5CrgD,EAAEqE,OAAOif,EAAS3a,GAClBnE,KAAK5B,OAAO0gB,GACZ9e,KAAKuR,OAAOlM,KAAKyZ,KAGrBtR,OAAQ,SAASC,GACb,IAAIwG,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdqR,EAAS0C,EAAI1C,OACbuqC,EAAgB7nC,EAAI6nC,mBAAqC,IAAlBA,IAA4BA,EAAgB,IACvF,IAAI95C,EAAQuP,EAAOtQ,OACfyN,EAAMjB,EAAUmN,QAEhBmhC,EAAW15C,KAAKD,IAAIsM,EAAII,QAASJ,EAAIK,UACrCitC,EAAeD,EAAW,EAC1BE,EAAiBF,EAAsB,IAAXA,EAC5BG,EAAS,IAAI7+C,EAAIqR,EAAIC,GAAID,EAAIF,GAAIE,EAAIC,GAAKotC,EAAUrtC,EAAIF,GAAKutC,GAC7DI,EAAeD,EAAOluC,SACtBouC,EAAY1tC,EAAIV,SAChBgD,EAAc9Q,EAAQ4D,OAAO7C,OAC7Bo7C,EAAiB,GACjBC,EAAkB,GAClBjgC,EAAU3e,EAAewC,EAAQmc,QAAS4/B,GAE9Cj8C,KAAKyN,UAAYA,EAEjB4O,EAAUA,EAAU2/B,EAdR,EAc+BA,EAd/B,EAcsD3/B,EAClE6/B,EAAO/qB,UAAUirB,EAAUhuC,EAAI+tC,EAAa/tC,EAAGguC,EAAU/tC,EAAI8tC,EAAa9tC,GAQ1E,IANA,IAAI6e,EAAS8uB,EAAe3/B,EACxBrO,EAAS,IAAI5Q,EACb8vB,EAASgvB,EAAOvtC,GAAK0N,EACrB6Q,EAASgvB,EAAO1tC,GAAK6N,GAGhBpa,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAI6c,EAAUvN,EAAOtP,GACjB42C,EAAS/5B,EAAQ+5B,OACjBna,EAAc5f,EAAQ7M,SAI1B,GAHA4mC,EAAO3rB,OAASA,EAChB2rB,EAAO7qC,OAASA,EAEZ8tC,EAAc76C,OAAQ,CACtB,IAAIs7C,EAAeT,EAAcpd,GACjCma,EAAOc,YAAc4C,EAAa5C,YAClCd,EAAO3rB,OAASqvB,EAAarvB,OAG7BwR,IAAgB1tB,EAAc,GAAK8N,EAAQ48B,UAC3C7C,EAAO7qC,OAAS6qC,EAAOj+B,QAAQ4hC,UAA0B,IAAhB3D,EAAO3rB,QAAe9sB,MAAMy4C,EAAOS,WAGhFx6B,EAAQtR,OAAO0uC,GAEf,IAAInjC,EAAQ+F,EAAQ/F,MAChBA,GACIA,EAAM7Y,QAAQ8a,WAAatO,IACvBgyB,IAAgB1tB,EAAc,IAC1B+H,EAAM+0B,cAAgBnxC,EACtB2/C,EAAgBj3C,KAAK0T,GAErBsjC,EAAeh3C,KAAK0T,IAOpCsjC,EAAep7C,OAAS,IACxBo7C,EAAeI,KAAKz8C,KAAK08C,iBAAgB,IACzC18C,KAAK28C,iBAAiBN,IAGtBC,EAAgBr7C,OAAS,IACzBq7C,EAAgBG,KAAKz8C,KAAK08C,iBAAgB,IAC1C18C,KAAK48C,kBAAkBN,IAG3Bt8C,KAAK0O,IAAMwtC,GAGfS,iBAAkB,SAAStjC,GACvB,IAAIwjC,EAAY78C,KAAK88C,sBAAsBzjC,GAE3CrZ,KAAK+8C,iBAAiBF,EAAWxjC,IAGrCujC,kBAAmB,SAASvjC,GACxB,IAAIwjC,EAAY78C,KAAK88C,sBAAsBzjC,GAE3CrZ,KAAK+8C,iBAAiBF,EAAWxjC,IAGrCyjC,sBAAuB,SAASzjC,GAC5B,IAAIyF,EAAUjhB,EAAKmC,KAAKuR,QACpBsnC,EAAS/5B,EAAQ+5B,OACjB72C,EAAQqX,EAAOpY,OAAS,EACxB+7C,EAAKnE,EAAO3rB,OAASpO,EAAQ5e,QAAQmZ,OAAOi8B,SAC5CuH,EAAY,GACZI,EAAW5jC,EAAO,GAAG3K,IACrB4mC,EAAW32C,EAAMs+C,EAASzuC,IAAMqqC,EAAO7qC,OAAOK,EAAI2uC,EAAKC,EAASluC,SAAWkuC,EAASluC,SAAW,IAEnG8tC,EAAUx3C,KAAKiwC,GAEf,IAAK,IAAIrzC,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAIi7C,EAAY7jC,EAAOpX,EAAI,GAAGyM,IAE9BuuC,EAAW5jC,EAAOpX,GAAGyM,IACrB4mC,EAAW32C,EAAMu+C,EAAU1uC,GAAKyuC,EAASxuC,IACzCouC,EAAUx3C,KAAKiwC,GAKnB,OAHAA,EAAW32C,EAAMk6C,EAAO7qC,OAAOK,EAAI2uC,EAAK3jC,EAAOrX,GAAO0M,IAAID,GAAK4K,EAAOrX,GAAO0M,IAAIK,SAAW,GAC5F8tC,EAAUx3C,KAAKiwC,GAERuH,GAGXE,iBAAkB,SAASF,EAAWxjC,GAMlC,IALA,IAGIW,EAAMC,EAAOkjC,EADbn7C,EAAQ66C,EAAU57C,OAGbgB,EAAI,EAAGA,EAAID,EAAOC,IAIvB,IAHAk7C,GAAaN,EAAU56C,GACvB+X,EAAOC,EAAQhY,EAERk7C,EAAY,IAAMnjC,GAAQ,GAAKC,EAAQjY,IAC1Cm7C,EAVOn9C,KAUco9C,cAAcP,EAAW56C,IAAK+X,EAAMmjC,GACzDA,EAXOn9C,KAWco9C,cAAcP,EAAW56C,IAAKgY,EAAOkjC,GAIlEn9C,KAAKq9C,aAAaR,EAAWxjC,IAGjC+jC,cAAe,SAASP,EAAW9hC,EAAQC,EAAUsiC,GACjD,IAAI76C,EAAS66C,EACb,GAAIT,EAAU7hC,GAAY,EAAG,CACzB,IAAIuiC,EAAYl7C,KAAKD,IAAIy6C,EAAU7hC,GAAWvY,GAC9CA,GAAU86C,EACVV,EAAU7hC,IAAauiC,EACvBV,EAAU9hC,IAAWwiC,EAGzB,OAAO96C,GAGX46C,aAAc,SAASR,EAAWxjC,GAC9B,IAQImkC,EANA1+B,EAAUjhB,EAAKmC,KAAKuR,QACpBsnC,EAAS/5B,EAAQ+5B,OACjB7xB,EAAelI,EAAQ5e,QAAQmZ,OAC/BokC,EAAcpkC,EAAOpY,OACrBy8C,EAAgB12B,EAAasuB,SAC7BqI,EAAO9E,EAAO7qC,OAAOK,GAAKwqC,EAAO3rB,OAASwwB,GAAiBrkC,EAAO,GAAG3K,IAAIK,SAG7E8tC,EAAU,IAAM,EAChB,IAAK,IAAI56C,EAAI,EAAGA,EAAIw7C,EAAax7C,IAAK,CAClC,IAAI8W,EAAQM,EAAOpX,GACfyM,EAAMqK,EAAMrK,IAEhBivC,GAAQd,EAAU56C,GAClBu7C,EAhBWx9C,KAgBK49C,YACZlvC,EAAIE,GACJiqC,EAAOj+B,QAAQi6B,OAAO6I,GACtBC,EACAA,EAAOjvC,EAAIK,SACXgK,EAAM+0B,cAAgBnxC,GAEtBoc,EAAM+0B,cAAgBnxC,GAClBqqB,EAAanN,QAAUrd,IACvBghD,EAAO3E,EAAO3rB,OAAS2rB,EAAO7qC,OAAOI,EAAIsvC,GAE7C3kC,EAAMvL,OAAO,IAAInQ,EAAImgD,EAAO9uC,EAAII,QAAS6uC,EAAMH,EAAMG,MAEjD32B,EAAanN,QAAUrd,IACvBghD,EAAO3E,EAAO7qC,OAAOI,EAAIyqC,EAAO3rB,OAASwwB,GAE7C3kC,EAAMvL,OAAO,IAAInQ,EAAImgD,EAAO9uC,EAAII,QAAS6uC,EAAMH,EAAMG,KAGzDA,GAAQjvC,EAAIK,WAIpBE,aAAc,WACV,IAAIxL,EAAWzD,KAGX69C,EADM79C,KACWE,QAAQ29C,WACzBtsC,EAFMvR,KAEOuR,OACbvP,EAAQuP,EAAOtQ,OAGnB9D,EAAamQ,GAAG2B,aAAa1B,KAAKvN,MAElCA,KAAK89C,gBAAkB,GAEvB,IAAK,IAAI77C,EAAI,EAAGA,EAAID,EAAOC,IAAK,CAC5B,IAAI6c,EAAUvN,EAAOtP,GACjB42C,EAAS/5B,EAAQ+5B,OACjB9/B,EAAQ+F,EAAQ/F,MAChBsgC,EAAQR,EAAOS,SACfyE,GAAmBj/B,EAAQ5e,QAAQ29C,YAAc,IAAIvuC,OAASuuC,EAAWvuC,MAE7E,GAAIyJ,EAAO,CACP,IAAIilC,EAAgB,IAAI5+C,GAAK,CACzBuQ,OAAQ,CACJL,MAAOyuC,EACPjvC,MAAO+uC,EAAW/uC,OAEtBiB,UAAW,CACPrM,KAAMmE,GACNmI,MAAO8O,EAAQo6B,kBAIvB,GAAIngC,EAAM7Y,QAAQ8a,WAAatO,GAAa,CACxC,IAAIgC,EAAMqK,EAAMrK,IACZuvC,EAAcpF,EAAO7qC,OACrB6W,EAAQg0B,EAAOz4C,MAAMi5C,GACrBC,EAAS,IAAIl8C,EAAMsR,EAAIC,GAAID,EAAIV,SAASK,GACxC6vC,OAAK,EAAU17B,OAAM,EAAU27B,OAAW,EAE9Ct5B,EAAQg0B,EAAOj+B,QAAQi6B,OAAOgJ,EAAWxhC,SAASjc,MAAMi5C,GACxD2E,EAAcnuC,OAAOgV,EAAMzW,EAAGyW,EAAMxW,GAEhC0K,EAAM+0B,cAAgBnxC,GAEtBwhD,EAAWC,GAAaH,EAAap5B,EAAOy0B,EAD5C92B,EAAM,IAAIplB,EAAMsR,EAAIC,GAAKkvC,EAAWxhC,QAAS3N,EAAIV,SAASK,IAE1DirC,EAAS,IAAIl8C,EAAMolB,EAAIpU,EAtC3B,EAsCsCoU,EAAInU,IACtC8vC,EAAWA,GAAY7E,GACdlrC,EAAI/L,KAAKD,IAAI+7C,EAAS/vC,EAAGkrC,EAAOlrC,GAErC3K,EAAS46C,cAAcF,EAAUtF,EAAO7qC,OAAQ6qC,EAAO3rB,OA1C/D,IA2CQixB,EAAS/vC,EAAIyqC,EAAO7qC,OAAOI,GAC3B8vC,EAAKrF,EAAO7qC,OAAOI,EAAIyqC,EAAO3rB,OA5CtC,EA6CYpO,EAAQ5e,QAAQmZ,OAAOQ,QAAUzQ,GAC7B80C,EAAK5E,EAAOlrC,EACZ4vC,EAAcluC,OAAOouC,EAAIr5B,EAAMxW,GAE/B2vC,EAAcluC,OAAO+U,EAAMzW,EAAIkwC,EAAWz5B,EAAMxW,GAGpD2vC,EAAcluC,OAAOouC,EAAIr5B,EAAMxW,GAEnC2vC,EAAcluC,OAAOwpC,EAAOlrC,EAAGoU,EAAInU,KAEnC8vC,EAAS9vC,EAAImU,EAAInU,EACjB2vC,EAAcluC,OAAOquC,EAAS/vC,EAAG+vC,EAAS9vC,MAI9C8vC,EAAWC,GAAaH,EAAap5B,EAAOy0B,EAD5C92B,EAAM,IAAIplB,EAAMsR,EAAIE,GAAKivC,EAAWxhC,QAAS3N,EAAIV,SAASK,IAE1DirC,EAAS,IAAIl8C,EAAMolB,EAAIpU,EA9D3B,EA8DsCoU,EAAInU,IACtC8vC,EAAWA,GAAY7E,GACdlrC,EAAI/L,KAAKC,IAAI67C,EAAS/vC,EAAGkrC,EAAOlrC,GAErC3K,EAAS46C,cAAcF,EAAUtF,EAAO7qC,OAAQ6qC,EAAO3rB,OAlE/D,IAmEQixB,EAAS/vC,EAAIyqC,EAAO7qC,OAAOI,GAC3B8vC,EAAKrF,EAAO7qC,OAAOI,EAAIyqC,EAAO3rB,OApEtC,EAqEYpO,EAAQ5e,QAAQmZ,OAAOQ,QAAUzQ,GAC7B80C,EAAK5E,EAAOlrC,EACZ4vC,EAAcluC,OAAOouC,EAAIr5B,EAAMxW,GAE/B2vC,EAAcluC,OAAO+U,EAAMzW,EAAIkwC,EAAWz5B,EAAMxW,GAGpD2vC,EAAcluC,OAAOouC,EAAIr5B,EAAMxW,GAEnC2vC,EAAcluC,OAAOwpC,EAAOlrC,EAAGoU,EAAInU,KAEnC8vC,EAAS9vC,EAAImU,EAAInU,EACjB2vC,EAAcluC,OAAOquC,EAAS/vC,EAAG+vC,EAAS9vC,KAIlD2vC,EAAcluC,OAAO0S,EAAIpU,EAAGoU,EAAInU,GAEhC5K,EAASq6C,gBAAgBz4C,KAAK24C,GAC9Bv6C,EAASpC,OAAOjD,OAAO4/C,OAMvC7pB,aAAc,WAGV,GAFAh3B,EAAamQ,GAAG6mB,aAAa5mB,KAAKvN,MAE9BrE,EAAQ4iD,KAAKv+C,KAAKE,QAAQ4D,QAAQ,SAAU5D,GAAW,OAAOA,EAAQs+C,WAAa,CACnF,IAAI/wC,EAAYzN,KAAKyN,UACjBgxC,EAAYz+C,KAAK0O,IAAIV,SACrBijB,EAAOjxB,KAAKqB,OAAO4vB,OACvB,IAAKA,EACD,OAGJ,IAAIytB,EAAaztB,EAAKpR,cAElB20B,EAAQnyC,KAAKD,KACZq8C,EAAUpwC,EAAIZ,EAAUe,KAAOiwC,EAAUpwC,EAAI4iB,EAAKpJ,OAAOxZ,IACzDZ,EAAUgB,GAAKgwC,EAAUpwC,IAAMqwC,EAAWrwC,EAAIowC,EAAUpwC,IACxDowC,EAAUrwC,EAAIX,EAAUkB,KAAO8vC,EAAUrwC,EAAI6iB,EAAKpJ,OAAOzZ,IACzDX,EAAUmB,GAAK6vC,EAAUrwC,IAAMswC,EAAWtwC,EAAIqwC,EAAUrwC,IAGzDomC,EAAQ,GACRx0C,KAAKqB,OAAO1B,UAAUA,KAAY60C,MAAMA,EAAOA,EAAO,CAAEiK,EAAUrwC,EAAGqwC,EAAUpwC,OAK3FquC,gBAAiB,SAAS5lC,GACtB,IAAI6nC,EAAe7nC,GAAW,EAAI,EAElC,OAAO,SAASoe,EAAGC,GAGf,QAFaD,EAAElY,OAAO67B,OAAOS,SAAW,KAAO,KACjCnkB,EAAEnY,OAAO67B,OAAOS,SAAW,KAAO,KACtBqF,IAIlCf,YAAa,SAASgB,EAAW/F,EAAQrqC,EAAIC,EAAI8iC,GAC7C,IAAIrkB,EAAS2rB,EAAO3rB,OAChB2xB,EAAgBhG,EAAO7qC,OACvB8wC,EAAKD,EAAczwC,EACnB2wC,EAAKF,EAAcxwC,EACnB2wC,EAAI38C,KAAKD,IAAIC,KAAKgF,IAAI03C,EAAKvwC,GAAKnM,KAAKgF,IAAI03C,EAAKtwC,IAElD,OAAIuwC,EAAI9xB,EACG0xB,EAGJE,EAAKz8C,KAAKiF,KAAM4lB,EAASA,EAAW8xB,EAAIA,IAAOzN,EAAY,GAAK,IAG3E8M,cAAe,SAASj+C,EAAO4N,EAAQkf,GACnC,OAAO7qB,KAAKqF,IAAIsG,EAAOI,EAAIhO,EAAMgO,EAAG,GAAK/L,KAAKqF,IAAIsG,EAAOK,EAAIjO,EAAMiO,EAAG,GAAKhM,KAAKqF,IAAIwlB,EAAQ,IAGhGrV,iBAAkB,SAASzX,EAAO0X,GAC9B,OAAO9X,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ1X,EAAMD,QAGvD+4C,eAAgB,SAAS1a,GACrB,OA9coB,GA8cbA,GAGXpM,UAAW,WACP,OAAOpyB,QAIf,SAASo+C,GAAaa,EAAIC,EAAIC,EAAIC,GAC9B,IAGI38C,EAHA48C,GAAOD,EAAGhxC,EAAI+wC,EAAG/wC,IAAM6wC,EAAG5wC,EAAI8wC,EAAG9wC,IAAM+wC,EAAG/wC,EAAI8wC,EAAG9wC,IAAM4wC,EAAG7wC,EAAI+wC,EAAG/wC,GACjEkxC,GAAMF,EAAG/wC,EAAI8wC,EAAG9wC,IAAM6wC,EAAG9wC,EAAI6wC,EAAG7wC,IAAMgxC,EAAGhxC,EAAI+wC,EAAG/wC,IAAM8wC,EAAG7wC,EAAI4wC,EAAG5wC,GAGpE,GAAW,IAAPixC,EAAU,CACV,IAAIC,EAAMF,EAAMC,EAEhB78C,EAAS,IAAIrF,EACT6hD,EAAG7wC,EAAImxC,GAAML,EAAG9wC,EAAI6wC,EAAG7wC,GACvB6wC,EAAG5wC,EAAIkxC,GAAML,EAAG7wC,EAAI4wC,EAAG5wC,IAI/B,OAAO5L,EAGXlF,EAAkB69C,GAAU,CACxB1B,WAAY,GACZmE,WAAY,CACR/uC,MAAO,EACPQ,MAAO,UACP+M,QAAS,GAEbkc,cAAe,CACXnf,QAAS,GACTC,OAAQ,MAIhBzb,EAAWw9C,GAASjpC,UAAW4oC,IAE/BK,GAASjpC,UAAUogB,aAAc,EAEjC,IAAIitB,GAAc3oB,GAAah3B,OAAO,CAClC+R,OAAQ,WACJ5R,KAAKy/C,eAAez/C,KAAK8D,SAG7B27C,eAAgB,SAAS37C,GACrB,IAAI2jC,EAAc3jC,EAAO,GACrB47C,EAAW,IAAItE,GAASp7C,KAAM,CAC9B8D,OAAQA,EACRuY,QAASorB,EAAYprB,QACrBq9B,WAAYjS,EAAYiS,WACxBmE,WAAYpW,EAAYoW,WACxB7mB,OAAQh3B,KAAKE,QAAQ82B,SAGzBh3B,KAAKkzB,YAAYwsB,IAGrBxsB,YAAa,SAAS7lB,EAAOjM,GACzBy1B,GAAavpB,GAAG4lB,YAAY3lB,KAAKvN,KAAMqN,EAAOjM,GAC9ChD,EAAO4B,KAAKE,QAAQ82B,OAAOvL,MAAOpe,EAAM8tC,gBAI5CwE,GAAe/G,GAAW/4C,OAAO,CACjCgb,YAAa,WACT,IACIs+B,EADMn5C,KACcE,QAAQmZ,OAC5BN,EAFM/Y,KAEM+Y,MACZ8/B,EAAS74C,KAAK64C,OAAOj+B,QACrBy+B,EAAQR,EAAOS,SAEnB,GAAIvgC,EAAO,CACP,IAAIygC,EAAczgC,EAAMrK,IAAIK,SAC5B,GAAIoqC,EAAcn+B,WAAa7e,EAAQ,CACnC08C,EAAO3rB,SAAW2rB,EAAO3rB,OAAS2rB,EAAOc,aAAe,EAExD,IAAIJ,EAAKV,EAAOz4C,MAAMi5C,GAEtBtgC,EAAMvL,OAAO,IAAInQ,EAAIk8C,EAAGnrC,EAAGmrC,EAAGlrC,EAAImrC,EAAc,EAAGD,EAAGnrC,EAAGmrC,EAAGlrC,SAE5DuqC,GAAWtrC,GAAGuN,YAAYtN,KAAKvN,QAK3C0e,cAAe,SAASm6B,EAAQ34C,GAC5B,OAAOvE,EAAQu+C,aAAa50C,QAAQ60C,WAAWtB,EAAQ34C,MAI/D3C,EAAkBoiD,GAAc,CAC5B36B,QAAS,CACLC,SAAU,gBAEd5L,OAAQ,CACJ2B,SAAU7e,GAEd4T,UAAW,CACPrM,KAAMkG,MAIdhM,EAAW+hD,GAAaxtC,UAAW6F,IAEnC,IAEI4nC,GAAaxE,GAASv7C,OAAO,CAC7BiS,SAAU,SAAS3R,EAAO04C,EAAQ10C,GAC9B,IAAI03C,EAAiBj+C,EAAW,GAAIuG,EAAOL,OAAQ,CAAEiD,MAAO5C,EAAO4C,QAKnE,GAJA/G,KAAK47C,mBAAmBC,EAAgB17C,EAAOgE,GAE/CnE,KAAKg7C,iBAAiB76C,EAAO07C,EAAgB13C,IAEtB,IAAnBA,EAAOmS,QAAX,CAIA,IAAIwI,EAAU,IAAI6gC,GAAax/C,EAAO04C,EAAQgD,GAE9CrgD,EAAEqE,OAAOif,EAAS3a,GAClBnE,KAAK5B,OAAO0gB,GACZ9e,KAAKuR,OAAOlM,KAAKyZ,KAGrBtR,OAAQ,SAASC,GAmBb,IAlBA,IAgBIoyC,EAdA3/C,EAAUF,KAAKE,QACfwO,EAAMjB,EAAUmN,QAEhBmhC,EAAW15C,KAAKD,IAAIsM,EAAII,QAASJ,EAAIK,UACrCitC,EAAeD,EAAW,EAC1BE,EAAiBF,EAAsB,IAAXA,EAC5Bj4C,EAAS5D,EAAQ4D,OACjBkN,EAAclN,EAAO7C,OAErBob,EAAU3e,EAAewC,EAAQmc,QAAS4/B,GAG1C6D,EAAY9D,GAFhB3/B,EAAUA,EAAU2/B,EARR,EAQ+BA,EAR/B,EAQsD3/B,GAG9D0jC,EAAoB,EAGf99C,EAAI,EAAGA,EAAI+O,EAAa/O,IAAK,CAClC,IAAI6T,EAAgBhS,EAAO7B,GACjB,IAANA,GACIjF,EAAQ8Y,EAAc+pC,YACtBA,EAAW/pC,EAAc+pC,SACzBC,GAAahqC,EAAc+pC,UAI/B7iD,EAAQ8Y,EAAcyD,MACtBumC,GAAahqC,EAAcyD,KAE3BwmC,IAGA/iD,EAAQ8Y,EAAciE,SAAW9X,IAAM+O,EAAc,IACrD8uC,GAAahqC,EAAciE,QAI9B/c,EAAQ6iD,KAGTC,GADAD,EAAyB,MADN7D,EAAe3/B,IAAYrL,EAAc,OAKhE,IAEUkc,EAFNysB,EAAckG,EACd9lC,EAAS,EAGb/Z,KAAK87C,cAAgB,GAErB,IAAK,IAAIzoB,EAAM,EAAGA,EAAMriB,EAAaqiB,IAAO,CACxC,IAAI2sB,EAAkBl8C,EAAOuvB,GAG7BnG,GADAysB,GAAe5/B,GADRrc,EAAesiD,EAAgBzmC,KAAMumC,EAAYC,GApD7C//C,KAuDF87C,cAAcz2C,KAAK,CAAEs0C,YAAaA,EAAazsB,OAAQA,IAChEnT,EAASimC,EAAgBjmC,QAAU,EACnC4/B,EAAczsB,EAGlBkuB,GAAS9tC,GAAGE,OAAOD,KAAKvN,KAAMyN,IAGlCyrC,eAAgB,SAAS1a,EAAeE,EAAa1tB,GACjD,OArFsB,GAqFfwtB,EACF52B,IAA8B82B,EAAc,IAAM1tB,EAAc,MAI7EzT,EAAkBqiD,GAAY,CAC1BlG,WAAY,GACZmE,WAAY,CACR/uC,MAAO,EACPQ,MAAO,UACP+M,QAAS,KAIjB,IAAI4jC,GAAgBT,GAAY3/C,OAAO,CACnC+R,OAAQ,WACJ5R,KAAKkgD,iBAAiBlgD,KAAK8D,SAG/Bo8C,iBAAkB,SAASp8C,GACvB,IAAI2jC,EAAc3jC,EAAO,GACrBq8C,EAAa,IAAIP,GAAW5/C,KAAM,CAClC8D,OAAQA,EACRuY,QAASorB,EAAYprB,QACrBwhC,WAAYpW,EAAYoW,WACxB7mB,OAAQh3B,KAAKE,QAAQ82B,SAGzBh3B,KAAKkzB,YAAYitB,MAMrBC,GAAoBvpB,GAAah3B,OAAO,CACxCi3B,WAAY,WACR92B,KAAKskC,sBAAwB,IAAIzgB,IAGrCjS,OAAQ,WACJ5R,KAAKs4B,YAAYt4B,KAAK8D,QACtB9D,KAAKqgD,kBACLrgD,KAAK2kC,eACL3kC,KAAKsgD,mBAGT3lB,UAAW,WACP,IAAI56B,EAAOC,KAAKuT,UACZ5S,EAAQZ,EAAKY,QACbyhB,EAAgBriB,EAAKG,QAAQ4W,QAAUnW,EAAM2B,IAAM3B,EAAMyB,IACzD7B,EAAOR,EAAK+N,QAAQsU,GACpBpU,EAAShO,KAAKugD,UAAUzyC,QAAQ,GAAGE,OACnC0sB,EAAU36B,EAAK2O,IAAIyiB,UACnBnjB,EAAOI,EAAI7N,EAAKoO,GAChBX,EAAOK,EAAI9N,EAAKiO,IAGpBzO,EAAKyN,OAAOktB,IAGhB4lB,gBAAiB,WACb,IAMIE,EAAUC,EANVzX,EAAUhpC,KAAKskC,sBACf2E,EAAeD,EAAQ7kB,QACvBsR,EAAcz1B,KAAK0gD,iBAAiB,CACpCvX,kBAAkB,EAClBl5B,QAAS,IAITwlB,EAAY/xB,OAAS4I,IACrBk0C,EAAW7kD,EAAQglD,qBACnBF,EAAmB,CAAEr+C,IAAK,GAAKE,IAAK,KAEpCk+C,EAAW7kD,EAAQilD,iBACnBH,EAAmB,CAAEr+C,IAAK,EAAGE,IAAK,IAGtC,IAAI3B,EAAQqoC,EAAQ7kB,MAAMrjB,OAASmoC,GAAgBwX,EAE/C9/C,GAASsoC,IACTtoC,EAAMyB,IAAMC,KAAKD,IAAIzB,EAAMyB,IAAK6mC,EAAa7mC,KAC7CzB,EAAM2B,IAAMD,KAAKC,IAAI3B,EAAM2B,IAAK2mC,EAAa3mC,MAGjD,IAAIiR,EAAY,IAAIitC,EAChB7/C,EAAMyB,IAAKzB,EAAM2B,IACjBmzB,EACAz1B,KAAKmR,cAGTnR,KAAKuT,UAAYA,EACjBvT,KAAK+yB,WAAWxf,IAGpBqmB,WAAY,WACR,IAAI3lB,EAAMjU,KACNE,EAAU+T,EAAI/T,QAAQwB,SACtB6R,EAAYU,EAAIV,UAChBgtC,EAAYtsC,EAAIssC,UAChB7xC,EAAMuF,EAAIvF,IACVutC,EApEU,IAoEO55C,KAAKD,IAAIsM,EAAII,QAASJ,EAAIK,UAC3CsN,EAAUne,EAAWgC,EAAQmc,SAAW,GAAI4/B,GAC5CxgC,EAAa/M,EAAIkM,QAAQ6e,MAAMpd,GAC/Bqe,EAAUjf,EAAWb,QAEzB8f,EAAQjsB,GAAKisB,EAAQlsB,GAAKnM,KAAKD,IAAIs4B,EAAQ5rB,QAAS4rB,EAAQ3rB,UAC5D2rB,EAAQ7gB,MAAM4B,EAAY/e,EAAGP,GAE7B,IAAI0kD,EAAenmB,EAAQ9f,QAAQuhB,OAAO,EAAGzB,EAAQ3rB,SAAW,GAEhEwxC,EAAU/yC,OAAOktB,GACjBnnB,EAAU/F,OAAOqzC,GACjB,IAAIC,EAAavtC,EAAUyd,UAAUjiB,SAAWwE,EAAU7E,IAAIK,SAC9DwE,EAAU/F,OAAO+F,EAAU7E,IAAI+qB,MAAM,CAAE/U,IAAKo8B,KAE5C9gD,KAAK06B,QAAUA,EACf16B,KAAK26B,UAAUD,IAGnBgD,cAAe,WACX,OAAO19B,KAAK0O,KAGhBirB,aAAc,eAGdonB,GAAoBn1B,GAAa/rB,OAAO,CACxCoW,UAAW,SAASgB,EAAOC,GACvB,IAAI8pC,EAAc/pC,EAAMjJ,OAAOK,EAAI6I,EAAM1I,GACrCjO,EAAOnD,EAAM6jD,SAAShqC,EAAMjJ,OAAQiJ,EAAMyiC,WAAYsH,GAE1D,OAAO,IAAI3jD,EAAIkD,EAAK6N,EAAG7N,EAAK8N,EAAG9N,EAAK6N,EAAG7N,EAAK8N,MAIpD9Q,EAAkBwjD,GAAmB,CACjCvqC,MAAM,IAGV,IAAI0qC,GAAiBjK,GAAiBp3C,OAAO,IAI7CqhD,GAAe/uC,UAAU8D,UAAY8qC,GAAkB5uC,UAAU8D,UAEjE1Y,EAAkB2jD,GAAgB,CAC9B1qC,MAAM,IAGV,IAAI2qC,GAAyBz+B,GAAkB7iB,OAAO,CAClDqiB,WAAY,SAASC,GACjB,IAAInU,EAAShO,KAAKohD,mBAClBj/B,EAASrS,OAAO9B,EAAOI,EAAGJ,EAAOK,IAGrC+yC,iBAAkB,WAGd,OAFgBphD,KAAKgd,OAAOtb,SAAS6+C,UACd7xC,IAAIV,UAI/BuT,eAAgB,WACZ,IAAIzD,EAAW9d,KAAKwhB,gBAEpB,IAAK1D,EAAU,CACX,IAAI9P,EAAShO,KAAKohD,mBACdz+B,EAAiB,IAAIxkB,GAAe,GACpCuP,EAAa1N,KAAKuR,SAEtB7D,EAAWrI,KAAK2I,IAChB8P,EAAW9d,KAAKwhB,gBAAkBmB,EAAe5E,QAAQrQ,IAChD6lB,MAGb,OAAOzV,KAIXujC,GAAmBrgC,GAAYnhB,OAAO,CACtCqiB,WAAY,SAASC,GACjB,IACInU,EADYhO,KAAKgd,OAAOtb,SAAS6+C,UACd7xC,IAAIV,SACvBszC,EAAgB,IAAI7hD,GAASqiB,QAAQ,CAAE9T,EAAOI,EAAGJ,EAAOK,IAE5D8T,EAASrE,SAASe,QAAQyiC,GAC1Bn/B,EAASrE,SAASzY,KAAKi8C,MAI3BC,GAAiBL,GAAerhD,OAAO,CACvC6e,cAAe,SAAShR,EAAYoI,EAAe7D,GAS/C,OARa6D,EAAcvG,MAAQ,IAAIuR,QAGzBlY,GACA,IAAIu4C,GAAuBzzC,EAAYoI,EAAe7D,GAEtD,IAAIovC,GAAiB3zC,EAAYoI,EAAe7D,IAKlEka,mBAAoB,SAAShsB,EAAO4e,GAChC,IAAIm4B,EAYJ,OAVI9tB,GAASjpB,EAAMiO,IAAM2Q,IAAkBvW,KACvC0uC,EAAe,CACX9oC,EAAGjO,EAAMiO,EACTC,EAAGlO,EAAMkO,GAET0Q,IAAkBxW,KAClB2uC,EAAa7oC,EAAI,IAIlB6oC,GAGXz4B,oBAAqB,SAAS3a,GAC1B,OAAOA,EAAOib,eAAiBxW,IAGnCi5C,qBAAsB,WAKlB,IAJA,IAEI19C,EAAS9D,KAAKE,QAAQ4D,OAEjB9C,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IACnC,GALWhB,KAKEye,oBAAoB3a,EAAO9C,MAAUyH,GAC9C,OAAO,GAKnB8V,WAAY,SAAShN,GAKjB,GAFAA,EAAOkrC,KAAKgF,IAERzhD,KAAKwhD,uBACL,IAAK,IAAIxgD,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IAAO,CAC1C,IAAIZ,EAAQmR,EAAOvQ,GACnB,GAAIZ,EAEKgpB,GADOhpB,EAAMD,MACEkO,IATjBrO,KASgCye,oBAAoBre,EAAM0D,UAAY2E,WAC9D8I,EAAOvQ,GAM9B,OAAOuQ,KAIf,SAASkwC,GAAUvsB,EAAGC,GAClB,OAAOD,EAAE/0B,MAAMiO,EAAI+mB,EAAEh1B,MAAMiO,EAG/B,IAAIszC,GAAgBtB,GAAkBvgD,OAAO,CACzCwgD,gBAAiB,WACb,IAAIE,EAAY,IAAI5kD,EAAQgmD,UAAU3hD,KAAKE,QAAQqsB,MAAOvsB,KAAKmR,cAE/DnR,KAAKugD,UAAYA,EACjBvgD,KAAK6sB,MAAQ0zB,EACbvgD,KAAK+yB,WAAWwtB,IAGpBG,iBAAkB,SAASlwC,GACvB,OAAO5S,EAAW4S,EAAU,CACxBoxC,eAAgB,CAAEl+C,KAAM3G,GACxB8kD,eAAgB,CAAEn+C,KAAM3G,IACzBiD,KAAKE,QAAQusB,QAGpB6zB,gBAAiB,WACbF,GAAkB9yC,GAAGgzC,gBAAgB/yC,KAAKvN,MAC1CA,KAAK+sB,MAAQ/sB,KAAKuT,WAGtB2f,YAAa,SAAS7lB,EAAOjM,GACzBpB,KAAKskC,sBAAsBvgB,OAAO1W,EAAM0e,aAExC8K,GAAa1kB,UAAU+gB,YAAY3lB,KAAKvN,KAAMqN,EAAOjM,IAGzDujC,aAAc,WACV,IAAI7gC,EAAS9D,KAAKw5B,oBAAoBx5B,KAAK8D,QACvC1C,EAAOpB,KAAKu3B,MAAM,GAEtBv3B,KAAK4lC,gBACDvQ,GAAmBvxB,EAAQ,CAAEgG,KAC7B1I,GAGJpB,KAAKu3C,mBACDliB,GAAmBvxB,EAAQ,CAAEiG,KAC7B3I,GAGJpB,KAAKmlC,gBACD9P,GAAmBvxB,EAAQ,CAAE+F,KAC7BzI,IAIRwkC,gBAAiB,SAAS9hC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIgnC,EAAY,IAAIiZ,GAAelhD,KAAM,CAAE8D,OAAQA,IAEnD9D,KAAKkzB,YAAY+U,EAAW7mC,KAGhCm2C,mBAAoB,SAASzzC,EAAQ1C,GACjC,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAI6gD,EAAe,IAAIf,GAAkB/gD,KAAM,CAAE8D,OAAQA,IAEzD9D,KAAKkzB,YAAY4uB,EAAc1gD,KAGnC+jC,gBAAiB,SAASrhC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIinC,EAAY,IAAIqZ,GAAevhD,KAAM,CAAE8D,OAAQA,IAEnD9D,KAAKkzB,YAAYgV,EAAW9mC,KAGhCy+B,eAAgB,SAASxyB,EAAO6K,EAAGqxB,GAC/B,IAAIxsB,EAAS1P,EAAMm8B,kBAAkBtxB,GACjC9X,EAAQ,IAAIhD,EAAM2f,EAAO3O,EAAG2O,EAAO1O,GACnC0zC,EAAS/hD,KAAK6sB,MAAMvsB,SAASF,GAC7B4hD,EAAShiD,KAAK+sB,MAAMzsB,SAASF,GAElB,OAAX2hD,GAA8B,OAAXC,GACnB30C,EAAM8K,QAAQoxB,EAAW,CACrB9wB,QAAS3a,EAAaoa,GACtB9J,EAAG2zC,EACH1zC,EAAG2zC,KAKf5qB,iBAAkB,eAGtB75B,EAAkBmkD,GAAe,CAC7Bn1B,MAAO,GACPE,MAAO,KAGX7uB,EAAW8jD,GAAcvvC,UAAWytB,IAapC,IAAIqiB,GAAiBphC,GAAUhhB,OAAO,CAClCoW,UAAW,SAASF,EAAcC,GAC9B,IAAIgrC,EAAcjrC,EAAa/H,OAAOK,EAAI2H,EAAUxH,GAChDjO,EAAOnD,EAAM6jD,SAASlrC,EAAa/H,OAAQ+H,EAAaujC,SAAU0H,GAEtE,OAAO,IAAI3jD,EAAIkD,EAAK6N,EAAG7N,EAAK8N,EAAG9N,EAAK6N,EAAG7N,EAAK8N,IAGhD8P,eAAgB,WAGZ,GAFA0C,GAAUvT,GAAG6Q,eAAe5Q,KAAKvN,MAE7BA,KAAKqe,WAAare,KAAKqe,UAAUpd,OAAS,EAG1C,IAFA,IAAIihD,EAvBhB,SAAyBpkC,GAErB,IADA,IAAIokC,EAAiB,GACZlhD,EAAM,EAAGA,EAAM8c,EAAS7c,OAAQD,IAAO,CAC5C,IAAI8d,EAAUhB,EAAS9c,GACvBkhD,EAAepjC,EAAQ7M,UAAYiwC,EAAepjC,EAAQ7M,WAAa,GACvEiwC,EAAepjC,EAAQ7M,UAAU5M,KAAKyZ,GAG1C,OAAOojC,EAesBC,CAAgBniD,KAAKqe,WAEjCrd,EAAM,EAAGA,EAAMkhD,EAAejhD,OAAQD,IAAO,CAClD,IAAI8c,EAAWokC,EAAelhD,GAC9B,GAAI8c,GAAYA,EAAS7c,OAAS,EAAG,CACjC,IAAIqhB,EAAaxE,EAAS,GAAGpQ,WAAW,GACpC0Q,EAAcvgB,EAAKigB,GACnByE,EAAY1kB,EAAKugB,EAAY1Q,YAC7B00C,EAA6C,IAA1B9/B,EAAW9P,WAC9B6vC,EAAkB9/B,EAAU/P,aAAe+P,EAAUxR,gBAAkB,EACvEqxC,GAAoBC,GACpBxkD,EAAKigB,GAAUpQ,WAAWrI,KAAKid,MAOnD5D,cAAe,SAAShR,EAAYoI,EAAe7D,GAC/C,IASI6M,EAAU,IATFhJ,EAAcgL,QAGZlY,GACEiV,GAEAtB,IAGY7O,EAAYoI,EAAe7D,GACnD8M,EAAgB/e,KAAKye,oBAAoB3I,GAM7C,OAJIpI,EAAWzM,SAAW6U,EAAc1R,KAAKnD,QAAU8d,IAAkBvW,KACrEsW,EAAQ5e,QAAQ0c,QAAS,GAGtBkC,KAIfvhB,EAAkB0kD,GAAgB,CAC9BzrC,MAAM,EACNC,aAAa,IAGjB,IAAI6rC,GAAyB5/B,GAAkB7iB,OAAO,CAClDqiB,WAAY,eAGZqgC,GAAmBvhC,GAAYnhB,OAAO,CACtCqiB,WAAY,eAGZsgC,GAAiBP,GAAepiD,OAAO,CACvC6e,cAAe,SAAShR,EAAYoI,EAAe7D,EAAUgP,GACzD,IAEI8B,EACA7B,EACApC,EAJA7L,EAAYjT,KAAKE,QAAQ+S,UACzB6N,GAAShL,EAAcvG,MAAQ,IAAIuR,MAkBvC,OAbI7N,GAAahB,EAAW,GAAKgP,IAC7BC,EAAcD,EAAYvT,WAAWlJ,MAAM,GAC3Cue,EAAkB9B,GAGlBH,IAAUlY,IACVkW,EAAU,IAAIwjC,GAAuB50C,EAAYoI,EAAe7D,EAAU8Q,EAAiB7B,IACnFhhB,QAAQ0c,QAAS,GAEzBlP,EAAWrI,KAAKqI,EAAW,IAC3BoR,EAAU,IAAIyjC,GAAiB70C,EAAYoI,EAAe7D,EAAU8Q,EAAiB7B,IAGlFpC,GAGXL,oBAAqB,SAAS3a,GAC1B,OAAOA,EAAOib,eAAiBxW,MAInCk6C,GAAe9C,GAAa9/C,OAAO,CACnCC,KAAM,SAASK,EAAOD,GAClBy/C,GAAaryC,GAAGxN,KAAKyN,KAAKvN,KAAMG,EAAO,KAAMD,MAIrD3C,EAAkBklD,GAAc,CAC5Bz9B,QAAS,CACLC,SAAU,QAEd5L,OAAQ,CACJi8B,SAAU,MAIlB,IAAIoN,GAAqBvlD,EAAa0C,OAAO,CACzCC,KAAM,SAASI,GACX/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK8lB,QAAU5lB,EAAQ+lB,IAAMF,GAAiBD,IAGlDtY,OAAQ,SAASqrC,GACb,IACI34C,EADMF,KACQE,QACd0e,EAFM5e,KAES4e,SACfsH,EAAMhmB,EAAQgmB,IACdC,EAAUjmB,EAAQimB,QAClBnkB,EAAQ4c,EAAS3d,OACjBmlB,EAAQpkB,EAAQkkB,EAAOC,GAAWnkB,EAAQ,GAC1C2gD,EAAY9J,EAAOQ,MAAQjzB,EAC3BizB,EAAQR,EAAOa,WAAaiJ,GAAaz8B,EAAM,GAEnDlmB,KAAK8lB,QAAQlH,GAAU,SAAU0H,GAC7B,IAAIs8B,EAAa/J,EAAOj+B,QACxBgoC,EAAWlJ,WAAaL,EACxBuJ,EAAWvJ,MAAQsJ,EAEfr8B,EAAMuyB,SACN+J,EAAW11B,OAAS5G,EAAMuyB,OAAO3rB,QAGrC5G,EAAM9Y,OAAOo1C,GACbt8B,EAAMuyB,OAAS+J,EAEfvJ,GAASsJ,EAAaA,EAAYx8B,QAK9C5oB,EAAkBmlD,GAAoB,CAClCx8B,IAAK,EACLC,QAAS,IAGb,IAAI08B,GAAmB1lD,EAAa0C,OAAO,CACvC2N,OAAQ,SAASqrC,GACb,IACI/hC,EADM9W,KACQE,QAAQ4W,QACtB8H,EAFM5e,KAES4e,SACf6H,EAAgB7H,EAAS3d,OACzB0B,EAAQmU,EAAU2P,EAAgB,EAAI,EACtChH,EAAO3I,GAAW,EAAI,EAE1B9W,KAAK0O,IAAM,IAAIrR,EAEf,IAAK,IAAI4E,EAAIU,EAAOV,GAAK,GAAKA,EAAIwkB,EAAexkB,GAAKwd,EAAM,CACxD,IAAIqjC,EAAclkC,EAAS3c,GAAG42C,OAC9BiK,EAAYpJ,WAAab,EAAOa,WAChCoJ,EAAYzJ,MAAQR,EAAOQ,UAKnC0J,GAAgBl8B,GAAShnB,OAAO,CAChCqS,UAAW,WACP,OAAOuwC,IAGX37B,YAAa,WACT,OAAO47B,IAGX37B,UAAW,WACP,OAAO87B,IAGX9sC,aAAc,SAAS3E,EAAcoB,GACjC,OAAOpB,EAAatD,QAAQ0E,IAGhCyD,UAAW,SAASF,EAAcC,GAC9B,IAAIzV,EAAOwV,EAAa6E,QACpBvM,EAAI0H,EAAa/H,OAAOK,EAK5B,OAHA9N,EAAK2sB,OAAS7e,EAAI2H,EAAUxH,GAC5BjO,EAAKo5C,YAActrC,EAAI2H,EAAUvH,GAE1BlO,GAGX8V,YAAa,SAASjW,EAAO6V,GACzB7V,EAAMy4C,OAAS5iC,EACf7V,EAAMoN,UAGV6S,gBAAiB,WACbrgB,KAAKE,QAAQ6P,UAAU/B,OAAShO,KAAK0O,IAAIS,SAASnB,SAClD6Y,GAASvZ,GAAG+S,gBAAgB9S,KAAKvN,SAIzC+iD,GAAc5wC,UAAU3E,OAAS0D,GAAiBiB,UAAU3E,OAE5DjQ,EAAkBwlD,GAAe,CAC7BvsC,MAAM,EACNC,aAAa,EACb1G,UAAW,CACPrM,KAAM,SAId,IAAIs/C,GAAgB5C,GAAkBvgD,OAAO,CACzCwgD,gBAAiB,WACb,IAAIjvC,EAAe,IAAIzV,EAAQsnD,kBAAkBjjD,KAAKE,QAAQkR,aAAcpR,KAAKmR,cAEjFnR,KAAKugD,UAAYnvC,EACjBpR,KAAKoR,aAAeA,EACpBpR,KAAK+yB,WAAW3hB,GAChBpR,KAAKykC,sBACLzkC,KAAK0kC,4BAGTgc,iBAAkB,SAASlwC,GAevB,OAdIxQ,KAAKkjD,eACLtlD,EAAW4S,EAAU,CACjBoxC,eAAgB,CAAEl+C,KAAM3G,GACxB8kD,eAAgB,CAAEn+C,KAAM3G,KAI5BiD,KAAKmjD,eACLvlD,EAAW4S,EAAU,CACjB24B,kBAAkB,EAClB9vB,OAAQ,CAAEvB,OAAQ,QAInBla,EAAW4S,EAAUxQ,KAAKE,QAAQqT,YAG7CkxB,oBAAqB,WAEjBL,GAAoBjyB,UAAUsyB,oBAAoBl3B,KAAKvN,KAAMA,KAAKu3B,QAGtEmN,yBAA0B,WACtBN,GAAoBjyB,UAAUuyB,yBAAyBn3B,KAAKvN,KAAMA,KAAKu3B,QAG3E6O,aAAc,SAAStwB,GAEnB,OAAOA,GAGX6uB,aAAc,WACV,IAAI7gC,EAAS9D,KAAKw5B,oBAAoBx5B,KAAK8D,QACvC1C,EAAOpB,KAAKu3B,MAAM,GAEtBv3B,KAAKmlC,gBACD9P,GAAmBvxB,EAAQ,CAAEkG,KAC7B5I,GAGJpB,KAAK4lC,gBACDvQ,GAAmBvxB,EAAQ,CAAEoG,KAC7B9I,GAGJpB,KAAKqlC,eACDhQ,GAAmBvxB,EAAQ,CAAEmG,KAC7B7I,IAIRgiD,aAAc,SAASt/C,GACnB,IAAI5D,EAAU,CAAE4D,OAAQA,GACpB2jC,EAAc3jC,EAAO,GACzB,GAAI2jC,EAAa,CACb,IAAI6P,EAAiBt3C,KAAKw5B,oBAAoB11B,GAC1C8O,EAAQ60B,EAAY70B,MACxB1S,EAAQ+S,UAAYL,GAAS0kC,EAAer2C,OAAS,EACrDf,EAAQqS,aAAeK,GAAwB,SAAfA,EAAMlP,MAAmB4zC,EAAer2C,OAAS,EAE7Ef,EAAQqS,eACRvS,KAAKmjD,eAAgB,GAI7B,OAAOjjD,GAGXilC,gBAAiB,SAASrhC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIinC,EAAY,IAAIsa,GAAexiD,KAAMA,KAAKojD,aAAat/C,IAC3D9D,KAAKkzB,YAAYgV,EAAW9mC,KAGhCwkC,gBAAiB,SAAS9hC,EAAQ1C,GAC9B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIgnC,EAAY,IAAIga,GAAejiD,KAAMA,KAAKojD,aAAat/C,IAC3D9D,KAAKkzB,YAAY+U,EAAW7mC,KAGhCikC,eAAgB,SAASvhC,EAAQ1C,GAC7B,GAAsB,IAAlB0C,EAAO7C,OAAX,CAIA,IAAIwmC,EAAc3jC,EAAO,GACrB5D,EAAUF,KAAKojD,aAAat/C,GAChC5D,EAAQgmB,IAAMuhB,EAAYvhB,IAC1BhmB,EAAQimB,QAAUshB,EAAYthB,QAE9B,IAAI2hB,EAAW,IAAIib,GAAc/iD,KAAME,GACvCF,KAAKkzB,YAAY4U,EAAU1mC,GAE3BpB,KAAKkjD,eAAgB,IAGzB7xC,mBAAoB,WAChB,OAAOrR,KAAKoR,cAGhByuB,eAAgB,SAASxyB,EAAO6K,EAAGqxB,GAC/B,IAAIxsB,EAAS1P,EAAMm8B,kBAAkBtxB,GACjC9X,EAAQ,IAAIhD,EAAM2f,EAAO3O,EAAG2O,EAAO1O,GACnCkH,EAAWvV,KAAKoR,aAAa/Q,YAAYD,GACzCD,EAAQH,KAAKuT,UAAUjT,SAASF,GAEnB,OAAbmV,GAA+B,OAAVpV,GACrBkN,EAAM8K,QAAQoxB,EAAW,CACrB9wB,QAAS3a,EAAaoa,GACtB3C,SAAUA,EACVpV,MAAOA,KAKnBi3B,iBAAkB,eAGtBx5B,EAAWolD,GAAc7wC,UAAWytB,GAAqB,CACrD1M,YAAakR,GAAoBjyB,UAAU+gB,YAC3CiT,gBAAiB/B,GAAoBjyB,UAAUg0B,gBAC/CO,mBAAoBtC,GAAoBjyB,UAAUu0B,qBAGtDnpC,EAAkBylD,GAAe,CAC7B5xC,aAAc,CACVH,WAAY,IAEhBsC,UAAW,KAGf,IAAI8vC,GAAgBlmD,EAAa0C,OAAO,CACpCC,KAAM,SAASK,EAAOD,EAAS27C,GAC3B1+C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAKG,MAAQA,EACbH,KAAKE,QAAQ6G,MAAQ80C,EAAe90C,OAGxCyG,OAAQ,SAAS81C,GACb,IAAI/xC,EAASvR,KAAKuR,OACdwH,EAAQ/Y,KAAK4e,SAAS,GAE1B5e,KAAK0O,IAAM,IAAIrR,EAAIkU,EAAO,GAAGnD,EAAGmD,EAAO,GAAGlD,EAAGkD,EAAO,GAAGnD,EAAGmD,EAAO,GAAGlD,GAEhE0K,GACAA,EAAMvL,OAAO,IAAInQ,EAAIimD,EAAS30C,GAAI4C,EAAO,GAAGlD,EAAGi1C,EAAS10C,GAAI2C,EAAO,GAAGlD,KAI9EY,aAAc,WACV,IAGI5N,EAHAoC,EAAWzD,KAEXE,EAAUF,KAAKE,QAGnB/C,EAAamQ,GAAG2B,aAAa1B,KAAKvN,OAG9BqB,EADAnB,EAAQmB,OACCnB,EAAQmB,OAAO,CACpBkU,SAAUvV,KAAKuV,SACfF,SAAUrV,KAAKqV,SACflV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,OACbsS,WAAYpW,KAAKoW,WACjB7E,OAAQvR,KAAKuR,OACbrR,QAASA,EACTkP,OAAQpP,KAAKqP,YACbJ,aAAc,WAAc,OAAOxL,EAAS8/C,gBAGvCvjD,KAAKujD,eAIdvjD,KAAKqB,OAAOjD,OAAOiD,IAI3BkiD,WAAY,WACR,IAAIrjD,EAAUF,KAAKE,QACfka,EAASla,EAAQka,OAarB,OAZWhb,GAAKud,WAAW3c,KAAKuR,OAAQ,CACpC6P,KAAM,CACF9R,MAAOpP,EAAQoP,MACfkL,QAASta,EAAQsa,SAErB7K,OAAQ,CACJL,MAAO8K,EAAO9K,MACdkL,QAASJ,EAAOI,QAChB1L,MAAOsL,EAAOtL,SAEnB+N,SAKP3B,gBAAiB,SAAS4F,GACtB,OAAO1hB,GAAKud,WAAW3c,KAAKuR,OAAQuP,IAGxCvF,gBAAiB,WACb,OAAOvb,KAAKqB,OAAOud,SAAS,IAGhCpD,oBAAqB,WACjB,IAAI+J,EAAOnmB,GAAKud,WAAW3c,KAAKuR,QAAQsL,QAExC,MAAO,CACH3c,QAASF,KAAKE,QACdqlB,KAAMA,IAId3J,cAAe,WACX,IAAIlN,EAAM1O,KAAK0O,IACf,MAAO,CACHtO,MAAO,IAAIhD,EAAMsR,EAAIV,SAASI,EAAGM,EAAIF,IACrCqL,MAAO,CACHoC,WAAY,SACZ7J,SAAU,SAKtBwH,YAAa,SAAS9B,GAElB,OADY9X,KACCmV,MAAM0C,iBADP7X,KAC+B8X,MAInDva,EAAkB8lD,GAAe,CAC7B/zC,MAAO/S,EACP6d,OAAQ,CACJtL,MAAO,KAIflR,EAAWylD,GAAclxC,UAAW6F,IAEpC,IAAIwrC,GAAcrmD,EAAa0C,OAAO,CAClCC,KAAM,SAAS4B,EAAUxB,GACrB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK0B,SAAWA,EAChB1B,KAAKuR,OAAS,GACdvR,KAAKqZ,OAAS,GACdrZ,KAAKm7C,YAAc,GACnBn7C,KAAK4R,UAGTiG,iBAAkB,SAASzX,EAAO0X,GAC9B,OAAO9X,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAO1X,EAAMD,QAGtDyR,OAAQ,WACJ,IAAInO,EAAWzD,KAGXE,EADMF,KACQE,QACdm7C,EAFMr7C,KAEa0B,SAASxB,QAAQm7C,kBAAmC,IAAjBA,IAA2BA,EAAe,IACpG,IAAIv3C,EAAS5D,EAAQ4D,OAAO,GACxBM,EAAON,EAAOM,KAElB,GAAKA,EAQL,IAJA,IAAI4oB,EAAQgI,GAAalxB,GACrB0D,EAAQwlB,EAAMxlB,MACd+J,EAASyb,EAAMzb,OAEVtP,EAAI,EAAGA,EAAIsP,EAAOtQ,OAAQgB,IAAK,CACpC,IAAIoC,EAAYkN,EAAOtP,GAEvB,GAAKoC,EAAL,CAIA,IAAIF,EAASE,EAAUF,OAElB1G,EAAWqG,EAAOwL,SACnBxL,EAAOwL,MAAQnL,EAAOmL,OAAS+rC,EAAap5C,EAAIo5C,EAAap6C,SAGjEkD,EAASvG,EAAW,CAChBmJ,MAAO9E,EACPkT,MAAO1R,EACPK,OAAQA,EACRuR,SAAUjR,EAAKnC,GACfmU,WAAY/R,EAAUlE,MAAQqH,GAC/BrD,EAAQ,CAAEmS,QAASjS,EAAUiS,UAEhC,IAAInW,EAAQkE,EAAUd,YAAYpD,MAC9B2e,EAAUrb,EAASib,cAAcve,EAAOgE,GACxC4U,EAAQtV,EAAS0hB,YAAYhlB,EAAOgE,GAEpC2a,GAAW/F,GACX+F,EAAQ1gB,OAAO2a,MAK3B6iC,mBAAoB,SAAS17C,EAASC,EAAOgE,GACzC,IAAIL,EAASK,EAAOL,OAEpBsM,GAAYlQ,EAAS,CACjBC,MAAOA,EACP2D,OAAQA,EACRuR,SAAUlR,EAAOkR,SACjBtO,MAAO5C,EAAO4C,OACf,CAAEyJ,SAAU1M,EAAO0R,UAAW7E,SAAU,CAAE,OAAQ,UAAW,WAAY,SAAU,aAG1F+N,cAAe,SAASve,EAAOgE,GAC3B,IAAIuN,EAAgB9T,EAAW,GAAIuG,EAAOL,QAK1C,GAJA9D,KAAK47C,mBAAmBlqC,EAAevR,EAAOgE,GAE9CnE,KAAKg7C,iBAAiB76C,EAAOuR,EAAevN,IAErB,IAAnBA,EAAOmS,QAAmB,CAE1B,IAAIwI,EAAU,IAAIukC,GAAcljD,EAAOuR,EAAevN,GAMtD,OALA3I,EAAEqE,OAAOif,EAAS3a,GAElBnE,KAAK5B,OAAO0gB,GACZ9e,KAAKuR,OAAOlM,KAAKyZ,GAEVA,IAIfqG,YAAa,SAAShlB,EAAOgE,GACzB,IAAIL,EAASK,EAAOL,OAChBuR,EAAWlR,EAAOkR,SAClBgE,EAASzb,EAAW,GAAIoC,KAAKE,QAAQmZ,OAAQvV,EAAOuV,QACpDP,EAAO3Y,EAEX,GAAIkZ,EAAO/C,QAAS,CAChB,IAAIoD,EAAgB3b,EAAYsb,GAC5BjV,EAAO,CACPiR,SAAUA,EACVlV,MAAOA,EACPiW,WAAYjS,EAAOiS,WACnBb,SAAUpR,EAAOoR,SACjBzR,OAAQA,GAER4V,EACAZ,EAAOY,EAActV,GACdiV,EAAOvB,SACdgB,EAAO9Y,KAAK0B,SAASyP,aAAa2G,OAAOC,KAAKsB,EAAOvB,OAAQgB,IAG5DO,EAAO/J,QACR+J,EAAO/J,MAAQ3T,EAAQm9C,cAAch1C,EAAOwL,OACvC+J,EAAOc,aACRd,EAAOc,WAAarW,EAAOwL,QAInCtP,KAAK47C,mBAAmBviC,EAAQlZ,EAAOgE,GACvC,IAAImgB,EAAU,IAAItmB,EAAQ8a,EAAMlb,EAAW,CACvCkc,OAAQT,EAAO2B,UAChB3B,GAASjV,GAIZ,OAFApE,KAAKqZ,OAAOhU,KAAKif,GAEVA,IAIfm/B,aAAc,WAIV,IAHA,IAAIpqC,EAASrZ,KAAKqZ,OACdgD,EAAU,CAAErC,KAAM,EAAGC,MAAO,GAEvBhY,EAAI,EAAGA,EAAIoX,EAAOpY,OAAQgB,IAAK,CACpC,IACI4X,EADQR,EAAOpX,GACD/B,QAAQ2Z,MAC1B,GAAIA,IAAU1d,EAAQ,CAClB,IAAI2S,EAAQuK,EAAOpX,GAAGyM,IAAII,QAEtB+K,IAAUvd,EACV+f,EAAQrC,KAAO3X,KAAKC,IAAI+Z,EAAQrC,KAAMlL,GAEtCuN,EAAQpC,MAAQ5X,KAAKC,IAAI+Z,EAAQpC,MAAOnL,IAKpD,OAAOuN,GAGXqnC,mBAAoB,SAASh1C,EAAKI,EAAO60C,GAQrC,IAPA,IACIzjD,EADMF,KACQE,QACd4d,EAFM9d,KAESuR,OACfvP,EAAQ8b,EAAS7c,OACjB2iD,EAAe9lC,EAAS,GACxB+lC,EAAaD,EAER5iD,EAAM,EAAGA,EAAM8c,EAAS7c,OAAQD,IACjC8c,EAAS9c,GAAKoV,WAAaytC,EAAWztC,aACtCytC,EAAa/lC,EAAS9c,IAQ9B,IAJA,IAAI8iD,EAAiBF,EAAaxtC,WAAaytC,EAAWztC,WAActH,EACpEi1C,GAAkBj1C,EAAQg1C,GAAiB,EAC3CE,EAAiB,EAEZzvB,EAAQ,EAAGA,EAAQvyB,EAAOuyB,IAAS,CACxC,IAAIne,EAAa0H,EAASyW,GAAOne,WAC7B6tC,EAAcnmC,EAASyW,EAAQ,GAC/B2vB,EAAkBD,EAAcA,EAAY7tC,WAAaA,EACzD7E,EAASuM,EAASyW,GAAOhjB,OAAS,GAClCxC,EAAU7O,EAAqB,cAAKyjD,EAAcvtC,EAAeutC,EAAc3hD,EAC/EurB,OAAS,EAQbA,EAAS3uB,EAHL2uB,EAHCnX,GAGStH,EAAQg1C,GAAiBI,EAAiB9tC,IAAe,EAF1D8tC,EAAiB,EAAIp1C,EAAQ,EAKd,EAAGA,GAE/ByC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKo1C,EAAgBr1C,EAAIF,GAAKw1C,IAChEzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKG,EAAQi1C,EAAgBr1C,EAAIF,GAAKw1C,IACxEzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKG,EAAQye,EAAQ7e,EAAIF,GAAKO,EAASi1C,IACzEzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAK4e,EAAQ7e,EAAIF,GAAKO,EAASi1C,IAEjED,EAAiBx2B,EACjBy2B,GAAkBj1C,EAAS7O,EAAQikD,eACnCL,EAAgBllD,EAAWkQ,EAAQ,EAAIye,EAAQ,EAAGze,KAI1Ds1C,oBAAqB,SAAS11C,EAAKI,EAAO60C,GAYtC,IAXA,IACIzjD,EADMF,KACQE,QACd4d,EAFM9d,KAESuR,OACfvP,EAAQ8b,EAAS7c,OACjBojD,EAAkBnkD,EAAQokD,WAAa,EACvCA,EAAYD,EAAkBnkD,EAAQokD,UAAYx1C,EAAQA,EAC1Di1C,EAAiBM,EAAkB,GAAKv1C,EAAQA,EAAQ5O,EAAQokD,WAAa,EAE7EC,IADeF,EAAkBv1C,EAAQA,EAAyB,EAAjBi1C,GACnBO,GAAa,EAC3CN,EAAiB,EAEZhjD,EAAM,EAAGA,EAAMgB,EAAOhB,IAAO,CAClC,IAAIuQ,EAASuM,EAAS9c,GAAKuQ,OAAS,GAChC6E,EAAa0H,EAAS9c,GAAKoV,WAC3BmX,EAAUrtB,EAAqB,cAAKqkD,EAAcnuC,EAAemuC,EAAcviD,EAC/E+M,EAAU7O,EAAqB,cAAKyjD,EAAcvtC,EAAeutC,EAAc3hD,EAEnFuP,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKo1C,EAAgBr1C,EAAIF,GAAKw1C,IAChEzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKG,EAAQi1C,EAAgBr1C,EAAIF,GAAKw1C,IACxEzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKG,EAAQi1C,EAAiBx2B,EAAQ7e,EAAIF,GAAKO,EAASi1C,IAC1FzyC,EAAOlM,KAAK,IAAI3F,GAAcgP,EAAIC,GAAKo1C,EAAiBx2B,EAAO7e,EAAIF,GAAKO,EAASi1C,IACjFD,GAAkBx2B,EAClBy2B,GAAkBj1C,EAAS7O,EAAQikD,iBAI3C32C,OAAQ,SAAS81C,GACb,IAAI/xC,EAASvR,KAAKuR,OACdvP,EAAQuP,EAAOtQ,OAEnB,GAAKe,EAAL,CAIA,IAAI9B,EAAUF,KAAKE,QACfwO,EAAM40C,EAAS1oC,QAAQ6e,MAAMz5B,KAAKyjD,gBAClCE,EAAcj1C,EAAIK,SAAW7O,EAAQikD,gBAAkBniD,EAAQ,GAC/D8M,EAAQJ,EAAII,QAEZ5O,EAAQskD,aACRxkD,KAAK0jD,mBAAmBh1C,EAAKI,EAAO60C,GAEpC3jD,KAAKokD,oBAAoB11C,EAAKI,EAAO60C,GAGzC,IAAK,IAAI3iD,EAAM,EAAGA,EAAMgB,EAAOhB,IAC3BuQ,EAAOvQ,GAAKwM,OAAO81C,OAK/B/lD,EAAkBimD,GAAa,CAC3Bc,UAAW,GACXx1C,MAAO,IACP01C,cAAc,EACdC,eAAe,EACfN,eAAgB,EAChB9qC,OAAQ,CACJ/C,SAAS,EACTuD,MAAO1d,EACP6e,SAAU7e,EACV8T,OAAQ,KAIhBrS,EAAW4lD,GAAYrxC,UAAW4oC,IAElC,IAEI2J,GAAelB,GAAY3jD,OAAO,CAClCC,KAAM,SAAS4B,EAAUxB,GACrBA,EAAQskD,cAAe,EACvBtkD,EAAQokD,UALK,IAObd,GAAYl2C,GAAGxN,KAAKyN,KAAKvN,KAAM0B,EAAUxB,MAI7CykD,GAAiB9tB,GAAah3B,OAAO,CACrC+R,OAAQ,WACJ5R,KAAK4kD,YAAYpB,GAAanuB,GAAmBr1B,KAAK8D,OAAQ,CAAEwF,MAChEtJ,KAAK4kD,YAAYF,GAAcrvB,GAAmBr1B,KAAK8D,OAAQ,CAAEyF,OAGrEq7C,YAAa,SAASC,EAAW/gD,GAC7B,IAAI2jC,EAAc3jC,EAAO,GACzB,GAAK2jC,EAAL,CAIA,IAAIp6B,EAAQ,IAAIw3C,EAAU7kD,KAAM,CAC5B8D,OAAQA,EACRkzB,OAAQh3B,KAAKE,QAAQ82B,OACrBstB,UAAW7c,EAAY6c,UACvBG,cAAehd,EAAYgd,cAC3BD,aAAc/c,EAAY+c,aAC1BL,eAAgB1c,EAAY0c,eAC5BhpC,UAAWssB,EAAYtsB,YAG3Bnb,KAAKkzB,YAAY7lB,KAGrB6lB,YAAa,SAAS7lB,EAAOjM,GACzBy1B,GAAavpB,GAAG4lB,YAAY3lB,KAAKvN,KAAMqN,EAAOjM,GAC9ChD,EAAO4B,KAAKE,QAAQ82B,OAAOvL,MAAOpe,EAAM8tC,gBAqB5C2J,GAAe3nD,EAAa0C,OAAO,CACnCC,KAAM,SAASK,EAAOD,GAClB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,MAE1BA,KAAKE,QAAUA,EACfF,KAAKsP,MAAQpP,EAAQoP,OAAS/S,EAC9ByD,KAAKG,MAAQA,GAGjByR,OAAQ,WACA5R,KAAKsZ,YAITtZ,KAAKsZ,WAAY,EAEjBtZ,KAAKyZ,eACLzZ,KAAKmlB,cACLnlB,KAAK4Y,eAGTuM,YAAa,WACT,IACI9L,EADUrZ,KAAKE,QACEmZ,OAErB,GAAIA,EAAO/C,QAAS,CAChB,IAEIqD,EAFAtV,EAAYrE,KAAKqE,YACjBqV,EAAgB3b,EAAYsb,GAE5B0rC,EAAa1rC,EAAO/J,MAGpBqK,EADAD,EACYA,EAAcrV,GAEdrE,KAAK4Z,YAAYP,EAAOvB,QAGnCitC,IACDA,EAAappD,EAAQm9C,cAAc94C,KAAKsP,QAG5CtP,KAAK+Y,MAAQ,IAAI/a,EAAQ2b,EACrB/b,EAAW,CACPic,MAAO1d,EACP2d,OAAQ3d,EACR4d,OAAQ,CACJC,KAAM,EACNC,MAAO,GAEXhK,OAAQvS,EAAe2b,EAAOpJ,OAAQjQ,KAAK8D,OAAOmM,SAEtDoJ,EAAQ,CACJ/J,MAAOy1C,IAEX1gD,GAEJrE,KAAK5B,OAAO4B,KAAK+Y,SAIzBa,YAAa,SAAS9B,GAClB,OAAO9X,KAAKmV,MAAM0C,iBAAiB7X,KAAM8X,IAG7CtK,OAAQ,SAASC,GACbzN,KAAK4R,SAEL,IAAImH,EAAQ/Y,KAAK+Y,MAEjB/Y,KAAK0O,IAAMjB,EAEPsL,GACAA,EAAMvL,OAAOxN,KAAKya,aAGlBza,KAAKgZ,MACLhZ,KAAKgZ,KAAKxL,OAAOC,GAGrBzN,KAAKwZ,OAAOhM,OAAOxN,KAAKya,cAG5BA,UAAW,WACP,IACIrB,EADUpZ,KAAKE,QACGkZ,QAClBgB,EAAShB,EAAQgB,OACjBlL,EAAOlP,KAAK0O,IAAIS,SAEhB61C,EADOtnD,EAAe0b,EAAQ1V,KAAM,UACb5H,EAAiBmpD,aACxCx1B,EAAc/xB,EAAe0c,EAAOtL,MAAOk2C,EAAc,EAAI,GAC7DE,EAAkB7iD,KAAK1D,MAAM8wB,EAAc,GAE/C,GAAIrW,EAAQG,KAAM,CACd,IAAIvL,EAASkB,EAAKlB,SAClBkB,EAAKqK,KAAKzK,MAAQI,EAAKqK,KAAKxK,OAASqK,EAAQG,KAC7CrK,EAAK2Y,OAAOzZ,EAAI/L,KAAK1D,MAAMqP,EAAOI,EAAIc,EAAKqK,KAAKzK,MAAQ,GACxDI,EAAK2Y,OAAOxZ,EAAIhM,KAAK1D,MAAMqP,EAAOK,EAAIa,EAAKqK,KAAKxK,OAAS,GAQ7D,OALAG,EAAKqK,KAAKzK,OAAS2gB,EACnBvgB,EAAKqK,KAAKxK,QAAU0gB,EACpBvgB,EAAK2Y,OAAOxZ,GAAK62C,EAAkB,GACnCh2C,EAAK2Y,OAAOzZ,GAAK82C,EAAkB,GAE5BvpD,EAAQuyC,UAAUh/B,IAG7BgL,aAAc,WACV,IAAIha,EAAUF,KAAKE,QAEfka,EADUla,EAAQkZ,QACDgB,OACjBI,EAAU9c,EAAe0c,EAAOI,QAASta,EAAQsa,SAErD,MAAO,CACHlL,MAAO8K,EAAO9K,OAAStP,KAAKsP,MAC5BR,MAAOsL,EAAOtL,MACd0L,QAASA,EACT5K,SAAUwK,EAAOxK,WAIzB6J,aAAc,WACV,IAAIvZ,EAAUF,KAAKE,QACfquC,EAAgBruC,EAAQkZ,QACxBI,EAAS,IAAIvb,EAAa,CAC1ByF,KAAMhG,EAAe6wC,EAAc7qC,KAAM,QACzCoL,MAAOy/B,EAAch1B,KACrBxK,OAAQw/B,EAAch1B,KACtBgB,SAAUg0B,EAAch0B,SACxBJ,WAAYna,KAAKsP,MACjB8K,OAAQpa,KAAKka,eACbirC,aAAc5W,EAAc4W,aAC5B3qC,QAASxa,KAAK8D,OAAO0W,SAAWta,EAAQsa,QACxCvK,OAAQvS,EAAewC,EAAQ+P,OAAQjQ,KAAK8D,OAAOmM,QACnDF,UAAW7P,EAAQ6P,UACnB1O,OAAQnB,EAAQmB,QACjB,CACCgU,SAAUrV,KAAKqV,SACflV,MAAOH,KAAKG,MACZ2D,OAAQ9D,KAAK8D,OACbyR,SAAUvV,KAAKuV,WAGnBvV,KAAKwZ,OAASA,EACdxZ,KAAK5B,OAAOob,IAGhB0B,gBAAiB,SAAS4F,GACtB,IAAI5gB,EAAUF,KAAKE,QACfquC,EAAgBvuC,KAAKE,QAAQib,UAAU/B,SAAWpZ,KAAKE,QAAQkZ,QAE/D+B,EAAY,IAAIld,EAAa,CAC7ByF,KAAMhG,EAAe6wC,EAAc7qC,KAAM,QACzCoL,MAAOy/B,EAAch1B,KACrBxK,OAAQw/B,EAAch1B,KACtBgB,SAAUg0B,EAAch0B,SACxBJ,WAAYo0B,EAAcj/B,OAAStP,KAAKsP,MACxC8K,OAAQpa,KAAKka,eACbirC,aAAc5W,EAAc4W,aAC5B3qC,QAASxa,KAAK8D,OAAO0W,SAAWta,EAAQsa,QACxCvK,OAAQvS,EAAewC,EAAQ+P,OAAQjQ,KAAK8D,OAAOmM,UAGvDkL,EAAU3N,OAAOxN,KAAKya,aACtB,IAAIpZ,EAAS8Z,EAAUG,aAKvB,OAHAja,EAAOnB,QAAQkhB,KAAON,EAAMM,KAC5B/f,EAAOnB,QAAQyP,OAASmR,EAAMnR,OAEvBtO,GAGXka,gBAAiB,WACb,OAAOvb,KAAKolB,YAGhB5J,oBAAqB,WACjB,MAAO,CACHtb,QAASF,KAAKE,QACdgP,KAAMlP,KAAK0O,IAAIS,SACf9N,OAAQrB,KAAKolB,aAIrBxJ,cAAe,WACX,IAAI5B,EAAOha,KAAK0O,IAAIV,SAASI,EACzBsW,EAAM1kB,KAAK0O,IAAIF,GAhjYN,EAkjYb,MAAO,CACHpO,MAAO,IAAIhD,EAAM4c,EAAM0K,GACvB7K,MAAO,CACHoC,WAAY9f,EACZiW,SAAU/V,KAKtB6f,YAAa,SAASxN,GAClB,OAAO1O,KAAK0O,IAAIoN,SAASpN,IAG7ByN,eAAgB,aAIhB9X,UAAW,WACP,MAAO,CACH+J,EAAGpO,KAAKG,MAAMiO,EACdC,EAAGrO,KAAKG,MAAMkO,EACdlO,MAAOH,KAAKG,MAAMA,MAClBkV,SAAUrV,KAAKqV,SACfvR,OAAQ9D,KAAK8D,WAKzBlG,EAAWknD,GAAa3yC,UAAW6F,IACnCpa,EAAWknD,GAAa3yC,UAAWwG,IAEnCmsC,GAAa3yC,UAAU3B,SAAW,CAC9B4I,QAAS,CACL1V,KAAM,OACNyhD,aAAc,EACd/qC,OAAQ,CACJ9K,MAAO,gBAGf+M,QAAS,CAAEqI,IAAK,GAChBrL,OAAQ,CACJ/C,SAAS,EACT+F,QAAS,GAEb7B,QAAS,EACT3B,MAAO,CACHE,MAAO,KAIf,IAAIqsC,GAAejoD,EAAa0C,OAAO,CACnCC,KAAM,SAAS4B,EAAUxB,GACrB/C,EAAamQ,GAAGxN,KAAKyN,KAAKvN,KAAME,GAEhCF,KAAK0B,SAAWA,EAChB1B,KAAKmR,aAAezP,EAASyP,aAC7BnR,KAAK6rB,cAEL7rB,KAAK4R,UAGTia,YAAa,WACT7rB,KAAKuR,OAAS,GACdvR,KAAK0R,cAAgB,GACrB1R,KAAKY,WAAa,CAAEwB,IAAKpG,EAAWsG,IAAKrG,GACzC+D,KAAK2R,YAAc,IAGvBC,OAAQ,WACJ5R,KAAKqlD,WACLrlD,KAAK6R,mBAAmB7R,KAAK8R,SAASC,KAAK/R,QAG/CqlD,SAAU,WAMN,IALA,IAAI5hD,EAAWzD,KAGX8D,EADM9D,KACOE,QAAQ4D,OAEhBmO,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAG7C,IAFA,IAAI6D,EAAgBhS,EAAOmO,GAElBhO,EAAU,EAAGA,EAAU6R,EAAc1R,KAAKnD,OAAQgD,IAAW,CAClE,IACIV,EADQE,EAAS+T,WAAW1B,EAAe7D,EAAUhO,GACjCV,YACpBvG,EAAQuG,EAAYpD,QAAgC,OAAtBoD,EAAYpD,QAC1CsD,EAAS7C,WAAWwB,IAAMC,KAAKD,IAAIqB,EAAS7C,WAAWwB,IAAKmB,EAAYpD,OACxEsD,EAAS7C,WAAW0B,IAAMD,KAAKC,IAAImB,EAAS7C,WAAW0B,IAAKiB,EAAYpD,UAMxF2R,SAAU,SAAS3R,EAAOgE,GACtB,IAAI/D,EACAD,GAASnD,EAAQmD,EAAMA,QAA0B,OAAhBA,EAAMA,QACvCC,EAAQJ,KAAKkV,YAAY/U,EAAOgE,KAE5B3I,EAAEqE,OAAOO,EAAO+D,GAIxBnE,KAAKuR,OAAOlM,KAAKjF,IAGrBkV,iBAAkB,SAASpV,EAASC,EAAOgE,GACvC,IAAIL,EAASK,EAAOL,OAChBmO,EAAW9N,EAAO8N,SAClB3B,EAAQ,CACRE,SAAU1M,EAAO0R,UACjB7E,SAAU,CACN,OAAQ,UAAW,UAAW,WAC9B,SAAU,SAAU,2BAIxB8E,EAASzV,KAAK2R,YAAYM,GACzBjV,EAAQyY,KACTzV,KAAK2R,YAAYM,GAAYwD,EAASrF,GAAYlQ,EAAS,GAAIoQ,GAAO,IAG1E,IAAI0B,EAAe9R,EAYnB,OAXIuV,GAEArF,GADA4B,EAAepU,EAAW,GAAIsC,GACJ,CACtBC,MAAOA,EACP2D,OAAQA,EACRuR,SAAUlR,EAAOkR,SACjBjT,IAAKpC,KAAKY,WAAWwB,IACrBE,IAAKtC,KAAKY,WAAW0B,KACtBgO,GAGA0B,GAGXE,UAAW,WACP,OAAO4yC,IAGX9yC,aAAc,SAASlO,EAAQmO,GAC3B,IAAI/R,EAAUF,KAAK0R,cAAcO,GACjC,IAAK/R,EAAS,CACV,IAAIsQ,EAAWxQ,KAAKkS,YAAYC,UAAU3B,SAC1CxQ,KAAK0R,cAAcO,GAAY/R,EAAUtC,EAAW,GAAI4S,EAAU,CAC9D4I,QAAS,CACLoB,QAAS1W,EAAO0W,SAEpB0O,QAAS,CACLpR,OAAQ9X,KAAKE,QAAQgpB,QAAQpR,QAEjCuB,OAAQ,CACJvB,OAAQ9X,KAAKE,QAAQmZ,OAAOvB,SAEjChU,GAGP,OAAO5D,GAGXgV,YAAa,SAAS/U,EAAOgE,GACzB,IAAIL,EAASK,EAAOL,OAChBkO,EAAehS,KAAKgS,aAAalO,EAAQK,EAAO8N,UAChD3C,EAAQnL,EAAOmL,OAASxL,EAAOwL,MAInC,GAFA0C,EAAehS,KAAKsV,iBAAiBtD,EAAc7R,EAAOgE,GAEtD1G,EAAWqG,EAAOwL,OAClBA,EAAQ0C,EAAa1C,WAClB,GAA4B,IAAxBtP,KAAKY,WAAW0B,IAAW,CAClC,IAAIkyC,EAtXC,SAAUllC,EAAOg2C,QACH,IAAvBA,IAAiCA,EAAqB,KAE1D,IAAI3/B,EAAYjqB,MAAM6pD,WAAWj2C,GAC7Bie,EAAS,EAAI+3B,EAEjB,OAAO,SAAUnlD,GACb,IAAIqlD,EAAM7/B,EAAU8/B,QAChB9kD,EAAQ,IAAM6kD,EAAIE,EAClBtlD,EAAQmtB,EAASptB,EAGrB,OAFAqlD,EAAIE,GAAKrjD,KAAKD,IAAIhC,EAAQO,EAAOA,GAE1B6kD,EAAIG,SA0WKC,CAAWt2C,GACvBA,EAAQklC,EAAMr0C,EAAMA,MAAQH,KAAKY,WAAW0B,KAGhD,IAAIlC,EAAQ,IAAI0kD,GAAa3kD,EAAO6R,GAKpC,OAJA5R,EAAMkP,MAAQA,EAEdtP,KAAK5B,OAAOgC,GAELA,GAGXurB,WAAY,SAAS7nB,GACjB,IAAIwoB,EAAYxoB,EAAOyoB,MACnBC,EAAY1oB,EAAO2oB,MACnB/qB,EAAW1B,KAAK0B,SAChB6qB,EAAQD,EAAY5qB,EAASkrB,WAAWN,GAAa5qB,EAASmrB,MAC9DJ,EAAQD,EAAY9qB,EAASorB,WAAWN,GAAa9qB,EAASqrB,MAElE,IAAKR,EACD,MAAM,IAAIplB,MAAM,qCAAuCmlB,GAG3D,IAAKG,EACD,MAAM,IAAItlB,MAAM,qCAAuCqlB,GAG3D,MAAO,CAAED,MAAOA,EAAOE,MAAOA,IAGlCjf,OAAQ,SAASC,GACb,IAAIhK,EAAWzD,KAEX6V,EAAc7V,KAAKuR,OACnB7Q,GAASV,KAAKE,QAAQsW,KACtBvS,EAAU,EAEdjE,KAAK6R,oBAAmB,SAAU1R,EAAOgE,GACrC,IAAI/D,EAAQyV,EAAY5R,KACpBgQ,EAAMxQ,EAASkoB,WAAWxnB,EAAOL,QACjCyoB,EAAQtY,EAAIsY,MACZE,EAAQxY,EAAIwY,MACZo5B,EAASt5B,EAAMiS,cAAcr+B,EAAMiO,GACnC03C,EAASr5B,EAAM+R,cAAcr+B,EAAMkO,GACnC4I,EAAQsV,EAAMze,QAAQ+3C,EAAQA,EAAQnlD,GACtCwW,EAAQuV,EAAM3e,QAAQg4C,EAAQA,EAAQplD,GAE1C,GAAIN,EACA,GAAI6W,GAASC,EAAO,CAChB,IAAIjB,EAAYxS,EAASwS,UAAUgB,EAAOC,GAC1C9W,EAAMoN,OAAOyI,QAEb7V,EAAMkW,SAAU,KAK5BtW,KAAK0O,IAAMjB,GAGfwI,UAAW,SAASgB,EAAOC,GACvB,OAAO,IAAI7Z,EAAI4Z,EAAMtI,GAAIuI,EAAM1I,GAAIyI,EAAMrI,GAAIsI,EAAMzI,KAGvDoD,mBAAoB,SAASsF,GAMzB,IALA,IAAI1T,EAAWzD,KAGX8D,EADM9D,KACOE,QAAQ4D,OAEhBmO,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAQ7C,IAPA,IAAI6D,EAAgBhS,EAAOmO,GACvB+a,EAAQvpB,EAASkoB,WAAW7V,GAC5ByW,EAAQS,EAAMT,MACdE,EAAQO,EAAMP,MACds5B,EAASx5B,EAAMga,sBACfyf,EAASv5B,EAAM8Z,sBAEVtiC,EAAU,EAAGA,EAAU6R,EAAc1R,KAAKnD,OAAQgD,IAAW,CAClE,IAAIgiD,EAAQxiD,EAAS+T,WAAW1B,EAAe7D,EAAUhO,GACrD9D,EAAQ8lD,EAAM1iD,YACdY,EAAS8hD,EAAM9hD,OACf+hD,EAAS35B,EAAM0a,WAAW9mC,EAAMiO,GAChC+3C,EAAS15B,EAAMwa,WAAW9mC,EAAMkO,GAChC+3C,EAAML,EAAO3jD,KAAO8jD,GAAUA,GAAUH,EAAOzjD,IAC/C+jD,EAAML,EAAO5jD,KAAO+jD,GAAUA,GAAUH,EAAO1jD,IAE/C8jD,GAAOC,GACPlvC,EAAShX,EAAOvC,EAAW,CACvBqG,QAASA,EACTH,OAAQgS,EACR7D,SAAUA,EACVoD,SAAUS,EAAc1R,KAAKH,GAC7BkR,MAAO1R,GACRU,MAMnB0T,iBAAkB,SAASzX,EAAO0X,GAC9B,IAAI3X,EAAQC,EAAMD,MAClB,OAAOH,KAAKmR,aAAa2G,OAAOC,KAAKD,EAAQ3X,EAAMiO,EAAGjO,EAAMkO,EAAGlO,EAAMA,QAGzEygB,gBAAiB,WAGb,IAFA,IAAIrP,EAASvR,KAAKuR,OACd9O,EAAS,GACJzB,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnCyB,EAAO4C,MAAMkM,EAAOvQ,IAAQ,IAAIwY,QAEpC,OAAO/W,KAGflF,EAAkB6nD,GAAc,CAC5BthD,OAAQ,GACRolB,QAAS,CACLpR,OAAQ,iBAEZuB,OAAQ,CACJvB,OAAQ,OAEZtB,MAAM,IAEV5Y,EAAWwnD,GAAajzC,UAAW,CAC/BqF,WAAYtG,GAAiBiB,UAAUqF,aAG3C,IAAI8uC,GAAkBzvB,GAAah3B,OAAO,CACtCi3B,WAAY,WACR92B,KAAK4sB,WAAa,GAClB5sB,KAAK8sB,WAAa,IAGtBlb,OAAQ,SAAS2lB,QACC,IAAVA,IAAoBA,EAAQv3B,KAAKu3B,OAErCv3B,KAAKumD,iBACLvmD,KAAK03C,WAAWngB,GAChBv3B,KAAK2kC,aAAapN,GAClBv3B,KAAKwmD,oBAGTD,eAAgB,WAKZ,IAJA,IAEIziD,EAAS9D,KAAK6lC,WAAa7lC,KAAK8D,OAE3B7B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CAUpC,IATA,IAAI6T,EAAgBhS,EAAO7B,GACvBmC,EAAO0R,EAAc1R,MAAQ,GAC7B6P,EAPOjU,KAOQ2rB,WAAW7V,GAC1ByW,EAAQtY,EAAIsY,MACZE,EAAQxY,EAAIwY,MAEZg6B,EAAc9qD,EAAQ+qD,cAAcn6B,EAAMtb,YAAc,IACxD01C,EAAchrD,EAAQ+qD,cAAcj6B,EAAMxb,YAAc,IAEnD69B,EAAa,EAAGA,EAAa1qC,EAAKnD,OAAQ6tC,IAAc,CAC7D,IAAI9hB,EAAQhqB,GAAasC,QAAQtB,UAAU8R,EAAeg5B,GAAYvrC,YAClE6K,EAAI4e,EAAM5e,EACVC,EAAI2e,EAAM3e,EAETo4C,EAAYG,IAAIx4C,IACjBq4C,EAAYI,IAAIz4C,GAGfu4C,EAAYC,IAAIv4C,IACjBs4C,EAAYE,IAAIx4C,GAIxBke,EAAMtb,WAAaw1C,EAAY1kD,SAC/B0qB,EAAMxb,WAAa01C,EAAY5kD,WAIvC4iC,aAAc,SAASpN,GAKnB,IAJA,IAAI9zB,EAAWzD,KAEXs5B,EAAet5B,KAAKq5B,oBAEfp3B,EAAI,EAAGA,EAAIs1B,EAAMt2B,OAAQgB,IAAK,CACnC,IAAIb,EAAOm2B,EAAMt1B,GACb4iC,EAAavL,EAAal4B,EAAKlB,QAAQY,MAAQ,YAAc,GACjE2C,EAAS60B,YAAYuM,GACrB,IAAIyS,EAAiB7zC,EAAS+1B,oBAAoBqL,GAE7CyS,GAIL7zC,EAASqjD,mBACLzxB,GAAmBiiB,EAAgB,CAAE9tC,KACrCpI,KAKZ0lD,mBAAoB,SAAShjD,EAAQ1C,GACjC,IAAIiM,EAAQ,IAAI+3C,GAAaplD,KAAM,CAC/B8D,OAAQA,IAGZ9D,KAAKkzB,YAAY7lB,EAAOjM,IAG5Bm4B,eAAgB,SAASz1B,GACrB,IAAI5D,EAAUF,KAAKE,QACfosB,EAAYxoB,EAAOyoB,MACnBorB,EAAe,GAAG5zC,OAAO7D,EAAQqsB,OACjCA,EAAQ1tB,EAAK84C,GAAc,SAASziB,GAAK,OAAOA,EAAEp0B,OAASwrB,KAAc,GACzEE,EAAY1oB,EAAO2oB,MACnBmrB,EAAe,GAAG7zC,OAAO7D,EAAQusB,OACjCA,EAAQ5tB,EAAK+4C,GAAc,SAAS1iB,GAAK,OAAOA,EAAEp0B,OAAS0rB,KAAc,GAEzE+a,GADQrnC,EAAQq3B,OAAS,CAAE,KACH,GAAGz2B,MAAQ,UAGvC,OAFgByrB,GAAS,IAAInrB,OAASqrB,GAAS,IAAIrrB,MAAQmmC,GAK/D5b,WAAY,SAAS7nB,GACjB,IAAIyoB,EACAE,EAEAvsB,EAAUF,KAAKE,QAEfy3C,EAAe,GAAG5zC,OAAO7D,EAAQqsB,OACjCD,EAAYxoB,EAAOyoB,MAEnBA,EADAD,EACQqrB,EAAa4G,MAAK,SAAUx+C,GAAQ,OAAOA,EAAKe,OAASwrB,KAEzDqrB,EAAa,GAGzB,IAAIC,EAAe,GAAG7zC,OAAO7D,EAAQusB,OACjCD,EAAY1oB,EAAO2oB,MAOvB,GALIA,EADAD,EACQorB,EAAa2G,MAAK,SAAUx+C,GAAQ,OAAOA,EAAKe,OAAS0rB,KAEzDorB,EAAa,IAGpBrrB,EACD,MAAM,IAAIplB,MAAM,qCAAuCmlB,GAG3D,IAAKG,EACD,MAAM,IAAItlB,MAAM,qCAAuCqlB,GAG3D,MAAO,CAAED,MAAOA,EAAOE,MAAOA,IAGlC+5B,iBAAkB,WAEd,IADA,IAAIzlD,EAAOf,KAAKe,KACPkB,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAC7BlB,EAAKkB,GAAG0mC,gBAIhBkP,aAAc,SAAS33C,EAASkS,EAAU4E,GActC,IAbA,IAwBI8gC,EAxBAlkC,EAAW1T,EAAQY,KACnBi3C,EAAY3lC,EAAWpS,KAAK8sB,WAAa9sB,KAAK4sB,WAC9C6I,EAAcj6B,EAAEqE,OAAO,CACvB2T,kBAAmB,GACpBtT,EAAS,CACRkS,SAAUA,EACV0E,QAAU1E,GAAYpS,KAAKmR,aAAa8U,KAAQ/lB,EAAQ4W,QAAU5W,EAAQ4W,QAC1EsG,WAAW,IAEX2pC,EAAgBtxB,EAAYxkB,WAAawkB,EAAYxkB,WAAW,GAAK,KACrEgnC,EAAc,CAAExiB,EAAYrzB,IAAKqzB,EAAYnzB,IAAKykD,GAClDjjD,EAAS9D,KAAK8D,OAETmO,EAAW,EAAGA,EAAWnO,EAAO7C,OAAQgR,IAAY,CACzD,IAAI6D,EAAgBhS,EAAOmO,GACvBimC,EAAiBpiC,EAAc1D,EAAW,QAAU,SACxD,GAAK8lC,IAAmBziB,EAAY30B,MAAwB,IAAdkW,IAAoBkhC,EAAiB,CAC/E,IAAIC,EAAkBn1C,GAAasC,QAAQtB,UAAU8R,EAAe,GAAGvS,YACvE00C,EAAY5yC,KAAK8yC,EAAgB/lC,EAAW,IAAM,MAElD,OAMR,IAAK,IAAInQ,EAAI,EAAGA,EAAIg2C,EAAYh3C,OAAQgB,IACpC,GAAIg2C,EAAYh2C,aAAc2zB,KAAM,CAChCkiB,GAAe,EACf,MAWR,IAAI/3C,EAAO,IANPk1B,GAAiBQ,EAAY/xB,KAAM7G,KAAW44B,EAAY/xB,MAAQo0C,EACvDn8C,EAAQmtC,iBAERtqC,GAGSi3B,EAAaz1B,KAAKmR,cAG1C,GAFApR,EAAKiX,UAAYA,EAEbpD,EAAU,CACV,GAAImkC,EAAUnkC,GACV,MAAM,IAAIzM,OAAQiL,EAAW,IAAM,KAAO,mBAAqBwB,EAAW,uBAE9EmkC,EAAUnkC,GAAY7T,EAM1B,OAHAC,KAAK+yB,WAAWhzB,GAChBA,EAAKinC,gBAEEjnC,GAGX23C,WAAY,SAASngB,GASjB,IARA,IAAI9zB,EAAWzD,KAEXE,EAAUF,KAAKE,QACfm4C,EAAe,GAAGt0C,OAAO7D,EAAQqsB,OACjCwM,EAAQ,GACRuf,EAAe,GAAGv0C,OAAO7D,EAAQusB,OACjCuM,EAAQ,GAEHh4B,EAAM,EAAGA,EAAMq3C,EAAap3C,OAAQD,IAAO,CAChD,IAAIilC,EAAWxiC,EAASq0B,SAASugB,EAAar3C,GAAKI,MAC/C5D,EAAQyoC,EAAU1O,IAClBwB,EAAM1zB,KAAK5B,EAASo0C,aAAaQ,EAAar3C,IAAM,EAAOA,IAInE,IAAK,IAAIuzB,EAAQ,EAAGA,EAAQ+jB,EAAar3C,OAAQszB,IAAS,CACtD,IAAIgkB,EAAa90C,EAASq0B,SAASwgB,EAAa/jB,GAAOnzB,MACnD5D,EAAQ+6C,EAAYhhB,IACpByB,EAAM3zB,KAAK5B,EAASo0C,aAAaS,EAAa/jB,IAAQ,EAAMA,IAIpEv0B,KAAK6sB,MAAQ7sB,KAAK6sB,OAASkM,EAAM,GACjC/4B,KAAK+sB,MAAQ/sB,KAAK+sB,OAASiM,EAAM,IAGrC5F,WAAY,SAASrzB,GACjB,IAAI6T,EAAW7T,EAAKG,QAAQY,KAE5B+1B,GAAavpB,GAAG8lB,WAAW7lB,KAAKvN,KAAMD,GAElCA,EAAKG,QAAQkS,gBACNpS,KAAK8sB,WAAWlZ,UAEhB5T,KAAK4sB,WAAWhZ,GAGvB7T,IAASC,KAAK6sB,cACP7sB,KAAK6sB,MAGZ9sB,IAASC,KAAK+sB,cACP/sB,KAAK+sB,OAIpB8S,eAAgB,SAASxyB,EAAO6K,EAAGqxB,GAQ/B,IAPA,IAAIxsB,EAAS1P,EAAMm8B,kBAAkBtxB,GACjC9X,EAAQ,IAAIhD,EAAM2f,EAAO3O,EAAG2O,EAAO1O,GACnCulB,EAAU5zB,KAAKe,KACfE,EAAS2yB,EAAQ3yB,OACjBu3C,EAAU,GACVC,EAAU,GAELx2C,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIlC,EAAO6zB,EAAQ3xB,GAEnB4yB,GADa90B,EAAKG,QAAQkS,SAAWqmC,EAAUD,EACvBz4C,EAAKM,YAAYD,IAGzCo4C,EAAQv3C,OAAS,GAAKw3C,EAAQx3C,OAAS,GACvCoM,EAAM8K,QAAQoxB,EAAW,CACrB9wB,QAAS3a,EAAaoa,GACtBQ,cAAeR,EACf9J,EAAGynB,GAAkB2iB,GACrBnqC,EAAGwnB,GAAkB4iB,MAKjC/O,kBAAmB,SAAS3pC,EAAMG,GAC9B,IAAIkS,EAAWrS,EAAKG,QAAQkS,SACxBrR,EAAOf,KAAK84B,UAAU94B,KAAKu3B,OAC3BxwB,GAASqL,EAAWrR,EAAKsN,EAAItN,EAAKqN,GAAGzH,QAAQ5G,GAEjDinD,GAAoBhnD,KAAKE,QAAS6G,EAAOqL,EAAUlS,GACnD8mD,GAAoBhnD,KAAKk3B,gBAAiBnwB,EAAOqL,EAAUlS,IAG/Dw3B,iBAAkB,SAAS33B,GAEvB,OAAOvE,EAAEqE,OAAO,GAAIE,EAAKG,QAAQowB,UAAW,CAAErgB,OAAQ,OAI9D,SAAS+2C,GAAoBrd,EAAe3yB,EAAW5E,EAAUlS,GAC7D,IAAIu1B,EAAe,GAAG1xB,OAAOqO,EAAWu3B,EAAcld,MAAQkd,EAAcpd,OAAQvV,GACpFpZ,EAAW63B,EAAav1B,GAG5B3C,EAAkB+oD,GAAiB,CAC/B/5B,MAAO,GACPE,MAAO,KAGX7uB,EAAW0oD,GAAgBn0C,UAAWytB,IAEtC,IAAIqnB,GAAQ,QACRC,GAAQ,QAERC,GAAM,MACNC,GAAM,MACNC,GAAY,WAIhBhX,GAAgB/qC,QAAQjC,SAAS+gC,GAAqB,CAClDr7B,GAAKK,GAAQM,GAAMiB,GAAe7B,GAAM0B,GACxCrB,GAAaQ,GAAMT,GAAQwB,GAAiB1B,GAAUyB,GACtDJ,GAAcD,GAAWS,GAAWpB,GAAsBU,GAAYS,KAG1EylC,GAAgB/qC,QAAQjC,SAAS8zC,GAAY,CACzC7sC,GAASC,GAActB,KAG3BonC,GAAgB/qC,QAAQjC,SAASm8C,GAAa,CAAE51C,KAChDymC,GAAgB/qC,QAAQjC,SAAS48C,GAAe,CAAE52C,KAClDgnC,GAAgB/qC,QAAQjC,SAASshD,GAAgB,CAAEr7C,GAAQC,KAE3D8mC,GAAgB/qC,QAAQjC,SAASq+C,GAAe,CAAE73C,GAAYC,GAAYC,KAC1EsmC,GAAgB/qC,QAAQjC,SAAS2/C,GAAe,CAAEh5C,GAAYC,GAAcC,KAE5EmmC,GAAgB/qC,QAAQjC,SAASijD,GAAiB,CAAE98C,KAEpDxG,GAAasC,QAAQjC,SACjB,CAAE0F,GAAKK,GAAQM,GAAMiB,GAAe7B,GAAM0B,IAC1C,CAAEtO,GAAS,CAAEqQ,GAAU06C,GAAOI,GAAWp/C,GAAiBC,GAAkB4E,KAGhF9J,GAAasC,QAAQjC,SACjB,CAAEgH,GAAcD,GAAWD,GAAYS,IACvC,CAjCO,OAKF,MA4BS,CAAE2B,GAAU06C,GAAOI,GAAWv6C,KAGhD9J,GAAasC,QAAQjC,SACjB,CAAEwH,GAAWpB,IACb,CAAEvN,GAAS,CAAEqQ,GAAU06C,GAAOI,GAlCd,UAkCwCv6C,KAG5D9J,GAAasC,QAAQjC,SAAS,CAAEwG,GAAYC,GAAYC,IAAiB,CAAEtN,EAAGC,GAAK,CAAEuqD,GAAOn6C,KAC5F9J,GAAasC,QAAQjC,SAAS,CAAE2G,GAAYC,GAAcC,IAAc,CAAEhO,GAAS,CAAE+qD,GAAOn6C,KAE5F9J,GAAasC,QAAQjC,SACjB,CAAEiG,GAAQC,IACV,CAAErN,GAAS,CAAEqQ,GAAU06C,GAAO,kBAAmB,UAAWn6C,KAGhEq0B,GAAkB77B,QAAQjC,SACtB,CAAE0F,GAAKK,GAAQM,GAAMiB,GAAe7B,GAAM0B,GAAeK,GAAWpB,IACpE,CAAEtJ,MAAOgnD,GAAK73C,MAAO43C,GAAO9xC,SAAU8xC,GAAOI,SAAUF,GAAKG,UAAWJ,KAG3EhmB,GAAkB77B,QAAQjC,SACtB,CAAEgH,GAAcD,GAAWD,GAAYS,IACvC,CAAEpK,KAAM4mD,GAAK3mD,GAAI0mD,GAAK73C,MAAO43C,GAAO9xC,SAAU8xC,KAGlD/lB,GAAkB77B,QAAQjC,SACtB,CAAE2G,GAAYC,GAAcC,IAC5B,CAAE/J,MAAOgnD,GAAK73C,MAAO43C,KAGzBlkD,GAAasC,QAAQjC,SACjB,CAAEiH,GAASC,GAActB,IACzB,CAAExM,EAAGC,GAAK,CAAEuqD,GAAOI,GAAWl/C,GAAmBC,GAAoBC,GAAmBC,KAG5FtF,GAAasC,QAAQjC,SACjB,CAAE4F,IAAU,CAAExM,EAAGC,EAAG,QAAU,CAAEuqD,GAAO16C,GAAU86C,KAGrDrkD,GAAasC,QAAQjC,SACjB,CAAEmG,IACF,CAAE/M,EAAGC,EAAGR,GAAS,CAAE+qD,GAAOI,KAG9BrkD,GAAasC,QAAQjC,SACjB,CAAE8F,GAAaQ,IACf,CAAE,OAAQ,OAAQ,MAAO,SAAW,CAAE4C,GAAU06C,GAAO,YAAaI,KAGxElmB,GAAkB77B,QAAQjC,SACtB,CAAE8F,GAAaQ,IACf,CAAEqe,KAAMm/B,GAAK1gD,KAAM0gD,GAAK3gD,IAAK4gD,GAAKvqC,MAAOsqC,GACvC73C,MAAO43C,GAAO59B,UAAW49B,GAAO9xC,SAAU8xC,KAGhDlkD,GAAasC,QAAQjC,SACjB,CAAE2F,GAAUyB,IACZ,CAAE,QAAS,KAAM,SAAU,KAAM,QAAS,OAAQ,YAAc,CAAE8B,GAAU06C,GAAOI,GAAWv6C,KAGlGq0B,GAAkB77B,QAAQjC,SACtB,CAAE2F,GAAUyB,IACZ,CAAEqf,MAAOq9B,GAAKx9B,GAAIw9B,GAAKj9B,OAAQi9B,GAAKv9B,GAAIu9B,GAAKp9B,MAAOo9B,GAAKh9B,KAAMg9B,GAAKv8B,SAAUs8B,GAC5E53C,MAAO43C,GAAO9xC,SAAU8xC,KAG9BlkD,GAAasC,QAAQjC,SACjB,CAAE6F,GAAQwB,IACV,CAAE,UAAW,UAAY,CAAE6B,GAAU06C,GAAO,kBAAmBI,GAAWv6C,KAG9Eq0B,GAAkB77B,QAAQjC,SACtB,CAAE6F,GAAQwB,IACV,CAAEpF,QAAS6hD,GAAKloC,OAAQkoC,GAAK73C,MAAO43C,GAAO9xC,SAAU8xC,KAGzDlkD,GAAasC,QAAQjC,SACjB,CAAEuG,GAAKP,IACP,CAAEnN,GAAS,CAAEqQ,GAAU06C,GAAO,UAAW,kBAAmB,UAAWn6C,KAG3E,IAAI06C,GAAa,CAAEj7C,GAAUrQ,EAAOO,EAAGC,GAOnC+qD,GAAQ7rD,EAAMiE,OAAO,CACrBC,KAAM,SAAS2Y,EAASivC,EAAaC,EAAct3C,GAC/C,IAAI5M,EAAWzD,UACC,IAAZqQ,IAAsBA,EAAU,IAEpCrQ,KAAK4nD,UAAY,GACjB5nD,KAAK6nD,YAAYx3C,EAAQ0gC,UACzB/wC,KAAKmR,aAAe,IAAInS,EAAS8oD,aAAa9nD,KAAMqQ,GACpDrQ,KAAKmR,aAAa6nC,MAAQ2O,EAE1B3nD,KAAK+nD,aAAatvC,GAElB,IAAIvY,EAAUtC,EAAW,GAAIoC,KAAKE,QAASwnD,GAC3C1nD,KAAKgoD,iBAAmBpqD,EAAW,GAAIsC,GACvCF,KAAKioD,OAASN,EACd3nD,KAAKkoD,WAAWhoD,EAASynD,GAEzB3nD,KAAKmoD,gBACLnoD,KAAKooD,eAELpoD,KAAKumD,iBACL5qD,EAAQ0sD,WAAWC,aAAaZ,GAAa,WACzCjkD,EAAS8kD,YAAa,EACjB9kD,EAAS+kD,aACV/kD,EAAS0U,QAAQ,QACjB1U,EAASglD,UACThlD,EAASilD,qBAKrBX,aAAc,SAAStvC,GAGnB,IAFAzY,KAAK2oD,iBAAiBlwC,GACtBA,EAAQqI,MAAM9F,SAAW,WAClBvC,EAAQmwC,YACXnwC,EAAQyzB,YAAYzzB,EAAQmwC,YAEhC5oD,KAAKyY,QAAUA,GAGnBkwC,iBAAkB,SAASlwC,GACvB9c,EAAQ04C,SAAS57B,EAAS,YAG9ByvC,WAAY,SAAShoD,EAASynD,GAI1B,IAHA,IAAIkB,EAAe,GACf/kD,EAAS5D,EAAQ4D,QAAU,GAEtB7B,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAC/B4mD,EAAaxjD,KAAK7J,EAAEqE,OAAO,GAAIiE,EAAO7B,KAE1C/B,EAAQ4D,OAAS+kD,EAolDzB,SAA4B3oD,GAGxB,IAFA,IAAI4oD,EAAUtB,GAELxmD,EAAM,EAAGA,EAAM8nD,EAAQ7nD,OAAQD,IAAO,CAC3C,IAAI+nD,EAAQD,EAAQ9nD,GAAO,OACvBd,EAAQ6oD,KACR7oD,EAAQ4oD,EAAQ9nD,GAAO,QAAUd,EAAQ6oD,UAClC7oD,EAAQ6oD,KAzlDnBC,CAAmB9oD,GACnBF,KAAKipD,cAAc/oD,EAASynD,GAGC,OAAzBznD,EAAQm7C,qBACDn7C,EAAQm7C,aAGnBr7C,KAAKE,QAAUtC,EAAW,GAAI+pD,EAAcznD,GAC5CF,KAAKkpD,qBAGTC,QAAS,WACL,IAAIC,EAAYppD,KAAKE,QAAQkpD,WAAa,GAI1C,MAAO,CACHt6C,MAJQs6C,EAAUt6C,MAAQwuB,SAAS8rB,EAAUt6C,MAAO,IAAMzM,KAAK2M,MAAMhP,KAAKyY,QAAQ4wC,aAKlFt6C,OAJSq6C,EAAUr6C,OAASuuB,SAAS8rB,EAAUr6C,OAAQ,IAAM1M,KAAK2M,MAAMhP,KAAKyY,QAAQy4B,gBAQ7FoY,OAAQ,SAASC,GACb,IAAIhwC,EAAOvZ,KAAKmpD,UACZK,EAAcxpD,KAAKypD,MACnBC,EAAUnwC,EAAKzK,MAAQ,GAAKyK,EAAKxK,OAAS,EAE1Cw6C,GAASG,KAAaF,GAAejwC,EAAKzK,QAAU06C,EAAY16C,OAASyK,EAAKxK,SAAWy6C,EAAYz6C,SACrG/O,KAAKypD,MAAQlwC,EACbvZ,KAAK2pD,QAAQpwC,EAAMgwC,GACnBvpD,KAAKmY,QAAQ,SAAUoB,IAChBmwC,GAAW1pD,KAAK4pD,aAAejuD,EAAQ4iD,KAAKv+C,KAAK4pD,aAAa,SAAU/f,GAAK,OAAQA,EAAEvzB,aAC9FtW,KAAK6pD,qBACL7pD,KAAK8pD,oBAIbH,QAAS,WACL3pD,KAAK+pD,wBAGTjwB,OAAQ,SAASkwB,GAIb,GAHAhqD,KAAKipD,cAAcjpD,KAAKE,SACxBF,KAAKkpD,oBAEDc,EAAU,CACV,IAAItoD,EAAW1B,KAAKiqD,OAAOtoD,UACvBP,EAAOM,EAASo2B,SAASkyB,GAC7BtoD,EAASo4B,OAAO14B,QAEhBpB,KAAKyoD,WAIb56C,QAAS,SAAS/M,GACd,OAAOD,GAAeC,EAAMd,KAAK2B,UAAUZ,OAG/CF,eAAgB,SAASC,GACrB,OAAOd,KAAK6N,QAAQ/M,IAGxBopD,eAAgB,SAASppD,GAGrB,IAFA,IAAIy2B,EAAQv3B,KAAK2B,UAAU41B,MAElBv2B,EAAM,EAAGA,EAAMu2B,EAAMt2B,OAAQD,IAClC,GAAIu2B,EAAMv2B,GAAKd,QAAQY,OAASA,EAC5B,OAAO,IAAIK,GAAUo2B,EAAMv2B,KAKvCmpD,gBAAiB,SAASnpD,GACtB,IAAIu2B,EAAQv3B,KAAK2B,UAAU41B,MAC3B,GAAIA,EAAMv2B,GACN,OAAO,IAAIG,GAAUo2B,EAAMv2B,KAInCU,SAAU,WACN,OAAO,IAAID,GAAczB,KAAK2B,YAGlCsoC,gBAAiB,SAASna,EAAMs6B,GAC5B,IAEI74C,EAKI84C,EAAYC,EAPhB5oD,EAAW1B,KAAK2B,UAChB8lC,GAAe/lC,EAASmkC,WAAankC,EAASoC,QAAU,IAAI,GAG5DrG,EAAW2sD,GACX74C,EAAS7P,EAASi9B,aAAayrB,IAG3BzsD,EAASysD,IACTC,EAAaD,EAAOtmD,OACpBwmD,EAAeF,EAAO70C,UAEtB80C,EAAaC,EAAeF,EAI5B74C,EADAk2B,EAAY/jC,OAAS2F,GACZkhD,GAAoB7oD,EAASk9B,mBAAmByrB,GAAaC,GAC/D9sD,EAAQiqC,EAAY/jC,KAAM,CAAEkG,GAAKN,GAAQC,KACvCghD,IAAqB7oD,EAAS2wB,OAAO,IAAM,IAAI9gB,OAAQ+4C,GAEvD5oD,EAASk9B,mBAAmByrB,IAIzC94C,GACAvR,KAAKwqD,sBAAsB16B,EAAMve,IAIzCi5C,sBAAuB,SAAS16B,EAAMve,GAElC,IADA,IAAI4J,EAAYnb,KAAKyqD,WACZzpD,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnCma,EAAUgvB,qBAAqB54B,EAAOvQ,GAAM8uB,IAIpD46B,YAAa,SAASN,GAClB,IAIIhqD,EAAOo+B,EAJP2X,EAASn2C,KAAK2qD,iBAEdzhC,EADMlpB,KACQ4qD,SACdlpD,EAFM1B,KAES2B,UAYnB,GATIlE,EAAW2sD,IACXhqD,EAAQsB,EAASm9B,UAAUurB,KACdjU,IACT3X,EAAgBp+B,EAAMoS,YAEnB2jC,GAAUn5C,EAAQotD,KACzB5rB,EAAgB98B,EAAS0P,aAAaotB,cAAc4rB,IAGpDjU,GACA,GAAI3X,GAAiB,EAAG,CACpB,IAAIjtB,EAASvR,KAAK2B,UAAU48B,sBAAsBC,GAClDtV,EAAQuH,OAAOlf,SAEZnR,GACP8oB,EAAQ4G,KAAK1vB,IAIrByqD,YAAa,WACT7qD,KAAK4qD,SAASz6B,QAGlBi4B,aAAc,WACV,IAAI0C,EAAU9qD,KAAK8qD,QACflkC,EAAO5mB,KAAK+qD,eAEZ3B,EAAYppD,KAAKE,QAAQkpD,WAAa,GACtCA,EAAUt6C,OACVnT,EAAQqvD,YAAYpkC,EAAM,CAAE9X,MAAOs6C,EAAUt6C,QAE7Cs6C,EAAUr6C,QACVpT,EAAQqvD,YAAYpkC,EAAM,CAAE7X,OAAQq6C,EAAUr6C,SAG7C+7C,GAAWA,EAAQ5qD,QAAQwD,OAAS1D,KAAKE,QAAQ+qD,UAWlDjrD,KAAK8qD,QAAQ52B,QACbl0B,KAAK8qD,QAAQxB,WAXbtpD,KAAKkrD,kBAELlrD,KAAK8qD,QAAU3rD,GAAQgsD,QAAQt8B,OAAOjI,EAAM,CACxCljB,KAAM1D,KAAKE,QAAQ+qD,WAGvBjrD,KAAK8qD,QAAQ/4C,KAAK,aAAc/R,KAAKorD,2BACrCprD,KAAK8qD,QAAQ/4C,KAAK,aAAc/R,KAAKqrD,6BAQ7CN,aAAc,WACV,OAAO/qD,KAAKyY,SAGhBgwC,QAAS,WACL,IAAI6C,EAAQtrD,KAAKurD,YACjBvrD,KAAKypD,MAAQ,CACT36C,MAAOw8C,EAAMprD,QAAQ4O,MACrBC,OAAQu8C,EAAMprD,QAAQ6O,QAG1B/O,KAAKwrD,eAELxrD,KAAKiqD,OAASqB,EACdtrD,KAAK2B,UAAY2pD,EAAM3pD,UAEvB2pD,EAAMn3B,gBAE2B,IAA7Bn0B,KAAKE,QAAQsgB,aACb8qC,EAAMG,UAAS,SAAShzC,GAChBA,EAAQ1I,WACR0I,EAAQ1I,UAAUwP,WAK9Bvf,KAAKooD,eACLpoD,KAAK8qD,QAAQY,KAAKJ,EAAMjqD,SAES,IAA7BrB,KAAKE,QAAQsgB,aACb8qC,EAAMG,UAAS,SAAShzC,GAChBA,EAAQ1I,WACR0I,EAAQ1I,UAAU47C,UAK9B3rD,KAAK4qD,SAAW5qD,KAAK4rD,iBACrB5rD,KAAKyqD,WAAa,IAAI3gB,GACtB9pC,KAAK8pD,kBACL9pD,KAAK6rD,kBACL7rD,KAAK8rD,uBACL9rD,KAAK+rD,wBAEL/rD,KAAKmY,QAAQjM,IACb8/C,GAAkBhsD,KAAK2B,UAAU41B,OAE5Bv3B,KAAKisD,WACNjsD,KAAKksD,oBAIbC,aAAc,SAASC,GACnB,IAAI/qD,EACJ,GAAI+qD,IAAkBA,EAAct9C,OAASs9C,EAAcr9C,QAAUq9C,EAAclsD,SAAU,CACzF,IAAImsD,EAAiBrsD,KAAKE,QACtBA,EAAUtC,EAAW,GAAIwuD,EAAclsD,QAAS,CAChDkpD,UAAW,CACPt6C,MAAOs9C,EAAct9C,MACrBC,OAAQq9C,EAAcr9C,UAI9Bu9C,GAAmBtsD,KAAKgoD,iBAAkB9nD,GAC1CF,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKgoD,iBAAkB9nD,GACrDF,KAAKkoD,WAAWloD,KAAKE,QAASF,KAAKioD,QACnCjoD,KAAKumD,iBAEL,IAAI+E,EAAQtrD,KAAKurD,YAEjBD,EAAMn3B,eACN63B,GAAkBV,EAAM3pD,UAAU41B,OAElCl2B,EAASiqD,EAAMjqD,OAEfrB,KAAKE,QAAUmsD,OAEfhrD,EAASrB,KAAK8qD,QAAQqB,eAG1B,OAAO9qD,GAGXspD,eAAgB,WACZ,OAAO3qD,KAAK2B,qBAAqByiC,IAAuBpkC,KAAKE,QAAQgpB,SAAWlpB,KAAKE,QAAQgpB,QAAQitB,QAGzG0V,gBAAiB,WACb,IAAI3rD,EAAUF,KAAKE,SACM,IAArBA,EAAQqsD,WACRvsD,KAAKwsD,UAAY,IAAIvhB,GAASjrC,KAAK2B,UAAWzB,EAAQqsD,YAI9DT,qBAAsB,WAClB,IAAIW,EAAWzsD,KAAKE,QAAQusD,SACxBjb,GAAaib,GAAY,IAAIjb,WAChB,IAAbib,IAAoC,IAAdjb,IACtBxxC,KAAK0sD,eAAiB,IAAIjhB,GAAczrC,KAAMwxC,KAItDua,sBAAuB,WACnB,IAAIU,EAAWzsD,KAAKE,QAAQusD,SACxBra,GAAcqa,GAAY,IAAIra,YACjB,IAAbqa,IAAqC,IAAfra,IACtBpyC,KAAK2sD,gBAAkB,IAAIpf,GAAevtC,KAAMoyC,KAIxDwa,sBAAuB,WACnB,IAAIL,EAAWvsD,KAAKE,QAAQqsD,SACxBE,EAAWzsD,KAAKE,QAAQusD,SACxBjb,GAAaib,GAAY,IAAIjb,UAC7BY,GAAcqa,GAAY,IAAIra,WAC9Bya,IAAaN,IAA0B,IAAbE,IAAoC,IAAdjb,GAAyBxxC,KAAK8sD,iBAAiB,CAAEnhD,GAAYF,GAAMC,MACnHqhD,IAA0B,IAAbN,IAAqC,IAAfra,KAA0BpyC,KAAK8sD,iBAAiB,CAAElhD,GAAYC,GAAMC,KACvG2M,EAAUzY,KAAKyY,QAEfzY,KAAKgtD,kBAAoBH,GAAaE,GACtCt0C,EAAQqI,MAAMmsC,YAAcjtD,KAAKktD,cAAgB,GACjDltD,KAAKgtD,kBAAmB,GAChBhtD,KAAKgtD,kBAAsBH,GAAaE,IAChDt0C,EAAQqI,MAAMmsC,YAAc,OAE5BjtD,KAAKgtD,kBAAmB,GAG5BhtD,KAAKmtD,kBAAkBN,GAAYE,IAGvCI,iBAAkB,SAASC,EAAMngB,GAC7B,IAAIogB,EAAYrtD,KAAKqtD,UAChBA,IAIDA,EAAUC,YACVD,EAAUC,WAAWF,GAGrBC,EAAUE,YACVF,EAAUE,WAAWtgB,KAI7B2e,eAAgB,WACZ,IACI77B,EADM/vB,KACeE,QAAQgpB,QASjC,OANIlpB,KAAK2qD,iBACK3qD,KAAKwtD,qBAAqBz9B,GAE1B,IAAI8lB,GAAQ71C,KAAKmR,aAAc4e,IAMjDy9B,qBAAsB,SAASttD,GAC3B,OAAO,IAAI61C,GAAc/1C,KAAK2B,UAAWzB,IAG7C+oD,cAAe,SAAS/oD,EAASynD,IAixCrC,SAA2BznD,EAASynD,GAChC,IACI/zC,EAAU65C,EAAc1sD,EADxB2sD,GAAsB/F,GAAgB,IAAgB,cAAK,GAG/D,SAASgG,EAAel4B,GACpB,IAAIm4B,GAAan4B,GAAe,IAAInmB,OAASm+C,EAAan+C,MACtD7M,EAAS7E,EAAW,GACpB8vD,EACAA,EAAkB95C,GAClB65C,EACAA,EAAa75C,GAAW,CACpBrE,KAAM,CAAED,MAAOs+C,GACfv0C,OAAQ,CAAE/J,MAAOs+C,GACjB/6B,MAAO,CAAEvjB,MAAOs+C,IAEpBn4B,GAKJ,cAFOhzB,EAAOmR,GAEPnR,EAGX,IAAK,IAAIzB,EAAM,EAAGA,EAAMwmD,GAAWvmD,OAAQD,IACvC4S,EAAW4zC,GAAWxmD,GAAO,OAC7BysD,EAAevtD,EAAQutD,cAAgB,GAGvC1sD,GAFAA,EAAO,GAAGgD,OAAO7D,EAAQ0T,KAEbiO,IAAI8rC,GAEhBztD,EAAQ0T,GAAY7S,EAAKE,OAAS,EAAIF,EAAOA,EAAK,GA9yClD8sD,CAAkB3tD,EAASynD,GAkzCnC,SAA6BznD,EAASynD,GAClC,IAAI7jD,EAAS5D,EAAQ4D,OACjBgqD,EAAehqD,EAAO7C,OACtBg4C,EAAiB/4C,EAAQ+4C,eACzB8U,EAAiBnwD,EAAW,GAAIsC,EAAQ+4C,gBACxC+U,EAAsBrG,EAAe/pD,EAAW,GAAI+pD,EAAa1O,gBAAkB,GACnFgV,EAAsBrwD,EAAW,GAAIowD,GAEzCE,GAA4BH,GAC5BG,GAA4BD,GAE5B,IAAK,IAAIhsD,EAAI,EAAGA,EAAI6rD,EAAc7rD,IAAK,CACnC,IAAIo/B,EAAav9B,EAAO7B,GAAGyB,MAAQxD,EAAQ+4C,eAAev1C,KAEtDwlC,EAActrC,EACd,CAAEwG,KAAM,IACR6pD,EACAD,EAAoB3sB,GACpB,CAAEnY,QAAShpB,EAAQgpB,SACnB6kC,EACA9U,EAAe5X,IAGnBv9B,EAAO7B,GAAGuT,UAAY0zB,EACtBplC,EAAO7B,GAAKrE,EAAW,GAAIsrC,EAAaplC,EAAO7B,IAC/C6B,EAAO7B,GAAGmC,KAAON,EAAO7B,GAAGmC,MAAQ,IA10CnC+pD,CAAoBjuD,EAASynD,IAGjCuB,kBAAmB,WAKf,IAJA,IAAIhpD,EAAUF,KAAKE,QACf4D,EAAS5D,EAAQ4D,OACjBsqD,EAASluD,EAAQm7C,cAAgB,GAE5Bp5C,EAAI,EAAGA,EAAI6B,EAAO7C,OAAQgB,IAAK,CACpC,IAAI6T,EAAgBhS,EAAO7B,GACvBosD,EAAcD,EAAOnsD,EAAImsD,EAAOntD,QAChCuP,EAAWsF,EAAcN,UAE7BM,EAAcxG,MAAQwG,EAAcxG,OAAS++C,EACzC79C,IACAA,EAASlB,MAAQkB,EAASlB,OAAS++C,KAK/C9C,UAAW,WACP,IAAIrrD,EAAUF,KAAKE,QACfwB,EAAW1B,KAAKsuD,kBAChBhD,EAAQ,IAAI3vD,EAAQ4yD,YAAYvuD,KAAKwuD,iBACzClD,EAAMj+C,MAAQrN,KACdsrD,EAAM3pD,UAAYD,EAElB,IAAImxB,EAAQn0B,EAAMo0B,WAAW5yB,EAAQ2yB,OACjC47B,EAAW/vD,EAAMo0B,WAAW5yB,EAAQuuD,SAAU,CAC9C50C,MAAO3Z,EAAQ2yB,MAAMhZ,MACrBmB,SAAU9a,EAAQ2yB,MAAM7X,WAU5B,OARAswC,EAAMltD,OAAO6f,MAAMqtC,EAAO5sD,EAAMgwD,YAAY,CAAC77B,EAAO47B,KAEhDvuD,EAAQ82B,QAAU92B,EAAQ82B,OAAO1gB,SACjCg1C,EAAMltD,OAAO,IAAI+wC,GAAOztC,EAASxB,QAAQ82B,OAAQh3B,KAAKmR,eAE1Dm6C,EAAMltD,OAAOsD,GACb4pD,EAAM99C,SAEC89C,GAGXkD,cAAe,WACX,IAAItuD,EAAUF,KAAKE,QACfqZ,EAAOvZ,KAAKmpD,UAEhB,OAAOvrD,EAAW,CACd4iB,YAAatgB,EAAQsgB,YACrB1R,MAAOyK,EAAKzK,OAAShT,EAAiB6yD,cACtC5/C,OAAQwK,EAAKxK,QAAUjT,EAAiB8yD,gBACzC1uD,EAAQkpD,YAGfkF,gBAAiB,SAASO,GACtB,IAAI3uD,EAAUF,KAAKE,QAInB,OAFemwC,GAAgB/qC,QAAQupB,OAAOggC,EAAa,GAAK3uD,EAAQ4D,OAAQ5D,EAASF,KAAKmR,eAKlG24C,gBAAiB,WAOb,IANA,IAGI/oD,EADMf,KACK2B,UAAUZ,KACrB+tD,EAAa9uD,KAAK4pD,YAAc,GAE3B3nD,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAIlC,EAAOgB,EAAKkB,GACZ/B,EAAUH,EAAKG,QACnB,GAAIH,aAAgBvB,GAAgB0B,EAAQ6uD,SAAW7uD,EAAQkS,SAAU,CACrE,IAAIzR,EAAQZ,EAAKY,QAEb6wC,EAAY,IAAIV,GAZb9wC,KAYiCD,EACpCnC,EAAW,CAAEwE,IAAKzB,EAAMyB,IAAKE,IAAK3B,EAAM2B,KAAOpC,EAAQ6uD,SAG3DD,EAAWzpD,KAAKmsC,MAK5Bwd,aAAc,SAAS92C,GACnB,OAAOlY,KAAKmY,QAAQpM,GAAcmM,IAGtC+2C,QAAS,SAAS/2C,GACd,OAAOlY,KAAKmY,QAAQnM,GAAQkM,IAGhCg3C,WAAY,SAASh3C,GACjB,OAAOlY,KAAKmY,QAAQlM,GAAYiM,IAGpCiwC,cAAe,WACXnoD,KAAKmvD,cAAgBnvD,KAAKovD,OAAOr9C,KAAK/R,MACtCA,KAAKqyC,mBAAqBryC,KAAKsyC,YAAYvgC,KAAK/R,MAChDA,KAAKqvD,mBAAqBrvD,KAAKsvD,YAAYv9C,KAAK/R,MAChDA,KAAKorD,0BAA4BprD,KAAKuvD,WAAWx9C,KAAK/R,MACtDA,KAAKqrD,0BAA4BrrD,KAAKwvD,UAAUz9C,KAAK/R,MAErDA,KAAKyvD,WAAa/zD,MAAMg0D,SACpB1vD,KAAKyvD,WAAW19C,KAAK/R,MAxfX,KA6flB6nD,YAAa,SAAS9W,GACdA,GACA/wC,KAAK4nD,UAAUviD,KAAK0rC,IAI5B4e,eAAgB,SAAS5e,GACrB,IAAIhqC,EAAQ/G,KAAK4nD,UAAUjhD,QAAQoqC,GAC/BhqC,GAAS,GACT/G,KAAK4nD,UAAU30B,OAAOlsB,EAAO,IAIrC+lD,iBAAkB,SAAS8C,GAEvB,IADA,IAAIhI,EAAY5nD,KAAK4nD,UACZ5mD,EAAM,EAAGA,EAAM4mD,EAAU3mD,OAAQD,IACtC,GAAI4mD,EAAU5mD,GAAK8rD,iBAAiB8C,GAChC,OAAO,GAKnBz3C,QAAS,SAASrX,EAAM8tC,QACP,IAATA,IAAmBA,EAAO,IAE9BA,EAAKx/B,OAASpP,KAEVc,IAASqL,GACTyiC,EAAK7zB,OAAO3a,MAAQJ,KAAK6vD,uBAAuBjhB,EAAK7zB,OAAO3a,OACrDU,IAASsK,GAChBpL,KAAK8vD,sBAAsBlhB,EAAKxuC,OACzBU,IAASuK,GAChBrL,KAAK+vD,uBACEjvD,IAASoK,IAChBlL,KAAKgwD,gBAAgBphB,EAAKxuC,OAK9B,IAFA,IAAIwnD,EAAY5nD,KAAK4nD,UACjBqI,GAAqB,EAChBjvD,EAAM,EAAGA,EAAM4mD,EAAU3mD,OAAQD,IAClC4mD,EAAU5mD,GAAKmX,QAAQrX,EAAM8tC,KAC7BqhB,GAAqB,GAI7B,OAAOA,GAGXvH,cAAe,WACX,IAIIvW,EAII+d,EARJz3C,EAAUzY,KAAKyY,SAEnBzY,KAAKktD,aAAez0C,EAAQqI,MAAMmsC,YAGlCluD,EAAW0Z,IAAW05B,EAAM,IAAqB,YAAInyC,KAAKmvD,cAAehd,EAAgB,MAAInyC,KAAKqyC,mBAAoBF,EAAgB,WAAInyC,KAAKqvD,mBAAoBld,IAE/JnyC,KAAKmwD,2BAELpxD,EAAW0Z,IAAWy3C,EAAQ,IAAqB,UAAIlwD,KAAKyvD,WAAYS,IAG5ElwD,KAAKqtD,UAAYruD,EAASwzC,iBAAiB3jB,OAAO7uB,KAAKyY,QAAS,CAC5DoM,MAAO7kB,KAAK0yC,OAAO3gC,KAAK/R,MACxBmrB,KAAMnrB,KAAK2yC,MAAM5gC,KAAK/R,MACtBwiB,IAAKxiB,KAAK4yC,KAAK7gC,KAAK/R,MACpB6yC,IAAK7yC,KAAK8yC,KAAK/gC,KAAK/R,MACpBizC,aAAcjzC,KAAKkzC,cAAcnhC,KAAK/R,MACtCmzC,cAAenzC,KAAKozC,eAAerhC,KAAK/R,MACxCqzC,WAAYrzC,KAAKszC,YAAYvhC,KAAK/R,QAGtCA,KAAK4sD,yBAGT0C,YAAa,SAASp3C,GACdlY,KAAKowD,gBACLpwD,KAAKowD,cAAc73C,IAAIvY,KAAMkY,GAC7BlY,KAAKowD,cAAgB,MAGrBpwD,KAAKqwD,mBACLrwD,KAAKqwD,kBAAmB,EACxBrwD,KAAKmY,QAAQ3M,MAIrB0gD,iBAAkB,WACVlsD,KAAKqtD,WAAartD,KAAKqtD,UAAUiD,QACjCtwD,KAAKqtD,UAAUiD,UAIvBpd,cAAe,SAASh7B,GAChBlY,KAAK2sD,kBAAoB3sD,KAAKuwD,mBAAmBr4C,KACjDlY,KAAKwwD,iBAAmBt4C,EAAEo9B,SAC1Bt1C,KAAK+uC,oBACL/uC,KAAK8qD,QAAQ2F,oBAIrBnd,YAAa,SAASp7B,GACdlY,KAAK0wD,WAAa1wD,KAAKuwD,mBAAmBr4C,KACtClY,KAAK8qD,SACL9qD,KAAK8qD,QAAQ6F,iBAEjB3wD,KAAK0wD,UAAW,EAChB1wD,KAAKmY,QAAQrM,GAAU,MAI/BsnC,eAAgB,SAASl7B,GACrB,IAAI04C,EAAiB5wD,KAAK2sD,gBAE1B,GAAIiE,IAAmB5wD,KAAKuwD,mBAAmBr4C,GAAI,CAC/CA,EAAEoyB,iBACF,IAAIumB,EAA0B7wD,KAAKwwD,iBAC/BM,GAAc54C,EAAEo9B,SAAWub,EAA0B,EAEzD,GAAIxuD,KAAKgF,IAAIypD,IAAe,GAAK,CAC7BA,EAAazuD,KAAK1D,MAAmB,GAAbmyD,GAExB9wD,KAAKwwD,iBAAmBt4C,EAAEo9B,SAC1B,IAAI1G,EAAO,CAAEvD,MAAOylB,EAAYhtC,WAAYA,GAAW9jB,KAAK2B,UAAUZ,MAAO2X,cAAeR,GAC5F,GAAIlY,KAAK0wD,WAAa1wD,KAAKmY,QAAQvM,GAAYgjC,GAAO,CAClD,IAAI7xB,EAAS/c,KAAKwpC,kBAAkBtxB,GAE/BlY,KAAK0wD,WACN1wD,KAAK0wD,UAAW,IAGP9hB,EAAK9qB,WAAa8sC,EAAenjB,aAAaqjB,EAAY/zC,MACxD/c,KAAKmY,QAAQtM,GAAM+iC,IAC9BgiB,EAAe3jB,WAOnCuiB,UAAW,SAASt3C,GAChB,GAAIA,EAAEO,QAAS,CACX,IAAIA,EAAUzY,KAAK+wD,qBAAqB74C,EAAEO,QAASP,GAE/CO,GAAWA,EAAQu4C,OACnBv4C,EAAQu4C,MAAMhxD,KAAMkY,EAAEQ,iBAKlCg6B,OAAQ,SAASx6B,GACb,IAAI6E,EAAS/c,KAAKwpC,kBAAkBtxB,IAEhClY,KAAKuwD,mBAAmBr4C,IAAOlY,KAAK2B,UAAUw8B,wBAAwBphB,KAItE/c,KAAK8sD,iBAAiB,CAAEnhD,GAAYF,GAAMC,MAC1C1L,KAAKixD,iBAAiB/4C,EAAG6E,EAAQpR,IAGjC3L,KAAKwsD,WAAaxsD,KAAKwsD,UAAU3nC,MAAM3M,KACvClY,KAAK8qD,QAAQ2F,kBACbzwD,KAAK+uC,oBACL/uC,KAAKkxD,gBAAiB,EACtBlxD,KAAKmR,aAAaggD,SAAU,GAG5BnxD,KAAK0sD,gBACD1sD,KAAK0sD,eAAe7nC,MAAM3M,IAC1BlY,KAAKmY,QAAQvM,GAAY,CAAEkY,WAAYA,GAAW9jB,KAAK2B,UAAUZ,MAAO2X,cAAeR,MAKnGy6B,MAAO,SAASz6B,GACZ,IACI5H,EADMtQ,KACMisD,UACZM,EAFMvsD,KAESwsD,UAEnB,IAAIxsD,KAAKuwD,mBAAmBr4C,GAA5B,CAIA,GAAIq0C,EAAU,CACV,IAAIvhB,EAASuhB,EAASphC,KAAKjT,GAEvB8yB,IAAWhrC,KAAKmY,QAAQ1M,GAAM,CAAEqY,WAAYknB,EAAQtyB,cAAeR,KACnEq0C,EAASnhB,WAEV,GAAI96B,EAAO,CAId,IAHA,IAAI8gD,EAAW,GACXrwD,EAAOuP,EAAMvP,KAERkB,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAI4vB,EAAc9wB,EAAKkB,GAEvB,GADe4vB,EAAY3xB,QAAQY,KACrB,CACV,IAAIf,EAAO8xB,EAAY3xB,QAAQkS,SAAW8F,EAAE7J,EAAI6J,EAAE9J,EAC9Ci9B,EAAQtrC,EAAKotC,cAAgBptC,EAAKqtC,SAExB,IAAV/B,IACA+lB,EAASv/B,EAAY3xB,QAAQY,MAAQ+wB,EAAYw/B,eAAehmB,KAK5E/6B,EAAMwT,WAAastC,EACnBpxD,KAAKmY,QAAQ1M,GAAM,CACfqY,WAAYstC,EACZ14C,cAAeR,IAInBlY,KAAK0sD,gBACL1sD,KAAK0sD,eAAevhC,KAAKjT,KAIjC06B,KAAM,SAAS16B,GACX,IAAIlY,KAAKuwD,mBAAmBr4C,GAA5B,CAIA,IAAIq0C,EAAWvsD,KAAKwsD,UAapB,GAZID,GAAYA,EAAS/pC,IAAItK,IACzBlY,KAAK8qD,QAAQ6F,iBACb3wD,KAAKmY,QAAQzM,GAAU,CACnBoY,WAAYA,GAAW9jB,KAAK2B,UAAUZ,MACtC2X,cAAeR,IAEnBlY,KAAKkxD,gBAAiB,EACtBlxD,KAAKmR,aAAaggD,SAAU,GAE5BnxD,KAAKsxD,eAAep5C,EAAGxM,IAGvB1L,KAAK0sD,eAAgB,CACrB,IAAI1hB,EAAShrC,KAAK0sD,eAAelqC,IAAItK,GACjC8yB,IAAWhrC,KAAKmY,QAAQtM,GAAM,CAAEiY,WAAYknB,EAAQtyB,cAAeR,MACnElY,KAAK0sD,eAAezf,OACpBjtC,KAAKmY,QAAQrM,GAAU,CAAEgY,WAAYknB,EAAQtyB,cAAeR,QAKxEq4C,mBAAoB,SAASr4C,GACzB,IAAI42C,EAAa9uD,KAAK4pD,aAAe,GACrC,IAAKkF,EAAW7tD,OACZ,OAAO,EAGX,IAAI8b,EAAS/c,KAAKwpC,kBAAkBtxB,GAChC9W,EAAOpB,KAAK2B,UAAUm9B,YAAY/hB,GACtC,GAAI3b,EACA,IAAK,IAAIJ,EAAM,EAAGA,EAAM8tD,EAAW7tD,OAAQD,IACvC,GAAI8tD,EAAW9tD,GAAKqwC,OAAOjwC,GACvB,OAAO,GAMvBmwD,oBAAqB,WACjB,IACInf,GADWpyC,KAAKE,QAAQusD,UACE,IAAIra,YAAc,GAChD,OAAO10C,EAAe00C,EAAW5E,KAr6ad,KAw6avB8E,YAAa,SAASp6B,GAClB,IAAIzU,EAAWzD,KAEXqrC,EAAQ1vC,EAAQi5C,gBAAgB18B,GAChC04C,EAAiB5wD,KAAK2sD,gBACtB5vC,EAAS/c,KAAKwpC,kBAAkBtxB,GAEpC,IAAIlY,KAAKuwD,mBAAmBr4C,IAAOlY,KAAK2B,UAAUw8B,wBAAwBphB,GAI1E,GAAI6zC,EAAgB,CAChB,IAAIhiB,EAAO,CAAEvD,MAAOA,EAAOvnB,WAAYA,GAAW9jB,KAAK2B,UAAUZ,MAAO2X,cAAeR,IACnFlY,KAAK0wD,UAAa1wD,KAAKmY,QAAQvM,GAAYgjC,KAC3C12B,EAAEoyB,iBAEGtqC,KAAK0wD,WACN1wD,KAAK+uC,oBACL/uC,KAAK8qD,QAAQ2F,kBACbzwD,KAAK0wD,UAAW,GAGhB1wD,KAAKwzC,YACLD,aAAavzC,KAAKwzC,YAGtB5E,EAAK9qB,WAAa8sC,EAAenjB,aAAapC,EAAOtuB,GACjD6xB,EAAK9qB,aAAe9jB,KAAKmY,QAAQtM,GAAM+iC,IACvCgiB,EAAe3jB,OAGnBjtC,KAAKwzC,WAAasB,YAAW,WACzBrxC,EAAS0U,QAAQrM,GAAU8iC,GAC3BnrC,EAASitD,UAAW,EAChBjtD,EAASqnD,SACTrnD,EAASqnD,QAAQ6F,mBAEtB/jD,SAEJ,CACH,IAAI0D,EAAQtQ,KAAKisD,UACjB,IAAK37C,EACetQ,KAAKixD,iBAAiB/4C,EAAG6E,EAAQnR,MAE7C0E,EAAQtQ,KAAKisD,WAIrB,GAAI37C,EAAO,CACP,IAAIkhD,EAAalhD,EAAMkhD,YAAcnmB,EACrC/6B,EAAMkhD,WAAaA,EAAanmB,EAKhC,IAHA,IAAItqC,EAAOf,KAAKisD,UAAUlrD,KACtBiqC,EAAS,GAEJ/oC,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAI4vB,EAAc9wB,EAAKkB,GACnB2R,EAAWie,EAAY3xB,QAAQY,KAC/B8S,IACAo3B,EAAOp3B,GAAYie,EAAY4/B,YAAYD,EAAa/tD,EAAS8tD,sBAAuBx0C,IAIhG/c,KAAKmY,QAAQtM,GAAM,CACfw/B,MAAOA,EACPvnB,WAAYknB,EACZtyB,cAAeR,IAGflY,KAAKwzC,YACLD,aAAavzC,KAAKwzC,YAGtBxzC,KAAKwzC,WAAasB,YAAW,WACzBrxC,EAAS6tD,eAAep5C,EAAGpM,MAC5Bc,OAKfqkD,iBAAkB,SAAS/4C,EAAG6E,EAAQ20C,GAClC,IAAIhwD,EAAW1B,KAAKiqD,OAAOtoD,UACvBP,EAAOM,EAASs2B,cAAcjb,GAC9Bhc,EAAOW,EAASX,KAAKyD,MAAM,GAE/B,GAAKpD,EAAL,CAIA,IAAI4pC,EAASlnB,GAAW/iB,GAERf,KAAKmY,QAAQu5C,EAAY,CACrC5tC,WAAYknB,EACZtyB,cAAeR,IAIflY,KAAKksD,oBAELlsD,KAAKkxD,gBAAiB,EACtBlxD,KAAK+uC,oBACL/uC,KAAKisD,UAAY,CACbnoC,WAAYknB,EACZ5pC,KAAMA,EACNL,KAAMA,MAKlBuwD,eAAgB,SAASp5C,EAAGw5C,GACpB1xD,KAAKisD,YACLjsD,KAAKmY,QAAQu5C,EAAY,CACrB5tC,WAAY9jB,KAAKisD,UAAUnoC,WAC3BpL,cAAeR,IAEnBlY,KAAKkxD,gBAAiB,EACtBlxD,KAAKisD,UAAY,OAIzB0F,iBAAkB,SAASz5C,EAAGs4B,GAC1B,IAAI/3B,EAAUzY,KAAK8qD,QAAQ8G,YAAY15C,GACvC,GAAIO,EACA,OAAOzY,KAAK+wD,qBAAqBt4C,EAASP,EAAGs4B,IAIrDugB,qBAAsB,SAASt4C,EAASP,EAAGs4B,GAGvC,IAFA,IACI7D,EADArnC,EAAUmT,EAEPnT,IAAYqnC,GACfA,EAAernC,EAAQqnC,aACvBrnC,EAAUA,EAAQ0X,OAGtB,GAAI2vB,EAYA,OAXIA,EAAa7vB,WACb6vB,EAAeA,EAAa7vB,SAAS5E,EAAGlY,KAAKwpC,kBAAkBtxB,KAG/Ds4B,IACA7D,EAAeA,EAAaklB,QAAQrhB,KAChB7D,EAAa7vB,WAC7B6vB,EAAeA,EAAa7vB,YAI7B6vB,GAIfnD,kBAAmB,SAAStxB,GACxB,IAAI45C,EAAcn2D,EAAQo4C,iBAAiB77B,GAC3C,OAAOlY,KAAK8zC,oBAAoBge,EAAY1jD,EAAG0jD,EAAYzjD,IAG/D0jD,gBAAiB,WACb,IAAK/xD,KAAKgyD,SAAU,CAChB,IAAI/9C,EAAMnV,EAAckB,KAAKyY,QAAS,CAAE,cAAe,eACnDmX,EAAc3b,EAAI2b,YAClBF,EAAazb,EAAIyb,WACrB1vB,KAAKgyD,SAAW,CACZttC,IAAKgL,EACL1V,KAAM4V,GAId,OAAO5vB,KAAKgyD,UAGhBnC,uBAAwB,SAASzvD,GAC7B,IAAIic,EAAUrc,KAAK+xD,kBACfxkC,EAAS5xB,EAAQixC,cAAc5sC,KAAKyY,SAExC,MAAO,CACHuB,KAAMrb,EAAMyB,EAAMgO,EAAIiO,EAAQrC,KAAOuT,EAAOvT,MAC5C0K,IAAK/lB,EAAMyB,EAAMiO,EAAIgO,EAAQqI,IAAM6I,EAAO7I,OAIlDovB,oBAAqB,SAASme,EAASC,GACnC,IAAIz5C,EAAUzY,KAAKyY,QACf8U,EAAS5xB,EAAQixC,cAAcn0B,GAC/B4D,EAAUrc,KAAK+xD,kBACfI,EAAmBx2D,EAAQy2D,aAAa35C,GAAS45C,SACjDjyD,EAAQ,IAAIV,GACZuyD,EAAU1kC,EAAOvT,KAAOqC,EAAQrC,KAChCk4C,EAAU3kC,EAAO7I,IAAMrI,EAAQqI,KACjC/kB,UAAUwyD,GAEZ,OAAO,IAAI/0D,EAAMgD,EAAMgO,EAAGhO,EAAMiO,IAGpCykC,KAAM,SAAS56B,GACX,IAAIzU,EAAWzD,KAEXsyD,EAAiBtyD,KAAK8qD,QAAQ8G,YAAY15C,GAC1CO,EAAUzY,KAAK+wD,qBAAqBuB,EAAgBp6C,GACpDq6C,EAAgBvyD,KAAK2qD,iBAEpB3qD,KAAKwyD,YAAYF,EAAgBp6C,IAAOq6C,GACzCvyD,KAAK+uC,oBAGLwjB,GACAvyD,KAAKyyD,oBAAoBzyD,KAAKwpC,kBAAkBtxB,GAAIA,GAAG,GAG3DlY,KAAK0yD,gBAAgBj6C,EAASP,GAG9BlY,KAAK2yD,aAAc,EACnB7d,YAAW,WACPrxC,EAASkvD,aAAc,IACxB,IAGPvD,OAAQ,SAASl3C,GACb,IAAIO,EAAUzY,KAAK2xD,iBAAiBz5C,GACpClY,KAAK0yD,gBAAgBj6C,EAASP,IAGlCw6C,gBAAiB,SAASj6C,EAASP,GAI/B,IAHA,IAEI5S,EAAUmT,EACPnT,GACCA,EAAQ2S,OACR3S,EAAQ2S,MALDjY,KAKiBkY,GAG5B5S,EAAUA,EAAQ0X,QAI1Bw1C,YAAa,SAAS/5C,EAASP,GAC3B,GAAIlY,KAAKkxD,eACL,OAAO,EAGX,IAAI9wD,EAAQJ,KAAK+wD,qBAAqBt4C,EAASP,GAAG,SAASO,GACvD,OAAQA,EAAQJ,OAASI,EAAQH,SAAWG,aAAmBoe,OAKnE,OAFA72B,KAAK4yD,qBAAqBxyD,EAAO8X,GAE1B9X,GAGXyyD,gBAAiB,SAASzyD,GACDxC,EAAW,GAAIoC,KAAKE,QAAQgpB,QAAS9oB,EAAMF,QAAQgpB,SACrD5S,SACftW,KAAK4qD,SAAS96B,KAAK1vB,IAI3B0yD,wBAAyB,SAASC,EAAaC,EAAgBC,GAC3D,IAAIC,EAAgBlzD,KAAKmzD,qBAAuBnzD,KAAKozD,wBAAwBL,GAC7E,GAAKG,EAIL,GAAIF,EACAhzD,KAAKqzD,qBAAqBN,GAC1B/yD,KAAKszD,oBAAoBJ,EAAct0C,SAAU,MAAM,GACvD5e,KAAKszD,oBAAoBJ,EAAct0C,SAAUm0C,EAAYjvD,QAC7D9D,KAAKyqD,WAAW36B,KAAKmjC,GAAmBF,OACrC,CACH,IAAIQ,EAEJ,IAAKL,EAAcnyC,+BAEf,YADA/gB,KAAKyqD,WAAW36B,KAAKijC,IAIzBQ,EAAiBvzD,KAAKwzD,mBAAmBT,EAAaG,KAEhCK,EAAetyD,QACjCjB,KAAKyqD,WAAW36B,KAAKyjC,EAAgB,EAAIvzD,KAAKyzD,6BAA6BV,EAAYjvD,WAKnG0vD,mBAAoB,SAAST,EAAaG,GAGtC,OAFgBlzD,KAAK0zD,oBAAoBR,EAAeH,EAAYY,aAEnDvJ,QAAO,SAAUhqD,GAAS,OAAOA,IAAU2yD,MAGhEW,oBAAqB,SAAS/qC,EAAWjlB,GAKrC,IAJA,IAEI6N,EAAS,GAEJtP,EAAI,EAAGA,EAAI0mB,EAAU/J,SAAS3d,OAAQgB,IAAK,CAChD,IAAIwW,EAAUkQ,EAAU/J,SAAS3c,GAE7BwW,EAAQk7C,cAAgBjwD,EACxB6N,EAAOlM,KAAKoT,GACLA,EAAQmG,UAAYnG,EAAQmG,SAAS3d,SAC5CsQ,EAASA,EAAOxN,OAVT/D,KAUyB0zD,oBAAoBj7C,EAAS/U,KAIrE,OAAO6N,GAGXqiD,oBAAqB,SAASxzD,EAAO8X,GACjC,IAAI27C,EAAe7zD,KAAKowD,cAEpByD,GAAgBA,IAAiBzzD,IACjCyzD,EAAat7C,IAAIvY,KAAMkY,GACvBlY,KAAKowD,cAAgB,MAGrBhwD,GAASyzD,IAAiBzzD,GAASA,EAAMkY,OACzCtY,KAAKowD,cAAgBhwD,EACrBA,EAAMkY,KAAKtY,KAAMkY,KAIzB43C,sBAAuB,SAAS1vD,GACvBA,GAAUA,EAAM0D,SAIXd,GAAasC,QAAQtB,UAAU5D,EAAM0D,OAAQ,KAAM1D,EAAMiV,UAClDlR,OACN2vD,YACP9zD,KAAK+zD,gBAAkB,CAAEvlB,OAAQxuC,KAAKyY,QAAQqI,MAAM0tB,QACpDxuC,KAAKyY,QAAQqI,MAAM0tB,OAAS,aAIpCuhB,qBAAsB,WACd/vD,KAAK+zD,kBACL/zD,KAAKyY,QAAQqI,MAAM0tB,OAASxuC,KAAK+zD,gBAAgBvlB,OACjDxuC,KAAK+zD,gBAAkB,OAI/B/D,gBAAiB,SAAS5vD,GACtB,GAAKA,GAAUA,EAAM0D,OAArB,CAIA,IAAIA,EAAS1D,EAAM0D,OAGf3D,EAFM6C,GAAasC,QAAQtB,UAAUF,EAAQ,KAAM1D,EAAMiV,UAC5ClR,OACE2vD,UACnB,GAAI3zD,EAAO,CACP,IAAIyuC,EAAO,CAAE9qC,OAAQA,EAAQ1D,MAAOA,EAAOD,MAAOA,EAAOiP,OAAQpP,MACjEA,KAAKmY,QAAQtL,GAAW+hC,MAIhCykB,qBAAsB,SAASjzD,EAAO4zD,GAMlC,IALA,IAEItyD,EAAW1B,KAAK2B,UAChBV,EAASS,EAASoC,OAAO7C,OAEpBgB,EAAI,EAAGA,EAAIhB,EAAQgB,IAAK,CAC7B,IAAIgyD,EAAavyD,EAASoC,OAAO7B,GAC7BiyD,EAPOl0D,KAOmBm0D,4BAA4BF,GACtDG,EAROp0D,KAQoByzD,6BAA6BQ,GAEvDD,GAAgBC,IAAe7zD,EAAM0D,QAQtCmwD,EAAWz5C,QAAU05C,EAEjBD,EAAW1kD,OACX0kD,EAAW1kD,KAAKiL,QAAU05C,KAV9BD,EAAWC,eAAiBA,EAC5BD,EAAWz5C,QAAU45C,EAEjBH,EAAW1kD,OACX0kD,EAAW1kD,KAAKiL,QAAU45C,MAY1Cd,oBAAqB,SAASpzC,EAAUm0C,EAAcnwC,EAAOpgB,GAGzD,IAFA,IAES7B,EAAI,EAAGA,EAAIie,EAASjf,OAAQgB,IAAK,CACtC,IAAIwW,EAAUyH,EAASje,GACnBgyD,EAAax7C,EAAQ3U,QAAUA,EAGnC,GAFsBmwD,IAAeA,EAAW94C,WAAa,IAAI7E,SAE1CmC,EAAQpX,OAAQ,CACnC,IAAImZ,EAAU1W,EAASA,EAAO0W,QAAU/B,EAAQ3U,OAAO0W,SACnDy5C,IAAeI,GAAgBnwC,IAC/BzL,EAAQpX,OAAOmZ,QAAQ0J,EAAQ,EAAI1J,GAIvC/B,EAAQmG,UAAYnG,EAAQmG,SAAS3d,QAd9BjB,KAeEszD,oBAAoB76C,EAAQmG,SAAUy1C,EAAcnwC,EAAOzL,EAAQ3U,UAKxFsvD,wBAAyB,SAAShzD,GAG9B,IAFA,IAAI8yD,EAAgB9yD,EAAM4c,OAEnBk2C,IAAkBA,EAAcxxD,UACnCwxD,EAAgBA,EAAcl2C,OAGlC,OAAOk2C,GAGXN,qBAAsB,SAASxyD,EAAO8X,GAClC,IAAI66C,EAAc/yD,KAAKs0D,aACnBtB,EAAiBhzD,KAAK2B,UAAUmC,OAAO7C,OAAS,EAChDszD,EAAqBv0D,KAAKw0D,sBAkB9B,OAhBAx0D,KAAK4zD,oBAAoBxzD,EAAO8X,GAE5B9X,GAAS2yD,IAAgB3yD,GAASA,EAAMiY,QACxCrY,KAAKs0D,aAAel0D,EAEfJ,KAAK2qD,kBAAqBvqD,EAAMiY,MAAMrY,KAAMkY,KAC7ClY,KAAK6yD,gBAAgBzyD,GAEjBm0D,EACAv0D,KAAK8yD,wBAAwB1yD,EAAO4yD,GAEpChzD,KAAKyqD,WAAW36B,KAAK1vB,KAK1BA,GAGXq0D,qBAAsB,SAASr0D,GAC3B,IAAI4yD,EAAiBhzD,KAAK2B,UAAUmC,OAAO7C,OAAS,EAC3BjB,KAAKw0D,wBAEtBxB,GAAkBhzD,KAAKmzD,uBACvBnzD,KAAKqzD,qBAAqBjzD,GAAO,GACjCJ,KAAKszD,oBAAoBtzD,KAAKmzD,qBAAqBv0C,SAAU,MAAM,GACnE5e,KAAKmzD,qBAAuB,MAEhCnzD,KAAKyqD,YAAczqD,KAAKyqD,WAAWt6B,OACnCnwB,KAAKs0D,aAAe,OAI5BE,oBAAqB,WACjB,IAAIE,OAAsF9wD,IAA1D5D,KAAKE,QAAQ+4C,eAAe99B,UAAUi5C,gBAClEG,EAAqBv0D,KAAKE,QAAQ4D,OAAOsmD,QAAO,SAAUvgB,GAAK,YAAuCjmC,IAAhCimC,EAAE1uB,UAAUi5C,mBAAmCnzD,OAAS,EAClI,OAAOyzD,GAA6BH,GAGxCd,6BAA8B,SAAS3vD,GACnC,IAAI6wD,EAAyB30D,KAAKE,QAAQ+4C,eAAe99B,UAAUi5C,gBAEnE,OAD4BtwD,EAAOqX,UAAUi5C,iBACbO,GAA0B7wD,EAAO0W,SAAW1e,EAAiB84D,wBAGjGT,4BAA6B,SAASrwD,GAClC,OAAOA,EAAOowD,gBAAkBpwD,EAAO0W,SAAW1e,EAAiB84D,wBAGvErF,WAAY,SAASr3C,GACjB,IAIQi6B,EAJJ/xC,EAAQJ,KAAKwyD,YAAYt6C,EAAEO,QAASP,EAAEQ,eAEtCtY,GAASA,EAAM+Y,kBAAoBnZ,KAAK60D,yBAA2B70D,KAAK2qD,mBACxE3qD,KAAK60D,uBAAyB70D,KAAK80D,mBAAmB/iD,KAAK/R,MAE3DjB,EAAW8sC,WAAYsG,EAAM,IAAmB,UAAInyC,KAAK60D,uBAAwB1iB,MAIzF2iB,mBAAoB,SAAS58C,GACzB,IAwBQi6B,EAxBJl+B,EAAMjU,KACNE,EAAU+T,EAAI/T,QACdgpB,EAAUjV,EAAI22C,SACdzvC,EAAYlH,EAAIw2C,WAChBrqD,EAAQ6T,EAAIqgD,aACZv3C,EAAS/c,KAAKwpC,kBAAkBtxB,GAEpC,GAAIlY,KAAK2B,UAAU+M,IAAIupB,cAAclb,IACjC,GAAI3c,GAASA,EAAM+Y,iBAAmB/Y,EAAM0D,QAAU1D,EAAM4c,OAAOC,gBAAiB,CAChF,IAAI83C,EAAc30D,EAAM4c,OAAOC,gBAAgBF,EAAO3O,EAAG2O,EAAO1O,EAAGjO,EAAM6R,UACzE,GAAI8iD,GAAeA,IAAgB30D,EAG/B,GAFAJ,KAAKs0D,aAAeS,GAEfA,EAAY18C,MAAMrY,KAAMkY,GACJta,EAAW,GAAIsC,EAAQgpB,QAAS6rC,EAAY70D,QAAQgpB,SACtD5S,SACf4S,EAAQ4G,KAAKilC,GAGjB55C,EAAU2U,KAAKilC,SAM3B91D,GAAa4sC,WAAYsG,EAAM,IAAmB,UAAInyC,KAAK60D,uBAAwB1iB,IACnFnyC,KAAK+uC,oBACL/uC,KAAK60D,uBAAyB,KAE9B70D,KAAKy0D,qBAAqBr0D,IAIlCqvD,WAAY,SAASv3C,GACjB,IAAI6E,EAAS/c,KAAKwpC,kBAAkBtxB,GAChCxW,EAAW1B,KAAK2B,UAIpB,GAFA3B,KAAKg1D,iBAAiBj4C,GAElBrb,EAAS2W,MAAO,CAChB,IAAI48C,EAAevzD,EAASy8B,wBAAwBphB,GAChDk4C,GACAj1D,KAAKqwD,kBAAmB,EACxBrwD,KAAK2B,UAAU0W,MAAMrY,KAAMkY,IACpBlY,KAAKqwD,mBAAqB4E,IACjCj1D,KAAKqwD,kBAAmB,EACxBrwD,KAAKmY,QAAQ3M,KAIjBxL,KAAK2qD,kBACL3qD,KAAKyyD,oBAAoB11C,EAAQ7E,IAIzC88C,iBAAkB,SAASj4C,GAGvB,IAFA,IAAIka,EAAaj3B,KAAK2B,UAAUs1B,WAEvBh1B,EAAI,EAAGA,EAAIg1B,EAAWh2B,OAAQgB,IAAK,CACxC,IAAIqD,EAAU2xB,EAAWh1B,GAErBqD,EAAQoJ,IAAIupB,cAAclb,GAC1BzX,EAAQmrB,OAAO1T,GAEfzX,EAAQ6qB,SAKpBsiC,oBAAqB,SAAS11C,EAAQ7E,EAAGmyB,GACrC,IAAIrqC,KAAKkxD,eAAT,CAIA,IAAIj9C,EAAMjU,KACN+vB,EAAiB9b,EAAI/T,QAAQgpB,QAC7BxnB,EAAWuS,EAAItS,UACfyP,EAAe6C,EAAItS,UAAUyP,aAC7B8X,EAAUjV,EAAI22C,SACdzvC,EAAYlH,EAAIw2C,WAEpB,GAAI/oD,EAASy8B,wBAAwBphB,GAAS,CAC1C,IAAIhW,EAAQqK,EAAaugB,mBAAmB5U,GAC5C,GAAIhW,IAAU/G,KAAKk1D,qBAAwBl1D,KAAKm1D,kBAAoB9qB,EAAS,CACzE,IAAI94B,EAAS7P,EAAS68B,sBAAsBx3B,GACxCquD,EAAY7jD,EAAOsQ,KAAI,SAASzhB,GAChC,OAAOA,EAAMgY,UAAUF,MAEvBm9C,EAAYD,EAAU,IAAM,GAChCC,EAAU7jD,eAAiB4jD,EAEvB7jD,EAAOtQ,OAAS,IAAMjB,KAAKmY,QAAQhN,GAAckqD,IAC7CtlC,EAAezZ,SACf4S,EAAQuH,OAAOlf,EAAQwL,GAG3B5B,EAAU2U,KAAKve,GAEfvR,KAAKm1D,kBAAmB,GAExBjsC,EAAQiH,OAGZnwB,KAAKk1D,mBAAqBnuD,OACnBsjC,GAAUrqC,KAAKm1D,mBACtBh6C,EAAUgV,OACVjH,EAAQiH,OACRnwB,KAAKm1D,kBAAmB,QAErBn1D,KAAKm1D,mBACZh6C,EAAUgV,OACVjH,EAAQiH,OACRnwB,KAAKk1D,mBAAqB,KAC1Bl1D,KAAKm1D,kBAAmB,KAIhCG,aAAc,SAASp1D,GACnB,IAAIwB,EAAW1B,KAAK2B,UACpB3B,KAAKyvD,WAAWa,SAEhB5uD,EAASm2B,iBAET73B,KAAK+uC,kBAAkB7uC,IAG3B6uC,kBAAmB,SAAS7uC,GACxB,IACIgpB,EADMlpB,KACQ4qD,SACdzvC,EAFMnb,KAEUyqD,WAEpBzqD,KAAKs0D,aAAe,KACpBt0D,KAAKowD,cAAgB,MAEjBlnC,GAAahpB,GAAWA,EAAQq1D,iBAChCrsC,EAAQiH,OAGZnwB,KAAKk1D,mBAAqB,KAC1Bl1D,KAAKm1D,kBAAmB,EAEpBh6C,GACAA,EAAUgV,QAIlBqlC,aAAc,WACVx1D,KAAKyoD,WAGTgN,oBAAqB,WACbz1D,KAAK01D,iBACLC,cAAc31D,KAAK01D,gBACnB11D,KAAK01D,eAAiB,OAI9BnP,eAAgB,WAMZ,IALA,IAEIrmD,EAAUF,KAAKE,QACf0oC,EAAc,GAAG7kC,OAAO7D,EAAQkR,cAE3B+nB,EAAS,EAAGA,EAASyP,EAAY3nC,OAAQk4B,IAAU,CACxD,IAAIp5B,EAAO6oC,EAAYzP,IACD,IAAlBp5B,EAAK61D,UAPE51D,KAQE61D,2BAA2B91D,EAAMo5B,KAKtD08B,2BAA4B,SAAS91D,EAAMo5B,GAUvC,IATA,IAOI0N,EALA/iC,EAAS9D,KAAKE,QAAQ4D,OACtBgqD,EAAehqD,EAAO7C,OACtB60D,EAAmB,IAAIn6D,EAAQo6D,QAC/BtqC,EAAQ,GACRuqC,GAAW,EAGN/jD,EAAW,EAAGA,EAAW67C,EAAc77C,IAAY,CACxD,IAAI43B,EAAI/lC,EAAOmO,GACXktB,EAAS0K,EAAEz4B,eAAiBrR,EAAKe,OAAU+oC,EAAEz4B,cAA2B,IAAX+nB,EAC7D/0B,EAAOylC,EAAEzlC,KACTiiC,EAAajiC,EAAKnD,OAClB8Q,EAAO83B,EAAE3D,eAAiB/G,EAG9B,GAFA62B,EAAWjkD,GAAQikD,EAEfjkD,GAAQs0B,EAAa,EAKrB,IAFA,IAAIU,GAFJF,EAAWrR,GAAWz1B,EAAM6C,GAASinC,EAAE3D,cAAe9hC,EAAK,MAEpCmxB,GAAe3yB,GAE7BqzD,EAAS,EAAGA,EAAS5vB,EAAY4vB,IAAU,CAChD,IAAIC,EAAU9xD,EAAK6xD,GACf1gD,EAAWwxB,EAAM8C,EAAE3D,cAAegwB,EAxBnCl2D,KAwBqDmR,aAAakb,OAEjEwa,GAAaivB,EAAiB/yD,IAAIwS,KAClCkW,EAAMpmB,KAAK,CAAEkQ,EAAU2gD,IAElBrvB,GACDivB,EAAiBjtC,IAAItT,GAAU,KAOnD,GAAIkW,EAAMxqB,OAAS,EAAG,CACd4lC,IACApb,EAsVhB,SAAqB0qC,EAAUC,QACV,IAAbA,IAAuBA,EAAWz6D,EAAQ06D,cAM9C,IAJA,IAAIC,EAhBR,SAAmBA,EAAOF,QACL,IAAbA,IAAuBA,EAAWz6D,EAAQ06D,cAE9C,IAAK,IAAIp0D,EAAI,EAAGhB,EAASq1D,EAAMr1D,OAAQgB,EAAIhB,EAAQgB,IAC/C,GAAIm0D,EAASE,EAAMr0D,GAAIq0D,EAAMr0D,EAAI,IAAM,EAAG,CACtCq0D,EAAM7Z,KAAK2Z,GACX,MAIR,OAAOE,EAMKC,CAAUJ,EAAUC,GAC5Bn1D,EAASq1D,EAAMr1D,OACfwB,EAASxB,EAAS,EAAI,CAAEq1D,EAAM,IAAO,GAEhCr0D,EAAI,EAAGA,EAAIhB,EAAQgB,IACiB,IAArCm0D,EAASE,EAAMr0D,GAAIpE,EAAK4E,KACxBA,EAAO4C,KAAKixD,EAAMr0D,IAI1B,OAAOQ,EAnWa+zD,CAAY/qC,GAAO,SAASyJ,EAAGC,GACnC,OAAOx5B,EAAQ06D,aAAanhC,EAAE,GAAIC,EAAE,QAI5C,IAAI1yB,EAiWhB,SAAmBg0D,GAIf,IAHA,IAAIC,EAAWD,EAAKx1D,OAChBwB,EAAS,GAEJk0D,EAAQ,EAAGA,EAAQD,EAAUC,IAIlC,IAHA,IAAI7zD,EAAM2zD,EAAKE,GACXC,EAAW9zD,EAAI7B,OAEV41D,EAAQ,EAAGA,EAAQD,EAAUC,IAClCp0D,EAAOo0D,GAASp0D,EAAOo0D,IAAU,GACjCp0D,EAAOo0D,GAAOxxD,KAAKvC,EAAI+zD,IAI/B,OAAOp0D,EA/Wcq0D,CAAUrrC,GACvB1rB,EAAKkR,WAAaxO,EAAO,QAClBuzD,IACPj2D,EAAKkR,WAAa,KAI1B8lD,YAAa,SAASjzD,GAIlB,IAHA,IAAIP,EAAcP,GAAasC,QAAQ/B,YAAYO,GAC/CrB,GAAS,EAEJR,EAAI,EAAGA,EAAIsB,EAAYtC,OAAQgB,IAAK,CACzC,IAAIY,EAAQU,EAAYtB,GAOxB,GANIY,IAAU3G,EACV2G,EAAQ,QAERA,GAAgB,SAGf7F,EAAQ8G,EAAOjB,IAAS,CACzBJ,GAAS,EACT,OAIR,OAAOA,GAGXsnD,qBAAsB,WAClB,IACIiN,EADA92D,EAAUF,KAAKE,SAGS,IAAxBA,EAAQsgB,cACRtgB,EAAQsgB,aAAc,EACtBw2C,GAAmB,GAGvBh3D,KAAKyoD,UAEDuO,IACA92D,EAAQsgB,aAAc,IAI9BquB,iBAAkB,SAASnQ,EAAaoQ,GACpC,IAIIrjB,EAHA/pB,EADM1B,KACS2B,UACfwZ,EAFMnb,KAEUyqD,WAChB30C,GAAiBpU,EAASmkC,WAAankC,EAASoC,QAAQ46B,GAW5D,GAPIjT,EADAjuB,EAAQsY,EAAcpS,KAAM,CAAEkG,GAAKP,GAAOC,GAAQC,KAC1C7H,EAASm9B,WAAU,SAASz+B,GAChC,OAAOA,EAAM0D,OAAOiD,QAAU23B,GAAet+B,EAAM2G,QAAU+nC,KAGzDptC,EAAS+8B,oBAAoBC,GAGrC1+B,KAAKw0D,uBAAyB1+C,EAAcQ,SAAWmV,EAAO,CAC9D,IAAIunC,EAAiBtxD,EAASoC,OAAO7C,OAAS,EAC1Cb,EAAQqrB,EAAMxqB,OAASwqB,EAAM,GAAKA,EAEtCzrB,KAAK8yD,wBAAwB1yD,EAAO4yD,EAAgBvnC,QAEpDtQ,EAAU2U,KAAKrE,IAIvB0kC,uBAAwB,WACpB,OAAOnwD,KAAK2B,UAAUs1B,WAAWh2B,QAAWjB,KAAK4qD,UAAY5qD,KAAK2qD,kBAAqB3qD,KAAK8sD,iBAAiB,CAAEvhD,GAAiBC,MAGpIyrD,uBAAwB,WACpB,IAAI9kB,EAII+d,GAHRjxD,GAAae,KAAKyY,UAAW05B,EAAM,IAAmB,UAAInyC,KAAKyvD,WAAYtd,IAEvEnyC,KAAKmwD,2BAELpxD,EAAWiB,KAAKyY,UAAWy3C,EAAQ,IAAqB,UAAIlwD,KAAKyvD,WAAYS,KAIrFgH,aAAc,SAASh3D,EAAS84C,GAC5BsT,GAAmBtsD,KAAKgoD,iBAAkB9nD,GAC1CF,KAAKgoD,iBAAmBpqD,EAAWoC,KAAKgoD,iBAAkB9nD,GAC1DF,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKgoD,kBAE/BhP,IACAh5C,KAAKioD,OAASjP,EACdh5C,KAAKmR,aAAa6nC,MAAQA,GAE9Bh5C,KAAKkoD,WAAWloD,KAAKE,QAASF,KAAKioD,QAEnCjoD,KAAK4sD,yBAGTuK,WAAY,SAASj3D,EAAS84C,GAC1Bh5C,KAAKk3D,aAAah3D,EAAS84C,GAC3Bh5C,KAAKumD,iBACLvmD,KAAK85B,SACL95B,KAAKi3D,0BAGTG,aAAc,SAASnxC,GACnBjmB,KAAKmR,aAAa8U,IAAMmqB,QAAQnqB,GAC5BjmB,KAAK8qD,SAAiC,QAAtB9qD,KAAK8qD,QAAQpnD,MAC7B1D,KAAKkrD,mBAIbmM,eAAgB,SAAShrC,GACrBrsB,KAAKmR,aAAakb,KAAOA,GAG7BirC,oBAAqB,WACjBt3D,KAAK+pD,wBAGT35B,QAAS,WAGL,IAAI+hB,EASI+d,GAXRlwD,KAAKwoD,YAAa,EAGlBvpD,GAAae,KAAKyY,UAAW05B,EAAM,IAAqB,YAAInyC,KAAKmvD,cAAehd,EAAgB,MAAInyC,KAAKqyC,mBAAoBF,EAAe,UAAInyC,KAAKyvD,WAAYtd,EAAgB,WAAInyC,KAAKqvD,mBAAoBld,IAE1MnyC,KAAKqtD,YACLrtD,KAAKqtD,UAAUj9B,iBACRpwB,KAAKqtD,WAGZrtD,KAAK60D,yBAEL51D,GAAa4sC,WAAYqkB,EAAQ,IAAqB,UAAIlwD,KAAK60D,uBAAwB3E,IAG3FlwD,KAAKwrD,eAELxrD,KAAKkrD,kBAELlrD,KAAKy1D,uBAGTvK,gBAAiB,WACb,IAAIJ,EAAU9qD,KAAK8qD,QACfA,IACAA,EAAQyM,OAAO,aAAcv3D,KAAKorD,2BAClCN,EAAQyM,OAAO,aAAcv3D,KAAKqrD,2BAClCP,EAAQ16B,UAERpwB,KAAK8qD,QAAU,OAIvBjB,mBAAoB,WAChB,IAAIiF,EAAa9uD,KAAK4pD,YAEtB,GAAIkF,EACA,KAAOA,EAAW7tD,OAAS,GACvB6tD,EAAW5tB,QAAQ9Q,WAK/Bo7B,aAAc,WACV,IAAIF,EAAQtrD,KAAKiqD,OAEbqB,IACAA,EAAMl7B,UACNpwB,KAAKiqD,OAAS,MAGlBjqD,KAAK+uC,oBACL/uC,KAAK+vD,uBACL/vD,KAAK6pD,qBAED7pD,KAAK4qD,UACL5qD,KAAK4qD,SAASx6B,UAGdpwB,KAAKyqD,YACLzqD,KAAKyqD,WAAWr6B,UAGhBpwB,KAAK0sD,iBACL1sD,KAAK0sD,eAAet8B,iBACbpwB,KAAK0sD,gBAGZ1sD,KAAKwsD,YACLxsD,KAAKwsD,UAAUp8B,iBACRpwB,KAAKwsD,WAGZxsD,KAAK2sD,kBACL3sD,KAAK2sD,gBAAgBv8B,iBACdpwB,KAAK2sD,oBAiBxB,SAASpC,GAAoBh5C,EAAQzQ,GACjC,GAAIyQ,EACA,IAAK,IAAIvQ,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnC,GAAIuQ,EAAOvQ,GAAKuU,WAAazU,EACzB,MAAO,CAAEyQ,EAAOvQ,IAqEhC,SAASktD,GAA4BjV,UAC1BA,EAAeue,WACfve,EAAewe,cACfxe,EAAeye,mBACfze,EAAe1pC,YACf0pC,EAAe0e,oBACf1e,EAAe2e,WACf3e,EAAe4e,aACf5e,EAAe5qB,YACf4qB,EAAe6e,oBACf7e,EAAe8e,eACf9e,EAAe+e,mBACf/e,EAAegf,cACfhf,EAAeif,mBACfjf,EAAekf,YACflf,EAAemf,eACfnf,EAAe/pB,cACf+pB,EAAeof,sBACfpf,EAAeqf,iBACfrf,EAAesf,iBACftf,EAAeuf,iBACfvf,EAAewf,iBACfxf,EAAeyf,UAG1B,SAAS50C,GAAW/iB,GAGhB,IAFA,IAAIiqC,EAAS,GAEJ/oC,EAAI,EAAGA,EAAIlB,EAAKE,OAAQgB,IAAK,CAClC,IAAIlC,EAAOgB,EAAKkB,GACZ2R,EAAW7T,EAAKG,QAAQY,KACxB8S,IACAo3B,EAAOp3B,GAAY7T,EAAKY,SAIhC,OAAOqqC,EAiDX,IAAI2tB,GAAc,CAAE,OAAQ,cAE5B,SAASrM,GAAmBp1B,EAAiBh3B,GACzC,IAAK,IAAI2C,KAAS3C,EACd,IAAK1C,EAAQqF,EAAO81D,KAAgBz4D,EAAQ2Q,eAAehO,GAAQ,CAC/D,IAAI+1D,EAAa14D,EAAQ2C,GACrBg2D,EAAgB3hC,EAAgBr0B,GACpC,GAAI7F,EAAQ67D,GAAgB,CACxB,IAAIC,EAA2B,OAAfF,EACXE,IAAc97D,EAAQ47D,WAChB1hC,EAAgBr0B,GACnBi2D,UACO54D,EAAQ2C,IAEZg2D,GAAiBl7D,EAASi7D,IAC7Bj7D,EAASk7D,IACTvM,GAAmBuM,EAAeD,KAQ1D,SAAS5M,GAAkBz0B,GACvB,IAAK,IAAIv2B,EAAM,EAAGA,EAAMu2B,EAAMt2B,OAAQD,IAClCu2B,EAAMv2B,GAAKozB,eAInB72B,EAAkBkqD,GAAO,CACrBwD,SAAU,GACV7B,UAAW,GACXpyB,OAAQ,CACJ1gB,SAAS,EACT+C,OAAQ,IAEZjI,aAAc,GACd6nC,eAAgB,CACZv1C,KAAM0F,GACNhF,KAAM,GACN+W,UAAW,CACP7E,SAAS,GAEb+C,OAAQ,GACRqU,eAAgB,CACZpX,SAAS,IAGjBxS,OAAQ,GACRu3C,aAAc,KACdnyB,QAAS,CACL5S,SAAS,GAEbkK,aAAa,EACbjN,UAAW,GACX7R,SAAU,GACVmxB,MAAO,GACPtG,MAAO,GACPE,MAAO,GACP8K,MAAO,CAAE,IACTg1B,UAAU,EACVE,UAAU,IAGd/wD,MAAMkC,WAAWlC,MAAMC,QAAS,CAC5BI,UAAWA,GACXoG,WAAYA,GACZ2gB,UAAWA,GACX9B,YAAaA,GACb6C,sBAAuBA,GACvBqB,IAAKA,GACL2B,SAAUA,GACVzC,SAAUA,GACVmH,aAAcA,GACd/B,QAASA,GACTgE,YAAaA,GACbe,OAAQA,GACRO,YAAaA,GACb3F,iBAAkBA,GAClBrB,YAAaA,GACb5W,iBAAkBA,GAClBhB,oBAAqBA,GACrBk0B,oBAAqBA,GACrBqjB,MAAOA,GACP31B,eAAgBA,GAChBxS,cAAeA,GACf0G,cAAeA,GACfqL,UAAWA,GACXhB,iBAAkBA,GAClB8Q,kBAAmBA,GACnBye,WAAYA,GACZK,cAAeA,GACfN,aAAcA,GACdxyC,aAAcA,GACdzH,qBAAsBA,GACtBokC,UAAWA,GACXiM,cAAeA,GACf5G,OAAQA,GACRf,WAAYA,GACZT,aAAcA,GACd9sB,UAAWA,GACX3H,UAAWA,GACXqD,YAAaA,GACbiW,KAAMA,GACNwkB,aAAcA,GACdoE,SAAUA,GACVL,cAAeA,GACfyE,YAAaA,GACb5G,WAAYA,GACZ/hB,aAAcA,GACd+I,oBAAqBA,GACrByQ,gBAAiBA,GACjBr4B,iBAAkBA,GAClBspB,SAAUA,GACVM,cAAeA,GACfI,eAAgBA,GAChBkB,eAAgBA,GAChBtX,aAAcA,GACdF,gBAAiBA,GACjBurB,iBAAkBA,GAClBnG,UAAWA,GACXhR,iBAAkBA,GAClB98B,aAAcA,GACd6a,cAAeA,GACf6E,kBAAmBA,GACnB6D,UAAWA,GACXsvB,QAASA,GACTlS,UAAWA,GACXN,UAAWA,GACXQ,eAAgBA,GAChBD,iBAAkBA,GAClBuT,WAAYA,GACZ5J,eAAgBA,GAChB9B,cAAeA,GACfR,SAAUA,GACVrrC,UAAWA,GACXuB,UAAWA,GACXM,cAAeA,GACfZ,eAAgBA,GAChBof,aAAcA,GACd4U,gBAAiBA,GACjB5L,WAAYA,GACZ+L,aAAcA,GACdjkB,gBAAiBA,GACjBjP,aAAcA,GACdmzB,iBAAkBA,GAClB7kB,YAAaA,GACbilB,mBAAoBA,GACpBE,aAAcA,GACd3yB,SAAUA,GACVmiB,mBAAoBA,GACpBqE,SAAUA,GACVoM,WAAYA,GACZV,eAAgBA,GAChBe,kBAAmBA,GACnBS,uBAAwBA,KA1se5B,CA6seG76B,OAAOC,MAAMq9D,QAEhB,SAAUv9D,EAAGw9D,GAET,MAAMt9D,EAAQD,OAAOC,MACfC,EAAUD,EAAMC,QAChBs9D,EAASv9D,EAAMw9D,GAAGD,OAElBE,EAAkBF,EAAOp5D,OAAO,CAClCC,KAAM,SAAS2Y,EAASvY,GAGpB,GAFA+4D,EAAO3rD,GAAGxN,KAAKyN,KAAKvN,KAAMyY,EAASvY,IAE9BA,EAAQmN,MACT,MAAM,IAAIlG,MAAM,kEAGpBnH,KAAKo5D,qBACLp5D,KAAKq5D,oBAEL39D,EAAMw0B,OAAOlwB,KAAMrE,EAAQu9D,KAG/BI,OAAQ,GAERp5D,QAAS,CACLY,KAAM,kBACNy4D,SAAU,CACN71D,KAAM,WACN81D,KAAM,OACN1gD,KAAM,OACN2gD,UAAU,IAIlBrpC,QAAS,WACDpwB,KAAK05D,aACL15D,KAAK05D,WAAWtpC,UAChBpwB,KAAK05D,WAAa,MAGlB15D,KAAKqN,QACLrN,KAAKqN,MAAMkqD,OAAO,YAAav3D,KAAK25D,mBACpC35D,KAAKqN,MAAMkqD,OAAO,uBAAwBv3D,KAAK45D,8BAC/C55D,KAAKqN,MAAQ,MAGjB4rD,EAAO3rD,GAAG8iB,QAAQ7iB,KAAKvN,OAG3Bo5D,mBAAmBS,GACf,MAAM35D,EAAUF,KAAKE,QAErB,GAAiD,mBAAtCA,EAAQmN,MAAMysD,oBACrB95D,KAAKqN,MAAQnN,EAAQmN,UAClB,IAA6B,iBAAlBnN,EAAQmN,MAQtB,MAAM,IAAIlG,MAAM,uFALhB,GAFAnH,KAAKqN,MAAQ7R,EAAE0E,EAAQmN,OAAO0sD,iBAAmBv+D,EAAE,IAAM0E,EAAQmN,OAAO0sD,iBAEnE/5D,KAAKqN,QAAUwsD,EAEhB,YADA/kB,YAAW,IAAM90C,KAAKo5D,oBAAmB,KAOjDp5D,KAAK25D,kBAAoB35D,KAAK25D,kBAAkB5nD,KAAK/R,MACrDA,KAAKqN,MAAM0E,KAAK,YAAa/R,KAAK25D,mBAElC35D,KAAK45D,6BAA+B55D,KAAK45D,6BAA6B7nD,KAAK/R,MAC3EA,KAAKqN,MAAM0E,KAAK,uBAAwB/R,KAAK45D,+BAGjDP,kBAAmB,WACf,MAAMW,EAAoBx+D,EAAE,WAC5BwE,KAAKyY,QAAQra,OAAO47D,GACpBh6D,KAAK05D,WAAa,IAAIh+D,EAAMw9D,GAAGe,WAAWD,EAAmB,CACzDvuC,MAAO,CAACzrB,KAAKE,QAAQq5D,YAGzBv5D,KAAK05D,WAAW3nD,KAAK,SAASmG,GAAKlY,KAAKk6D,mBAAmBhiD,MAG/DgiD,mBAAoB,SAAShiD,GACzB,IAAKlY,KAAK05D,aAAe15D,KAAKqN,MAC1B,OAIJ,MAAM8sD,EADMn6D,KAAK05D,WAAWjuC,QACR2uC,WAAWl2D,GAASA,IAASgU,EAAEhU,OAErClE,KAAKqN,MACbysD,oBAAoBK,IAG9BR,kBAAmB,SAASzhD,GACnBlY,KAAK05D,aAAcxhD,EAAE+3C,sBAI1BjwD,KAAK05D,WAAWjuC,MAAM,IACfzrB,KAAK05D,WAAWjuC,QACnB,CAAE/nB,KAAM,OAAQoV,KAAMZ,EAAE9X,MAAMmV,aAItCqkD,6BAA8B,SAAS1hD,GACnC,IAAKlY,KAAK05D,WACN,OAGJ,IAAIjuC,EAAQzrB,KAAK05D,WAAWjuC,QAC5BA,EAAQA,EAAMjnB,MAAM,EAAG0T,EAAEiiD,MAAQ,GACjCn6D,KAAK05D,WAAWjuC,MAAMA,MAI9B9vB,EAAQu9D,GAAGmB,OAAOlB,GAlHtB,CAoHG19D,OAAOC,MAAMq9D,QAEhB,SAAUv9D,EAAGw9D,GAET,IAAIsB,EAAK,cACL5+D,EAAQD,OAAOC,MACfE,EAAQF,EAAME,MACd2+D,EAAa7+D,EAAM8+D,YACnBC,EAAc/+D,EAAMg/D,aACpB/+D,EAAUD,EAAMC,QAChBI,EAAYJ,EAAQI,UACpB4+D,EAAah/D,EAAQ8rD,MACrBzkD,EAAerH,EAAQqH,aACvBi2D,EAASv9D,EAAMw9D,GAAGD,OAClB2B,EAAal/D,EAAM0I,KAAKw2D,WACxBh9D,EAAalC,EAAMkC,WACnBZ,EAAUrB,EAAQqB,QAClB4F,EAAWjH,EAAQiH,SACnBi4D,EAAmBl/D,EAAQk/D,iBAC3Br9D,EAAU7B,EAAQ6B,QAClBwB,EAAWrD,EAAQqD,SACnB9B,EAAUoH,MAAMpH,QAChB2C,EAASrE,EAAEqE,OACXi7D,EAAWp/D,EAAMo/D,SACjBC,EAASr/D,EAAMs/D,WAEfC,EAAgB,aAAeX,EAC/BY,EAAmBn/D,EAAUm/D,iBAC7BnwD,EAAoBhP,EAAUgP,kBAC9BC,EAAoBjP,EAAUiP,kBAC9BC,EAAoBlP,EAAUkP,kBAC9BC,EAAenP,EAAUmP,aACzBC,EAAepP,EAAUoP,aACzBC,EAAcrP,EAAUqP,YACxBC,EAAetP,EAAUsP,aACzBgB,EAActQ,EAAUsQ,YACxBf,EAAkBvP,EAAUuP,gBAC5BC,EAAkBxP,EAAUwP,gBAC5BC,EAAkBzP,EAAUyP,gBAC5BC,EAAO1P,EAAU0P,KACjBC,EAAW3P,EAAU2P,SACrBC,EAAa5P,EAAU4P,WACvBkB,EAAY9Q,EAAU8Q,UACtBsuD,EAAyB,uBACzBvvD,EAAa7P,EAAU6P,WACvBC,EAAO9P,EAAU8P,KACjBC,EAAW/P,EAAU+P,SACrBC,EAAehQ,EAAUgQ,aACzBC,EAASjQ,EAAUiQ,OACnBC,EAAalQ,EAAUkQ,WACvBC,EAASnQ,EAAUmQ,OACnBkvD,EAAar/D,EAAUq/D,WACvBC,EAAat/D,EAAUs/D,WACvBC,EAAav/D,EAAUu/D,WACvBC,EAAmB//D,EAAEqwC,SAAS2vB,iBAE9BC,EAAS,SACTC,EAAY,YACZC,GAAQ,QAGRz/D,GAAQH,EAAUG,MAClB0N,GAAM7N,EAAU6N,IAChBP,GAAQtN,EAAUsN,MAClBC,GAASvN,EAAUuN,OAEnBsyD,GAAalgE,EAAMkgE,WAOvB58D,EAASwzC,iBAAiBnvC,SAAS,CAC/BwrB,OAAQ,SAASpW,EAAS6gD,GACrB,OAAO,IAAI59D,EAAMmgE,WAAWpjD,EAAS7a,EAAW,CAC5Ck+D,QAAQ,EACRC,YAAY,EACZC,SAAS,GACV1C,OAIZ,IAAI2C,GAAwBpB,EAAiBh7D,OAAO,CAChDq8D,WAAY,CACRxR,YAAa,eACbG,YAAa,eACbsR,gBAAiB,qBACjBvqD,OAAQ,YACR9R,KAAM,UACNg0D,UAAW,kBAIfrM,GAAQwR,EAAOp5D,OAAO,CACtBC,KAAM,SAAS2Y,EAASivC,GACpB,IAAI0U,EAEJ1gE,EAAM00B,QAAQ3X,GAEdwgD,EAAO3rD,GAAGxN,KAAKyN,KAAKvN,KAAMyY,GAEtBivC,IACA0U,EAAa1U,EAAY0U,kBAClB1U,EAAY0U,YAGvBp8D,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASwnD,GAE5C1nD,KAAKsxC,QAAUtxC,KAAKyY,QACpBzY,KAAK0oD,gBAEDhB,IACAA,EAAY0U,WAAaA,GAG7Bp8D,KAAKq8D,kBAAoB,IAAIC,GAE7Bt8D,KAAK+R,KAAK/R,KAAKs5D,OAAQt5D,KAAKE,SAC5BF,KAAKu8D,gBAAgB7U,GAErB1nD,KAAK+zD,gBAAkB,GAEvBr4D,EAAMw0B,OAAOlwB,KAAMrE,EAAQu9D,KAG/BI,OAAQ,CACJoC,EACA7uD,EACAsuD,EACAjwD,EACAC,EACAC,EACAC,EACA6vD,EACAnwD,EACAC,EACAC,EACAoB,EACAf,EACAC,EACAC,EACAG,EACAF,EACAC,EACAE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAmvD,EACAC,EACAC,EACApvD,GAGJhM,QAAS,CACLY,KAAM,QACNmqD,SAAU,GACVjS,MAAO,UACPyU,aAAc,GACdrE,UAAW,GACXpyB,OAAQ,GACR5lB,aAAc,GACdwkD,UAAU,EACV3c,eAAgB,GAChBn1C,OAAQ,GACRu3C,aAAc,KACdnyB,QAAS,GACT1I,aAAa,EACbjN,UAAW,GACX7R,SAAU,GACVmxB,MAAO,GACPtG,MAAO,GACPE,MAAO,GACP8K,MAAO,CAAC,IACRg1B,UAAU,EACVE,UAAU,GAGdhhC,MAAO,WACH,OAAOjwB,KAGXy4B,QAAS,WACL,IAAI5mB,EAAQrN,KACRw8D,EAAWnvD,EAAMovD,UACrBD,EAASvT,cAAc57C,EAAMnN,SAC7Bs8D,EAAStT,oBAET77C,EAAMqvD,cACNrvD,EAAMsvD,kBAENtvD,EAAM8K,QAAQujD,GACdruD,EAAMo7C,WAGVU,QAAS,WACL,OAAOztD,EAAMkhE,WAAW58D,KAAKyY,UAGjCqhB,OAAQ,SAASkwB,GACbhqD,KAAKypD,MAAQ,KACbzpD,KAAKy8D,UAAU3iC,OAAOkwB,IAG1BmN,WAAY,SAASj3D,GACjB,IAAImN,EAAQrN,KACRo8D,EAAal8D,EAAQk8D,kBAElBl8D,EAAQk8D,WAEfnD,EAAO3rD,GAAGuvD,WAAWtvD,KAAKF,EAAOnN,GAEjCF,KAAKy8D,UAAUvF,aAAah3D,EAASF,KAAK88D,iBAAiB58D,IAC3DF,KAAKE,QAAUF,KAAKy8D,UAAUv8D,QAC9BF,KAAK4qD,SAASuM,WAAWn3D,KAAKE,QAAQgpB,SACtClpB,KAAKq8D,kBAAkBlF,WAAWn3D,KAAKE,SACvCF,KAAK+8D,cAAgB,KAEjBX,GACA/uD,EAAM2vD,cAAcZ,GAGpB/uD,EAAM4vD,eACN5vD,EAAM6vD,kBAEN7vD,EAAMsvD,kBACNtvD,EAAMysB,UAGVzsB,EAAMovD,UAAUxF,0BAIpB+F,cAAe,SAASZ,GACpB,IAAI/uD,EAAQrN,KAEZqN,EAAM+uD,WAAW7E,OAAOkE,EAAQpuD,EAAM8vD,oBACtC9vD,EAAM+uD,WAAaA,EAAaxB,EAAW/rC,OAAOutC,GAClD/uD,EAAM4vD,gBAAiB,EACvB5vD,EAAM+vD,UAAW,EAEjBhB,EAAWrqD,KAAK0pD,EAAQpuD,EAAM8vD,oBAE1B9vD,EAAMnN,QAAQ01D,UACdwG,EAAWiB,SAInBjtC,QAAS,WACL,IAAI/iB,EAAQrN,KACRo8D,EAAa/uD,EAAM+uD,WAEvB/uD,EAAMoL,QAAQ6kD,IAAIhD,GAEd8B,GACAA,EAAW7E,OAAOkE,EAAQpuD,EAAM8vD,oBAGhC9vD,EAAMovD,YACNpvD,EAAMovD,UAAUrsC,iBACTpwB,KAAKy8D,WAGZz8D,KAAK4qD,WACL5qD,KAAK4qD,SAASx6B,iBACPpwB,KAAK4qD,UAGhB5qD,KAAKu9D,4BAELtE,EAAO3rD,GAAG8iB,QAAQ7iB,KAAKF,IAG3B68C,eAAgB,SAASppD,GAGrB,IAFA,IAAIy2B,EAAQv3B,KAAK2B,UAAU41B,MAElBv2B,EAAM,EAAGA,EAAMu2B,EAAMt2B,OAAQD,IAClC,GAAIu2B,EAAMv2B,GAAKd,QAAQY,OAASA,EAC5B,OAAO,IAAIK,GAAUnB,KAAMu3B,EAAMv2B,KAK7CmpD,gBAAiB,SAASnpD,GACtB,IAAIu2B,EAAQv3B,KAAK2B,UAAU41B,MAC3B,GAAIA,EAAMv2B,GACN,OAAO,IAAIG,GAAUnB,KAAMu3B,EAAMv2B,KAIzCw8D,WAAY,SAASrmD,GAGjB,IAFA,IAAIzV,EAAW1B,KAAK2B,UAChBmC,EAASpC,EAASmkC,WAAankC,EAASoC,OACnC9C,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IACnC,GAAImW,EAASrT,EAAO9C,IAChB,OAAO,IAAIy8D,GAAYz9D,KAAM8D,EAAO9C,KAKhD08D,iBAAkB,SAAS58D,GACvB,OAAOd,KAAK29D,cAAc,CAAE78D,KAAMA,KAGtC88D,kBAAmB,SAAS72D,GACxB,OAAO/G,KAAK29D,cAAc,CAAE52D,MAAOA,KAGvColD,aAAc,SAASjsD,GACnB,IAAIs8D,EAAWx8D,KAAKy8D,UACpB,GAAKD,EAAL,CAIA,IAAIn7D,EAGJ,GAAInB,IAAYA,EAAQ4O,OAAS5O,EAAQ6O,QAAS,CAC9C,IAAIq6C,EAAYoT,EAASt8D,QAAQkpD,UAC7ByU,EAAoBrB,EAASxU,iBAAiBoB,UAElDxrD,EAAWwrD,EAAWlpD,GAEtB,IAAIorD,EAAQkR,EAASjR,YAErBnC,EAAUt6C,MAAQ+uD,EAAkB/uD,MACpCs6C,EAAUr6C,OAAS8uD,EAAkB9uD,OAErCu8C,EAAMn3B,eAmlClB,SAA2BoD,GACvB,IAAK,IAAIv2B,EAAM,EAAGA,EAAMu2B,EAAMt2B,OAAQD,IAClCu2B,EAAMv2B,GAAKozB,eAnlCP43B,CAAkBV,EAAM3pD,UAAU41B,OAElCl2B,EAASiqD,EAAMjqD,YAEfA,EAASm7D,EAASrQ,eAGtB,OAAO9qD,IAGXy4D,oBAAoBK,GAChBA,EAAQA,GAAS,EACjB,MAAM7pD,EAAQtQ,KAAK+zD,gBACnB,IAAKzjD,GAAS6pD,EAAQ,GAAKA,EAAQ7pD,EAAMrP,OAAS,EAC9C,OAGJ,MAAM2tC,EAAO,CACTurB,QACA/qD,OAAQpP,MAEZA,KAAKmY,QAAQgjD,EAAwBvsB,GAErC5uC,KAAKE,QAAQ4D,OAAS9D,KAAK+zD,gBAAgBoG,GAC3Cn6D,KAAK+zD,gBAAkB/zD,KAAK+zD,gBAAgBvvD,MAAM,EAAG21D,GAErDn6D,KAAK28D,kBACL38D,KAAKyoD,WAGTkV,cAAe,SAASz9D,GACpB,IAAIwR,EAAgB1R,KAAK89D,eAAe59D,GACxC,GAAIwR,EACA,OAAO,IAAI+rD,GAAYz9D,KAAM0R,IAIrCosD,eAAgB,SAAS59D,GACrB,IAEIwR,EAFAhQ,EAAW1B,KAAK2B,UAChBmC,EAASpC,EAASmkC,WAAankC,EAASoC,OAG5C,GAAI9G,EAAQkD,EAAQ6G,OAChB2K,EAAgB5N,EAAO5D,EAAQ6G,YAC5B,GAAI/J,EAAQkD,EAAQY,MACvB,IAAK,IAAIE,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IACnC,GAAI8C,EAAO9C,GAAKF,OAASZ,EAAQY,KAAM,CACnC4Q,EAAgB5N,EAAO9C,GACvB,MAKZ,OAAO0Q,GAGXg3C,cAAe,WACV1oD,KAAKyY,QAAQslD,GAAG9C,EAAej7D,KAAKsvD,YAAYv9C,KAAK/R,QAG1DsvD,YAAa,SAASp3C,GAClB,IAAIskD,EAAWx8D,KAAKy8D,UAChBvzC,EAAUlpB,KAAK4qD,SACf3rC,EAAS/G,EAAE8lD,cAET/+C,GAAUzjB,EAAEyjB,GAAQ4yC,QAAQ3oC,EAAQzQ,SAASxX,SAAWu7D,GAAaA,EAAS7J,aAChF6J,EAASlH,aAAa,CAClBC,iBAAkBrsC,EAAQhpB,QAAQ+9D,YAK9CnB,iBAAkB,SAASpV,GACvB,IAAIwW,GAAaxW,GAAe,IAAI1O,MAEpC,GAAIklB,IAAuE,IAA1DviE,EAAQwiE,YAAYx3D,QAAQu3D,EAAU9oC,eACnD,OAAOz5B,EAAQyiE,YAAY/wD,MAG/B,GAAIrQ,EAAQkhE,GAAY,CACpB,IAAIG,EAAS1iE,EAAQu9D,GAAGmF,QAAU,GAElC,OADYA,EAAOH,IAAcG,EAAOH,EAAU9oC,gBAAkB,IACvD/nB,OAAS,KAI9BixD,WAAY,WACRt+D,KAAKu+D,aAAav+D,KAAKE,QAASF,KAAK88D,iBAAiB98D,KAAKE,UAC3DF,KAAKE,QAAUF,KAAKy8D,UAAUv8D,QAC9BF,KAAKq8D,kBAAkBlF,WAAWn3D,KAAKE,UAG3Cq+D,aAAc,SAASr+D,EAASynD,GAC5B3nD,KAAKy8D,UAAY,IAAI9B,EAAW36D,KAAKyY,QAAQ,GAAIvY,EAASynD,EAAc,CACpE5W,SAAU,IAAIkrB,GAAsBj8D,MACpCoP,OAAQpP,KACRimB,IAAKjmB,KAAKw+D,YAIlBC,QAAS,SAASvmD,GACdlY,KAAKy8D,UAAYvkD,EAAE9I,QAGvBmtD,gBAAiB,SAAS7U,GACtB,IAAIr6C,EAAQrN,KACRo8D,GAAc1U,GAAe,IAAI0U,WAErC/uD,EAAM8vD,mBAAqB9vD,EAAM6vD,eAAenrD,KAAK1E,GAErDA,EAAM+uD,WAAaxB,EACd/rC,OAAOutC,GACPrqD,KAAK,SAAU1E,EAAM8vD,oBAE1B9vD,EAAMsvD,kBAEFP,IACA/uD,EAAM4vD,gBAAiB,GAG3Bj9D,KAAKs+D,aACLt+D,KAAK0+D,eAEDtC,GACI/uD,EAAMnN,QAAQ01D,UACdvoD,EAAM+uD,WAAWiB,SAK7BE,0BAA2B,WACvB,IAAIoB,EAAW3+D,KAAK4+D,mBACpB,GAAID,EACA,IAAK,IAAIvqD,KAAOuqD,EACZA,EAASvqD,GAAKgc,UAGtBpwB,KAAK4+D,mBAAqB,IAG9BC,qBAAsB,SAAS/9D,EAAMiG,GACjC,IAAI43D,EAAW3+D,KAAK4+D,mBAAqB5+D,KAAK4+D,oBAAsB,GAChExqD,EAAMtT,EAAOiG,EACbmiB,EAAUy1C,EAASvqD,GAIvB,OAHK8U,IACDA,EAAUy1C,EAASvqD,GAAO,IAAIic,GAAiBrwB,KAAKyY,UAEjDyQ,GAGX41C,aAAc,SAAS5mD,GACfA,EAAEoY,UACYtwB,KAAK6+D,qBAAqB3mD,EAAEtE,SAAUsE,EAAElB,WAC9C8Y,KAAK5X,GACNlY,KAAK4qD,UACZ5qD,KAAK4qD,SAAS96B,KAAK5X,IAI3B6mD,aAAc,SAAS7mD,GACfA,EAAEoY,UACatwB,KAAK6+D,qBAAqB3mD,EAAEtE,SAAUsE,EAAElB,WAC9CmZ,OACFnwB,KAAK4qD,UACZ5qD,KAAK4qD,SAASz6B,QAItB6uC,UAAW,SAAS9mD,GAChBlY,KAAKu9D,4BACLv9D,KAAKi/D,aAAa/mD,EAAE9I,QACfpP,KAAKi9D,iBAAkBj9D,KAAKo9D,UAAap9D,KAAKE,QAAQ01D,UACvD51D,KAAKmY,QAAQjM,IAIrB+yD,aAAc,SAASzC,GACnBx8D,KAAKE,QAAUs8D,EAASt8D,QACxBF,KAAKgoD,iBAAmBwU,EAASxU,iBACjChoD,KAAK8qD,QAAU0R,EAAS1R,QACxB9qD,KAAK2B,UAAY66D,EAAS76D,UAC1B3B,KAAKiqD,OAASuS,EAASvS,OACvBjqD,KAAKyqD,WAAa+R,EAAS/R,WAC3BzqD,KAAK4pD,YAAc4S,EAAS5S,YAC5B5pD,KAAKwsD,UAAYgQ,EAAShQ,UAC1BxsD,KAAK0sD,eAAiB8P,EAAS9P,eAC/B1sD,KAAK2sD,gBAAkB6P,EAAS7P,iBAGpCG,iBAAkB,SAASoS,GAExB,IADA,IAAI5F,EAASt5D,KAAKm/D,QACTn+D,EAAM,EAAGA,EAAMk+D,EAAMj+D,OAAQD,IAClC,GAAIhE,EAAQs8D,EAAO4F,EAAMl+D,KACrB,OAAO,GAKlB09D,aAAc,WACV1+D,KAAK4qD,SAAW5qD,KAAK4rD,iBAErB5rD,KAAK4qD,SAAS74C,KAAK4pD,GAAO37D,KAAKo/D,cAAcrtD,KAAK/R,QAGtDq/D,mBAAoB,SAASnnD,GACpBlY,KAAKmY,QAAQpN,EAAmBmN,IACjClY,KAAKs/D,iBAAiBpnD,EAAEwmB,YAAaxmB,EAAE42B,aAI/CwwB,iBAAkB,SAAS5gC,EAAaoQ,GACpC,IAAIzhC,EAAQrN,KAAKy8D,UACb/6D,EAAW2L,EAAM1L,UACjBmU,GAAiBpU,EAASmkC,WAAankC,EAASoC,QAAQ46B,GAQ5D,GANIrxB,EAAMmnD,uBAAyBnnD,EAAM8lD,uBACrC9lD,EAAMgmD,qBAAqB,MAAM,GACjChmD,EAAMimD,oBAAoBjmD,EAAM8lD,qBAAqBv0C,SAAU,MAAM,GACrEvR,EAAM8lD,qBAAuB,MAG7B33D,EAAEgC,QAAQsY,EAAcpS,KAAM,CAACkG,GAAKP,GAAOC,MAAY,EAAG,CAC1D,IAAIlJ,EAAQ0V,EAAc1R,KAAK0qC,GAC/B,GAAI1uC,GAASpD,EAAQoD,EAAMkW,SACvBlW,EAAMkW,SAAWlW,EAAMkW,YACpB,CACH,IAAIye,EAAkBjf,EAAcif,gBAAkBjf,EAAcif,iBAAmB,GACnFze,EAAUye,EAAgB+Z,GAC9B/Z,EAAgB+Z,KAAc9xC,EAAQsZ,KAAYA,QAGtDR,EAAcQ,SAAWR,EAAcQ,QACvCtW,KAAKq8D,kBAAkBkD,KAAKzpD,GAGhCzI,EAAM08C,wBAGV6B,eAAgB,WACZ,OAAO,IAAI/V,GAAQ71C,KAAKyY,QAAS5Y,EAAO,GAAIG,KAAKE,QAAQgpB,QAAS,CAC9DjD,IAAKjmB,KAAKw+D,aAIlBY,cAAe,WACPp/D,KAAKy8D,WACLz8D,KAAKy8D,UAAUnH,gBAIvBkK,aAAc,SAAStnD,GACnB,MAAMpU,OAAEA,EAAM3D,MAAEA,GAAU+X,EAE1B,GAAIpU,EAAO27D,uBAAwB,CAC/B,MAAMh9D,EAASqB,EAAO27D,uBAAuBt/D,GAE7C,IAAKsC,EACD,OACOA,aAAkBi9D,QACzBj9D,EAAOk9D,MAAMC,GAAa5/D,KAAK6/D,iBAAiB3nD,EAAG0nD,KAEnD5/D,KAAK6/D,iBAAiB3nD,EAAGzV,OAEL,iBAAVtC,GACdH,KAAK6/D,iBAAiB3nD,EAAG/X,IAIjC0/D,iBAAkB,SAAS3nD,EAAG9T,GAC1B,MAAM07D,EAAkBC,OAAOC,OAAO,GAAI9nD,EAAEpU,OAAQM,GAC9CwqC,EAAO,CACTxuC,MAAO8X,EAAE9X,MACT0D,OAAQoU,EAAEpU,OACVg8D,kBACA1wD,OAAQpP,MAGMA,KAAKmY,QAAQtL,EAAW+hC,KAEtC5uC,KAAK+zD,gBAAgB1uD,KAAKrF,KAAKE,QAAQ4D,QAEvC9D,KAAKE,QAAQ4D,OAAS,CAACg8D,GACvB9/D,KAAK28D,kBACL38D,KAAKyoD,YAIbwX,UAAW,SAAS/nD,GAChB,IAGIjG,EAMA6D,EACAoqD,EAVA7yD,EAAQrN,KACRE,EAAUmN,EAAMnN,QAChB4D,EAASuJ,EAAM0vD,eAAiB78D,EAAQ4D,OAExCgqD,EAAehqD,EAAO7C,OACtBmD,EAAOiJ,EAAM+uD,WAAW+D,OACxBC,GAAW/yD,EAAM+uD,WAAWtpD,SAAW,IAAI7R,OAAS,EACpD6kC,EAAkB,GAClBu6B,EAAmBrgE,KAAKq8D,kBAM5B,IAFAgE,EAAiBC,OAEZruD,EAAW,EAAGA,EAAW67C,EAAc77C,IACxC6D,EAAgBhS,EAAOmO,GAEnB5E,EAAM0pD,YAAYjhD,IAAkBsqD,GACpCF,EAAgBr4B,GAAY/xB,EAAe1R,GAC3C0hC,EAAkBA,EAAgB/hC,OAAOm8D,GAEzCG,EAAiBE,aAAaL,EAAehoD,KAE7CpC,EAAgBjW,EAAO,GAAIiW,GAC3BgwB,EAAgBzgC,KAAKyQ,GAErBuqD,EAAiBG,aAAa1qD,EAAeoC,IAIrD7K,EAAM0vD,cAAgBj5D,EACtB5D,EAAQ4D,OAASgiC,EACjB9lC,KAAKy8D,UAAUvT,oBAEf77C,EAAMqvD,cACNrvD,EAAMsvD,kBAEN38D,KAAKo9D,UAAW,GAGpBF,eAAgB,SAAShlD,GACrBlY,KAAKigE,UAAU/nD,GAEflY,KAAKmY,QAAQujD,GACT17D,KAAKy8D,WAAaz8D,KAAKy8D,UAAUlU,YACjCvoD,KAAKyoD,WAIbiU,YAAa,WACT,IAGIzqD,EAEA6D,EACAmvB,EACAw7B,EAPApzD,EAAQrN,KACRoE,EAAOiJ,EAAM+uD,WAAW+D,OACxBr8D,EAASuJ,EAAMnN,QAAQ4D,OAEvBgqD,EAAehqD,EAAO7C,OAK1B,IAAKgR,EAAW,EAAGA,EAAW67C,EAAc77C,IACxC6D,EAAgBhS,EAAOmO,GAEnB5E,EAAM0pD,YAAYjhD,KAClBmvB,EAAUnvB,EAAc4qD,SACxBD,EAAazjE,EAAQioC,IAAY7gC,EAAK6gC,IAAY,IAAIxZ,MAAQrnB,GAE/B,IAA3B0R,EAAc8/C,WACd9/C,EAAc1R,KAAOq8D,KAMrC9D,gBAAiB,WACb,IAMIxjC,EACAp5B,EAPAsN,EAAQrN,KACRoE,EAAOiJ,EAAM+uD,WAAW+D,QAAU,GAClCC,GAAW/yD,EAAM+uD,WAAWtpD,SAAW,IAAI7R,OAAS,EACpD0/D,EAAiBv8D,EACjBlE,EAAUmN,EAAMnN,QAChB0oC,EAAc,GAAG7kC,OAAO7D,EAAQkR,cAUpC,IANIgvD,GACIh8D,EAAKnD,SACL0/D,EAAiBv8D,EAAK,GAAGqnB,OAI5B0N,EAAS,EAAGA,EAASyP,EAAY3nC,OAAQk4B,KAEpB,KADtBp5B,EAAO6oC,EAAYzP,IACVy8B,UACLvoD,EAAMuzD,kBAAkB7gE,EAAM4gE,EAAgBxnC,IAK1DynC,kBAAmB,SAAS7gE,EAAMqE,EAAM+0B,GACpC,IACI3mB,EACA+C,EACAzS,EAHAd,GAASoC,GAAQ,IAAInD,OAKzB,GAAIlB,EAAK8C,MAEL,IADA9C,EAAKkR,WAAa,GACbuB,EAAa,EAAGA,EAAaxQ,EAAOwQ,IACrC1P,EAAMsB,EAAKoO,GAEX+C,EAAW3S,EAAS7C,EAAK8C,MAAOC,GACb,IAAf0P,GACAzS,EAAKkR,WAAa,CAACsE,GACnBxV,EAAK6gC,UAAY,CAAC99B,KAElB/C,EAAKkR,WAAW5L,KAAKkQ,GACrBxV,EAAK6gC,UAAUv7B,KAAKvC,SAGrB9C,KAAKy8D,WACZz8D,KAAKy8D,UAAU5G,2BAA2B91D,EAAMo5B,IAIxD49B,YAAa,SAASjzD,GAClB,IAEIjB,EAAOZ,EAFPsB,EAAcP,EAAasC,QAAQ/B,YAAYO,GAC/CrB,GAAS,EAGb,IAAKR,EAAI,EAAGA,EAAIsB,EAAYtC,OAAQgB,IAQhC,IAPAY,EAAQU,EAAYtB,MACN/F,GACV2G,EAAQ,QAERA,GAAgB,SAGf7F,EAAQ8G,EAAOjB,IAAS,CACzBJ,GAAS,EACT,MAIR,OAAOA,GAGX+7D,OAAQ,WACJ,OAAO9iE,EAAMwD,QAAQ2hE,MAAM7gE,KAAKyY,UAvrB9B,QAurB0CzY,KAAKyY,QAAQqoD,IAAI,gBAIjEC,GAAe,CAAC,UAAW,iBAAkB,WAAY,kBAAmB,cAC5E,cAAe,UAAW,UAAW,uBAAwB,mBAAoB,qBAErF,SAASC,GAAkBlgE,GACvB2mD,GAAMn6C,GAAGxM,GAAQ,WACb,IAAI07D,EAAWx8D,KAAKy8D,UACpB,GAAID,EACA,OAAOA,EAAS17D,GAAMmd,MAAMu+C,EAAUyE,YAKlD,IAAK,IAAIjgE,GAAM,EAAGA,GAAM+/D,GAAa9/D,OAAQD,KACzCggE,GAAkBD,GAAa//D,KAGnC,SAAS6mC,GAAY/jC,EAAQM,GACzB,IACI88D,EAEAj8B,EAEAk8B,EALA1+D,EAAS,GAET2+D,EAAiBt9D,EAAOu9D,kBAExBh7B,EAAajiC,EAAKnD,OAItB,GAAmB,IAAfolC,EAGA,OAFA86B,EAAcvjE,EAAW,GAAIkG,IACjB40B,iBAAkB,EACvB,CAACyoC,GAgBZ,IAbInkE,EAAQokE,IACR1lE,EAAM4lE,aACF,4HAIAF,IACAF,EAAepG,EAASsG,KAG5BF,EAAepG,EAASh3D,EAAOhD,MAlBT,GAAGgS,WAAY,GAAG9V,EAAQ8G,EAAOhD,MAAQgS,EAAM3S,MAAQ,KAAO2D,EAAOhD,KAAOgS,EAAM3S,UAqBvG8kC,EAAU,EAAGA,EAAUoB,EAAYpB,IACpCk8B,EAAcvjE,EAAW,GAAIkG,GAExBpI,EAAM+B,WAAW0jE,EAAY7xD,SAC9B6xD,EAAY7xD,MAAQ0pD,GAGxBmI,EAAYT,SAAWz7B,EACvBk8B,EAAYI,YAAcn9D,EAAK6gC,GAAS9kC,MACxCsC,EAAO4C,KAAK87D,GAERD,IACAC,EAAYrgE,KAAOogE,EAAa,CAC5Bp9D,OAAQq9D,EAAaruD,MAAO1O,EAAK6gC,MAK7C,OAAOxiC,EAGX9G,EAAQ6lE,YAAY3hE,OAAO4nD,GAAMn6C,IAE7B5R,EAAM+lE,UACN/lE,EAAM+lE,SAAS5hE,OAAO4nD,GAAMn6C,IAGhC3R,EAAQu9D,GAAGmB,OAAO5S,IAElB,IAAI6U,GAAwB1gE,EAAMiE,OAAO,CACrCC,KAAM,WACFE,KAAK+kC,OAAS,GACd/kC,KAAK+G,MAAQ,GACb/G,KAAKE,QAAU,IAGnBqgE,aAAc,SAASz8D,EAAQoU,GAC3B,GAAKA,GAAKA,EAAEwpD,QAAW1hE,KAAKE,QAAQyhE,wBAChC,IAAK,IAAI3gE,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,KACU,IAAzChB,KAAK+kC,OAAOjhC,EAAO9C,GAAKugE,eACxBz9D,EAAO9C,GAAKsV,SAAU,QAI9BtW,KAAK+kC,OAAS,IAItBy7B,aAAc,SAAS18D,EAAQoU,GACtBA,GAAKA,EAAEwpD,QAAW1hE,KAAKE,QAAQyhE,yBACC,IAA7B3hE,KAAK+G,MAAMjD,EAAOiD,SAClBjD,EAAOwS,SAAU,GAGrBtW,KAAK+G,MAAQ,IAIrBw4D,KAAM,SAASz7D,GACNA,IAID9D,KAAKE,QAAQyhE,wBACb3hE,KAAKE,QAAQ4D,OAAOA,EAAOiD,OAAOuP,QAAUxS,EAAOwS,QAEnDtW,KAAK4hE,UAAU99D,KAIvBqzD,WAAY,SAASj3D,GACjBF,KAAKE,QAAUA,EACfF,KAAK+kC,OAAS,GACd/kC,KAAK+G,MAAQ,IAGjBu5D,KAAM,WACF,IAAIpgE,EAAUF,KAAKE,QACnB,GAAIA,EAAQyhE,wBAER,IADA,IAAI79D,EAAS5D,EAAQ4D,OACZ9C,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IACnChB,KAAK4hE,UAAU99D,EAAO9C,KAKlC4gE,UAAW,SAAS99D,GACZ9G,EAAQ8G,EAAOy9D,aACfvhE,KAAK+kC,OAAOjhC,EAAOy9D,aAAez9D,EAAOwS,QAEzCtW,KAAK+G,MAAMjD,EAAOiD,OAASjD,EAAOwS,WAK1CurD,GAAOnmE,EAAM+D,SAYjB,IAAIo2C,GAAU+lB,GAAW/7D,OAAO,CAC5BC,KAAM,SAAS6sC,EAAczsC,GACzB,IAAIgpB,EAAUlpB,KAEd47D,GAAWtuD,GAAGxN,KAAKyN,KAAK2b,GAExBlpB,KAAKm3D,WAAWj3D,GAEhBgpB,EAAQyjB,aAAeA,EAEvBzjB,EAAQ4xC,SAAWjlB,GAAQilB,SACtB5xC,EAAQ4xC,WACT5xC,EAAQ4xC,SAAWjlB,GAAQilB,SAAW,EAAGmD,WAAUh4C,MAAKuJ,OAAMpV,SAAQI,aAClE,yBAAyByjD,EAAW,qBAAuB,sBAAsBh4C,EAAM,QAAU,OAC9FvqB,EAAMomE,KAAK,2BAA2BpmE,EAAMomE,KAAK,gCACjDpmE,EAAMomE,KAAK,kBAAkBtyC,MAAS9zB,EAAMomE,KAAK,qBAAqBtnD,OACtEJ,EAAS,GAAG1e,EAAMomE,KAAK,oBAAoB1nD,EAAOtL,kBAAoB,IAHzE,0CAMGmvD,EAAW,GAAK,iCAAmCviE,EAAMw9D,GAAGM,KAAKh+D,EAAE,kCAAmC,CAAEg+D,KAAM,MAAS,UAC1H,UAGRtwC,EAAQzQ,QAAUjd,EAAE0tB,EAAQ4xC,SAAS5xC,EAAQhpB,UAC7CxE,EAAMqmE,+BAA+B74C,EAAQzQ,QAAS,CAAC,UAAW,WAAY,OAAQ,SAAU,YAEhGyQ,EAAQiC,KAAOjC,EAAQiC,KAAKpZ,KAAKmX,GACjCA,EAAQomC,YAAcpmC,EAAQomC,YAAYv9C,KAAKmX,GAE/C,IAAI84C,EAAyBtmE,EAAMoc,OAAO,mCAAoCpc,EAAMomE,KAAK,SACzF54C,EAAQ+4C,gBAAkBt1B,EAAaklB,QAAQmQ,GAAwB59D,KAAK,uBAC5E8kB,EAAQg5C,UAAYxmE,EAAMymE,cA73BlB,OA63B2CzmE,EAAM0mE,QACzDl5C,EAAQm5C,qBAAuBn5C,EAAQo5C,cAAcvwD,KAAKmX,IAG9DkH,QAAS,WAGLpwB,KAAKuiE,oBACLhH,EAAiB+B,IAHHt9D,KAGekiE,UAHfliE,KAGkCqiE,sBAC5CriE,KAAKyY,UACLzY,KAAKyY,QAAQ6kD,IAAIrC,GAAeuH,SAChCxiE,KAAKyY,QAAU,OAIvB0+C,WAAY,SAASj3D,GACjBF,KAAKE,QAAUtC,EAAW,GAAIoC,KAAKE,QAASA,IAGhDA,QAAS,CACLsa,QAAS,EACTzK,UAAW,CACPoQ,SA34BqB,KA64BzBsiD,eAAgB,EAAGC,UAAStsB,eAAc7kC,SAAQ8S,UAASs+C,cAAaC,gBAEpE,uBAAgBF,MAAYtsB,SAkdxC,SAAgC7kC,EAAQoxD,EAAaC,EAAYv+C,GAG7D,IAFA,IAAI5hB,EAAS,GAEJR,EAAI,EAAGA,EAAIsP,EAAOtQ,OAAQgB,IAAK,CACpC,IAAI7B,EAAQmR,EAAOtP,GACnBQ,GAAU,OAENkgE,IACAlgE,GAAU,mDAAmD/G,EAAMomE,KAAK,8BAA8B/G,EAAO36D,EAAM0D,OAAOwL,wBAG1HszD,IACAngE,GAAU,QAAQrC,EAAM0D,OAAOhD,KAAOV,EAAM0D,OAAOhD,KAAO,IAAM,iBAGpE2B,GAAU,OAAO4hB,EAAQjkB,UACzBqC,GAAU,QAGd,OAAOA,EApeKogE,CAAuBtxD,EAAQoxD,EAAaC,EAAYv+C,GAC5D,WACJgyB,eAAgB,QAChB4nB,UAAU,GAGd9yC,KAAM,WACF,IAGIoC,EAHArE,EAAUlpB,KACVE,EAAUgpB,EAAQhpB,QAClBuY,EAAUyQ,EAAQzQ,QAGjByQ,EAAQnO,QAAWmO,EAAQzQ,UAIhC8U,EAASrE,EAAQ45C,UACZ55C,EAAQ5S,SACTmC,EAAQqoD,IAAI,CAAEp8C,IAAK6I,EAAO7I,IAAK1K,KAAMuT,EAAOvT,OAGhDkP,EAAQ5S,SAAU,EAClB4S,EAAQ65C,eAAel3B,SAASjjB,MAChCnQ,EACKuqD,MAAK,GAAM,GACXlzC,OACAmzC,QAAQ,CACLjpD,KAAMuT,EAAOvT,KACb0K,IAAK6I,EAAO7I,KACbxkB,EAAQ6P,UAAUoQ,YAG7BoiD,kBAAmB,WACXviE,KAAKkjE,cACL3vB,aAAavzC,KAAKkjE,aAClBljE,KAAKkjE,YAAc,OAI3BpyC,UAAW,SAASvX,GAChB,IAAIwB,EAAS/a,KAAK+a,OACd3a,EAAQ2a,EAAO3a,MACfyZ,EAAQkB,EAAOlB,MACfzL,EAAIhO,EAAM4Z,KACV3L,EAAIjO,EAAMskB,IAad,MAZyB,WAArB7K,EAAMoC,WACN7N,GAAKmL,EAAKzK,MAAQ,EACU,UAArB+K,EAAMoC,aACb7N,GAAKmL,EAAKzK,OAGS,WAAnB+K,EAAMzH,SACN/D,GAAKkL,EAAKxK,OAAS,EACO,WAAnB8K,EAAMzH,WACb/D,GAAKkL,EAAKxK,QAGP,CACHX,EAAGA,EACHC,EAAGA,IAIXy0D,QAAS,WACL,IAAI55C,EAAUlpB,KACVuZ,EAAO2P,EAAQi6C,WACfpoD,EAASmO,EAAQ4H,UAAUvX,GAC3BmL,EAAM3J,EAAO1M,EACb2L,EAAOe,EAAO3M,EACdg1D,EAAY1nE,EAAMwD,QAAQkkE,YAC1BC,EAAW7nE,EAAEC,QACb6nE,EAAY7nE,OAAO8nE,aAAe13B,SAAS2vB,gBAAgB8H,WAAa,EACxEE,EAAa/nE,OAAOgoE,aAAe53B,SAAS2vB,gBAAgBgI,YAAc,EAC1EE,GAAW1jE,KAAKiiE,iBAAmB,IAAIyB,QAE3C,GAAKA,GAA6B,IAAlBA,EAAQlvB,MAGjB,CACH,IAAI70C,EAAYkiE,GAAKliE,YAAY60C,MAAMkvB,EAAQlvB,MAAOkvB,EAAQlvB,MAAO,CAACkvB,EAAQt1D,EAAGs1D,EAAQr1D,IACrFjO,EAAQ,IAAIyhE,GAAKzkE,MAAM4c,EAAM0K,GAAK/kB,UAAUA,GAChDqa,EAAO5Z,EAAMgO,EACbsW,EAAMtkB,EAAMiO,OANZqW,GAAOwE,EAAQy6C,KAAKj/C,EAAM4+C,EAAW/pD,EAAKxK,OAAQ0rD,EAAY4I,GAAYD,GAC1EppD,GAAQkP,EAAQy6C,KAAK3pD,EAAOwpD,EAAYjqD,EAAKzK,MAAOyrD,EAAW8I,GAAYD,GAQ/E,MAAO,CACH1+C,IAAKA,EACL1K,KAAMA,IAId8V,KAAM,SAAS5X,GACX,IAAIgR,EAAUlpB,KACV4jE,EAAgBpoE,EAAE,eACtBwE,KAAK+a,OAAS7C,EAAE6C,OAChB/a,KAAKyY,QAAQqoD,IAnKrB,SAAwBhgD,GACpB,IAAK,IAAIje,KAASie,EACVA,EAAMje,KAAWm2D,IACjBl4C,EAAMje,GAAS,IAIvB,OAAOie,EA4Jc+iD,CAAe3rD,EAAE4I,QAClC9gB,KAAKyY,QAAQqrD,YA9+BC,4BA8+B8B5rD,EAAE+X,WAC9CjwB,KAAKyY,QAAQqrD,YA9+BM,2BA8+B8B5rD,EAAEi+B,QAEnD,IAAI9xB,EAAUnM,EAAEi+B,OAASn2C,KAAK+jE,eAAe7rD,GAAKlY,KAAKgkE,cAAc9rD,EAAE9X,OACvEwjE,EAAcK,KAAK5/C,GACnB3oB,EAAMqmE,+BAA+B6B,EAAe,CAAC,qBACrD5jE,KAAKyY,QAAQ8lC,KAAK,sBAAsBprB,QAAQ/0B,OAAOwlE,GAElD16C,EAAQhpB,QAAQ+9D,WACjB/0C,EAAQzQ,QAAQ6kD,IAAI,QAAUhD,GAAIyD,GAAG,QAAUzD,EAAI,oBAAqBpxC,EAAQm5C,sBAChF9G,EAAiB+B,IAAIp0C,EAAQg5C,UAAWh5C,EAAQm5C,sBAC3CtE,GAAG70C,EAAQg5C,UAAWh5C,EAAQm5C,uBAGvCriE,KAAKuiE,oBACLviE,KAAKkjE,YAAcpuB,WAAW90C,KAAKmrB,KA9/BlB,MAigCrBgF,KAAM,SAAS+zC,GACX,IAAIh7C,EAAUlpB,MAETkpB,EAAQhpB,QAAQ+9D,UAAaiG,KAIlC3wB,aAAarqB,EAAQg6C,aACrBh6C,EAAQi7C,eAEJj7C,EAAQ5S,UACR4S,EAAQ9oB,MAAQ,KAChB8oB,EAAQ5S,SAAU,EAClB4S,EAAQniB,MAAQ,KAChBw0D,EAAiB+B,IAAIp0C,EAAQg5C,UAAWh5C,EAAQm5C,yBAIxDC,cAAe,SAASpqD,GACP1c,EAAE0c,EAAE+G,QAELmlD,GAAG,0CACXlsD,EAAEoyB,iBACFtqC,KAAK2sC,aAAavoC,KAAK,cAAcq4D,UAAUnH,eAC/Ct1D,KAAKmwB,MAAK,KAIlB4zC,eAAgB,SAAS7rD,GACrB,IAAI3G,EAAS2G,EAAE3G,OAGXqxD,EAAajnE,EAAQkD,KAAK0S,GAAQ,SAASnR,GAC3C,OAAOpD,EAAQoD,EAAM0D,OAAOhD,SAC7BG,OAEC0hE,EAAczqD,EAAEpU,OAAO7C,OAAS,EAChCyhE,EAAU,EAmBd,OAlBIE,GACAF,IAEAC,GACAD,IAGWhnE,EAAMo/D,SAAS96D,KAAKE,QAAQuiE,eAC7B3H,CAAS,CACnBvpD,OAAQA,EACRgE,SAAU2C,EAAE3C,SACZ6gC,aAAcl+B,EAAEk+B,aAChB/xB,QAASrkB,KAAKgkE,cAAcjyD,KApBrB/R,MAqBP2iE,YAAaA,EACbC,WAAYA,EACZF,QAASA,KAMjBS,SAAU,WAQN,OAPAnjE,KAAK+iE,iBAEM,CACPj0D,MAAOyrD,EAAWv6D,KAAKyY,SACvB1J,OAAQ0rD,EAAYz6D,KAAKyY,WAMjCsqD,eAAgB,WACR/iE,KAAKyY,SACLzY,KAAKyY,QACA4rD,SAASx4B,SAASjjB,MAClBm1C,GAAG9C,EAAej7D,KAAKsvD,cAIpCA,YAAa,SAASp3C,GAClB,IAAI+G,EAAS/G,EAAE8lD,cACX3wD,EAAQrN,KAAK2sC,aAAa,GAC1B1tB,GAAUA,IAAW5R,IAAU7R,EAAE8oE,SAASj3D,EAAO4R,IACjDjf,KAAKmY,QAAQwjD,KAIrBwI,aAAc,WACV,IAAIj7C,EAAUlpB,KACVyY,EAAUzY,KAAKyY,QACfA,GACAA,EAAQ8rD,QAAQ,CACZC,OAAQ,WACCt7C,EAAQ5S,SACTmC,EAAQ6kD,IAAIrC,GAAeuH,aAO/CwB,cAAe,SAAS5jE,GACpB,IAEIikB,EADAnkB,EAAUtC,EAAW,GADXoC,KACuBE,QAASE,EAAMF,QAAQgpB,SA4B5D,OAzBIlsB,EAAQoD,EAAMD,SACdkkB,EAAUjkB,EAAMD,MAAMskE,YAGtBvkE,EAAQ46D,SAERz2C,EADkBy2C,EAAS56D,EAAQ46D,SACzB4J,CAAgB,CACtBvkE,MAAOC,EAAMD,MACboV,SAAUnV,EAAMmV,SAChBzR,OAAQ1D,EAAM0D,OACduR,SAAUjV,EAAMiV,SAChBe,WAAYhW,EAAMgW,WAClBoC,aAAcpY,EAAMoY,aACpBhR,MAAOpH,EAAMoH,MACbhB,IAAKpG,EAAMoG,IACXC,KAAMrG,EAAMqG,KACZk+D,KAAMvkE,EAAMukE,KACZC,MAAOxkE,EAAMwkE,MACbC,KAAMzkE,EAAMykE,KACZC,MAAO1kE,EAAM0kE,QAEV5kE,EAAQ4X,SACfuM,EAAUjkB,EAAMwZ,YAAY1Z,EAAQ4X,SAGjCuM,GAGXs/C,KAAM,SAASp2C,EAAQhU,EAAMwrD,GACzB,IAAIC,EAAS,EAUb,OARIz3C,EAAShU,EAAOwrD,IAChBC,EAASD,GAAgBx3C,EAAShU,IAGlCgU,EAAS,IACTy3C,GAAUz3C,GAGPy3C,KAIX30C,GAAmBwlB,GAAQh2C,OAAO,CAClCC,KAAM,SAAS6sC,EAAczsC,GACzB21C,GAAQvoC,GAAGxN,KAAKyN,KAAKvN,KAAM2sC,EAAczsC,GACzCF,KAAKyY,QAAQ47B,SAAS,8BAG1BvkB,KAAM,SAAS5X,GACGlY,KAAKyY,UAGfzY,KAAK+a,OAAS7C,EAAE6C,OAChB/a,KAAKyY,QAAQqoD,IAAI5oD,EAAE4I,OACnB9gB,KAAKyY,QAAQwrD,KAAKjkE,KAAKqkB,QAAQnM,IAE/BlY,KAAKmrB,SAIbA,KAAM,WACF,IAAIjC,EAAUlpB,KACVyY,EAAUyQ,EAAQzQ,QAClB8U,EAASrE,EAAQ45C,UAErB55C,EAAQ65C,iBACRtqD,EAAQqoD,IAAI,CAAEp8C,IAAK6I,EAAO7I,IAAK1K,KAAMuT,EAAOvT,OAAQ8V,QAGxDzL,QAAS,SAASnM,GACd,IAAImM,EAAUnM,EAAE/X,MACZD,EAAUgY,EAAEoY,UAAUpwB,QAAQgpB,QAQlC,OANIhpB,EAAQ46D,WACRz2C,EAAUy2C,EAAS56D,EAAQ46D,SAAjBA,CAA2B,CACjC36D,MAAOkkB,KAIRA,GAGX8L,KAAM,WACFnwB,KAAKyY,QAAQ0X,UAIjBhvB,GAAYvF,EAAMiE,OAAO,CACzBC,KAAM,SAASuN,EAAOjM,GAClBpB,KAAKilE,OAAS53D,EACdrN,KAAKwB,MAAQJ,EACbpB,KAAKqB,OAASD,EAAKC,OACnBrB,KAAKsB,aAAeF,EAAKG,eAAeF,OACxCrB,KAAKc,KAAOM,EAAKlB,QAAQY,MAG7BgD,OAAQ,WACJ,IAAIuJ,EAAQrN,KAAKilE,OAEbnhE,EADeuJ,EAAM1L,UAAU03B,oBACTr5B,KAAKc,MAAQ,WAEnC2B,EAAS,GACb,GAAIqB,EACA,IAAK,IAAI9C,EAAM,EAAGA,EAAM8C,EAAO7C,OAAQD,IACnCyB,EAAO4C,KAAK,IAAIo4D,GAAYpwD,EAAOvJ,EAAO9C,KAIlD,OAAOyB,KAIXg7D,GAAc7hE,EAAMiE,OAAO,CAC3BC,KAAM,SAASuN,EAAOnN,GAClBF,KAAKilE,OAAS53D,EACdrN,KAAKklE,SAAWhlE,GAGpBqR,OAAQ,SAAS64C,GACb,IAAI74C,EAASvR,KAAK+pC,QAClB,IAAKx4B,EAAQ,CACT,IAAIzN,EAAS9D,KAAK89D,iBACdp8D,EAAW1B,KAAKilE,OAAOtjE,UAC3B3B,KAAK+pC,QAAUx4B,EAAS7P,EAAS+8B,oBAAoB36B,EAAOiD,OAOhE,OALIrL,EAAM+B,WAAW2sD,KACjB74C,EAASvR,KAAKmlE,cAAc5zD,EAAQ64C,IAIjC74C,GAGXnN,KAAM,SAASA,GACX,IAAIN,EAAS9D,KAAK89D,iBAClB,GAAI15D,EAAM,CACN,IAAIiJ,EAAQrN,KAAKilE,OACbvjE,EAAW2L,EAAM1L,UAIrB,GAFAmC,EAAOM,KAAOA,EAEVN,EAAOoiC,cAAe,CACtB,IAAInmC,EAAO2B,EAAS2P,mBAAmBvN,GACnC5D,EAAU,GAAG6D,OAAOsJ,EAAMnN,QAAQkR,cAEtC/D,EAAMovD,UAAU5G,2BAA2B31D,EAAQH,EAAKiX,WAAYjX,EAAKiX,WAG7E3J,EAAM08C,uBACN/pD,KAAKolE,eAGT,OAAOthE,EAAOM,MAGlBy6B,UAAW,SAASurB,GAEhB,IADA,IAAI74C,EAASvR,KAAKuR,SACTvQ,EAAM,EAAGA,EAAMuQ,EAAOtQ,OAAQD,IACnC,GAAIopD,EAAO74C,EAAOvQ,IACd,OAAOuQ,EAAOvQ,IAK1BipC,gBAAiB,SAASna,EAAM5P,GAIxBA,EAHCA,EAEMxkB,EAAM+B,WAAWyiB,GACblgB,KAAKuR,OAAO2O,GAEZhjB,EAAQgjB,GAAYA,EAAW,CAACA,GAJhClgB,KAAKuR,SAOpBvR,KAAKilE,OAAOxI,UAAUjS,sBAAsB16B,EAAM5P,IAGtDmlD,iBAAkB,SAAS/uD,EAAS8zC,GAChC,IAAI/8C,EAAQrN,KAAKilE,OACbvzD,EAAgB1R,KAAK89D,iBAEzB,GADgBpiE,EAAM+B,WAAW2sD,GAK7B,GAAI5sD,EAAQkU,EAAchO,KAAM,CAACkG,GAAKP,GAAOC,KAEzC,IADA,IAAIlF,EAAOpE,KAAKslE,YAAYlb,GACnBppD,EAAM,EAAGA,EAAMoD,EAAKnD,OAAQD,IACjCoD,EAAKpD,GAAKsV,QAAUA,OAGxB5E,EAAc4E,QAAU,SAASlS,GAC7B,OAAOgmD,EAAOhmD,EAAKiR,WAAYiB,QAVvC5E,EAAc4E,QAAUA,EACxBjJ,EAAMgvD,kBAAkBkD,KAAK7tD,GAcjCrE,EAAM08C,uBAEN/pD,KAAKolE,gBAGTE,YAAa,SAASlb,GAKlB,IAJA,IAAIhmD,EAAOpE,KAAK89D,iBAAiB15D,KAC7BnD,EAASmD,EAAKnD,OACdwB,EAAS,GAEJzB,EAAM,EAAGA,EAAMC,EAAQD,IACxBopD,EAAOhmD,EAAKpD,KACZyB,EAAO4C,KAAKjB,EAAKpD,IAGzB,OAAOyB,GAGX0iE,cAAe,SAAS5zD,EAAQ64C,GAG5B,IAFA,IAAI3nD,EAAS,GACTxB,EAASsQ,EAAOtQ,OACXD,EAAM,EAAGA,EAAMC,EAAQD,IACxBopD,EAAO74C,EAAOvQ,KACdyB,EAAO4C,KAAKkM,EAAOvQ,IAG3B,OAAOyB,GAGXq7D,eAAgB,WACZ,IAAIh6D,EAAS9D,KAAKogC,QAIlB,OAHKt8B,IACDA,EAAS9D,KAAKogC,QAAUpgC,KAAKilE,OAAOnH,eAAe99D,KAAKklE,WAErDphE,GAGXshE,aAAc,kBACHplE,KAAK+pC,eACL/pC,KAAKogC,WAgCpBzkC,EAAQk6C,QAAUA,GAClBl6C,EAAQ00B,iBAAmBA,GAC3B10B,EAAQsgE,sBAAwBA,GAChCtgE,EAAQwF,UAAYA,GACpBxF,EAAQ8hE,YAAcA,GA57C1B,CA87CGhiE,OAAOC,MAAMq9D,QAEhB,IAAIwM,SAAW,CACX9yC,GAAI,gBACJ3xB,KAAM,QACNyU,SAAU,UACViwD,YAAa,+GACbC,QAAS,CAAE,OAAQ,aAAc,UAAW,eAAgB,kBAC5DC,SAAU,CAAC,CACPjzC,GAAI,2BACJ3xB,KAAM,aACN0kE,YAAa,sBACbC,QAAS,CAAE,UAIfE,QAAUjqE,aAELiqE","sourcesContent":["import './kendo.core.js';\nimport './kendo.color.js';\nimport './kendo.drawing.js';\nimport './kendo.dataviz.core.js';\nimport './kendo.breadcrumb.js';\nimport './kendo.data.js';\nimport './kendo.dataviz.themes.js';\nimport './kendo.userevents.js';\nimport './kendo.icons.js';\n\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar dataviz = kendo.dataviz;\nvar Class = dataviz.Class;\nvar isNumber = dataviz.isNumber;\nvar datavizConstants = dataviz.constants;\nvar MAX_VALUE = datavizConstants.MAX_VALUE;\nvar MIN_VALUE = datavizConstants.MIN_VALUE;\nvar VALUE = datavizConstants.VALUE;\nvar CENTER = datavizConstants.CENTER;\nvar TOP = datavizConstants.TOP;\nvar BOTTOM = datavizConstants.BOTTOM;\nvar LEFT = datavizConstants.LEFT;\nvar WHITE = datavizConstants.WHITE;\nvar CIRCLE = datavizConstants.CIRCLE;\nvar X = datavizConstants.X;\nvar Y = datavizConstants.Y;\nvar RIGHT = datavizConstants.RIGHT;\nvar BLACK = datavizConstants.BLACK;\nvar DATE = datavizConstants.DATE;\nvar DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\nvar ARC = datavizConstants.ARC;\nvar defined = dataviz.defined;\nvar getter = dataviz.getter;\nvar isArray = dataviz.isArray;\nvar ChartElement = dataviz.ChartElement;\nvar Point = dataviz.Point;\nvar Box = dataviz.Box;\nvar alignPathToPixel = dataviz.alignPathToPixel;\nvar setDefaultOptions = dataviz.setDefaultOptions;\nvar inArray = dataviz.inArray;\nvar isFunction = dataviz.isFunction;\nvar valueOrDefault = dataviz.valueOrDefault;\nvar isObject = dataviz.isObject;\nvar deepExtend = dataviz.deepExtend;\nvar last = dataviz.last;\nvar eventElement = dataviz.eventElement;\nvar getTemplate = dataviz.getTemplate;\nvar TextBox = dataviz.TextBox;\nvar ShapeElement = dataviz.ShapeElement;\nvar getSpacing = dataviz.getSpacing;\nvar CurveProcessor = dataviz.CurveProcessor;\nvar append = dataviz.append;\nvar isString = dataviz.isString;\nvar parseDate = dataviz.parseDate;\nvar styleValue = dataviz.styleValue;\nvar CategoryAxis = dataviz.CategoryAxis;\nvar BoxElement = dataviz.BoxElement;\nvar Title = dataviz.Title;\nvar round = dataviz.round;\nvar limitValue = dataviz.limitValue;\nvar grep = dataviz.grep;\nvar elementStyles = dataviz.elementStyles;\nvar bindEvents = dataviz.bindEvents;\nvar services = dataviz.services;\nvar unbindEvents = dataviz.unbindEvents;\nvar support = kendo.support;\nvar drawing = kendo.drawing;\nvar Path = drawing.Path;\nvar Animation = drawing.Animation;\nvar AnimationFactory = drawing.AnimationFactory;\nvar Group = drawing.Group;\nvar Color = kendo.Color;\nvar geometry = kendo.geometry;\nvar GeometryPoint = geometry.Point;\nvar transform = geometry.transform;\n\nvar ChartAxis = Class.extend({\n    init: function(axis) {\n\n        this._axis = axis;\n        this.options = axis.options;\n    },\n\n    value: function(point) {\n        var axis = this._axis;\n        var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n        return value;\n    },\n\n    slot: function(from, to, limit) {\n        if (limit === void 0) { limit = true; }\n\n        return this._axis.slot(from, to, limit);\n    },\n\n    range: function() {\n        return this._axis.range();\n    },\n\n    valueRange: function() {\n        return this._axis.valueRange();\n    }\n});\n\nfunction findAxisByName(name, axes) {\n    for (var idx = 0; idx < axes.length; idx++) {\n        if (axes[idx].options.name === name) {\n            axes[idx].prepareUserOptions();\n            return new ChartAxis(axes[idx]);\n        }\n    }\n}\n\nvar ChartPane = kendo.Class.extend({\n    init: function(pane) {\n        this.visual = pane.visual;\n        this.chartsVisual = pane.chartContainer.visual;\n        this._pane = pane;\n    },\n\n    findAxisByName: function(name) {\n        return findAxisByName(name, this._pane.axes);\n    }\n});\n\nvar ChartPlotArea = Class.extend({\n    init: function(plotArea) {\n\n        this._plotArea = plotArea;\n        this.visual = plotArea.visual;\n        this.backgroundVisual = plotArea._bgVisual;\n    }\n});\n\nfunction countNumbers(values) {\n    var length = values.length;\n    var count = 0;\n\n    for (var i = 0; i < length; i++) {\n        var num = values[i];\n        if (isNumber(num)) {\n            count++;\n        }\n    }\n\n    return count;\n}\n\nvar Aggregates = {\n    min: function(values) {\n        var length = values.length;\n        var min = MAX_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                min = Math.min(min, value);\n            }\n        }\n\n        return min === MAX_VALUE ? values[0] : min;\n    },\n\n    max: function(values) {\n        var length = values.length;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                max = Math.max(max, value);\n            }\n        }\n\n        return max === MIN_VALUE ? values[0] : max;\n    },\n\n    sum: function(values) {\n        var length = values.length;\n        var sum = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                sum += value;\n            }\n        }\n\n        return sum;\n    },\n\n    sumOrNull: function(values) {\n        var result = null;\n\n        if (countNumbers(values)) {\n            result = Aggregates.sum(values);\n        }\n\n        return result;\n    },\n\n    count: function(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                count++;\n            }\n        }\n\n        return count;\n    },\n\n    avg: function(values) {\n        var count = countNumbers(values);\n        var result = values[0];\n\n        if (count > 0) {\n            result = Aggregates.sum(values) / count;\n        }\n\n        return result;\n    },\n\n    first: function(values) {\n        var length = values.length;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                return value;\n            }\n        }\n\n        return values[0];\n    }\n};\n\nfunction getField(field, row) {\n    if (row === null) {\n        return row;\n    }\n\n    var get = getter(field, true);\n    return get(row);\n}\n\nvar SeriesBinder = Class.extend({\n    init: function() {\n\n        this._valueFields = {};\n        this._otherFields = {};\n        this._nullValue = {};\n        this._undefinedValue = {};\n    },\n\n    register: function(seriesTypes, valueFields, otherFields) {\n        var this$1$1 = this;\n        if (valueFields === void 0) { valueFields = [ VALUE ]; }\n        if (otherFields === void 0) { otherFields = {}; }\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            var type = seriesTypes[i];\n\n            this$1$1._valueFields[type] = valueFields;\n            this$1$1._otherFields[type] = otherFields;\n            this$1$1._nullValue[type] = this$1$1._makeValue(valueFields, null);\n            this$1$1._undefinedValue[type] = this$1$1._makeValue(valueFields, undefined);\n        }\n    },\n\n    canonicalFields: function(series) {\n        return this.valueFields(series).concat(this.otherFields(series));\n    },\n\n    valueFields: function(series) {\n        return this._valueFields[series.type] || [ VALUE ];\n    },\n\n    otherFields: function(series) {\n        return this._otherFields[series.type] || [ VALUE ];\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var data = series.data;\n        var pointData = defined(item) ? item : data[pointIx];\n        var result = { valueFields: { value: pointData } };\n        var valueFields = this.valueFields(series);\n        var otherFields = this._otherFields[series.type];\n        var fields, value;\n\n        if (pointData === null) {\n            value = this._nullValue[series.type];\n        } else if (!defined(pointData)) {\n            value = this._undefinedValue[series.type];\n        } else if (Array.isArray(pointData)) {\n            var fieldData = pointData.slice(valueFields.length);\n            value = this._bindFromArray(pointData, valueFields);\n            fields = this._bindFromArray(fieldData, otherFields);\n        } else if (typeof pointData === \"object\") {\n            var srcValueFields = this.sourceFields(series, valueFields);\n            var srcPointFields = this.sourceFields(series, otherFields);\n\n            value = this._bindFromObject(pointData, valueFields, srcValueFields);\n            fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n        }\n\n        if (defined(value)) {\n            if (valueFields.length === 1) {\n                result.valueFields.value = value[valueFields[0]];\n            } else {\n                result.valueFields = value;\n            }\n        }\n\n        result.fields = fields || {};\n\n        return result;\n    },\n\n    _makeValue: function(fields, initialValue) {\n        var value = {};\n        var length = fields.length;\n\n        for (var i = 0; i < length; i++) {\n            var fieldName = fields[i];\n            value[fieldName] = initialValue;\n        }\n\n        return value;\n    },\n\n    _bindFromArray: function(array, fields) {\n        var value = {};\n\n        if (fields) {\n            var length = Math.min(fields.length, array.length);\n\n            for (var i = 0; i < length; i++) {\n                value[fields[i]] = array[i];\n            }\n        }\n\n        return value;\n    },\n\n    _bindFromObject: function(object, fields, srcFields) {\n        if (srcFields === void 0) { srcFields = fields; }\n\n        var value = {};\n\n        if (fields) {\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                var srcFieldName = srcFields[i];\n                if (srcFieldName !== null) {\n                    value[fieldName] = getField(srcFieldName, object);\n                }\n            }\n        }\n\n        return value;\n    },\n\n    sourceFields: function(series, canonicalFields) {\n        var sourceFields = [];\n\n        if (canonicalFields) {\n            var length = canonicalFields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = canonicalFields[i];\n                var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n            }\n        }\n\n        return sourceFields;\n    }\n});\n\nSeriesBinder.current = new SeriesBinder();\n\nvar STD_ERR = \"stderr\";\nvar STD_DEV = \"stddev\";\nvar percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\nvar standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\nvar ErrorRangeCalculator = Class.extend({\n    init: function(errorValue, series, field) {\n\n        this.initGlobalRanges(errorValue, series, field);\n    },\n\n    initGlobalRanges: function(errorValue, series, field) {\n        var data = series.data;\n        var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n        if (deviationMatch) {\n            this.valueGetter = this.createValueGetter(series, field);\n\n            var average = this.getAverage(data);\n            var deviation = this.getStandardDeviation(data, average, false);\n            var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n            var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n            this.globalRange = function() {\n                return errorRange;\n            };\n        } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n            this.valueGetter = this.createValueGetter(series, field);\n            var standardError = this.getStandardError(data, this.getAverage(data));\n\n            this.globalRange = function(value) {\n                return { low: value - standardError, high: value + standardError };\n            };\n        }\n    },\n\n    createValueGetter: function(series, field) {\n        var data = series.data;\n        var binder = SeriesBinder.current;\n        var valueFields = binder.valueFields(series);\n        var item = defined(data[0]) ? data[0] : {};\n        var valueGetter;\n\n        if (isArray(item)) {\n            var index = field ? valueFields.indexOf(field) : 0;\n            valueGetter = getter(\"[\" + index + \"]\");\n        } else if (isNumber(item)) {\n            valueGetter = getter();\n        } else if (typeof item === datavizConstants.OBJECT) {\n            var srcValueFields = binder.sourceFields(series, valueFields);\n            valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n        }\n\n        return valueGetter;\n    },\n\n    getErrorRange: function(pointValue, errorValue) {\n        var low, high, value;\n\n        if (!defined(errorValue)) {\n            return null;\n        }\n\n        if (this.globalRange) {\n            return this.globalRange(pointValue);\n        }\n\n        if (isArray(errorValue)) {\n            low = pointValue - errorValue[0];\n            high = pointValue + errorValue[1];\n        } else if (isNumber(value = parseFloat(errorValue))) {\n            low = pointValue - value;\n            high = pointValue + value;\n        } else if ((value = percentRegex.exec(errorValue))) {\n            var percentValue = pointValue * (parseFloat(value[1]) / 100);\n            low = pointValue - Math.abs(percentValue);\n            high = pointValue + Math.abs(percentValue);\n        } else {\n            throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n        }\n\n        return { low: low, high: high };\n    },\n\n    getStandardError: function(data, average) {\n        return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n    },\n\n    getStandardDeviation: function(data, average, isSample) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var total = isSample ? average.count - 1 : average.count;\n        var squareDifferenceSum = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                squareDifferenceSum += Math.pow(value - average.value, 2);\n            }\n        }\n\n        return Math.sqrt(squareDifferenceSum / total);\n    },\n\n    getAverage: function(data) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                sum += value;\n                count++;\n            }\n        }\n\n        return {\n            value: sum / count,\n            count: count\n        };\n    }\n});\n\nvar browser = support.browser || {};\n\nvar INITIAL_ANIMATION_DURATION = 600;\nvar FADEIN = \"fadeIn\";\n\nvar GLASS = \"glass\";\nvar BORDER_BRIGHTNESS = 0.8;\nvar TOOLTIP_OFFSET = 5;\nvar START_SCALE = browser.msie ? 0.001 : 0;\nvar ERROR_LOW_FIELD = \"errorLow\";\nvar ERROR_HIGH_FIELD = \"errorHigh\";\nvar X_ERROR_LOW_FIELD = \"xErrorLow\";\nvar X_ERROR_HIGH_FIELD = \"xErrorHigh\";\nvar Y_ERROR_LOW_FIELD = \"yErrorLow\";\nvar Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\nvar LINE_MARKER_SIZE = 8;\nvar ZERO = \"zero\";\nvar INTERPOLATE = \"interpolate\";\nvar GAP = \"gap\";\nvar ABOVE = \"above\";\nvar BELOW = \"below\";\n\nvar SMOOTH = \"smooth\";\nvar STEP = \"step\";\n\nvar AREA = \"area\";\nvar BAR = \"bar\";\nvar BOX_PLOT = \"boxPlot\";\nvar BUBBLE = \"bubble\";\nvar BULLET = \"bullet\";\nvar CANDLESTICK = \"candlestick\";\nvar COLUMN = \"column\";\nvar DONUT = \"donut\";\nvar FUNNEL = \"funnel\";\nvar PYRAMID = \"pyramid\";\nvar HEATMAP = \"heatmap\";\nvar HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\nvar LINE = \"line\";\nvar OHLC = \"ohlc\";\nvar PIE = \"pie\";\nvar POLAR_AREA = \"polarArea\";\nvar POLAR_LINE = \"polarLine\";\nvar POLAR_SCATTER = \"polarScatter\";\nvar RADAR_AREA = \"radarArea\";\nvar RADAR_COLUMN = \"radarColumn\";\nvar RADAR_LINE = \"radarLine\";\nvar RANGE_AREA = \"rangeArea\";\nvar RANGE_BAR = \"rangeBar\";\nvar RANGE_COLUMN = \"rangeColumn\";\nvar SCATTER = \"scatter\";\nvar SCATTER_LINE = \"scatterLine\";\nvar VERTICAL_AREA = \"verticalArea\";\nvar VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\nvar VERTICAL_BULLET = \"verticalBullet\";\nvar VERTICAL_LINE = \"verticalLine\";\nvar VERTICAL_RANGE_AREA = \"verticalRangeArea\";\nvar WATERFALL = \"waterfall\";\nvar EQUALLY_SPACED_SERIES = [\n    BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n    BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n];\n\nvar LEGEND_ITEM_CLICK = \"legendItemClick\";\nvar LEGEND_ITEM_HOVER = \"legendItemHover\";\nvar LEGEND_ITEM_LEAVE = \"legendItemLeave\";\nvar SERIES_CLICK = \"seriesClick\";\nvar SERIES_HOVER = \"seriesHover\";\nvar SERIES_OVER = \"seriesOver\";\nvar SERIES_LEAVE = \"seriesLeave\";\nvar PLOT_AREA_CLICK = \"plotAreaClick\";\nvar PLOT_AREA_HOVER = \"plotAreaHover\";\nvar PLOT_AREA_LEAVE = \"plotAreaLeave\";\nvar DRAG = \"drag\";\nvar DRAG_END = \"dragEnd\";\nvar DRAG_START = \"dragStart\";\nvar ZOOM_START = \"zoomStart\";\nvar ZOOM = \"zoom\";\nvar ZOOM_END = \"zoomEnd\";\nvar SELECT_START = \"selectStart\";\nvar SELECT = \"select\";\nvar SELECT_END = \"selectEnd\";\nvar RENDER = \"render\";\nvar SHOW_TOOLTIP = \"showTooltip\";\nvar HIDE_TOOLTIP = \"hideTooltip\";\nvar PANE_RENDER = \"paneRender\";\n\nvar LOGARITHMIC = \"log\";\nvar CATEGORY = \"category\";\n\nvar INSIDE_END = \"insideEnd\";\nvar INSIDE_BASE = \"insideBase\";\nvar OUTSIDE_END = \"outsideEnd\";\n\nvar MOUSEWHEEL = \"wheel\";\nvar MOUSEWHEEL_DELAY = 150;\nvar MOUSEWHEEL_ZOOM_RATE = 0.3;\n\nvar DRILLDOWN = \"drilldown\";\nvar DRILLDOWN_FIELD = \"drilldown\";\n\nvar constants = {\n\tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n\tFADEIN: FADEIN,\n\tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n\tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n\tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n\tSERIES_CLICK: SERIES_CLICK,\n\tSERIES_HOVER: SERIES_HOVER,\n\tSERIES_OVER: SERIES_OVER,\n\tSERIES_LEAVE: SERIES_LEAVE,\n\tGLASS: GLASS,\n\tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n\tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n\tSTART_SCALE: START_SCALE,\n\tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n\tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n\tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n\tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n\tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n\tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n\tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n\tINTERPOLATE: INTERPOLATE,\n\tZERO: ZERO,\n\tSMOOTH: SMOOTH,\n\tSTEP: STEP,\n\tCATEGORY: CATEGORY,\n\tFUNNEL: FUNNEL,\n\tPYRAMID: PYRAMID,\n\tBAR: BAR,\n\tCANDLESTICK: CANDLESTICK,\n\tPIE: PIE,\n\tCOLUMN: COLUMN,\n\tAREA: AREA,\n\tVERTICAL_BULLET: VERTICAL_BULLET,\n\tBOX_PLOT: BOX_PLOT,\n\tOHLC: OHLC,\n\tWATERFALL: WATERFALL,\n\tLINE: LINE,\n\tBULLET: BULLET,\n\tVERTICAL_LINE: VERTICAL_LINE,\n\tVERTICAL_AREA: VERTICAL_AREA,\n\tRANGE_AREA: RANGE_AREA,\n\tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n\tRANGE_COLUMN: RANGE_COLUMN,\n\tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n\tRANGE_BAR: RANGE_BAR,\n\tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n\tSCATTER: SCATTER,\n\tSCATTER_LINE: SCATTER_LINE,\n\tBUBBLE: BUBBLE,\n\tRADAR_AREA: RADAR_AREA,\n\tRADAR_LINE: RADAR_LINE,\n\tRADAR_COLUMN: RADAR_COLUMN,\n\tPOLAR_LINE: POLAR_LINE,\n\tPOLAR_AREA: POLAR_AREA,\n\tPOLAR_SCATTER: POLAR_SCATTER,\n\tRENDER: RENDER,\n\tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n\tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n\tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n\tLOGARITHMIC: LOGARITHMIC,\n\tDRAG: DRAG,\n\tDRAG_START: DRAG_START,\n\tDRAG_END: DRAG_END,\n\tZOOM_START: ZOOM_START,\n\tZOOM: ZOOM,\n\tZOOM_END: ZOOM_END,\n\tSELECT_START: SELECT_START,\n\tSELECT: SELECT,\n\tSELECT_END: SELECT_END,\n\tPANE_RENDER: PANE_RENDER,\n\tGAP: GAP,\n\tDONUT: DONUT,\n\tINSIDE_END: INSIDE_END,\n\tINSIDE_BASE: INSIDE_BASE,\n\tOUTSIDE_END: OUTSIDE_END,\n\tMOUSEWHEEL: MOUSEWHEEL,\n\tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n\tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n\tSHOW_TOOLTIP: SHOW_TOOLTIP,\n\tHIDE_TOOLTIP: HIDE_TOOLTIP,\n\tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n\tABOVE: ABOVE,\n\tBELOW: BELOW,\n\tHEATMAP: HEATMAP,\n\tDRILLDOWN: DRILLDOWN,\n\tDRILLDOWN_FIELD: DRILLDOWN_FIELD\n};\n\nvar DEFAULT_ERROR_BAR_WIDTH = 4;\n\nvar ErrorBarBase = ChartElement.extend({\n    init: function(low, high, isVertical, chart, series, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.low = low;\n        this.high = high;\n        this.isVertical = isVertical;\n        this.chart = chart;\n        this.series = series;\n    },\n\n    reflow: function(targetBox) {\n        var endCaps = this.options.endCaps;\n        var isVertical = this.isVertical;\n        var axis = this.getAxis();\n        var valueBox = axis.getSlot(this.low, this.high);\n        var centerBox = targetBox.center();\n        var capsWidth = this.getCapsWidth(targetBox, isVertical);\n        var capValue = isVertical ? centerBox.x : centerBox.y;\n        var capStart = capValue - capsWidth;\n        var capEnd = capValue + capsWidth;\n        var linePoints;\n\n        if (isVertical) {\n            linePoints = [\n                new Point(centerBox.x, valueBox.y1),\n                new Point(centerBox.x, valueBox.y2)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(capStart, valueBox.y1),\n                    new Point(capEnd, valueBox.y1),\n                    new Point(capStart, valueBox.y2),\n                    new Point(capEnd, valueBox.y2));\n            }\n            this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n        } else {\n            linePoints = [\n                new Point(valueBox.x1, centerBox.y),\n                new Point(valueBox.x2, centerBox.y)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(valueBox.x1, capStart),\n                    new Point(valueBox.x1, capEnd),\n                    new Point(valueBox.x2, capStart),\n                    new Point(valueBox.x2, capEnd));\n            }\n            this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n        }\n\n        this.linePoints = linePoints;\n    },\n\n    getCapsWidth: function(box, isVertical) {\n        var boxSize = isVertical ? box.width() : box.height();\n        var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n        return capsWidth;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual = options.visual;\n\n        if (visual) {\n            this.visual = visual({\n                low: this.low,\n                high: this.high,\n                rect: this.box.toRect(),\n                sender: this.getSender(),\n                options: {\n                    endCaps: options.endCaps,\n                    color: options.color,\n                    line: options.line\n                },\n                createVisual: function () {\n                    this$1$1.createDefaultVisual();\n                    var defaultVisual = this$1$1.visual;\n                    delete this$1$1.visual;\n                    return defaultVisual;\n                }\n            });\n        } else {\n            this.createDefaultVisual();\n        }\n    },\n\n    createDefaultVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var linePoints = ref.linePoints;\n        var lineOptions = {\n            stroke: {\n                color: options.color,\n                width: options.line.width,\n                dashType: options.line.dashType\n            }\n        };\n\n        ChartElement.fn.createVisual.call(this);\n\n        for (var idx = 0; idx < linePoints.length; idx += 2) {\n            var line = new Path(lineOptions)\n                .moveTo(linePoints[idx].x, linePoints[idx].y)\n                .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n            alignPathToPixel(line);\n            this$1$1.visual.append(line);\n        }\n    }\n});\n\nsetDefaultOptions(ErrorBarBase, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    endCaps: true,\n    line: {\n        width: 2\n    },\n    zIndex: 1\n});\n\nvar CategoricalErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axis = this.chart.seriesValueAxis(this.series);\n\n        return axis;\n    }\n});\n\nvar MAX_EXPAND_DEPTH = 5;\n\nfunction evalOptions(options, context, state, dryRun) {\n    if (state === void 0) { state = {}; }\n    if (dryRun === void 0) { dryRun = false; }\n\n    var defaults = state.defaults = state.defaults || {};\n    var depth = state.depth = state.depth || 0;\n    var needsEval = false;\n\n    state.excluded = state.excluded || [];\n\n    if (depth > MAX_EXPAND_DEPTH) {\n        return null;\n    }\n\n    for (var property in options) {\n        if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n            var propValue = options[property];\n            if (isFunction(propValue)) {\n                needsEval = true;\n                if (!dryRun) {\n                    options[property] = valueOrDefault(propValue(context), defaults[property]);\n                }\n            } else if (isObject(propValue)) {\n                if (!dryRun) {\n                    state.defaults = defaults[property];\n                }\n                state.depth++;\n                needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                state.depth--;\n            }\n        }\n    }\n\n    return needsEval;\n}\n\nfunction categoriesCount(series) {\n    var seriesCount = series.length;\n    var categories = 0;\n\n    for (var i = 0; i < seriesCount; i++) {\n        categories = Math.max(categories, series[i].data.length);\n    }\n\n    return categories;\n}\n\nvar CategoricalChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n        // Value axis ranges grouped by axis name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.valueAxisRanges = {};\n\n        this.points = [];\n        this.categoryPoints = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                vertical: !this.options.invertAxes\n            }, series);\n        }\n\n        return options;\n    },\n\n    plotValue: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        if (this.options.isStacked100 && isNumber(point.value)) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var otherValues = [];\n            var categorySum = 0;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n                if (other) {\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n\n                    if ((stack && otherStack) && stack.group !== otherStack.group) {\n                        continue;\n                    }\n\n                    if (isNumber(other.value)) {\n                        categorySum += Math.abs(other.value);\n                        otherValues.push(Math.abs(other.value));\n                    }\n                }\n            }\n\n            if (categorySum > 0) {\n                return point.value / categorySum;\n            }\n        }\n\n        return point.value;\n    },\n\n    plotRange: function(point, startValue) {\n        var this$1$1 = this;\n        if (startValue === void 0) { startValue = 0; }\n\n        var categoryPoints = this.categoryPoints[point.categoryIx];\n\n        if (this.options.isStacked) {\n            var plotValue = this.plotValue(point);\n            var positive = plotValue >= 0;\n            var prevValue = startValue;\n            var isStackedBar = false;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                var stack = point.series.stack;\n                var otherStack = other.series.stack;\n                if (stack && otherStack) {\n                    if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                        continue;\n                    }\n\n                    if (stack.group && stack.group !== otherStack.group) {\n                        continue;\n                    }\n                }\n\n                var otherValue = this$1$1.plotValue(other);\n                if ((otherValue >= 0 && positive) ||\n                    (otherValue < 0 && !positive)) {\n                    prevValue += otherValue;\n                    plotValue += otherValue;\n                    isStackedBar = true;\n\n                    if (this$1$1.options.isStacked100) {\n                        plotValue = Math.min(plotValue, 1);\n                    }\n                }\n            }\n\n            if (isStackedBar) {\n                prevValue -= startValue;\n            }\n\n            return [ prevValue, plotValue ];\n        }\n\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var this$1$1 = this;\n\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < this.categoryPoints.length; i++) {\n            var categoryPoints = this$1$1.categoryPoints[i];\n            if (!categoryPoints) {\n                continue;\n            }\n\n            for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                var point = categoryPoints[pIx];\n                if (point) {\n                    if (point.series.stack === stackName || point.series.axis === axisName) {\n                        var to = this$1$1.plotRange(point, 0)[1];\n                        if (defined(to) && isFinite(to)) {\n                            max = Math.max(max, to);\n                            min = Math.min(min, to);\n                        }\n                    }\n                }\n            }\n        }\n\n        return { min: min, max: max };\n    },\n\n    updateStackRange: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var isStacked = ref.isStacked;\n        var chartSeries = ref.series;\n        var limitsCache = {};\n\n        if (isStacked) {\n            for (var i = 0; i < chartSeries.length; i++) {\n                var series = chartSeries[i];\n                var axisName = series.axis;\n                var key = axisName + series.stack;\n\n                var limits = limitsCache[key];\n                if (!limits) {\n                    limits = this$1$1.stackLimits(axisName, series.stack);\n\n                    var errorTotals = this$1$1.errorTotals;\n                    if (errorTotals) {\n                        if (errorTotals.negative.length) {\n                            limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                        }\n                        if (errorTotals.positive.length) {\n                            limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                        }\n                    }\n\n                    if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                        limitsCache[key] = limits;\n                    } else {\n                        limits = null;\n                    }\n                }\n\n                if (limits) {\n                    this$1$1.valueAxisRanges[axisName] = limits;\n                }\n            }\n        }\n    },\n\n    addErrorBar: function(point, data, categoryIx) {\n        var value = point.value;\n        var series = point.series;\n        var seriesIx = point.seriesIx;\n        var errorBars = point.options.errorBars;\n        var lowValue = data.fields[ERROR_LOW_FIELD];\n        var highValue = data.fields[ERROR_HIGH_FIELD];\n        var errorRange;\n\n        if (isNumber(lowValue) && isNumber(highValue)) {\n            errorRange = { low: lowValue, high: highValue };\n        } else if (errorBars && defined(errorBars.value)) {\n            this.seriesErrorRanges = this.seriesErrorRanges || [];\n            this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n            errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n        }\n\n        if (errorRange) {\n            point.low = errorRange.low;\n            point.high = errorRange.high;\n            this.addPointErrorBar(point, categoryIx);\n        }\n    },\n\n    addPointErrorBar: function(point, categoryIx) {\n        var isVertical = !this.options.invertAxes;\n        var options = point.options.errorBars;\n        var series = point.series;\n        var low = point.low;\n        var high = point.high;\n\n        if (this.options.isStacked) {\n            var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n            low = stackedErrorRange.low;\n            high = stackedErrorRange.high;\n        } else {\n            var fields = { categoryIx: categoryIx, series: series };\n            this.updateRange({ value: low }, fields);\n            this.updateRange({ value: high }, fields);\n        }\n\n        var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars = [ errorBar ];\n        point.append(errorBar);\n    },\n\n    stackedErrorRange: function(point, categoryIx) {\n        var plotValue = this.plotRange(point, 0)[1] - point.value;\n        var low = point.low + plotValue;\n        var high = point.high + plotValue;\n\n        this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n        if (low < 0) {\n            this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n        }\n\n        if (high > 0) {\n            this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n        }\n\n        return { low: low, high: high };\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n\n        var categoryPoints = this.categoryPoints[categoryIx];\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        var seriesPoints = this.seriesPoints[seriesIx];\n        if (!seriesPoints) {\n            this.seriesPoints[seriesIx] = seriesPoints = [];\n        }\n\n        var point = this.createPoint(data, fields);\n        if (point) {\n            $.extend(point, fields);\n\n            point.owner = this;\n            point.noteText = data.fields.noteText;\n            if (!defined(point.dataItem)) {\n                point.dataItem = series.data[categoryIx];\n            }\n            this.addErrorBar(point, data, categoryIx);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n        categoryPoints.push(point);\n\n        this.updateRange(data.valueFields, fields);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, pointOptions);\n            evalOptions(pointOptions, {\n                value: value,\n                category: category,\n                index: categoryIx,\n                series: series,\n                dataItem: series.data[categoryIx]\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    updateRange: function(data, fields) {\n        var axisName = fields.series.axis;\n        var value = data.value;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (isFinite(value) && value !== null) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, value);\n            axisRange.max = Math.max(axisRange.max, value);\n        }\n    },\n\n    seriesValueAxis: function(series) {\n        var plotArea = this.plotArea;\n        var axisName = series.axis;\n        var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate value axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var categorySlots = this.categorySlots = [];\n        var chartPoints = this.points;\n        var categoryAxis = this.categoryAxis;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (data, fields) {\n            var categoryIx = fields.categoryIx;\n            var currentSeries = fields.series;\n\n            var valueAxis = this$1$1.seriesValueAxis(currentSeries);\n            var point = chartPoints[pointIx++];\n\n            var categorySlot = categorySlots[categoryIx];\n            if (!categorySlot) {\n                categorySlots[categoryIx] = categorySlot =\n                    this$1$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n            }\n\n            if (point) {\n                var plotRange = this$1$1.plotRange(point, valueAxis.startValue());\n                var valueSlot = this$1$1.valueSlot(valueAxis, plotRange);\n                if (valueSlot) {\n                    var pointSlot = this$1$1.pointSlot(categorySlot, valueSlot);\n\n                    point.aboveAxis = this$1$1.aboveAxis(point, valueAxis);\n                    point.stackValue = plotRange[1];\n\n                    if (this$1$1.options.isStacked100) {\n                        point.percentage = this$1$1.plotValue(point);\n                    }\n\n                    this$1$1.reflowPoint(point, pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.reflowCategories(categorySlots);\n        if (!this.options.clip && this.options.limitPoints && this.points.length) {\n            this.limitPoints();\n        }\n\n        this.box = targetBox;\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n    },\n\n    limitPoints: function() {\n        var this$1$1 = this;\n\n        var categoryPoints = this.categoryPoints;\n        var points = categoryPoints[0].concat(last(categoryPoints));\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx]) {\n                this$1$1.limitPoint(points[idx]);\n            }\n        }\n    },\n\n    limitPoint: function(point) {\n        var limittedSlot = this.categoryAxis.limitSlot(point.box);\n        if (!limittedSlot.equals(point.box)) {\n            point.reflow(limittedSlot);\n        }\n    },\n\n    aboveAxis: function(point, valueAxis) {\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n        var value = point.value;\n\n        return valueAxis.options.reverse ?\n            value < axisCrossingValue : value >= axisCrossingValue;\n    },\n\n    categoryAxisCrossingValue: function(valueAxis) {\n        var categoryAxis = this.categoryAxis;\n        var options = valueAxis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n\n        return crossingValues[categoryAxis.axisIndex || 0] || 0;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.reflow(pointSlot);\n    },\n\n    reflowCategories: function() { },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var options = this.options;\n        var invertAxes = options.invertAxes;\n        var slotX = invertAxes ? valueSlot : categorySlot;\n        var slotY = invertAxes ? categorySlot : valueSlot;\n\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var count = categoriesCount(series);\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            this$1$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n        }\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                var currentSeries = series[seriesIx$1];\n                var currentCategory = this$1$1.categoryAxis.categoryAt(categoryIx);\n                var pointData = this$1$1._bindPoint(currentSeries, seriesIx$1, categoryIx);\n\n                callback(pointData, {\n                    category: currentCategory,\n                    categoryIx: categoryIx,\n                    categoriesCount: count,\n                    series: currentSeries,\n                    seriesIx: seriesIx$1\n                });\n            }\n        }\n\n        for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n            this$1$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n        }\n    },\n\n    _outOfRangeCallback: function(series, field, seriesIx, callback) {\n        var outOfRangePoint = series[field];\n        if (outOfRangePoint) {\n            var categoryIx = outOfRangePoint.categoryIx;\n            var pointData = this._bindPoint(series, seriesIx, categoryIx, outOfRangePoint.item);\n\n            callback(pointData, {\n                category: outOfRangePoint.category,\n                categoryIx: categoryIx,\n                series: series,\n                seriesIx: seriesIx,\n                dataItem: outOfRangePoint.item\n            });\n        }\n    },\n\n    _bindPoint: function(series, seriesIx, categoryIx, item) {\n        if (!this._bindCache) {\n            this._bindCache = [];\n        }\n\n        var bindCache = this._bindCache[seriesIx];\n        if (!bindCache) {\n            bindCache = this._bindCache[seriesIx] = [];\n        }\n\n        var data = bindCache[categoryIx];\n        if (!data) {\n            data = bindCache[categoryIx] = SeriesBinder.current.bindPoint(series, categoryIx, item);\n        }\n\n        return data;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.value;\n    }\n});\n\nsetDefaultOptions(CategoricalChart, {\n    series: [],\n    invertAxes: false,\n    isStacked: false,\n    clip: true,\n    limitPoints: true\n});\n\nvar PointEventsMixin = {\n    click: function(chart, e) {\n        return chart.trigger(\n            SERIES_CLICK,\n            this.eventArgs(e)\n        );\n    },\n\n    hover: function(chart, e) {\n        return chart.trigger(\n            SERIES_HOVER,\n            this.eventArgs(e)\n        );\n    },\n\n    over: function(chart, e) {\n        return chart.trigger(\n            SERIES_OVER,\n            this.eventArgs(e)\n        );\n    },\n\n    out: function(chart, e) {\n        return chart.trigger(\n            SERIES_LEAVE,\n            this.eventArgs(e)\n        );\n    },\n\n    eventArgs: function(e) {\n        return {\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            category: this.category,\n            series: this.series,\n            dataItem: this.dataItem,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            element: eventElement(e),\n            originalEvent: e,\n            point: this\n        };\n    }\n};\n\nvar NoteMixin = {\n    createNote: function() {\n        var options = this.options.notes;\n        var text = this.noteText || options.label.text;\n\n        if (options.visible !== false && defined(text) && text !== null) {\n            this.note = new dataviz.Note({\n                value: this.value,\n                text: text,\n                dataItem: this.dataItem,\n                category: this.category,\n                series: this.series\n            }, this.options.notes, this.owner.chartService);\n\n            this.append(this.note);\n        }\n    }\n};\n\nvar LinePoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n    },\n\n    render: function() {\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        if (markers.visible && markers.size) {\n            this.marker = this.createMarker();\n            this.append(this.marker);\n        }\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n            var labelText = this.value;\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = this.formatValue(labels.format);\n            }\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                }, labels),\n                pointData\n            );\n            this.append(this.label);\n        }\n\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    markerBorder: function() {\n        var options = this.options.markers;\n        var background = options.background;\n        var border = deepExtend({ color: this.color }, options.border);\n\n        if (!defined(border.color)) {\n            border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n\n        return border;\n    },\n\n    createVisual: function() {},\n\n    createMarker: function() {\n        var options = this.options.markers;\n        var marker = new ShapeElement({\n            type: options.type,\n            width: options.size,\n            height: options.size,\n            rotation: options.rotation,\n            background: options.background,\n            border: this.markerBorder(),\n            opacity: options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        return marker;\n    },\n\n    markerBox: function() {\n        if (!this.marker) {\n            this.marker = this.createMarker();\n            this.marker.reflow(this._childBox);\n        }\n\n        return this.marker.box;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var aboveAxis = ref.aboveAxis;\n        var vertical = options.vertical;\n\n        this.render();\n\n        this.box = targetBox;\n        var childBox = targetBox.clone();\n\n        if (vertical) {\n            if (aboveAxis) {\n                childBox.y1 -= childBox.height();\n            } else {\n                childBox.y2 += childBox.height();\n            }\n        } else {\n            if (aboveAxis) {\n                childBox.x1 += childBox.width();\n            } else {\n                childBox.x2 -= childBox.width();\n            }\n        }\n\n        this._childBox = childBox;\n        if (this.marker) {\n            this.marker.reflow(childBox);\n        }\n\n        this.reflowLabel(childBox);\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(childBox);\n            }\n        }\n\n        if (this.note) {\n            var noteTargetBox = this.markerBox();\n\n            if (!(options.markers.visible && options.markers.size)) {\n                var center = noteTargetBox.center();\n                noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n            }\n\n            this.note.reflow(noteTargetBox);\n        }\n    },\n\n    reflowLabel: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var anchor = options.labels.position;\n\n        if (label) {\n            anchor = anchor === ABOVE ? TOP : anchor;\n            anchor = anchor === BELOW ? BOTTOM : anchor;\n\n            label.reflow(box);\n            label.box.alignTo(this.markerBox(), anchor);\n            label.reflow(label.box);\n        }\n    },\n\n    createHighlight: function() {\n        var markers = this.options.highlight.markers;\n        var defaultColor = this.markerBorder().color;\n        var options = this.options.markers;\n        var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n        var shadow = new ShapeElement({\n            type: options.type,\n            width: size,\n            height: size,\n            rotation: options.rotation,\n            background: markers.color || defaultColor,\n            border: {\n                color: markers.border.color,\n                width: markers.border.width,\n                opacity: valueOrDefault(markers.border.opacity, 1)\n            },\n            opacity: valueOrDefault(markers.opacity, 1)\n        });\n        shadow.reflow(this._childBox);\n\n        return shadow.getElement();\n    },\n\n    highlightVisual: function() {\n        return (this.marker || {}).visual;\n    },\n\n    highlightVisualArgs: function() {\n        var marker = this.marker;\n        var visual, rect;\n\n        if (marker) {\n            rect = marker.paddingBox.toRect();\n            visual = marker.visual;\n        } else {\n            var size = this.options.markers.size;\n            var halfSize = size / 2;\n            var center = this.box.center();\n            rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n        }\n\n        return {\n            options: this.options,\n            rect: rect,\n            visual: visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var markerBox = this.markerBox();\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n        if (showTooltip) {\n            var x = markerBox.x2 + TOOLTIP_OFFSET;\n            var horizontalAlign = LEFT;\n            var y, verticalAlign;\n\n            if (this.aboveAxis) {\n                y = markerBox.y1;\n                verticalAlign = BOTTOM;\n            } else {\n                y = markerBox.y2;\n                verticalAlign = TOP;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        var markerBox = this.markerBox();\n        return markerBox.overlaps(box);\n    },\n\n    unclipElements: function() {\n        if (this.label) {\n            this.label.options.noclip = true;\n        }\n\n        if (this.note) {\n            this.note.options.noclip = true;\n        }\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    }\n});\n\nLinePoint.prototype.defaults = {\n    vertical: true,\n    markers: {\n        visible: true,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        position: ABOVE,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: \"#fff\",\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    errorBars: {\n        line: {\n            width: 1\n        }\n    }\n};\n\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\n\nvar LineSegment = ChartElement.extend({\n    init: function(linePoints, series, seriesIx) {\n        ChartElement.fn.init.call(this);\n\n        this.linePoints = linePoints;\n        this.series = series;\n        this.seriesIx = seriesIx;\n    },\n\n    points: function() {\n        return this.toGeometryPoints(this.linePoints);\n    },\n\n    toGeometryPoints: function(points) {\n        var result = [];\n        for (var i = 0, length = points.length; i < length; i++) {\n            if (points[i] && points[i].visible !== false) {\n                result.push(points[i]._childBox.toRect().center());\n            }\n        }\n\n        return result;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.series.visual;\n        if (customVisual) {\n            this.visual = customVisual({\n                points: this.toGeometryPoints(this.linePoints),\n                series: this.series,\n                sender: this.getSender(),\n                createVisual: function () {\n                    this$1$1.segmentVisual();\n\n                    return this$1$1.visual;\n                }\n            });\n            if (this.visual && !defined(this.visual.options.zIndex)) {\n                this.visual.options.zIndex = this.series.zIndex;\n            }\n        } else {\n            this.segmentVisual();\n        }\n    },\n\n    segmentVisual: function() {\n        var ref = this;\n        var options = ref.options;\n        var series = ref.series;\n        var color = series.color;\n        var defaults = series._defaults;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var line = Path.fromPoints(this.points(), {\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        if (options.closed) {\n            line.close();\n        }\n\n        this.visual = line;\n    },\n\n    aliasFor: function(e, coords) {\n        return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n    }\n});\n\nsetDefaultOptions(LineSegment, {\n    closed: false\n});\n\nvar StepLineMixin = {\n    calculateStepPoints: function(points) {\n        var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n        var ref = categoryAxis.options;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n\n        var stepAxis = vertical ? X : Y;\n        var axis = vertical ? Y : X;\n        var stepDir = reverse ? 2 : 1;\n        var dir = stepDir;\n\n        var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n        var result = [ previousPoint ];\n\n        for (var idx = 1; idx < points.length; idx++) {\n            var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n            if (previousPoint[stepAxis] !== point[stepAxis]) {\n                var stepPoint = new GeometryPoint();\n                stepPoint[stepAxis] = previousPoint[stepAxis];\n                stepPoint[axis] = point[axis];\n\n                result.push(stepPoint, point);\n            }\n\n            previousPoint = point;\n        }\n\n        if (!justified) {\n            result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n        } else if (previousPoint !== last(result)) {\n            result.push(previousPoint);\n        }\n\n        return result;\n\n    }\n};\n\nfunction toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n    var box = lintPoint.box;\n    var result = new GeometryPoint();\n\n    result[stepAxis] = box[stepAxis + stepDir];\n    result[axis] = box[axis + dir];\n\n    return result;\n}\n\nvar StepLineSegment = LineSegment.extend({\n    points: function() {\n        return this.calculateStepPoints(this.linePoints);\n    }\n});\n\ndeepExtend(StepLineSegment.prototype, StepLineMixin);\n\nvar SplineSegment = LineSegment.extend({\n    segmentVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var segments = curveProcessor.process(this.points());\n        var curve = new Path({\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        curve.segments.push.apply(curve.segments, segments);\n\n        this.visual = curve;\n    }\n});\n\nvar LineChartMixin = {\n    renderSegments: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesPoints = ref.seriesPoints;\n        var series = options.series;\n        var seriesCount = seriesPoints.length;\n        var lastSegment;\n\n        this._segments = [];\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var sortedPoints = this$1$1.sortPoints(seriesPoints[seriesIx]);\n            var pointCount = sortedPoints.length;\n            var linePoints = [];\n\n            for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                var point = sortedPoints[pointIx];\n                if (point) {\n                    linePoints.push(point);\n                } else if (this$1$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                    if (linePoints.length > 1) {\n                        lastSegment = this$1$1.createSegment(\n                            linePoints, currentSeries, seriesIx, lastSegment\n                        );\n                        this$1$1._addSegment(lastSegment);\n                    }\n                    linePoints = [];\n                }\n            }\n\n            if (linePoints.length > 1) {\n                lastSegment = this$1$1.createSegment(\n                    linePoints, currentSeries, seriesIx, lastSegment\n                );\n                this$1$1._addSegment(lastSegment);\n            }\n        }\n\n        this.children.unshift.apply(this.children, this._segments);\n    },\n\n    _addSegment: function(segment) {\n        this._segments.push(segment);\n        segment.parent = this;\n    },\n\n    sortPoints: function(points) {\n        return points;\n    },\n\n    seriesMissingValues: function(series) {\n        var missingValues = series.missingValues;\n        var assumeZero = !missingValues && this.options.isStacked;\n\n        return assumeZero ? ZERO : missingValues || INTERPOLATE;\n    },\n\n    getNearestPoint: function(x, y, seriesIx) {\n        var target = new Point(x, y);\n        var allPoints = this.seriesPoints[seriesIx];\n        var nearestPointDistance = MAX_VALUE;\n        var nearestPoint;\n\n        for (var i = 0; i < allPoints.length; i++) {\n            var point = allPoints[i];\n\n            if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                var pointBox = point.box;\n                var pointDistance = pointBox.center().distanceTo(target);\n\n                if (pointDistance < nearestPointDistance) {\n                    nearestPoint = point;\n                    nearestPointDistance = pointDistance;\n                }\n            }\n        }\n\n        return nearestPoint;\n    }\n};\n\nvar ClipAnimation = Animation.extend({\n    setup: function() {\n        this._setEnd(this.options.box.x1);\n    },\n\n    step: function(pos) {\n        var box = this.options.box;\n        this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n    },\n\n    _setEnd: function(x) {\n        var element = this.element;\n        var segments = element.segments;\n        var topRight = segments[1].anchor();\n        var bottomRight = segments[2].anchor();\n\n        element.suspend();\n        topRight.setX(x);\n        element.resume();\n        bottomRight.setX(x);\n    }\n});\n\nsetDefaultOptions(ClipAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(\"clip\", ClipAnimation);\n\nfunction anyHasZIndex(elements) {\n    for (var idx = 0; idx < elements.length; idx++) {\n        if (defined(elements[idx].zIndex)) {\n            return true;\n        }\n    }\n}\n\nvar ClipAnimationMixin = {\n    createAnimation: function() {\n        var root = this.getRoot();\n        if (root && (root.options || {}).transitions !== false) {\n            var box = root.size();\n            var clipPath = Path.fromRect(box.toRect());\n            this.visual.clip(clipPath);\n            this.animation = new ClipAnimation(clipPath, {\n                box: box\n            });\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation(clipPath);\n            }\n        }\n    },\n\n    _setChildrenAnimation: function(clipPath) {\n        var points = this.animationPoints();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point && point.visual && defined(point.visual.options.zIndex)) {\n                point.visual.clip(clipPath);\n            }\n        }\n    }\n};\n\nvar LineChart = CategoricalChart.extend({\n    render: function() {\n\n        CategoricalChart.fn.render.call(this);\n\n        this.updateStackRange();\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var missingValues = this.seriesMissingValues(series);\n        var value = data.valueFields.value;\n\n        if (!defined(value) || value === null) {\n            if (missingValues === ZERO) {\n                value = 0;\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    plotRange: function(point) {\n        var this$1$1 = this;\n\n        var plotValue = this.plotValue(point);\n\n        if (this.options.isStacked) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                plotValue += this$1$1.plotValue(other);\n\n                if (this$1$1.options.isStacked100) {\n                    plotValue = Math.min(plotValue, 1);\n                }\n            }\n\n        }\n\n        return [ plotValue, plotValue ];\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === STEP) {\n            pointType = StepLineSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result.concat(this._segments);\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\ndeepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar AreaSegment = LineSegment.extend({\n    init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n        LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n        this.prevSegment = prevSegment;\n        this.stackPoints = stackPoints;\n    },\n\n    createVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var lineOptions = series.line || {};\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        this.visual = new Group({\n            zIndex: series.zIndex\n        });\n\n        this.createFill({\n            fill: {\n                color: color,\n                opacity: series.opacity\n            },\n            stroke: null\n        });\n\n        if (lineOptions.width > 0 && lineOptions.visible !== false) {\n            this.createStroke({\n                stroke: deepExtend({\n                    color: color,\n                    opacity: series.opacity,\n                    lineCap: \"butt\"\n                }, lineOptions)\n            });\n        }\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            segments = this._strokeSegments = this.createStrokeSegments();\n        }\n\n        return segments;\n    },\n\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.points());\n    },\n\n    stackSegments: function() {\n        if (this.prevSegment) {\n            return this.prevSegment.createStackSegments(this.stackPoints);\n        }\n\n        return this.createStackSegments(this.stackPoints);\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n    },\n\n    segmentsFromPoints: function(points) {\n        return points.map(function (point) { return new geometry.Segment(point); });\n    },\n\n    createStroke: function(style) {\n        var stroke = new Path(style);\n        stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n        this.visual.append(stroke);\n    },\n\n    hasStackSegment: function() {\n        return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n    },\n\n    createFill: function(style) {\n        var strokeSegments = this.strokeSegments();\n        var fillSegments = strokeSegments.slice(0);\n        var hasStackSegments = this.hasStackSegment();\n\n        if (hasStackSegments) {\n            var stackSegments = this.stackSegments();\n\n            append(fillSegments, stackSegments);\n        }\n\n        var fill = new Path(style);\n        fill.segments.push.apply(fill.segments, fillSegments);\n\n        if (!hasStackSegments && strokeSegments.length > 1) {\n            this.fillToAxes(fill);\n        }\n\n        this.visual.append(fill);\n    },\n\n    fillToAxes: function(fillPath) {\n        var chart = this.parent;\n        var invertAxes = chart.options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.series);\n        var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n        var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n        var segments = this.strokeSegments();\n        var firstPoint = segments[0].anchor();\n        var lastPoint = last(segments).anchor();\n        var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n        if (invertAxes) {\n            fillPath.lineTo(end, lastPoint.y)\n                    .lineTo(end, firstPoint.y);\n        } else {\n            fillPath.lineTo(lastPoint.x, end)\n                    .lineTo(firstPoint.x, end);\n        }\n    }\n});\n\nvar StepAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n    }\n});\n\ndeepExtend(StepAreaSegment.prototype, StepLineMixin);\n\nvar SplineAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var linePoints = this.points();\n\n        return curveProcessor.process(linePoints);\n    },\n\n    createStackSegments: function() {\n        var strokeSegments = this.strokeSegments();\n        var stackSegments = [];\n        for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n            var segment = strokeSegments[idx];\n            stackSegments.push(new geometry.Segment(\n                segment.anchor(),\n                segment.controlOut(),\n                segment.controlIn()\n            ));\n        }\n\n        return stackSegments;\n    }\n});\n\nvar AreaChart = LineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n\n        var stackPoints;\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            var missingValues = this.seriesMissingValues(currentSeries);\n            if (missingValues !== \"gap\") {\n                stackPoints = prevSegment.linePoints;\n                previousSegment = prevSegment;\n            } else {\n                stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n            }\n        }\n\n        var pointType;\n        if (style === STEP) {\n            pointType = StepAreaSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineAreaSegment;\n        } else {\n            pointType = AreaSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        LineChart.fn.reflow.call(this, targetBox);\n\n        var stackPoints = this._stackPoints;\n        if (stackPoints) {\n            for (var idx = 0; idx < stackPoints.length; idx++) {\n                var stackPoint = stackPoints[idx];\n                var pointSlot = this$1$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                stackPoint.reflow(pointSlot);\n            }\n        }\n    },\n\n    _gapStackPoints: function(linePoints, seriesIx, style) {\n        var this$1$1 = this;\n\n        var seriesPoints = this.seriesPoints;\n        var startIdx = linePoints[0].categoryIx;\n        var length = linePoints.length;\n        if (startIdx < 0) {\n            startIdx = 0;\n            length--;\n        }\n\n        var endIdx = startIdx + length;\n        var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n        var stackPoints = [];\n\n        this._stackPoints = this._stackPoints || [];\n        for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n            var pointIx = categoryIx + pointOffset;\n            var currentSeriesIx = seriesIx;\n            var point = (void 0);\n\n            do {\n                currentSeriesIx--;\n                point = seriesPoints[currentSeriesIx][pointIx];\n            } while (currentSeriesIx > 0 && !point);\n\n            if (point) {\n                if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                }\n\n                stackPoints.push(point);\n\n                if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                }\n            } else {\n                var gapStackPoint = this$1$1._createGapStackPoint(categoryIx);\n                this$1$1._stackPoints.push(gapStackPoint);\n                stackPoints.push(gapStackPoint);\n            }\n        }\n\n        return stackPoints;\n    },\n\n    _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n        var seriesPoints = this.seriesPoints;\n        var index = seriesIdx;\n        var point;\n\n        while (index > 0 && !point) {\n            index--;\n            point = seriesPoints[index][segmentIx];\n        }\n\n        if (!point) {\n            point = this._createGapStackPoint(categoryIx);\n            this._stackPoints.push(point);\n        } else {\n            point = seriesPoints[index][pointIx];\n        }\n\n        return point;\n    },\n\n    _createGapStackPoint: function(categoryIx) {\n        var options = this.pointOptions({}, 0);\n        var point = new LinePoint(0, options);\n        point.categoryIx = categoryIx;\n        point.series = {};\n\n        return point;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar AxisGroupRangeTracker = Class.extend({\n    init: function() {\n\n        this.axisRanges = {};\n    },\n\n    update: function(chartAxisRanges) {\n        var axisRanges = this.axisRanges;\n\n        for (var axisName in chartAxisRanges) {\n            var chartRange = chartAxisRanges[axisName];\n            var range = axisRanges[axisName];\n            axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n            range.min = Math.min(range.min, chartRange.min);\n            range.max = Math.max(range.max, chartRange.max);\n        }\n    },\n\n    reset: function(axisName) {\n        this.axisRanges[axisName] = undefined;\n    },\n\n    query: function(axisName) {\n        return this.axisRanges[axisName];\n    }\n});\n\nvar BarLabel = ChartElement.extend({\n    init: function(content, options, pointData) {\n        ChartElement.fn.init.call(this, options);\n\n        this.textBox = new TextBox(content, this.options, pointData);\n        this.append(this.textBox);\n    },\n\n    createVisual: function() {\n        this.textBox.options.noclip = this.options.noclip;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var aboveAxis = options.aboveAxis;\n        var text = this.children[0];\n        var textOptions = text.options;\n        var box = text.box;\n        var padding = text.options.padding;\n        var labelBox = targetBox;\n\n        textOptions.align = vertical ? CENTER : LEFT;\n        textOptions.vAlign = vertical ? TOP : CENTER;\n\n        if (options.position === INSIDE_END) {\n            if (vertical) {\n                textOptions.vAlign = TOP;\n\n                if (!aboveAxis && box.height() < targetBox.height()) {\n                    textOptions.vAlign = BOTTOM;\n                }\n            } else {\n                textOptions.align = aboveAxis ? RIGHT : LEFT;\n            }\n        } else if (options.position === CENTER) {\n            textOptions.vAlign = CENTER;\n            textOptions.align = CENTER;\n        } else if (options.position === INSIDE_BASE) {\n            if (vertical) {\n                textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n            } else {\n                textOptions.align = aboveAxis ? LEFT : RIGHT;\n            }\n        } else if (options.position === OUTSIDE_END) {\n            if (vertical) {\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y1 - box.height(),\n                        targetBox.x2, targetBox.y1\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y2,\n                        targetBox.x2, targetBox.y2 + box.height()\n                    );\n                }\n            } else {\n                textOptions.align = CENTER;\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x2, targetBox.y1,\n                        targetBox.x2 + box.width(), targetBox.y2\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1 - box.width(), targetBox.y1,\n                        targetBox.x1, targetBox.y2\n                    );\n                }\n            }\n        }\n\n        if (!options.rotation) {\n            if (vertical) {\n                padding.left = padding.right =\n                    (labelBox.width() - text.contentBox.width()) / 2;\n            } else {\n                padding.top = padding.bottom =\n                    (labelBox.height() - text.contentBox.height()) / 2;\n            }\n        }\n\n        text.reflow(labelBox);\n    },\n\n    alignToClipBox: function(clipBox) {\n        var vertical = this.options.vertical;\n        var field = vertical ? Y : X;\n        var start = field + \"1\";\n        var end = field + \"2\";\n        var text = this.children[0];\n        var parentBox = this.parent.box;\n\n        if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n            var targetBox = text.paddingBox.clone();\n            targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n            targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n            this.reflow(targetBox);\n        }\n    }\n});\n\nsetDefaultOptions(BarLabel, {\n    position: OUTSIDE_END,\n    margin: getSpacing(3),\n    padding: getSpacing(4),\n    color: BLACK,\n    background: \"\",\n    border: {\n        width: 1,\n        color: \"\"\n    },\n    aboveAxis: true,\n    vertical: false,\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    zIndex: 2\n});\n\nfunction hasGradientOverlay(options) {\n    var overlay = options.overlay;\n\n    return overlay && overlay.gradient && overlay.gradient !== \"none\";\n}\n\nvar BAR_ALIGN_MIN_WIDTH = 6;\n\nvar Bar = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createLabel();\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            this.label = new BarLabel(labelText,\n                deepExtend({\n                    vertical: options.vertical\n                },\n                labels\n            ), pointData);\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(targetBox);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var options = ref.options;\n        var customVisual = options.visual;\n\n        if (this.visible !== false) {\n            ChartElement.fn.createVisual.call(this);\n\n            if (customVisual) {\n                var visual = this.rectVisual = customVisual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    sender: this.getSender(),\n                    series: this.series,\n                    percentage: this.percentage,\n                    stackValue: this.stackValue,\n                    runningTotal: this.runningTotal,\n                    total: this.total,\n                    rect: box.toRect(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createRect(group);\n                        return group;\n                    },\n                    options: options\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else if (box.width() > 0 && box.height() > 0) {\n                this.createRect(this.visual);\n            }\n        }\n    },\n\n    createRect: function(visual) {\n        var options = this.options;\n        var border = options.border;\n        var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n        var rect = this.box.toRect();\n\n        rect.size.width = Math.round(rect.size.width);\n\n        var path = this.rectVisual = Path.fromRect(rect, {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: this.getBorderColor(),\n                width: border.width,\n                opacity: strokeOpacity,\n                dashType: border.dashType\n            }\n        });\n\n        var width = this.box.width();\n        var height = this.box.height();\n\n        var size = options.vertical ? width : height;\n\n        if (size > BAR_ALIGN_MIN_WIDTH) {\n            alignPathToPixel(path);\n\n            // Fixes lineJoin issue in firefox when the joined lines are parallel\n            if (width < 1 || height < 1) {\n                path.options.stroke.lineJoin = \"round\";\n            }\n        }\n\n        visual.append(path);\n\n        if (hasGradientOverlay(options)) {\n            var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay));\n\n            visual.append(overlay);\n        }\n    },\n\n    createHighlight: function(style) {\n        var highlight = Path.fromRect(this.box.toRect(), style);\n\n        return alignPathToPixel(highlight);\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    getBorderColor: function() {\n        var color = this.color;\n        var border = this.options.border;\n        var brightness = border._brightness || BORDER_BRIGHTNESS;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(color).brightness(brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    tooltipAnchor: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var aboveAxis = ref.aboveAxis;\n        var clipBox = this.owner.pane.clipBox() || box;\n        var horizontalAlign = LEFT;\n        var verticalAlign = TOP;\n        var x, y;\n\n        if (options.vertical) {\n            x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n            if (aboveAxis) {\n                y = Math.max(box.y1, clipBox.y1);\n            } else {\n                y = Math.min(box.y2, clipBox.y2);\n                verticalAlign = BOTTOM;\n            }\n        } else {\n            var x1 = Math.max(box.x1, clipBox.x1);\n            var x2 = Math.min(box.x2, clipBox.x2);\n\n            if (options.isStacked) {\n                verticalAlign = BOTTOM;\n                if (aboveAxis) {\n                    horizontalAlign = RIGHT;\n                    x = x2;\n                } else {\n                    x = x1;\n                }\n                y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n            } else {\n                if (aboveAxis) {\n                    x = x2 + TOOLTIP_OFFSET;\n                } else {\n                    x = x1 - TOOLTIP_OFFSET;\n                    horizontalAlign = RIGHT;\n                }\n                y = Math.max(box.y1, clipBox.y1);\n            }\n        }\n\n        return {\n            point: new Point(x, y),\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(Bar.prototype, PointEventsMixin);\ndeepExtend(Bar.prototype, NoteMixin);\n\nBar.prototype.defaults = {\n    border: {\n        width: 1\n    },\n    vertical: true,\n    overlay: {\n        gradient: \"glass\"\n    },\n    labels: {\n        visible: false,\n        format: \"{0}\"\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nfunction forEach(elements, callback) {\n    elements.forEach(callback);\n}\n\nfunction forEachReverse(elements, callback) {\n    var length = elements.length;\n\n    for (var idx = length - 1; idx >= 0; idx--) {\n        callback(elements[idx], idx - length - 1);\n    }\n}\n\nvar ClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(box) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var gap = ref.gap;\n        var spacing = ref.spacing;\n        var children = this.children;\n        var count = children.length;\n        var axis = vertical ? Y : X;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotSize = (vertical ? box.height() : box.width()) / slots;\n        var position = box[axis + 1] + slotSize * (gap / 2);\n\n        this.forEach(children, function (child, idx) {\n            var childBox = (child.box || box).clone();\n\n            childBox[axis + 1] = position;\n            childBox[axis + 2] = position + slotSize;\n\n            child.reflow(childBox);\n            if (idx < count - 1) {\n                position += (slotSize * spacing);\n            }\n\n            position += slotSize;\n        });\n    }\n});\n\nsetDefaultOptions(ClusterLayout, {\n    vertical: false,\n    gap: 0,\n    spacing: 0\n});\n\nvar StackWrap = ChartElement.extend({\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var positionAxis = this.options.vertical ? X : Y;\n        var children = this.children;\n        var childrenCount = children.length;\n        var box = this.box = new Box();\n\n        for (var i = 0; i < childrenCount; i++) {\n            var currentChild = children[i];\n\n            if (currentChild.visible !== false) {\n                var childBox = currentChild.box.clone();\n                childBox.snapTo(targetBox, positionAxis);\n\n                if (i === 0) {\n                    box = this$1$1.box = childBox.clone();\n                }\n\n                currentChild.reflow(childBox);\n                box.wrap(childBox);\n            }\n        }\n    }\n});\n\nsetDefaultOptions(StackWrap, {\n    vertical: true\n});\n\nvar BarChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n        this.updateStackRange();\n    },\n\n    pointType: function() {\n        return Bar;\n    },\n\n    clusterType: function() {\n        return ClusterLayout;\n    },\n\n    stackType: function() {\n        return StackWrap;\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n        return limits;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var isStacked = options.isStacked;\n        var value = this.pointValue(data);\n        var pointOptions = this.pointOptions(series, seriesIx);\n\n        var labelOptions = pointOptions.labels;\n        if (isStacked) {\n            if (labelOptions.position === OUTSIDE_END) {\n                labelOptions.position = INSIDE_END;\n            }\n        }\n\n        pointOptions.isStacked = isStacked;\n\n        var color = data.fields.color || series.color;\n        if (value < 0 && pointOptions.negativeColor) {\n            color = pointOptions.negativeColor;\n        }\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var pointType = this.pointType();\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            var clusterType = this.clusterType();\n            cluster = new clusterType({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (isStacked) {\n            var stackWrap = this.getStackWrap(series, cluster);\n            stackWrap.append(point);\n        } else {\n            cluster.append(point);\n        }\n\n        return point;\n    },\n\n    getStackWrap: function(series, cluster) {\n        var stack = series.stack;\n        var stackGroup = stack ? stack.group || stack : stack;\n        var wraps = cluster.children;\n        var stackWrap;\n\n        if (typeof stackGroup === datavizConstants.STRING) {\n            for (var i = 0; i < wraps.length; i++) {\n                if (wraps[i]._stackGroup === stackGroup) {\n                    stackWrap = wraps[i];\n                    break;\n                }\n            }\n        } else {\n            stackWrap = wraps[0];\n        }\n\n        if (!stackWrap) {\n            var stackType = this.stackType();\n            stackWrap = new stackType({\n                vertical: !this.options.invertAxes\n            });\n            stackWrap._stackGroup = stackGroup;\n            cluster.append(stackWrap);\n        }\n\n        return stackWrap;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n        var options = this.options;\n        var categorySlot = categoryAxis.getSlot(categoryIx);\n        var startValue = valueAxis.startValue();\n\n        if (options.isStacked) {\n            var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n            var stackAxis = options.invertAxes ? X : Y;\n            categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n        }\n\n        return categorySlot;\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    createAnimation: function() {\n        this._setAnimationOptions();\n        CategoricalChart.fn.createAnimation.call(this);\n\n        if (anyHasZIndex(this.options.series)) {\n            this._setChildrenAnimation();\n        }\n    },\n\n    _setChildrenAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            var pointVisual = point.visual;\n            if (pointVisual && defined(pointVisual.options.zIndex)) {\n                point.options.animation = this$1$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    },\n\n    _setAnimationOptions: function() {\n        var options = this.options;\n        var animation = options.animation || {};\n        var origin;\n\n        if (options.isStacked) {\n            var valueAxis = this.seriesValueAxis(options.series[0]);\n            origin = valueAxis.getSlot(valueAxis.startValue());\n        } else {\n            origin = this.categoryAxis.getSlot(0);\n        }\n\n        animation.origin = new GeometryPoint(origin.x1, origin.y1);\n        animation.vertical = !options.invertAxes;\n    }\n});\n\nsetDefaultOptions(BarChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nvar Candlestick = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n        this.value = value;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var ocSlot = valueAxis.getSlot(value.open, value.close);\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n        ocSlot.x1 = lhSlot.x1 = box.x1;\n        ocSlot.x2 = lhSlot.x2 = box.x2;\n\n        this.realBody = ocSlot;\n\n        var mid = lhSlot.center().x;\n        var points = [];\n\n        points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n        points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n        this.lines = points;\n\n        this.box = lhSlot.clone().wrap(ocSlot);\n\n        if (!this._rendered) {\n            this._rendered = true;\n            this.createNote();\n        }\n\n        this.reflowNote();\n    },\n\n    reflowNote: function() {\n        if (this.note) {\n            this.note.reflow(this.box);\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n        this._mainVisual = this.mainVisual(this.options);\n        this.visual.append(\n            this._mainVisual\n        );\n\n        this.createOverlay();\n    },\n\n    mainVisual: function(options) {\n        var group = new Group();\n\n        this.createBody(group, options);\n        this.createLines(group, options);\n\n        return group;\n    },\n\n    createBody: function(container, options) {\n        var body = Path.fromRect(this.realBody.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: this.getBorderColor(),\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        alignPathToPixel(body);\n        container.append(body);\n\n        if (hasGradientOverlay(options)) {\n            container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay)));\n        }\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.lines, options.line);\n    },\n\n    drawLines: function(container, options, lines, lineOptions) {\n        if (!lines) {\n            return;\n        }\n\n        var lineStyle = {\n            stroke: {\n                color: lineOptions.color || this.color,\n                opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                width: lineOptions.width,\n                dashType: lineOptions.dashType,\n                lineCap: \"butt\"\n            }\n        };\n\n        for (var i = 0; i < lines.length; i++) {\n            var line = Path.fromPoints(lines[i], lineStyle);\n            alignPathToPixel(line);\n            container.append(line);\n        }\n    },\n\n    getBorderColor: function() {\n        var border = this.options.border;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(this.color).brightness(border._brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    createOverlay: function() {\n        var overlay = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null\n        });\n\n        this.visual.append(overlay);\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var normalColor = this.color;\n\n        this.color = highlight.color || this.color;\n        var overlay = this.mainVisual(\n            deepExtend({}, this.options, {\n                line: {\n                    color: this.getBorderColor()\n                }\n            }, highlight)\n        );\n        this.color = normalColor;\n\n        return overlay;\n    },\n\n    highlightVisual: function() {\n        return this._mainVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this._mainVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        var clipBox = this.owner.pane.clipBox() || box;\n\n        return {\n            point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n            align: {\n                horizontal: LEFT,\n                vertical: TOP\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    }\n});\n\nsetDefaultOptions(Candlestick, {\n    vertical: true,\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                    \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    }\n});\n\ndeepExtend(Candlestick.prototype, PointEventsMixin);\ndeepExtend(Candlestick.prototype, NoteMixin);\n\nfunction areNumbers(values) {\n    return countNumbers(values) === values.length;\n}\n\nvar CandlestickChart = CategoricalChart.extend({\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n            point.noteText = data.fields.noteText;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        return Candlestick;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var pointType = this.pointType();\n        var value = data.valueFields;\n        var pointOptions = deepExtend({}, series);\n        var color = data.fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (series.type === CANDLESTICK) {\n            if (value.open > value.close) {\n                color = data.fields.downColor || series.downColor || series.color;\n            }\n        }\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.vertical = !this.options.invertAxes;\n\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        return point;\n    },\n\n    splitValue: function(value) {\n        return [ value.low, value.open, value.close, value.high ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var parts = this.splitValue(value);\n        var axisRange = this.valueAxisRanges[axisName];\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.open, value.high,\n            value.low, value.close, point.category\n        );\n    },\n\n    animationPoints: function() {\n        return this.points;\n    }\n});\n\ndeepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\nvar BoxPlot = Candlestick.extend({\n    init: function(value, options) {\n        Candlestick.fn.init.call(this, value, options);\n\n        this.createNote();\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var whiskerSlot, boxSlot;\n\n        this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n        this.realBody = boxSlot;\n        this.reflowBoxSlot(box);\n\n        this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n        this.reflowWhiskerSlot(box);\n\n        var medianSlot = valueAxis.getSlot(value.median);\n\n        if (value.mean) {\n            var meanSlot = valueAxis.getSlot(value.mean);\n            this.meanPoints = this.calcMeanPoints(box, meanSlot);\n        }\n\n        this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n        this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n        this.box = whiskerSlot.clone().wrap(boxSlot);\n        this.reflowNote();\n    },\n\n    reflowBoxSlot: function(box) {\n        this.boxSlot.x1 = box.x1;\n        this.boxSlot.x2 = box.x2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.x1 = box.x1;\n        this.whiskerSlot.x2 = box.x2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().x;\n        return [ [\n            [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n            [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n        ], [\n            [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n            [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n        ];\n    },\n\n    renderOutliers: function(options) {\n        var this$1$1 = this;\n\n        var value = this.value;\n        var outliers = value.outliers || [];\n        var outerFence = Math.abs(value.q3 - value.q1) * 3;\n        var elements = [];\n        var markers = options.markers || {};\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i];\n            if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                markers = options.outliers;\n            } else {\n                markers = options.extremes;\n            }\n            var markersBorder = deepExtend({}, markers.border);\n\n            if (!defined(markersBorder.color)) {\n                if (defined(this$1$1.color)) {\n                    markersBorder.color = this$1$1.color;\n                } else {\n                    markersBorder.color =\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                }\n            }\n\n            var shape = new ShapeElement({\n                type: markers.type,\n                width: markers.size,\n                height: markers.size,\n                rotation: markers.rotation,\n                background: markers.background,\n                border: markersBorder,\n                opacity: markers.opacity\n            });\n\n            shape.value = outlierValue;\n\n            elements.push(shape);\n        }\n\n        this.reflowOutliers(elements);\n        return elements;\n    },\n\n    reflowOutliers: function(outliers) {\n        var this$1$1 = this;\n\n        var valueAxis = this.owner.seriesValueAxis(this.options);\n        var center = this.box.center();\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i].value;\n            var markerBox = valueAxis.getSlot(outlierValue);\n\n            if (this$1$1.options.vertical) {\n                markerBox.move(center.x);\n            } else {\n                markerBox.move(undefined, center.y);\n            }\n\n            this$1$1.box = this$1$1.box.wrap(markerBox);\n            outliers[i].reflow(markerBox);\n        }\n    },\n\n    mainVisual: function(options) {\n        var group = Candlestick.fn.mainVisual.call(this, options);\n        var outliers = this.renderOutliers(options);\n\n        for (var i = 0; i < outliers.length; i++) {\n            var element = outliers[i].getElement();\n            if (element) {\n                group.append(element);\n            }\n        }\n\n        return group;\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n        this.drawLines(container, options, this.medianPoints, options.median);\n        this.drawLines(container, options, this.meanPoints, options.mean);\n    },\n\n    getBorderColor: function() {\n        if ((this.options.border || {}).color) {\n            return this.options.border.color;\n        }\n\n        if (this.color) {\n            return this.color;\n        }\n\n        return Candlestick.fn.getBorderColor.call(this);\n    }\n});\n\nsetDefaultOptions(BoxPlot, {\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    median: {\n        color: \"#f6f6f6\"\n    },\n    mean: {\n        width: 2,\n        dashType: \"dash\",\n        color: \"#f6f6f6\"\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                    \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                    \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                    \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    outliers: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: datavizConstants.CROSS,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    },\n    extremes: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    }\n});\n\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\n\nvar VerticalBoxPlot = BoxPlot.extend({\n    reflowBoxSlot: function(box) {\n        this.boxSlot.y1 = box.y1;\n        this.boxSlot.y2 = box.y2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.y1 = box.y1;\n        this.whiskerSlot.y2 = box.y2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().y;\n        return [ [\n            [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n            [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n        ], [\n            [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n            [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n        ];\n    }\n});\n\nvar BoxPlotChart = CandlestickChart.extend({\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        if (this.options.invertAxes) {\n            return VerticalBoxPlot;\n        }\n\n        return BoxPlot;\n    },\n\n    splitValue: function(value) {\n        return [\n            value.lower, value.q1, value.median,\n            value.q3, value.upper\n        ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n        var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n        if (defined(value.mean)) {\n            parts = parts.concat(value.mean);\n        }\n\n        axisRange = this.valueAxisRanges[axisName] =\n            axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n        axisRange = this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.lower, value.q1, value.median,\n            value.q3, value.upper, value.mean, point.category\n        );\n    },\n\n    filterOutliers: function(items) {\n        var length = (items || []).length;\n        var result = [];\n\n        for (var i = 0; i < length; i++) {\n            var item = items[i];\n            if (defined(item) && item !== null) {\n                result.push(item);\n            }\n        }\n\n        return result;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar ScatterErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axes = this.chart.seriesAxes(this.series);\n        var axis = this.isVertical ? axes.y : axes.x;\n\n        return axis;\n    }\n});\n\nfunction hasValue(value) {\n    return defined(value) && value !== null;\n}\n\nvar ScatterChart = ChartElement.extend({\n    init: function(plotArea, options) {\n\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        // X and Y axis ranges grouped by name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.xAxisRanges = {};\n        this.yAxisRanges = {};\n\n        this.points = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    addErrorBar: function(point, field, fields) {\n        var value = point.value[field];\n        var valueErrorField = field + \"Value\";\n        var lowField = field + \"ErrorLow\";\n        var highField = field + \"ErrorHigh\";\n        var seriesIx = fields.seriesIx;\n        var series = fields.series;\n        var errorBars = point.options.errorBars;\n        var lowValue = fields[lowField];\n        var highValue = fields[highField];\n\n        if (isNumber(value)) {\n            var errorRange;\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            }\n\n            if (errorBars && defined(errorBars[valueErrorField])) {\n                this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                    new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n            }\n\n            if (errorRange) {\n                this.addPointErrorBar(errorRange, point, field);\n            }\n        }\n    },\n\n    addPointErrorBar: function(errorRange, point, field) {\n        var low = errorRange.low;\n        var high = errorRange.high;\n        var series = point.series;\n        var options = point.options.errorBars;\n        var isVertical = field === Y;\n        var item = {};\n\n        point[field + \"Low\"] = low;\n        point[field + \"High\"] = high;\n\n        point.errorBars = point.errorBars || [];\n        var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars.push(errorBar);\n        point.append(errorBar);\n\n        item[field] = low;\n        this.updateRange(item, series);\n        item[field] = high;\n        this.updateRange(item, series);\n    },\n\n    addValue: function(value, fields) {\n        var x = value.x;\n        var y = value.y;\n        var seriesIx = fields.seriesIx;\n        var series = this.options.series[seriesIx];\n        var missingValues = this.seriesMissingValues(series);\n        var seriesPoints = this.seriesPoints[seriesIx];\n\n        var pointValue = value;\n        if (!(hasValue(x) && hasValue(y))) {\n            pointValue = this.createMissingValue(pointValue, missingValues);\n        }\n\n        var point;\n        if (pointValue) {\n            point = this.createPoint(pointValue, fields);\n            if (point) {\n                $.extend(point, fields);\n                this.addErrorBar(point, X, fields);\n                this.addErrorBar(point, Y, fields);\n            }\n            this.updateRange(pointValue, fields.series);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues;\n    },\n\n    createMissingValue: function() {},\n\n    updateRange: function(value, series) {\n        var intlService = this.chartService.intl;\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var x = value.x;\n        var y = value.y;\n        var xAxisRange = this.xAxisRanges[xAxisName];\n        var yAxisRange = this.yAxisRanges[yAxisName];\n\n        if (hasValue(x)) {\n            xAxisRange = this.xAxisRanges[xAxisName] =\n                xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(x)) {\n                x = parseDate(intlService, x);\n            }\n\n            xAxisRange.min = Math.min(xAxisRange.min, x);\n            xAxisRange.max = Math.max(xAxisRange.max, x);\n        }\n\n        if (hasValue(y)) {\n            yAxisRange = this.yAxisRanges[yAxisName] =\n                yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(y)) {\n                y = parseDate(intlService, y);\n            }\n\n            yAxisRange.min = Math.min(yAxisRange.min, y);\n            yAxisRange.max = Math.max(yAxisRange.max, y);\n        }\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\",\n                \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return {\n            x: xAxis,\n            y: yAxis\n        };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var seriesAxes = this$1$1.seriesAxes(fields.series);\n            var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n            var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var seriesPoints = ref.seriesPoints;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var currentSeriesPoints = seriesPoints[seriesIx];\n            if (!currentSeriesPoints) {\n                seriesPoints[seriesIx] = [];\n            }\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var value = ref$1.valueFields;\n                var fields = ref$1.fields;\n\n                callback(value, deepExtend({\n                    pointIx: pointIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: currentSeries.data[pointIx],\n                    owner: this$1$1\n                }, fields));\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(ScatterChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}\"\n    },\n    labels: {\n        format: \"{0}, {1}\"\n    },\n    clip: true\n});\ndeepExtend(ScatterChart.prototype, ClipAnimationMixin, {\n    _bindPoint: CategoricalChart.prototype._bindPoint\n});\n\nvar Bubble = LinePoint.extend({\n    init: function(value, options) {\n        LinePoint.fn.init.call(this, value, options);\n\n        this.category = value.category;\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var border = highlight.border;\n        var markers = this.options.markers;\n        var center = this.box.center();\n        var radius = (markers.size + markers.border.width + border.width) / 2;\n        var highlightGroup = new Group();\n        var shadow = new drawing.Circle(new geometry.Circle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n            stroke: {\n                color: 'none'\n            },\n            fill: this.createGradient({\n                gradient: 'bubbleShadow',\n                color: markers.background,\n                stops: [ {\n                    offset: 0,\n                    color: markers.background,\n                    opacity: 0.3\n                }, {\n                    offset: 1,\n                    color: markers.background,\n                    opacity: 0\n                } ]\n            })\n        });\n        var overlay = new drawing.Circle(new geometry.Circle([ center.x, center.y ], radius), {\n            stroke: {\n                color: border.color ||\n                    new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                width: border.width,\n                opacity: border.opacity\n            },\n            fill: {\n                color: markers.background,\n                opacity: highlight.opacity\n            }\n        });\n\n        highlightGroup.append(shadow, overlay);\n\n        return highlightGroup;\n    }\n});\n\nBubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n    labels: {\n        position: CENTER\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            color: \"#fff\",\n            width: 2,\n            opacity: 1\n        }\n    }\n});\n\nBubble.prototype.defaults.highlight.zIndex = undefined;\n\nvar BubbleChart = ScatterChart.extend({\n    _initFields: function() {\n        this._maxSize = MIN_VALUE;\n        ScatterChart.fn._initFields.call(this);\n    },\n\n    addValue: function(value, fields) {\n        if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n            this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n            ScatterChart.fn.addValue.call(this, value, fields);\n        } else {\n            this.points.push(null);\n            this.seriesPoints[fields.seriesIx].push(null);\n        }\n    },\n\n    reflow: function(box) {\n        this.updateBubblesSize(box);\n        ScatterChart.fn.reflow.call(this, box);\n    },\n\n    pointType: function() {\n        return Bubble;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointsCount = series.data.length;\n        var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n        var animationOptions = {\n            delay: delay,\n            duration: INITIAL_ANIMATION_DURATION - delay,\n            type: BUBBLE\n        };\n\n        var color = fields.color || series.color;\n        if (value.size < 0 && series.negativeValues.visible) {\n            color = valueOrDefault(\n                series.negativeValues.color, color\n            );\n        }\n\n        var pointOptions = deepExtend({\n            labels: {\n                animation: {\n                    delay: delay,\n                    duration: INITIAL_ANIMATION_DURATION - delay\n                }\n            }\n        }, this.pointOptions(series, fields.seriesIx), {\n            markers: {\n                type: CIRCLE,\n                border: series.border,\n                opacity: series.opacity,\n                animation: animationOptions\n            }\n        });\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.markers.background = color;\n\n        var point = new Bubble(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    updateBubblesSize: function(box) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var boxSize = Math.min(box.width(), box.height());\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesPoints = this$1$1.seriesPoints[seriesIx];\n            var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n            var maxSize = currentSeries.maxSize || boxSize * 0.2;\n            var minR = minSize / 2;\n            var maxR = maxSize / 2;\n            var minArea = Math.PI * minR * minR;\n            var maxArea = Math.PI * maxR * maxR;\n            var areaRange = maxArea - minArea;\n            var areaRatio = areaRange / this$1$1._maxSize;\n\n            for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                var point = seriesPoints[pointIx];\n                if (point) {\n                    var area = Math.abs(point.value.size) * areaRatio;\n                    var radius = Math.sqrt((minArea + area) / Math.PI);\n                    var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                    var zIndex = baseZIndex + (1 - radius / maxR);\n\n                    deepExtend(point.options, {\n                        zIndex: zIndex,\n                        markers: {\n                            size: radius * 2,\n                            zIndex: zIndex\n                        },\n                        labels: {\n                            zIndex: zIndex + 1\n                        }\n                    });\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n    },\n\n    createAnimation: function() {},\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(BubbleChart, {\n    tooltip: {\n        format: \"{3}\"\n    },\n    labels: {\n        format: \"{3}\"\n    }\n});\n\nvar Target = ShapeElement.extend({\n\n});\n\ndeepExtend(Target.prototype, PointEventsMixin);\n\nvar Bullet = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.aboveAxis = this.options.aboveAxis;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        var options = this.options;\n\n        if (!this._rendered) {\n            this._rendered = true;\n\n            if (defined(this.value.target)) {\n                this.target = new Target({\n                    type: options.target.shape,\n                    background: options.target.color || this.color,\n                    opacity: options.opacity,\n                    zIndex: options.zIndex,\n                    border: options.target.border,\n                    vAlign: TOP,\n                    align: RIGHT\n                });\n\n                this.target.value = this.value;\n                this.target.dataItem = this.dataItem;\n                this.target.series = this.series;\n\n                this.append(this.target);\n            }\n\n            this.createLabel();\n            this.createNote();\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            this.label = new BarLabel(labelText, labels, pointData);\n            this.append(this.label);\n        }\n    },\n\n    reflow: function(box) {\n        this.render();\n\n        var ref = this;\n        var options = ref.options;\n        var target = ref.target;\n        var chart = ref.owner;\n        var invertAxes = options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.options);\n        var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n        var targetValueSlot = valueAxis.getSlot(this.value.target);\n        var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n        var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n        if (target) {\n            var targetSlot = new Box(\n                targetSlotX.x1, targetSlotY.y1,\n                targetSlotX.x2, targetSlotY.y2\n            );\n            target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n            target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n            target.reflow(targetSlot);\n        }\n\n        var label = this.label;\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(box);\n        }\n\n        if (this.note) {\n            this.note.reflow(box);\n        }\n\n        this.box = box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        var body = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: options.border.color || this.color,\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        this.bodyVisual = body;\n\n        alignPathToPixel(body);\n        this.visual.append(body);\n    },\n\n    createAnimation: function() {\n        if (this.bodyVisual) {\n            this.animation = Animation.create(\n                this.bodyVisual, this.options.animation\n            );\n        }\n    },\n\n    createHighlight: function(style) {\n        return Path.fromRect(this.box.toRect(), style);\n    },\n\n    highlightVisual: function() {\n        return this.bodyVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            rect: this.box.toRect(),\n            visual: this.bodyVisual,\n            options: this.options\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    }\n});\n\nBullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n\nsetDefaultOptions(Bullet, {\n    border: {\n        width: 1\n    },\n    vertical: false,\n    opacity: 1,\n    target: {\n        shape: \"\",\n        border: {\n            width: 0,\n            color: \"green\"\n        },\n        line: {\n            width: 2\n        }\n    },\n    labels: {\n        visible: false\n    },\n    tooltip: {\n        format: \"Current: {0}<br />Target: {1}\"\n    },\n    notes: {\n        label: {}\n    }\n});\n\ndeepExtend(Bullet.prototype, PointEventsMixin);\ndeepExtend(Bullet.prototype, NoteMixin);\n\nvar BulletChart = CategoricalChart.extend({\n    init: function(plotArea, options) {\n\n        wrapData(options);\n\n        CategoricalChart.fn.init.call(this, plotArea, options);\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    plotRange: function(point) {\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var value = data.valueFields;\n\n        var bulletOptions = deepExtend({\n            vertical: !options.invertAxes,\n            overlay: series.overlay,\n            categoryIx: categoryIx,\n            invertAxes: options.invertAxes\n        }, series);\n\n        var color = data.fields.color || series.color;\n        bulletOptions = this.evalPointOptions(bulletOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = bulletOptions.color;\n        }\n\n        var bullet = new Bullet(value, bulletOptions);\n        bullet.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        cluster.append(bullet);\n\n        return bullet;\n    },\n\n    updateRange: function(value, fields) {\n        var current = value.current;\n        var target = value.target;\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, current, target);\n            axisRange.max = Math.max(axisRange.max, current, target);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value.current, point.value.target);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.current;\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value.current;\n\n        return value > 0;\n    },\n\n    createAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        this._setAnimationOptions();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            point.options.animation = this$1$1.options.animation;\n            point.createAnimation();\n        }\n    }\n});\n\nBulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\nsetDefaultOptions(BulletChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nfunction wrapData(options) {\n    var series = options.series;\n\n    for (var i = 0; i < series.length; i++) {\n        var seriesItem = series[i];\n        var data = seriesItem.data;\n        if (data && !isArray(data[0]) && !isObject(data[0])) {\n            seriesItem.data = [ data ];\n        }\n    }\n}\n\nvar BaseTooltip = Class.extend({\n    init: function(chartService, options) {\n\n        this.chartService = chartService;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    getStyle: function(options, point) {\n        var background = options.background;\n        var border = options.border.color;\n\n        if (point) {\n            var pointColor = point.color || point.options.color;\n            background = valueOrDefault(background, pointColor);\n            border = valueOrDefault(border, pointColor);\n        }\n\n        var padding = getSpacing(options.padding || {}, \"auto\");\n\n        return {\n            backgroundColor: background,\n            borderColor: border,\n            font: options.font,\n            color: options.color,\n            opacity: options.opacity,\n            borderWidth: styleValue(options.border.width),\n            paddingTop: styleValue(padding.top),\n            paddingBottom: styleValue(padding.bottom),\n            paddingLeft: styleValue(padding.left),\n            paddingRight: styleValue(padding.right)\n        };\n    },\n\n    show: function(options, tooltipOptions, point) {\n        options.format = tooltipOptions.format;\n\n        var style = this.getStyle(tooltipOptions, point);\n        options.style = style;\n\n        var background = new Color(style.backgroundColor);\n        if (!defined(tooltipOptions.color) && !background.isDark()) {\n            options.className = \"k-chart-tooltip-inverse\";\n        }\n\n        this.chartService.notify(SHOW_TOOLTIP, options);\n\n        this.visible = true;\n    },\n\n    hide: function() {\n        if (this.chartService) {\n            this.chartService.notify(HIDE_TOOLTIP);\n        }\n\n        this.visible = false;\n    },\n\n    destroy: function() {\n        delete this.chartService;\n    }\n});\n\nsetDefaultOptions(BaseTooltip, {\n    border: {\n        width: 1\n    },\n    opacity: 1\n});\n\nvar CrosshairTooltip = BaseTooltip.extend({\n    init: function(chartService, crosshair, options) {\n        BaseTooltip.fn.init.call(this, chartService, options);\n\n        this.crosshair = crosshair;\n        this.formatService = chartService.format;\n        this.initAxisName();\n    },\n\n    initAxisName: function() {\n        var axis = this.crosshair.axis;\n        var plotArea = axis.plotArea;\n        var name;\n        if (plotArea.categoryAxis) {\n            name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n        } else {\n            name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n        }\n        this.axisName = name;\n    },\n\n    showAt: function(point) {\n        var ref = this;\n        var axis = ref.crosshair.axis;\n        var options = ref.options;\n        var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n        var formattedValue = value;\n\n        if (options.format) {\n            formattedValue = this.formatService.auto(options.format, value);\n        } else if (axis.options.type === DATE) {\n            formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n        }\n\n        this.show({\n            point: point,\n            anchor: this.getAnchor(),\n            crosshair: this.crosshair,\n            value: formattedValue,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        }, this.options);\n    },\n\n    hide: function() {\n        this.chartService.notify(HIDE_TOOLTIP, {\n            crosshair: this.crosshair,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        });\n    },\n\n    getAnchor: function() {\n        var ref = this;\n        var crosshair = ref.crosshair;\n        var ref_options = ref.options;\n        var position = ref_options.position;\n        var padding = ref_options.padding;\n        var vertical = !crosshair.axis.options.vertical;\n        var lineBox = crosshair.line.bbox();\n        var horizontalAlign, verticalAlign, point;\n\n        if (vertical) {\n            horizontalAlign = CENTER;\n            if (position === BOTTOM) {\n                verticalAlign = TOP;\n                point = lineBox.bottomLeft().translate(0, padding);\n            } else {\n                verticalAlign = BOTTOM;\n                point = lineBox.topLeft().translate(0, -padding);\n            }\n        } else {\n            verticalAlign = CENTER;\n            if (position === LEFT) {\n                horizontalAlign = RIGHT;\n                point = lineBox.topLeft().translate(-padding, 0);\n            } else {\n                horizontalAlign = LEFT;\n                point = lineBox.topRight().translate(padding, 0);\n            }\n        }\n\n        return {\n            point: point,\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    }\n});\n\nsetDefaultOptions(CrosshairTooltip, {\n    padding: 10\n});\n\nvar Crosshair = ChartElement.extend({\n    init: function(chartService, axis, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.axis = axis;\n        this.stickyMode = axis instanceof CategoryAxis;\n\n        var tooltipOptions = this.options.tooltip;\n\n        if (tooltipOptions.visible) {\n            this.tooltip = new CrosshairTooltip(chartService, this,\n                deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n            );\n        }\n    },\n\n    showAt: function(point) {\n        this.point = point;\n        this.moveLine();\n        this.line.visible(true);\n\n        if (this.tooltip) {\n            this.tooltip.showAt(point);\n        }\n    },\n\n    hide: function() {\n        this.line.visible(false);\n\n        if (this.tooltip) {\n            this.tooltip.hide();\n        }\n    },\n\n    moveLine: function() {\n        var ref = this;\n        var axis = ref.axis;\n        var point = ref.point;\n        var vertical = axis.options.vertical;\n        var box = this.getBox();\n        var dim = vertical ? Y : X;\n        var lineStart = new GeometryPoint(box.x1, box.y1);\n        var lineEnd;\n\n        if (vertical) {\n            lineEnd = new GeometryPoint(box.x2, box.y1);\n        } else {\n            lineEnd = new GeometryPoint(box.x1, box.y2);\n        }\n\n        if (point) {\n            if (this.stickyMode) {\n                var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n            } else {\n                lineStart[dim] = lineEnd[dim] = point[dim];\n            }\n        }\n\n        this.box = box;\n\n        this.line.moveTo(lineStart).lineTo(lineEnd);\n    },\n\n    getBox: function() {\n        var axis = this.axis;\n        var axes = axis.pane.axes;\n        var length = axes.length;\n        var vertical = axis.options.vertical;\n        var box = axis.lineBox().clone();\n        var dim = vertical ? X : Y;\n        var axisLineBox;\n\n        for (var i = 0; i < length; i++) {\n            var currentAxis = axes[i];\n            if (currentAxis.options.vertical !== vertical) {\n                if (!axisLineBox) {\n                    axisLineBox = currentAxis.lineBox().clone();\n                } else {\n                    axisLineBox.wrap(currentAxis.lineBox());\n                }\n            }\n        }\n\n        box[dim + 1] = axisLineBox[dim + 1];\n        box[dim + 2] = axisLineBox[dim + 2];\n\n        return box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        this.line = new Path({\n            stroke: {\n                color: options.color,\n                width: options.width,\n                opacity: options.opacity,\n                dashType: options.dashType\n            },\n            visible: false\n        });\n\n        this.moveLine();\n        this.visual.append(this.line);\n    },\n\n    destroy: function() {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n\n        ChartElement.fn.destroy.call(this);\n    }\n});\n\nsetDefaultOptions(Crosshair, {\n    color: BLACK,\n    width: 2,\n    zIndex: -1,\n    tooltip: {\n        visible: false\n    }\n});\n\nvar ChartContainer = ChartElement.extend({\n    init: function(options, pane) {\n        ChartElement.fn.init.call(this, options);\n        this.pane = pane;\n    },\n\n    shouldClip: function() {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            if (children[i].options.clip === true) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _clipBox: function() {\n        return this.pane.chartsBox();\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: 0\n        });\n\n        if (this.shouldClip()) {\n            var clipBox = this.clipBox = this._clipBox();\n            var clipRect = clipBox.toRect();\n            var clipPath = Path.fromRect(clipRect);\n            alignPathToPixel(clipPath);\n\n            this.visual.clip(clipPath);\n            this.unclipLabels();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    unclipLabels: function() {\n        var ref = this;\n        var charts = ref.children;\n        var clipBox = ref.clipBox;\n\n        for (var i = 0; i < charts.length; i++) {\n            var points = charts[i].points || {};\n            var length = points.length;\n\n            for (var j = 0; j < length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                        point.unclipElements();\n                    } else {\n                        var label = point.label;\n                        var note = point.note;\n\n                        if (label && label.options.visible) {\n                            if (label.alignToClipBox) {\n                                label.alignToClipBox(clipBox);\n                            }\n                            label.options.noclip = true;\n                        }\n\n                        if (note && note.options.visible) {\n                            note.options.noclip = true;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    destroy: function() {\n        ChartElement.fn.destroy.call(this);\n\n        delete this.parent;\n    }\n});\n\nChartContainer.prototype.isStackRoot = true;\n\nvar Pane = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.id = paneID();\n\n        this.createTitle();\n\n        this.content = new ChartElement();\n\n        this.chartContainer = new ChartContainer({}, this);\n        this.append(this.content);\n\n        this.axes = [];\n        this.charts = [];\n    },\n\n    createTitle: function() {\n        var titleOptions = this.options.title;\n        if (isObject(titleOptions)) {\n            titleOptions = deepExtend({}, titleOptions, {\n                align: titleOptions.position,\n                position: TOP\n            });\n        }\n\n        this.title = Title.buildTitle(titleOptions, Pane.prototype.options.title);\n        if (this.title) {\n            this.append(this.title);\n        }\n    },\n\n    appendAxis: function(axis) {\n        this.content.append(axis);\n        this.axes.push(axis);\n        axis.pane = this;\n    },\n\n    appendAxisAt: function(axis, pos) {\n        this.content.append(axis);\n        this.axes.splice(pos, 0, axis);\n        axis.pane = this;\n    },\n\n    appendChart: function(chart) {\n        if (this.chartContainer.parent !== this.content) {\n            this.content.append(this.chartContainer);\n        }\n\n        this.charts.push(chart);\n        this.chartContainer.append(chart);\n        chart.pane = this;\n    },\n\n    empty: function() {\n        var this$1$1 = this;\n\n        var plotArea = this.parent;\n\n        if (plotArea) {\n            for (var i = 0; i < this.axes.length; i++) {\n                plotArea.removeAxis(this$1$1.axes[i]);\n            }\n\n            for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                plotArea.removeChart(this$1$1.charts[i$1]);\n            }\n        }\n\n        this.axes = [];\n        this.charts = [];\n\n        this.content.destroy();\n        this.content.children = [];\n        this.chartContainer.children = [];\n    },\n\n    reflow: function(targetBox) {\n        // Content (such as charts) is rendered, but excluded from reflows\n        var content;\n        if (last(this.children) === this.content) {\n            content = this.children.pop();\n        }\n\n        BoxElement.fn.reflow.call(this, targetBox);\n\n        if (content) {\n            this.children.push(content);\n        }\n\n        if (this.title) {\n            this.contentBox.y1 += this.title.box.height();\n        }\n    },\n\n    visualStyle: function() {\n        var style = BoxElement.fn.visualStyle.call(this);\n        style.zIndex = -10;\n\n        return style;\n    },\n\n    renderComplete: function() {\n        if (this.options.visible) {\n            this.createGridLines();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    clipRoot: function() {\n        return this;\n    },\n\n    createGridLines: function() {\n        var axes = this.axes;\n        var allAxes = axes.concat(this.parent.axes);\n        var vGridLines = [];\n        var hGridLines = [];\n\n        // TODO\n        // Is full combination really necessary?\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var vertical = axis.options.vertical;\n            var gridLines = vertical ? vGridLines : hGridLines;\n            for (var j = 0; j < allAxes.length; j++) {\n                if (gridLines.length === 0) {\n                    var altAxis = allAxes[j];\n                    if (vertical !== altAxis.options.vertical) {\n                        append(gridLines, axis.createGridLines(altAxis));\n                    }\n                }\n            }\n        }\n    },\n\n    refresh: function() {\n        this.visual.clear();\n\n        this.content.parent = null;\n        this.content.createGradient = this.createGradient.bind(this);\n        this.content.renderVisual();\n        this.content.parent = this;\n\n        if (this.title) {\n            this.visual.append(this.title.visual);\n        }\n\n        this.visual.append(this.content.visual);\n\n        this.renderComplete();\n        this.notifyRender();\n    },\n\n    chartsBox: function() {\n        var axes = this.axes;\n        var length = axes.length;\n        var chartsBox = new Box();\n\n        for (var idx = 0; idx < length; idx++) {\n            var axis = axes[idx];\n            var axisValueField = axis.options.vertical ? Y : X;\n            var lineBox = axis.lineBox();\n            chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n            chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n        }\n\n        if (chartsBox.x2 === 0) {\n            var allAxes = this.parent.axes;\n            var length$1 = allAxes.length;\n\n            for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                var axis$1 = allAxes[idx$1];\n                if (!axis$1.options.vertical) {\n                    var lineBox$1 = axis$1.lineBox();\n                    chartsBox.x1 = lineBox$1.x1;\n                    chartsBox.x2 = lineBox$1.x2;\n                }\n            }\n        }\n        return chartsBox;\n    },\n\n    clipBox: function() {\n        return this.chartContainer.clipBox;\n    },\n\n    notifyRender: function() {\n        var service = this.getService();\n        if (service) {\n            service.notify(PANE_RENDER, {\n                pane: new ChartPane(this),\n                index: this.paneIndex,\n                name: this.options.name\n            });\n        }\n    }\n});\n\nvar ID = 1;\n\nfunction paneID() {\n    return \"pane\" + ID++;\n}\n\nPane.prototype.isStackRoot = true;\n\nsetDefaultOptions(Pane, {\n    zIndex: -1,\n    shrinkToFit: true,\n    title: {\n        align: LEFT\n    },\n    visible: true\n});\n\nfunction appendIfNotNull(array, element) {\n    if (element !== null) {\n        array.push(element);\n    }\n}\n\nfunction segmentVisible(series, fields, index) {\n    var visible = fields.visible;\n    if (defined(visible)) {\n        return visible;\n    }\n\n    var pointVisibility = series.pointVisibility;\n    if (pointVisibility) {\n        return pointVisibility[index];\n    }\n}\n\nfunction bindSegments(series) {\n    var data = series.data;\n    var points = [];\n    var sum = 0;\n    var count = 0;\n\n    for (var idx = 0; idx < data.length; idx++) {\n        var pointData = SeriesBinder.current.bindPoint(series, idx);\n        var value = pointData.valueFields.value;\n\n        if (isString(value)) {\n            value = parseFloat(value);\n        }\n\n        if (isNumber(value)) {\n            pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n            pointData.value = Math.abs(value);\n            points.push(pointData);\n\n            if (pointData.visible) {\n                sum += pointData.value;\n            }\n\n            if (value !== 0) {\n                count++;\n            }\n        } else {\n            points.push(null);\n        }\n    }\n\n    return {\n        total: sum,\n        points: points,\n        count: count\n    };\n}\n\nfunction equalsIgnoreCase(a, b) {\n    if (a && b) {\n        return a.toLowerCase() === b.toLowerCase();\n    }\n\n    return a === b;\n}\n\nfunction filterSeriesByType(series, types) {\n    var result = [];\n\n    var seriesTypes = [].concat(types);\n    for (var idx = 0; idx < series.length; idx++) {\n        var currentSeries = series[idx];\n        if (inArray(currentSeries.type, seriesTypes)) {\n            result.push(currentSeries);\n        }\n    }\n\n    return result;\n}\n\nfunction getDateField(field, row, intlService) {\n    if (row === null) {\n        return row;\n    }\n\n    var key = \"_date_\" + field;\n    var value = row[key];\n\n    if (!value) {\n        value = parseDate(intlService, getter(field, true)(row));\n        row[key] = value;\n    }\n\n    return value;\n}\n\nfunction isDateAxis(axisOptions, sampleCategory) {\n    var type = axisOptions.type;\n    var dateCategory = sampleCategory instanceof Date;\n\n    return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n}\n\nfunction singleItemOrArray(array) {\n    return array.length === 1 ? array[0] : array;\n}\n\nvar AREA_REGEX = /area/i;\n\nfunction seriesMissingValues(series) {\n    if (series.missingValues) {\n        return series.missingValues;\n    }\n\n    return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n}\n\nfunction hasValue$1(series, item) {\n    var fields = SeriesBinder.current.bindPoint(series, null, item);\n    var valueFields = fields.valueFields;\n\n    for (var field in valueFields) {\n        if (dataviz.convertableToNumber(valueFields[field])) {\n            return true;\n        }\n    }\n}\n\nfunction findNext(ref) {\n    var start = ref.start;\n    var dir = ref.dir;\n    var min = ref.min;\n    var max = ref.max;\n    var getter$$1 = ref.getter;\n    var hasItem = ref.hasItem;\n    var series = ref.series;\n\n    var pointHasValue, outPoint;\n    var idx = start;\n    do {\n        idx += dir;\n        //aggregating and binding the item takes too much time for large number of categories\n        //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n        if (hasItem(idx)) {\n            outPoint = getter$$1(idx);\n            pointHasValue = hasValue$1(series, outPoint.item);\n        }\n    } while (min <= idx && idx <= max && !pointHasValue);\n\n    if (pointHasValue) {\n        return outPoint;\n    }\n}\n\nfunction createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n    var min = range.min;\n    var max = range.max;\n    var hasMinPoint = min > 0 && min < count;\n    var hasMaxPoint = max + 1 < count;\n\n    if (hasMinPoint || hasMaxPoint) {\n        var missingValues = seriesMissingValues(series);\n        var minPoint, maxPoint;\n        if (missingValues !== INTERPOLATE) {\n            if (hasMinPoint) {\n                minPoint = getter$$1(min - 1);\n            }\n\n            if (hasMaxPoint) {\n                maxPoint = getter$$1(max + 1);\n            }\n        } else {\n            var outPoint, pointHasValue;\n            if (hasMinPoint) {\n                outPoint = getter$$1(min - 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    minPoint = findNext({\n                        start: min,\n                        dir: -1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    minPoint = outPoint;\n                }\n            }\n\n            if (hasMaxPoint) {\n                outPoint = getter$$1(max + 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    maxPoint = findNext({\n                        start: max,\n                        dir: 1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    maxPoint = outPoint;\n                }\n            }\n        }\n\n        if (minPoint) {\n            series._outOfRangeMinPoint = minPoint;\n        }\n\n        if (maxPoint) {\n            series._outOfRangeMaxPoint = maxPoint;\n        }\n    }\n}\n\nvar PlotAreaBase = ChartElement.extend({\n    init: function(series, options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.initFields(series, options);\n        this.series = series;\n        this.initSeries();\n        this.charts = [];\n        this.options.legend = this.options.legend || {};\n        this.options.legend.items = [];\n        this.axes = [];\n        this.crosshairs = [];\n        this.chartService = chartService;\n        this.originalOptions = options;\n\n        this.createPanes();\n        this.render();\n        this.createCrosshairs();\n    },\n\n    initFields: function() { },\n\n    initSeries: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            series[i].index = i;\n        }\n    },\n\n    createPanes: function() {\n        var this$1$1 = this;\n\n        var titleOptions = this.options.title || {};\n        var paneDefaults = this.options.paneDefaults;\n        var paneOptions = this.options.panes || [];\n        var panesLength = Math.max(paneOptions.length, 1);\n        var panes = [];\n\n        var defaults = deepExtend({\n            title: {\n                color: titleOptions.color\n            }\n        }, paneDefaults);\n\n        for (var i = 0; i < panesLength; i++) {\n            var options = deepExtend({}, defaults, paneOptions[i]);\n            if (isString(options.title)) {\n                options.title = deepExtend({ text: options.title }, defaults.title);\n            }\n\n            var currentPane = new Pane(options);\n            currentPane.paneIndex = i;\n\n            panes.push(currentPane);\n            this$1$1.append(currentPane);\n        }\n\n        this.panes = panes;\n    },\n\n    crosshairOptions: function(axis) {\n        return axis.options.crosshair;\n    },\n\n    createCrosshairs: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            for (var j = 0; j < pane.axes.length; j++) {\n                var axis = pane.axes[j];\n                var options = this$1$1.crosshairOptions(axis);\n                if (options && options.visible) {\n                    var currentCrosshair = new Crosshair(this$1$1.chartService, axis, options);\n\n                    this$1$1.crosshairs.push(currentCrosshair);\n                    pane.content.append(currentCrosshair);\n                }\n            }\n        }\n    },\n\n    removeCrosshairs: function(pane) {\n        var crosshairs = this.crosshairs;\n        var axes = pane.axes;\n\n        for (var i = crosshairs.length - 1; i >= 0; i--) {\n            for (var j = 0; j < axes.length; j++) {\n                if (crosshairs[i].axis === axes[j]) {\n                    crosshairs.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    hideCrosshairs: function() {\n        var crosshairs = this.crosshairs;\n        for (var idx = 0; idx < crosshairs.length; idx++) {\n            crosshairs[idx].hide();\n        }\n    },\n\n    findPane: function(name) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].options.name === name) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane || panes[0];\n    },\n\n    findPointPane: function(point) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].box.containsPoint(point)) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane;\n    },\n\n    appendAxis: function(axis) {\n        var pane = this.findPane(axis.options.pane);\n\n        pane.appendAxis(axis);\n        this.axes.push(axis);\n        axis.plotArea = this;\n    },\n\n    removeAxis: function(axisToRemove) {\n        var this$1$1 = this;\n\n        var filteredAxes = [];\n\n        for (var i = 0; i < this.axes.length; i++) {\n            var axis = this$1$1.axes[i];\n            if (axisToRemove !== axis) {\n                filteredAxes.push(axis);\n            } else {\n                axis.destroy();\n            }\n        }\n\n        this.axes = filteredAxes;\n    },\n\n    appendChart: function(chart, pane) {\n        this.charts.push(chart);\n        if (pane) {\n            pane.appendChart(chart);\n        } else {\n            this.append(chart);\n        }\n    },\n\n    removeChart: function(chartToRemove) {\n        var this$1$1 = this;\n\n        var filteredCharts = [];\n\n        for (var i = 0; i < this.charts.length; i++) {\n            var chart = this$1$1.charts[i];\n            if (chart !== chartToRemove) {\n                filteredCharts.push(chart);\n            } else {\n                chart.destroy();\n            }\n        }\n\n        this.charts = filteredCharts;\n    },\n\n    addToLegend: function(series) {\n        var count = series.length;\n        var legend = this.options.legend;\n        var labels = legend.labels || {};\n        var inactiveItems = legend.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n        var data = [];\n\n        for (var i = 0; i < count; i++) {\n            var currentSeries = series[i];\n            var seriesVisible = currentSeries.visible !== false;\n            if (currentSeries.visibleInLegend === false) {\n                continue;\n            }\n\n            var text = currentSeries.name;\n            var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: hasValue(text) ? text : \"\",\n                    series: currentSeries\n                });\n            }\n\n            var defaults = currentSeries._defaults;\n            var color = currentSeries.color;\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var itemLabelOptions = (void 0), markerColor = (void 0);\n            if (seriesVisible) {\n                itemLabelOptions = {};\n                markerColor = color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = inactiveItems.markers.color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                data.push({\n                    text: text,\n                    labels: itemLabelOptions,\n                    markerColor: markerColor,\n                    series: currentSeries,\n                    active: seriesVisible\n                });\n            }\n        }\n\n        append(legend.items, data);\n    },\n\n    groupAxes: function(panes) {\n        var xAxes = [];\n        var yAxes = [];\n\n        for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n            var paneAxes = panes[paneIx].axes;\n            for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                var axis = paneAxes[axisIx];\n                if (axis.options.vertical) {\n                    yAxes.push(axis);\n                } else {\n                    xAxes.push(axis);\n                }\n            }\n        }\n\n        return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n    },\n\n    groupSeriesByPane: function() {\n        var this$1$1 = this;\n\n        var series = this.series;\n        var seriesByPane = {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var pane = this$1$1.seriesPaneName(currentSeries);\n\n            if (seriesByPane[pane]) {\n                seriesByPane[pane].push(currentSeries);\n            } else {\n                seriesByPane[pane] = [ currentSeries ];\n            }\n        }\n\n        return seriesByPane;\n    },\n\n    filterVisibleSeries: function(series) {\n        var result = [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (currentSeries.visible !== false) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options.plotArea;\n        var panes = this.panes;\n        var margin = getSpacing(options.margin);\n\n        this.box = targetBox.clone().unpad(margin);\n        this.reflowPanes();\n\n        this.detachLabels();\n        this.reflowAxes(panes);\n        this.reflowCharts(panes);\n    },\n\n    redraw: function(panes) {\n        var this$1$1 = this;\n\n        var panesArray = [].concat(panes);\n        this.initSeries();\n\n        //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n        var root = this.getRoot();\n        if (root) {\n            root.cleanGradients();\n        }\n\n        for (var i = 0; i < panesArray.length; i++) {\n            this$1$1.removeCrosshairs(panesArray[i]);\n            panesArray[i].empty();\n        }\n\n        this.render(panesArray);\n        this.detachLabels();\n        this.reflowAxes(this.panes);\n        this.reflowCharts(panesArray);\n\n        this.createCrosshairs(panesArray);\n\n        for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n            panesArray[i$1].refresh();\n        }\n    },\n\n    axisCrossingValues: function(axis, crossingAxes) {\n        var options = axis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n        var valuesToAdd = crossingAxes.length - crossingValues.length;\n        var defaultValue = crossingValues[0] || 0;\n\n        for (var i = 0; i < valuesToAdd; i++) {\n            crossingValues.push(defaultValue);\n        }\n\n        return crossingValues;\n    },\n\n    alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n        var slot = axis.getSlot(crossingValue, crossingValue, true);\n        var slotEdge = axis.options.reverse ? 2 : 1;\n        var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n        var targetEdge = targetAxis.options.reverse ? 2 : 1;\n        var axisBox = axis.box.translate(\n            targetSlot[X + targetEdge] - slot[X + slotEdge],\n            targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n        );\n\n        if (axis.pane !== targetAxis.pane) {\n            axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n        }\n\n        axis.reflow(axisBox);\n    },\n\n    alignAxes: function(xAxes, yAxes) {\n        var this$1$1 = this;\n\n        var xAnchor = xAxes[0];\n        var yAnchor = yAxes[0];\n        var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n        var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n        var leftAnchors = {};\n        var rightAnchors = {};\n        var topAnchors = {};\n        var bottomAnchors = {};\n\n        for (var i = 0; i < yAxes.length; i++) {\n            var axis = yAxes[i];\n            var pane = axis.pane;\n            var paneId = pane.id;\n            var visible = axis.options.visible !== false;\n\n            // Locate pane anchor, if any, and use its axisCrossingValues\n            var anchor = paneAnchor(xAxes, pane) || xAnchor;\n            var anchorCrossings = xAnchorCrossings;\n\n            if (anchor !== xAnchor) {\n                anchorCrossings = this$1$1.axisCrossingValues(anchor, yAxes);\n            }\n\n            this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n            if (axis.options._overlap) {\n                continue;\n            }\n\n            if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                // Push the axis to the left the previous y-axis so they don't overlap\n                if (leftAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(leftAnchors[paneId].box, LEFT)\n                        .translate(-axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    leftAnchors[paneId] = axis;\n                }\n            }\n\n            if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                // Flip the labels on the right if we're at the right end of the pane\n                if (!axis._mirrored) {\n                    axis.options.labels.mirror = !axis.options.labels.mirror;\n                    axis._mirrored = true;\n                }\n\n                this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                // Push the axis to the right the previous y-axis so they don't overlap\n                if (rightAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(rightAnchors[paneId].box, RIGHT)\n                        .translate(axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    rightAnchors[paneId] = axis;\n                }\n            }\n\n            if (i !== 0 && yAnchor.pane === axis.pane) {\n                axis.alignTo(yAnchor);\n                axis.reflow(axis.box);\n            }\n        }\n\n        for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n            var axis$1 = xAxes[i$1];\n            var pane$1 = axis$1.pane;\n            var paneId$1 = pane$1.id;\n            var visible$1 = axis$1.options.visible !== false;\n\n            // Locate pane anchor and use its axisCrossingValues\n            var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n            var anchorCrossings$1 = yAnchorCrossings;\n            if (anchor$1 !== yAnchor) {\n                anchorCrossings$1 = this$1$1.axisCrossingValues(anchor$1, xAxes);\n            }\n\n            this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n            if (axis$1.options._overlap) {\n                continue;\n            }\n\n            if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                // Flip the labels on top if we're at the top of the pane\n                if (!axis$1._mirrored) {\n                    axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                    axis$1._mirrored = true;\n                }\n                this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                // Push the axis above the previous x-axis so they don't overlap\n                if (topAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(topAnchors[paneId$1].box, TOP)\n                        .translate(0, -axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    topAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                // Push the axis below the previous x-axis so they don't overlap\n                if (bottomAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                        .translate(0, axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    bottomAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (i$1 !== 0) {\n                axis$1.alignTo(xAnchor);\n                axis$1.reflow(axis$1.box);\n            }\n        }\n    },\n\n    shrinkAxisWidth: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var axisBox = axisGroupBox(axes);\n        var overflowX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n\n            if (currentPane.axes.length > 0) {\n                overflowX = Math.max(\n                    overflowX,\n                    axisBox.width() - currentPane.contentBox.width()\n                );\n            }\n        }\n\n        if (overflowX !== 0) {\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis = axes[i$1];\n\n                if (!currentAxis.options.vertical) {\n                    currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                }\n            }\n        }\n    },\n\n    shrinkAxisHeight: function(panes) {\n        var shrinked;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var axes = currentPane.axes;\n            var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n            if (overflowY !== 0) {\n                for (var j = 0; j < axes.length; j++) {\n                    var currentAxis = axes[j];\n\n                    if (currentAxis.options.vertical) {\n                        currentAxis.reflow(\n                            currentAxis.box.shrink(0, overflowY)\n                        );\n                    }\n                }\n                shrinked = true;\n            }\n        }\n\n        return shrinked;\n    },\n\n    fitAxes: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var offsetX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var paneAxes = currentPane.axes;\n            var paneBox = currentPane.contentBox;\n\n            if (paneAxes.length > 0) {\n                var axisBox = axisGroupBox(paneAxes);\n                // OffsetY is calculated and applied per pane\n                var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                // OffsetX is calculated and applied globally\n                offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                for (var j = 0; j < paneAxes.length; j++) {\n                    var currentAxis = paneAxes[j];\n\n                    currentAxis.reflow(\n                        currentAxis.box.translate(0, offsetY)\n                    );\n                }\n            }\n        }\n\n        for (var i$1 = 0; i$1 < axes.length; i$1++) {\n            var currentAxis$1 = axes[i$1];\n\n            currentAxis$1.reflow(\n                currentAxis$1.box.translate(offsetX, 0)\n            );\n        }\n    },\n\n    reflowAxes: function(panes) {\n        var this$1$1 = this;\n\n        var axes = this.groupAxes(panes);\n\n        for (var i = 0; i < panes.length; i++) {\n            this$1$1.reflowPaneAxes(panes[i]);\n        }\n\n        if (axes.x.length > 0 && axes.y.length > 0) {\n            this.alignAxes(axes.x, axes.y);\n            this.shrinkAxisWidth(panes);\n\n            this.autoRotateAxisLabels(axes);\n\n            this.alignAxes(axes.x, axes.y);\n            if (this.shrinkAxisWidth(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.shrinkAxisHeight(panes);\n            this.alignAxes(axes.x, axes.y);\n\n            if (this.shrinkAxisHeight(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.fitAxes(panes);\n        }\n    },\n\n    autoRotateAxisLabels: function(groupedAxes) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var panes = ref.panes;\n        var axes = allPaneAxes(panes);\n        var rotated;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            if (axis.autoRotateLabels()) {\n                rotated = true;\n            }\n        }\n\n        if (rotated) {\n            for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                this$1$1.reflowPaneAxes(panes[idx$1]);\n            }\n\n            if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                this.alignAxes(groupedAxes.x, groupedAxes.y);\n                this.shrinkAxisWidth(panes);\n            }\n        }\n    },\n\n    reflowPaneAxes: function(pane) {\n        var axes = pane.axes;\n        var length = axes.length;\n\n        if (length > 0) {\n            for (var i = 0; i < length; i++) {\n                axes[i].reflow(pane.contentBox);\n            }\n        }\n    },\n\n    reflowCharts: function(panes) {\n        var charts = this.charts;\n        var count = charts.length;\n        var box = this.box;\n\n        for (var i = 0; i < count; i++) {\n            var chartPane = charts[i].pane;\n            if (!chartPane || inArray(chartPane, panes)) {\n                charts[i].reflow(box);\n            }\n        }\n    },\n\n    reflowPanes: function() {\n        var ref = this;\n        var box = ref.box;\n        var panes = ref.panes;\n        var panesLength = panes.length;\n        var remainingHeight = box.height();\n        var remainingPanes = panesLength;\n        var autoHeightPanes = 0;\n        var top = box.y1;\n\n        for (var i = 0; i < panesLength; i++) {\n            var currentPane = panes[i];\n            var height = currentPane.options.height;\n\n            currentPane.options.width = box.width();\n\n            if (!currentPane.options.height) {\n                autoHeightPanes++;\n            } else {\n                if (height.indexOf && height.indexOf(\"%\")) {\n                    var percents = parseInt(height, 10) / 100;\n                    currentPane.options.height = percents * box.height();\n                }\n\n                currentPane.reflow(box.clone());\n\n                remainingHeight -= currentPane.options.height;\n            }\n        }\n\n        for (var i$1 = 0; i$1 < panesLength; i$1++) {\n            var currentPane$1 = panes[i$1];\n\n            if (!currentPane$1.options.height) {\n                currentPane$1.options.height = remainingHeight / autoHeightPanes;\n            }\n        }\n\n        for (var i$2 = 0; i$2 < panesLength; i$2++) {\n            var currentPane$2 = panes[i$2];\n            var paneBox = box\n                .clone()\n                .move(box.x1, top);\n\n            currentPane$2.reflow(paneBox);\n\n            remainingPanes--;\n            top += currentPane$2.options.height;\n        }\n    },\n\n    backgroundBox: function() {\n        var axes = this.axes;\n        var axesCount = axes.length;\n        var box;\n\n        for (var i = 0; i < axesCount; i++) {\n            var axisA = axes[i];\n\n            for (var j = 0; j < axesCount; j++) {\n                var axisB = axes[j];\n\n                if (axisA.options.vertical !== axisB.options.vertical) {\n                    var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                    if (!box) {\n                        box = lineBox;\n                    } else {\n                        box = box.wrap(lineBox);\n                    }\n                }\n            }\n        }\n\n        return box || this.box;\n    },\n\n    chartsBoxes: function() {\n        var panes = this.panes;\n        var boxes = [];\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            boxes.push(panes[idx].chartsBox());\n        }\n\n        return boxes;\n    },\n\n    addBackgroundPaths: function(multipath) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n        }\n    },\n\n    backgroundContainsPoint: function(point) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            if (boxes[idx].containsPoint(point)) {\n                return true;\n            }\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options.plotArea;\n        var opacity = options.opacity;\n        var background = options.background;\n        var border = options.border; if (border === void 0) { border = {}; }\n        if (isTransparent(background)) {\n            background = WHITE;\n            opacity = 0;\n        }\n\n        var bg = this._bgVisual = new drawing.MultiPath({\n            fill: {\n                color: background,\n                opacity: opacity\n            },\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            zIndex: -1\n        });\n\n        this.addBackgroundPaths(bg);\n\n        this.appendVisual(bg);\n    },\n\n    pointsByCategoryIndex: function(categoryIndex) {\n        var charts = this.charts;\n        var result = [];\n\n        if (categoryIndex !== null) {\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                if (chart.pane.options.name === \"_navigator\") {\n                    continue;\n                }\n\n                var points = charts[i].categoryPoints[categoryIndex];\n                if (points && points.length) {\n                    for (var j = 0; j < points.length; j++) {\n                        var point = points[j];\n                        if (point && defined(point.value) && point.value !== null) {\n                            result.push(point);\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    },\n\n    pointsBySeriesIndex: function(seriesIndex) {\n        return this.filterPoints(function(point) {\n            return point.series.index === seriesIndex;\n        });\n    },\n\n    pointsBySeriesName: function(name) {\n        return this.filterPoints(function(point) {\n            return point.series.name === name;\n        });\n    },\n\n    filterPoints: function(callback) {\n        var charts = this.charts;\n        var result = [];\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    result.push(point);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    findPoint: function(callback) {\n        var charts = this.charts;\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    return point;\n                }\n            }\n        }\n    },\n\n    paneByPoint: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            if (pane.box.containsPoint(point)) {\n                return pane;\n            }\n        }\n    },\n\n    detachLabels: function() {\n        var axes = this.groupAxes(this.panes);\n        var xAxes = axes.x;\n        var yAxes = axes.y;\n\n        this.detachAxisGroupLabels(yAxes, xAxes);\n        this.detachAxisGroupLabels(xAxes, yAxes);\n    },\n\n    detachAxisGroupLabels: function(axes, crossingAxes) {\n        var this$1$1 = this;\n\n        var labelAxisCount = 0;\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var pane = axis.pane;\n            var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n            var axisIndex = i + labelAxisCount;\n            var labelAxis = this$1$1.createLabelAxis(axis, axisIndex, anchor);\n\n            if (labelAxis) {\n                labelAxisCount++;\n\n                var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                pane.appendAxisAt(labelAxis, pos);\n            }\n        }\n    },\n\n    createLabelAxis: function(axis, axisIndex, anchor) {\n        var labelOptions = axis.options.labels;\n        var position = labelOptions.position;\n        var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n        var visible = labelOptions.visible;\n\n        if (onAxis || visible === false) {\n            return null;\n        }\n\n        var allAxes = this.groupAxes(this.panes);\n        var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n        var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n        var end = position === datavizConstants.END;\n        var range = anchor.range();\n        var edge = end ? range.max : range.min;\n        var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n        if (crossingValue - edge === 0) {\n            return null;\n        }\n\n        anchorCrossings.splice(axisIndex + 1, 0, edge);\n        anchor.options.axisCrossingValues = anchorCrossings;\n\n        var labelAxis = axis.clone();\n        axis.clear();\n\n        labelAxis.options.name = undefined;\n        labelAxis.options.line.visible = false;\n\n        labelAxis.options.crosshair = undefined;\n        labelAxis.options.notes = undefined;\n        labelAxis.options.plotBands = undefined;\n\n        return labelAxis;\n    }\n});\n\nfunction isSingleAxis(axis) {\n    return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n    );\n}\n\nfunction axisGroupBox(axes) {\n    var length = axes.length;\n    var box;\n\n    for (var i = 0; i < length; i++) {\n        var axis = axes[i];\n        var visible = axis.options.visible !== false;\n        if (visible || isSingleAxis(axis)) {\n            var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n            if (!box) {\n                box = axisBox.clone();\n            } else {\n                box.wrap(axisBox);\n            }\n        }\n    }\n\n    return box || new Box();\n}\n\nfunction paneAnchor(axes, pane) {\n    for (var i = 0; i < axes.length; i++) {\n        var anchor = axes[i];\n        if (anchor && anchor.pane === pane) {\n            return anchor;\n        }\n    }\n}\n\nfunction isTransparent(color) {\n    return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n}\n\nvar allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\nsetDefaultOptions(PlotAreaBase, {\n    series: [],\n    plotArea: {\n        margin: {}\n    },\n    background: \"\",\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    paneDefaults: {\n        title: {}\n    },\n    legend: {\n        inactiveItems: {\n            labels: {\n                color: \"#919191\"\n            },\n            markers: {\n                color: \"#919191\"\n            }\n        }\n    }\n});\n\nvar PlotAreaEventsMixin = {\n    hover: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n    },\n\n    click: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n    }\n};\n\nvar SeriesAggregator = Class.extend({\n    init: function(series, binder, defaultAggregates) {\n\n        var canonicalFields = binder.canonicalFields(series);\n        var valueFields = binder.valueFields(series);\n        var sourceFields = binder.sourceFields(series, canonicalFields);\n        var seriesFields = this._seriesFields = [];\n        var defaults = defaultAggregates.query(series.type);\n        var rootAggregate = series.aggregate || defaults;\n\n        this._series = series;\n        this._binder = binder;\n\n        for (var i = 0; i < canonicalFields.length; i++) {\n            var field = canonicalFields[i];\n            var fieldAggregate = (void 0);\n\n            if (isObject(rootAggregate)) {\n                fieldAggregate = rootAggregate[field];\n            } else if (i === 0 || inArray(field, valueFields)) {\n                fieldAggregate = rootAggregate;\n            } else {\n                break;\n            }\n\n            if (fieldAggregate) {\n                seriesFields.push({\n                    canonicalName: field,\n                    name: sourceFields[i],\n                    transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                });\n            }\n        }\n    },\n\n    aggregatePoints: function(srcPoints, group) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref._series;\n        var seriesFields = ref._seriesFields;\n        var data = this._bindPoints(srcPoints || []);\n        var firstDataItem = data.dataItems[0];\n        var result = {};\n\n        if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n            var fn = function() {};\n            fn.prototype = firstDataItem;\n            result = new fn();\n        }\n\n        for (var i = 0; i < seriesFields.length; i++) {\n            var field = seriesFields[i];\n            var srcValues = this$1$1._bindField(data.values, field.canonicalName);\n            var value = field.transform(srcValues, series, data.dataItems, group);\n\n            if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                result = value;\n                break;\n            } else {\n                if (defined(value)) {\n                    setValue(field.name, result, value);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    _bindPoints: function(points) {\n        var ref = this;\n        var binder = ref._binder;\n        var series = ref._series;\n        var values = [];\n        var dataItems = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var pointIx = points[i];\n\n            values.push(binder.bindPoint(series, pointIx));\n            dataItems.push(series.data[pointIx]);\n        }\n\n        return {\n            values: values,\n            dataItems: dataItems\n        };\n    },\n\n    _bindField: function(data, field) {\n        var values = [];\n        var count = data.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = data[i];\n            var valueFields = item.valueFields;\n            var value = (void 0);\n\n            if (defined(valueFields[field])) {\n                value = valueFields[field];\n            } else {\n                value = item.fields[field];\n            }\n\n            values.push(value);\n        }\n\n        return values;\n    }\n});\n\nfunction setValue(fieldName, target, value) {\n    var parentObj = target;\n    var field = fieldName;\n\n    if (fieldName.indexOf(\".\") > -1) {\n        var parts = fieldName.split(\".\");\n\n        while (parts.length > 1) {\n            field = parts.shift();\n            if (!defined(parentObj[field])) {\n                parentObj[field] = {};\n            }\n            parentObj = parentObj[field];\n        }\n        field = parts.shift();\n    }\n\n    parentObj[field] = value;\n}\n\nvar DefaultAggregates = Class.extend({\n    init: function() {\n\n        this._defaults = {};\n    },\n\n    register: function(seriesTypes, aggregates) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            this$1$1._defaults[seriesTypes[i]] = aggregates;\n        }\n    },\n\n    query: function(seriesType) {\n        return this._defaults[seriesType];\n    }\n});\n\nDefaultAggregates.current = new DefaultAggregates();\n\nvar RangeBar = Bar.extend({\n    createLabel: function() {\n        var labels = this.options.labels;\n        var fromOptions = deepExtend({}, labels, labels.from);\n        var toOptions = deepExtend({}, labels, labels.to);\n\n        if (fromOptions.visible) {\n            this.labelFrom = this._createLabel(fromOptions);\n            this.append(this.labelFrom);\n        }\n\n        if (toOptions.visible) {\n            this.labelTo = this._createLabel(toOptions);\n            this.append(this.labelTo);\n        }\n    },\n\n    _createLabel: function(options) {\n        var labelTemplate = getTemplate(options);\n        var pointData = this.pointData();\n\n        var labelText;\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else {\n            labelText = this.formatValue(options.format);\n        }\n\n        return new BarLabel(labelText,\n            deepExtend({\n                vertical: this.options.vertical\n            },\n            options\n        ), pointData);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var ref = this;\n        var labelFrom = ref.labelFrom;\n        var labelTo = ref.labelTo;\n        var value = ref.value;\n\n        this.box = targetBox;\n\n        if (labelFrom) {\n            labelFrom.options.aboveAxis = value.from > value.to;\n            labelFrom.reflow(targetBox);\n        }\n\n        if (labelTo) {\n            labelTo.options.aboveAxis = value.to > value.from;\n            labelTo.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n    }\n});\n\nRangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n    labels: {\n        format: \"{0} - {1}\"\n    },\n    tooltip: {\n        format: \"{1}\"\n    }\n});\n\nvar RangeBarChart = BarChart.extend({\n    pointType: function() {\n        return RangeBar;\n    },\n\n    pointValue: function(data) {\n        return data.valueFields;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value.from === null && point.value.to === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value.from, point.value.to);\n    },\n\n    plotRange: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var from = value.from;\n        var to = value.to;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (value !== null && isNumber(from) && isNumber(to)) {\n            axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, from);\n            axisRange.max = Math.max(axisRange.max, from);\n\n            axisRange.min = Math.min(axisRange.min, to);\n            axisRange.max = Math.max(axisRange.max, to);\n        }\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value;\n        return value.from < value.to;\n    }\n});\n\nRangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\nvar RangeLinePoint = LinePoint.extend({\n    aliasFor: function() {\n        return this.parent;\n    }\n});\n\nvar AUTO = 'auto';\nvar DEFAULT_FROM_FORMAT = '{0}';\nvar DEFAULT_TO_FORMAT = '{1}';\n\nvar RangeAreaPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n        this.initLabelsFormat();\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n        var value = this.value;\n\n        var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.from,\n            markers: markers.from\n        }));\n\n        var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.to,\n            markers: markers.to\n        }));\n\n        this.copyFields(fromPoint);\n        this.copyFields(toPoint);\n\n        this.append(fromPoint);\n        this.append(toPoint);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var fromBox = targetBox.from;\n        var toBox = targetBox.to;\n\n        this.positionLabels(fromBox, toBox);\n\n        this.fromPoint.reflow(fromBox);\n        this.toPoint.reflow(toBox);\n\n        this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n    },\n\n    createHighlight: function() {\n        var group = new Group();\n        group.append(this.fromPoint.createHighlight());\n        group.append(this.toPoint.createHighlight());\n\n        return group;\n    },\n\n    highlightVisual: function() {\n        return this.visual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            from: this.fromPoint.highlightVisualArgs(),\n            to: this.toPoint.highlightVisualArgs()\n        };\n    },\n\n    tooltipAnchor: function() {\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n        if (showTooltip) {\n            var box = this.box;\n            var center = box.center();\n            var horizontalAlign = LEFT;\n            var x, y, verticalAlign;\n\n            if (this.options.vertical) {\n                x = center.x;\n                y = box.y1 - TOOLTIP_OFFSET;\n                verticalAlign = BOTTOM;\n            } else {\n                x = box.x2 + TOOLTIP_OFFSET;\n                y = center.y;\n                verticalAlign = CENTER;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        this.fromPoint.unclipElements();\n        this.toPoint.unclipElements();\n    },\n\n    initLabelsFormat: function() {\n        var labels = this.options.labels;\n        if (!labels.format) {\n            if (!labels.from || !labels.from.format) {\n                labels.from = $.extend({}, labels.from, {\n                    format: DEFAULT_FROM_FORMAT\n                });\n            }\n\n            if (!labels.to || !labels.to.format) {\n                labels.to = $.extend({}, labels.to, {\n                    format: DEFAULT_TO_FORMAT\n                });\n            }\n        }\n    },\n\n    positionLabels: function(fromBox, toBox) {\n        var ref = this.options;\n        var labels = ref.labels;\n        var vertical = ref.vertical;\n\n        if (labels.position === AUTO) {\n            var fromLabelPosition, toLabelPosition;\n            if (vertical) {\n                if (toBox.y1 <= fromBox.y1) {\n                    toLabelPosition = ABOVE;\n                    fromLabelPosition = BELOW;\n                } else {\n                    toLabelPosition = BELOW;\n                    fromLabelPosition = ABOVE;\n                }\n            } else {\n                if (toBox.x1 <= fromBox.x1) {\n                    toLabelPosition = LEFT;\n                    fromLabelPosition = RIGHT;\n                } else {\n                    toLabelPosition = RIGHT;\n                    fromLabelPosition = LEFT;\n                }\n            }\n\n            if (!labels.from || !labels.from.position) {\n                this.fromPoint.options.labels.position = fromLabelPosition;\n            }\n\n            if (!labels.to || !labels.to.position) {\n                this.toPoint.options.labels.position = toLabelPosition;\n            }\n        }\n    },\n\n    copyFields: function(point) {\n        point.dataItem = this.dataItem;\n        point.category = this.category;\n        point.series = this.series;\n        point.color = this.color;\n        point.owner = this.owner;\n    }\n});\n\ndeepExtend(RangeAreaPoint.prototype, PointEventsMixin);\ndeepExtend(RangeAreaPoint.prototype, NoteMixin);\n\nRangeAreaPoint.prototype.defaults = {\n    markers: {\n        visible: false,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        position: AUTO\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: WHITE,\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    tooltip: {\n        format: '{0} - {1}'\n    }\n};\n\nvar RangeAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n        }\n\n        return fromSegments;\n    },\n\n    createStroke: function(style) {\n        var toPath = new Path(style);\n        var fromPath = new Path(style);\n\n        toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n        fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n        this.visual.append(toPath);\n        this.visual.append(fromPath);\n    },\n\n    hasStackSegment: function() {\n        return true;\n    },\n\n    fromPoints: function() {\n        return this.linePoints.map(function (point) { return point.fromPoint; });\n    },\n\n    toPoints: function() {\n        return this.linePoints.map(function (point) { return point.toPoint; });\n    }\n});\n\nvar SplineRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.createCurveSegments(this.toPoints());\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n        }\n\n        return fromSegments;\n    },\n\n    createCurveSegments: function(points) {\n        var curveProcessor = new CurveProcessor();\n\n        return curveProcessor.process(this.toGeometryPoints(points));\n    }\n});\n\nvar StepRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n            fromSegments.reverse();\n        }\n\n        return fromSegments;\n    }\n});\n\ndeepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\nvar RangeAreaChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return RangeAreaPoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var value = data.valueFields;\n\n        if (!hasValue(value.from) && !hasValue(value.to)) {\n            if (this.seriesMissingValues(series) === ZERO) {\n                value = {\n                    from: 0,\n                    to: 0\n                };\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new RangeAreaPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segmentType;\n        if (style === \"smooth\") {\n            segmentType = SplineRangeAreaSegment;\n        } else if (style === \"step\") {\n            segmentType = StepRangeAreaSegment;\n        } else {\n            segmentType = RangeAreaSegment;\n        }\n\n        return new segmentType(linePoints, currentSeries, seriesIx);\n    },\n\n    plotRange: function(point, startValue) {\n        if (!point) {\n            return [ startValue, startValue ];\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n        var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n        if (fromSlot && toSlot) {\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        }\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var from = valueSlot.from;\n        var to = valueSlot.to;\n        var fromSlot, toSlot;\n\n        if (this.options.invertAxes) {\n            fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n            toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n        } else {\n            fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n            toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n        }\n\n        return {\n            from: fromSlot,\n            to: toSlot\n        };\n    },\n\n    addValue: function(data, fields) {\n        var valueFields = data.valueFields;\n        if (!isNumber(valueFields.from)) {\n            valueFields.from = valueFields.to;\n        }\n\n        if (!isNumber(valueFields.to)) {\n            valueFields.to = valueFields.from;\n        }\n\n        CategoricalChart.fn.addValue.call(this, data, fields);\n    },\n\n    updateRange: function(value, fields) {\n        if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n            var from = value.from;\n            var to = value.to;\n\n            axisRange.min = Math.min(axisRange.min, from, to);\n            axisRange.max = Math.max(axisRange.max, from, to);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format, value.from, value.to);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point) {\n                result.push((point.fromPoint || {}).marker);\n                result.push((point.toPoint || {}).marker);\n            }\n        }\n\n        return result.concat(this._segments);\n    }\n});\n\ndeepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar OHLCPoint = Candlestick.extend({\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var oPoints = [];\n        var cPoints = [];\n        var lhPoints = [];\n\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n        var oSlot = valueAxis.getSlot(value.open, value.open);\n        var cSlot = valueAxis.getSlot(value.close, value.close);\n\n        oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n        oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n        var mid = lhSlot.center().x;\n\n        oPoints.push([ oSlot.x1, oSlot.y1 ]);\n        oPoints.push([ mid, oSlot.y1 ]);\n        cPoints.push([ mid, cSlot.y1 ]);\n        cPoints.push([ cSlot.x2, cSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y2 ]);\n\n        this.lines = [\n            oPoints, cPoints, lhPoints\n        ];\n\n        this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n        this.reflowNote();\n    },\n\n    createBody: function() {}\n});\n\nvar OHLCChart = CandlestickChart.extend({\n    pointType: function() {\n        return OHLCPoint;\n    }\n});\n\nvar WaterfallSegment = ChartElement.extend({\n    init: function(from, to, series) {\n        ChartElement.fn.init.call(this);\n\n        this.from = from;\n        this.to = to;\n        this.series = series;\n    },\n\n    linePoints: function() {\n        var from = this.from;\n        var ref = this;\n        var fromBox = ref.from.box;\n        var toBox = ref.to.box;\n        var points = [];\n\n        if (from.isVertical) {\n            var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n            points.push(\n                [ fromBox.x1, y ],\n                [ toBox.x2, y ]\n            );\n        } else {\n            var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n            points.push(\n                [ x, fromBox.y1 ],\n                [ x, toBox.y2 ]\n            );\n        }\n\n        return points;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var line = this.series.line || {};\n\n        var path = Path.fromPoints(this.linePoints(), {\n            stroke: {\n                color: line.color,\n                width: line.width,\n                opacity: line.opacity,\n                dashType: line.dashType\n            }\n        });\n\n        alignPathToPixel(path);\n        this.visual.append(path);\n    }\n});\n\nsetDefaultOptions(WaterfallSegment, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    }\n});\n\nvar WaterfallChart = BarChart.extend({\n    render: function() {\n        BarChart.fn.render.call(this);\n        this.createSegments();\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var totalCategories = categoriesCount(series);\n        var isVertical = !this.options.invertAxes;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var total = 0;\n            var runningTotal = 0;\n\n            for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                var value = data.valueFields.value;\n                var summary = data.fields.summary;\n                var from = total;\n                var to = (void 0);\n\n                if (summary) {\n                    if (summary.toLowerCase() === \"total\") {\n                        data.valueFields.value = total;\n                        from = 0;\n                        to = total;\n                    } else {\n                        data.valueFields.value = runningTotal;\n                        to = from - runningTotal;\n                        runningTotal = 0;\n                    }\n                } else if (isNumber(value)) {\n                    runningTotal += value;\n                    total += value;\n                    to = total;\n                }\n\n                callback(data, {\n                    category: this$1$1.categoryAxis.categoryAt(categoryIx),\n                    categoryIx: categoryIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    total: total,\n                    runningTotal: runningTotal,\n                    from: from,\n                    to: to,\n                    isVertical: isVertical\n                });\n            }\n        }\n    },\n\n    updateRange: function(value, fields) {\n        BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n    },\n\n    aboveAxis: function(point) {\n        return point.value >= 0;\n    },\n\n    plotRange: function(point) {\n        return [ point.from, point.to ];\n    },\n\n    createSegments: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var seriesPoints = this.seriesPoints;\n        var segments = this.segments = [];\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var points = seriesPoints[seriesIx];\n\n            if (points) {\n                var prevPoint = (void 0);\n                for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                    var point = points[pointIx];\n\n                    if (point && prevPoint) {\n                        var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                        segments.push(segment);\n                        this$1$1.append(segment);\n                    }\n\n                    prevPoint = point;\n                }\n            }\n        }\n    }\n});\n\nvar AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\nvar OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\nvar CategoricalPlotArea = PlotAreaBase.extend({\n    initFields: function(series) {\n        var this$1$1 = this;\n\n        this.namedCategoryAxes = {};\n        this.namedValueAxes = {};\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n\n        if (series.length > 0) {\n            this.invertAxes = inArray(\n                series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                                 RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n            );\n\n            for (var i = 0; i < series.length; i++) {\n                var stack = series[i].stack;\n                if (stack && stack.type === \"100%\") {\n                    this$1$1.stack100 = true;\n                    break;\n                }\n            }\n        }\n\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.createCategoryAxes(panes);\n        this.aggregateCategories(panes);\n        this.createCategoryAxesLabels(panes);\n        this.createCharts(panes);\n        this.createValueAxes(panes);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis instanceof CategoryAxis) {\n            delete this.namedCategoryAxes[axisName];\n        } else {\n            this.valueAxisRangeTracker.reset(axisName);\n            delete this.namedValueAxes[axisName];\n        }\n\n        if (axis === this.categoryAxis) {\n            delete this.categoryAxis;\n        }\n\n        if (axis === this.valueAxis) {\n            delete this.valueAxis;\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n\n            var visibleSeries = this$1$1.filterVisibleSeries(paneSeries);\n            if (!visibleSeries) {\n                continue;\n            }\n\n            var groups = this$1$1.groupSeriesByCategoryAxis(visibleSeries);\n            for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                this$1$1.createChartGroup(groups[groupIx], pane);\n            }\n        }\n    },\n\n    createChartGroup: function(series, pane) {\n        this.createAreaChart(\n            filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n        );\n\n        this.createRangeAreaChart(\n            filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ COLUMN, BAR ]), pane\n        );\n\n        this.createRangeBarChart(\n            filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n        );\n\n        this.createBulletChart(\n            filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n        );\n\n        this.createCandlestickChart(\n            filterSeriesByType(series, CANDLESTICK), pane\n        );\n\n        this.createBoxPlotChart(\n            filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n        );\n\n        this.createOHLCChart(\n            filterSeriesByType(series, OHLC), pane\n        );\n\n        this.createWaterfallChart(\n            filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n        );\n    },\n\n    aggregateCategories: function(panes) {\n        var this$1$1 = this;\n\n        var series = this.srcSeries || this.series;\n        var processedSeries = [];\n        this._currentPointsCache = {};\n        this._seriesPointsCache = this._seriesPointsCache || {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var categoryAxis = this$1$1.seriesCategoryAxis(currentSeries);\n            var axisPane = this$1$1.findPane(categoryAxis.options.pane);\n            var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n            if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                currentSeries = this$1$1.aggregateSeries(currentSeries, categoryAxis);\n            } else {\n                currentSeries = this$1$1.filterSeries(currentSeries, categoryAxis);\n            }\n\n            processedSeries.push(currentSeries);\n        }\n\n        this._seriesPointsCache = this._currentPointsCache;\n        this._currentPointsCache = null;\n\n        this.srcSeries = series;\n        this.series = processedSeries;\n    },\n\n    filterSeries: function(series, categoryAxis) {\n        var dataLength = (series.data || {}).length;\n        categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n        if (!(isNumber(categoryAxis.options.min) || isNumber(categoryAxis.options.max))) {\n            return series;\n        }\n\n        var range = categoryAxis.currentRangeIndices();\n        var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n        var currentSeries = deepExtend({}, series);\n\n        currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n        if (outOfRangePoints) {\n            createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                item: series.data[idx],\n                category: categoryAxis.categoryAt(idx, true),\n                categoryIx: idx - range.min\n            }); }, function (idx) { return defined(series.data[idx]); });\n        }\n\n        return currentSeries;\n    },\n\n    clearSeriesPointsCache: function() {\n        this._seriesPointsCache = {};\n    },\n\n    seriesSourcePoints: function(series, categoryAxis) {\n        var this$1$1 = this;\n\n        var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n        if (this._seriesPointsCache[key]) {\n            this._currentPointsCache[key] = this._seriesPointsCache[key];\n            return this._seriesPointsCache[key];\n        }\n\n        var axisOptions = categoryAxis.options;\n        var srcCategories = axisOptions.srcCategories;\n        var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n        var srcData = series.data;\n        var getFn = dateAxis ? getDateField : getField;\n        var result = [];\n        if (!dateAxis) {\n            categoryAxis.mapCategories();//fixes major performance issue caused by searching for the index for large data\n        }\n\n        for (var idx = 0; idx < srcData.length; idx++) {\n            var category = (void 0);\n            if (series.categoryField) {\n                category = getFn(series.categoryField, srcData[idx], this$1$1.chartService.intl);\n            } else {\n                category = srcCategories[idx];\n            }\n\n            if (defined(category) && category !== null) {\n                var categoryIx = categoryAxis.totalIndex(category);\n                result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                result[categoryIx].items.push(idx);\n            }\n        }\n\n        this._currentPointsCache[key] = result;\n\n        return result;\n    },\n\n    aggregateSeries: function(series, categoryAxis) {\n        var srcData = series.data;\n        if (!srcData.length) {\n            return series;\n        }\n\n        var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n        var result = deepExtend({}, series);\n        var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n        var data = result.data = [];\n        var dataItems = categoryAxis.options.dataItems || [];\n\n        var range = categoryAxis.currentRangeIndices();\n        var categoryItem = function (idx) {\n            var categoryIdx = idx - range.min;\n            var point = srcPoints[idx];\n            if (!point) {\n                point = srcPoints[idx] = {};\n            }\n\n            point.categoryIx = categoryIdx;\n\n            if (!point.item) {\n                var category = categoryAxis.categoryAt(idx, true);\n                point.category = category;\n                point.item = aggregator.aggregatePoints(point.items, category);\n            }\n\n            return point;\n        };\n\n        for (var idx = range.min; idx <= range.max; idx++) {\n            var point = categoryItem(idx);\n            data[point.categoryIx] = point.item;\n\n            if (point.items && point.items.length) {\n                dataItems[point.categoryIx] = point.item;\n            }\n        }\n\n        if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n            createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n        }\n\n        categoryAxis.options.dataItems = dataItems;\n\n        return result;\n    },\n\n    appendChart: function(chart, pane) {\n        var series = chart.options.series;\n        var categoryAxis = this.seriesCategoryAxis(series[0]);\n        var categories = categoryAxis.options.categories;\n        var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n        if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n            categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n            while (categoriesToAdd--) {\n                categories.push(\"\");\n            }\n        }\n\n        this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var axisName = series.axis;\n        var axisOptions = [].concat(options.valueAxis);\n        var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = (panes[0] || {}).name || \"default\";\n        var paneName = (axis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesCategoryAxis: function(series) {\n        var axisName = series.categoryAxis;\n        var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate category axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    stackableChartOptions: function(firstSeries, pane) {\n        var stack = firstSeries.stack;\n        var isStacked100 = stack && stack.type === \"100%\";\n        var clip = pane.options.clip;\n\n        return {\n            isStacked: stack,\n            isStacked100: isStacked100,\n            clip: clip\n        };\n    },\n\n    groupSeriesByCategoryAxis: function(series) {\n        var categoryAxes = [];\n        var unique = {};\n        for (var idx = 0; idx < series.length; idx++) {\n            var name = series[idx].categoryAxis || \"$$default$$\";\n            if (!unique.hasOwnProperty(name)) {\n                unique[name] = true;\n                categoryAxes.push(name);\n            }\n        }\n\n        var groups = [];\n        for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n            var axis = categoryAxes[axisIx];\n            var axisSeries = groupSeries(series, axis, axisIx);\n            if (axisSeries.length === 0) {\n                continue;\n            }\n\n            groups.push(axisSeries);\n        }\n\n        return groups;\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var barChart = new BarChart(this, $.extend({\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(barChart, pane);\n    },\n\n    createRangeBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var rangeColumnChart = new RangeBarChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(rangeColumnChart, pane);\n    },\n\n    createBulletChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var bulletChart = new BulletChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(bulletChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var lineChart = new LineChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var areaChart = new AreaChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(firstSeries, pane)));\n\n        this.appendChart(areaChart, pane);\n    },\n\n    createRangeAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var rangeAreaChart = new RangeAreaChart(this, {\n            invertAxes: this.invertAxes,\n            series: series,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(rangeAreaChart, pane);\n    },\n\n    createOHLCChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new OHLCChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createCandlestickChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new CandlestickChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createBoxPlotChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new BoxPlotChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createWaterfallChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var waterfallChart = new WaterfallChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(waterfallChart, pane);\n    },\n\n    axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n        var this$1$1 = this;\n\n        var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n        for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n            var currentSeries = this$1$1.series[seriesIx];\n            if (inArray(currentSeries.type, AREA_SERIES)) {\n                var line = currentSeries.line;\n                if (line && line.style === STEP) {\n                    centeredSeries.push(currentSeries);\n                }\n            }\n        }\n\n        for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n            var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n            if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                return true;\n            }\n        }\n    },\n\n    aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var seriesAxis = series[seriesIx].categoryAxis || \"\";\n            if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                return true;\n            }\n        }\n    },\n\n    createCategoryAxesLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            if (axes[i] instanceof CategoryAxis) {\n                axes[i].createLabels();\n            }\n        }\n    },\n\n    createCategoryAxes: function(panes) {\n        var this$1$1 = this;\n\n        var invertAxes = this.invertAxes;\n        var definitions = [].concat(this.options.categoryAxis);\n        var axes = [];\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                axisOptions = deepExtend({\n                    vertical: invertAxes,\n                    reverse: !invertAxes && this$1$1.chartService.rtl,\n                    axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                }, axisOptions);\n\n                if (!defined(axisOptions.justified)) {\n                    axisOptions.justified = this$1$1.isJustified();\n                }\n\n                if (this$1$1.axisRequiresRounding(name, i)) {\n                    axisOptions.justified = false;\n                }\n\n                var categoryAxis = (void 0);\n\n                if (isDateAxis(axisOptions, categories[0])) {\n                    categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1$1.chartService);\n                } else {\n                    categoryAxis = new CategoryAxis(axisOptions, this$1$1.chartService);\n                }\n\n                definitions[i].categories = categoryAxis.options.srcCategories;\n\n                if (name) {\n                    if (this$1$1.namedCategoryAxes[name]) {\n                        throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedCategoryAxes[name] = categoryAxis;\n                }\n\n                categoryAxis.axisIndex = i;\n                axes.push(categoryAxis);\n                this$1$1.appendAxis(categoryAxis);\n            }\n        }\n\n        var primaryAxis = this.categoryAxis || axes[0];\n        this.categoryAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisY = primaryAxis;\n        } else {\n            this.axisX = primaryAxis;\n        }\n    },\n\n    isJustified: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (!inArray(currentSeries.type, AREA_SERIES)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    createValueAxes: function(panes) {\n        var this$1$1 = this;\n\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var definitions = [].concat(this.options.valueAxis);\n        var invertAxes = this.invertAxes;\n        var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n        var axes = [];\n\n        if (this.stack100) {\n            baseOptions.roundToMajorUnit = false;\n            baseOptions.labels = { format: \"P0\" };\n        }\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                if (i === 0 && range && defaultRange) {\n                    range.min = Math.min(range.min, defaultRange.min);\n                    range.max = Math.max(range.max, defaultRange.max);\n                }\n\n                var axisType = (void 0);\n                if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                    axisType = dataviz.LogarithmicAxis;\n                } else {\n                    axisType = dataviz.NumericAxis;\n                }\n\n                var valueAxis = new axisType(range.min, range.max,\n                    deepExtend({}, baseOptions, axisOptions),\n                    this$1$1.chartService\n                );\n\n                if (name) {\n                    if (this$1$1.namedValueAxes[name]) {\n                        throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedValueAxes[name] = valueAxis;\n                }\n                valueAxis.axisIndex = i;\n\n                axes.push(valueAxis);\n                this$1$1.appendAxis(valueAxis);\n            }\n        }\n\n        var primaryAxis = this.valueAxis || axes[0];\n        this.valueAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisX = primaryAxis;\n        } else {\n            this.axisY = primaryAxis;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var pane = this.pointPane(point);\n        var categories = [];\n        var values = [];\n\n        if (!pane) {\n            return;\n        }\n\n        var allAxes = pane.axes;\n        for (var i = 0; i < allAxes.length; i++) {\n            var axis = allAxes[i];\n            if (axis.getValue) {\n                appendIfNotNull(values, axis.getValue(point));\n            } else {\n                appendIfNotNull(categories, axis.getCategory(point));\n            }\n        }\n\n        if (categories.length === 0) {\n            appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n        }\n\n        if (categories.length > 0 && values.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                category: singleItemOrArray(categories),\n                value: singleItemOrArray(values)\n            });\n        }\n    },\n\n    pointPane: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            if (currentPane.contentBox.containsPoint(point)) {\n                return currentPane;\n            }\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        updateAxisOptions(this.options, axis, options);\n        updateAxisOptions(this.originalOptions, axis, options);\n    }\n});\n\nfunction updateAxisOptions(targetOptions, axis, options) {\n    var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n    deepExtend(axesOptions[axis.axisIndex], options);\n}\n\nfunction groupSeries(series, axis, axisIx) {\n    return grep(series, function(s) {\n        return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n    });\n}\n\nsetDefaultOptions(CategoricalPlotArea, {\n    categoryAxis: {},\n    valueAxis: {}\n});\n\ndeepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\nvar Highlight = Class.extend({\n    init: function() {\n\n        this._points = [];\n    },\n\n    destroy: function() {\n        this._points = [];\n    },\n\n    show: function(points, opacity) {\n        var this$1$1 = this;\n\n        var arrayPoints = [].concat(points);\n        this.hide();\n\n        for (var i = 0; i < arrayPoints.length; i++) {\n            var point = arrayPoints[i];\n            if (point && point.toggleHighlight && point.hasHighlight()) {\n                this$1$1.togglePointHighlight(point, true, opacity);\n                this$1$1._points.push(point);\n            }\n        }\n    },\n\n    togglePointHighlight: function(point, show, opacity) {\n        var toggleHandler = (point.options.highlight || {}).toggle;\n        if (toggleHandler) {\n            var eventArgs = {\n                category: point.category,\n                series: point.series,\n                dataItem: point.dataItem,\n                value: point.value,\n                stackValue: point.stackValue,\n                preventDefault: preventDefault,\n                visual: point.highlightVisual(),\n                show: show\n            };\n            toggleHandler(eventArgs);\n            if (!eventArgs._defaultPrevented) {\n                point.toggleHighlight(show, opacity);\n            }\n        } else {\n            point.toggleHighlight(show, opacity);\n        }\n    },\n\n    hide: function() {\n        var this$1$1 = this;\n\n        var points = this._points;\n        while (points.length) {\n            this$1$1.togglePointHighlight(points.pop(), false);\n        }\n    },\n\n    isHighlighted: function(element) {\n        var points = this._points;\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            if (element === point) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n});\n\nfunction preventDefault() {\n    this._defaultPrevented = true;\n}\n\nfunction acceptKey(e, mouseKey) {\n    var key = (mouseKey || \"\").toLowerCase();\n    var event = e.event;\n    var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n    return accept;\n}\n\nfunction toChartAxisRanges(axisRanges) {\n    var ranges = {};\n    for (var idx = 0; idx < axisRanges.length; idx++) {\n        var axisRange = axisRanges[idx];\n        if (axisRange.axis.options.name) {\n            ranges[axisRange.axis.options.name] = {\n                min: axisRange.range.min,\n                max: axisRange.range.max\n            };\n        }\n    }\n    return ranges;\n}\n\nvar Pannable = Class.extend({\n    init: function(plotArea, options) {\n\n        this.plotArea = plotArea;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    start: function(e) {\n        this._active = acceptKey(e, this.options.key);\n        return this._active;\n    },\n\n    move: function(e) {\n        if (this._active) {\n            var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n            if (axisRanges.length) {\n                this.axisRanges = axisRanges;\n                return toChartAxisRanges(axisRanges);\n            }\n        }\n    },\n\n    end: function() {\n        var active = this._active;\n        this._active = false;\n\n        return active;\n    },\n\n    pan: function() {\n        var ref = this;\n        var plotArea = ref.plotArea;\n        var axisRanges = ref.axisRanges;\n        if (axisRanges.length) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var range = axisRanges[idx];\n                plotArea.updateAxisOptions(range.axis, range.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.plotArea;\n    },\n\n    _panAxes: function(e, position) {\n        var plotArea = this.plotArea;\n        var delta = -e[position].delta;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var updatedAxes = [];\n\n        if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n            var axes = plotArea.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n\n                if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    var range = axis.pan(delta);\n\n                    if (range) {\n                        range.limitRange = true;\n                        updatedAxes.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n        }\n\n        return updatedAxes;\n    }\n});\n\nPannable.prototype.options = {\n    key: \"none\",\n    lock: \"none\"\n};\n\nvar ZoomSelection = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({}, this.options, options);\n        this.createElement();\n    },\n\n    createElement: function() {\n        var marquee = this._marquee = document.createElement(\"div\");\n        marquee.className = \"k-marquee\";\n        var marqueeColor = document.createElement(\"div\");\n        marqueeColor.className = \"k-marquee-color\";\n        marquee.appendChild(marqueeColor);\n    },\n\n    removeElement: function() {\n        if (this._marquee.parentNode) {\n            this._marquee.parentNode.removeChild(this._marquee);\n        }\n    },\n\n    setStyles: function(styles) {\n        elementStyles(this._marquee, styles);\n    },\n\n    start: function(e) {\n        if (acceptKey(e, this.options.key)) {\n            var chart = this.chart;\n            var point = chart._eventCoordinates(e);\n            var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n            var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n            if (zoomPane && clipBox) {\n                var offset = this._elementOffset();\n\n                clipBox.translate(offset.left, offset.top);\n                this._zoomPaneClipBox = clipBox;\n\n                document.body.appendChild(this._marquee);\n                this.setStyles({\n                    left: e.pageX + 1,\n                    top: e.pageY + 1,\n                    width: 0,\n                    height: 0\n                });\n\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _elementOffset: function() {\n        var chartElement = this.chart.element;\n        var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref.paddingLeft;\n        var paddingTop = ref.paddingTop;\n        var offset = dataviz.elementOffset(chartElement);\n\n        return {\n            left: paddingLeft + offset.left,\n            top: paddingTop + offset.top\n        };\n    },\n\n    move: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            this.setStyles(this._selectionPosition(e));\n        }\n    },\n\n    end: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            var elementOffset$$1 = this._elementOffset();\n            var selectionPosition = this._selectionPosition(e);\n            selectionPosition.left -= elementOffset$$1.left;\n            selectionPosition.top -= elementOffset$$1.top;\n\n            var start = { x: selectionPosition.left, y: selectionPosition.top };\n            var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n            this._updateAxisRanges(start, end);\n\n            this.removeElement();\n            delete this._zoomPane;\n\n            return toChartAxisRanges(this.axisRanges);\n        }\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        if (axisRanges && axisRanges.length) {\n            var plotArea = this.chart._plotArea;\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        this.removeElement();\n        delete this._marquee;\n        delete this.chart;\n    },\n\n    _updateAxisRanges: function(start, end) {\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n\n        var axes = this._zoomPane.axes;\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                var range = axis.pointsRange(start, end);\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n    },\n\n    _selectionPosition: function(e) {\n        var clipBox = this._zoomPaneClipBox;\n        var startLocation = {\n            x: e.x.startLocation,\n            y: e.y.startLocation\n        };\n        var pageX = e.x.location;\n        var pageY = e.y.location;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var left = Math.min(startLocation.x, pageX);\n        var top = Math.min(startLocation.y, pageY);\n        var width = Math.abs(startLocation.x - pageX);\n        var height = Math.abs(startLocation.y - pageY);\n\n        if (lock === X) {\n            left = clipBox.x1;\n            width = clipBox.width();\n        }\n        if (lock === Y) {\n            top = clipBox.y1;\n            height = clipBox.height();\n        }\n\n        if (pageX > clipBox.x2) {\n            width = clipBox.x2 - startLocation.x;\n        }\n\n        if (pageX < clipBox.x1) {\n            width = startLocation.x - clipBox.x1;\n        }\n\n        if (pageY > clipBox.y2) {\n            height = clipBox.y2 - startLocation.y;\n        }\n\n        if (pageY < clipBox.y1) {\n            height = startLocation.y - clipBox.y1;\n        }\n\n        return {\n            left: Math.max(left, clipBox.x1),\n            top: Math.max(top, clipBox.y1),\n            width: width,\n            height: height\n        };\n    }\n});\n\nZoomSelection.prototype.options = {\n    key: \"shift\",\n    lock: \"none\"\n};\n\nvar ref = drawing.util;\nvar limitValue$1 = ref.limitValue;\n\n// Limit the zoom rate between 1% and 90% per mousewheel event.\n// At zoom rates close to 100% the axis range quickly becomes 0.\nvar MIN_RATE = 0.01;\nvar MAX_RATE = 0.9;\nvar DEFAULT_RATE = 0.3;\n\nvar MousewheelZoom = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({\n            rate: DEFAULT_RATE\n        }, this.options, options);\n    },\n\n    updateRanges: function(delta, coords) {\n        var this$1$1 = this;\n\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n        var axes = this.chart._plotArea.axes;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                var rate = limitValue$1(this$1$1.options.rate, MIN_RATE, MAX_RATE);\n                var range = axis.zoomRange(-delta * rate, coords);\n\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n        return toChartAxisRanges(axisRanges);\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        var plotArea = this.chart._plotArea;\n\n        if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.chart;\n    }\n});\n\nvar LegendLayout = ChartElement.extend({\n    init: function(options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n    },\n\n    render: function() {\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var vertical = options.vertical;\n\n        this.visual = new drawing.Layout(null, {\n            spacing: vertical ? 0 : options.spacing,\n            lineSpacing: vertical ? options.spacing : 0,\n            orientation: vertical ? \"vertical\" : \"horizontal\",\n            reverse: options.rtl,\n            alignItems: vertical ? \"start\" : \"center\"\n        });\n\n        for (var idx = 0; idx < children.length; idx++) {\n            var legendItem = children[idx];\n            legendItem.reflow(new Box());\n            legendItem.renderVisual();\n        }\n    },\n\n    reflow: function(box) {\n        this.visual.rect(box.toRect());\n        this.visual.reflow();\n        var bbox = this.visual.clippedBBox();\n\n        if (bbox) {\n            this.box = dataviz.rectToBox(bbox);\n        } else {\n            this.box = new Box();\n        }\n    },\n\n    renderVisual: function() {\n        this.addVisual();\n    },\n\n    createVisual: function() {}\n});\n\nvar LegendItem = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.createContainer();\n        if (!options.rtl) {\n            this.createMarker();\n            this.createLabel();\n        } else {\n            this.createLabel();\n            this.createMarker();\n        }\n    },\n\n    createContainer: function() {\n        this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n        this.append(this.container);\n    },\n\n    createMarker: function() {\n        this.container.append(new ShapeElement(this.markerOptions()));\n    },\n\n    markerOptions: function() {\n        var options = this.options;\n        var markerColor = options.markerColor;\n        return deepExtend({}, options.markers, {\n            background: markerColor,\n            border: {\n                color: markerColor\n            }\n        });\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labelOptions = deepExtend({}, options.labels);\n\n        this.container.append(new TextBox(options.text, labelOptions));\n    },\n\n    renderComplete: function() {\n        BoxElement.fn.renderComplete.call(this);\n\n        var cursor = this.options.cursor || {};\n        var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null,\n            cursor: cursor.style || cursor\n        });\n\n        this.appendVisual(eventSink);\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n            widget._legendItemHover(args.seriesIndex, args.pointIndex);\n        }\n\n        // Don't trigger point hover for legend items\n        return true;\n    },\n\n    out: function(widget, e) {\n        widget._unsetActivePoint();\n\n        widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return {\n            element: eventElement(e),\n            text: options.text,\n            series: options.series,\n            seriesIndex: options.series.index,\n            pointIndex: options.pointIndex\n        };\n    },\n\n    renderVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n\n        if (customVisual) {\n            this.visual = customVisual({\n                active: options.active,\n                series: options.series,\n                sender: this.getSender(),\n                pointIndex: options.pointIndex,\n                options: {\n                    markers: this.markerOptions(),\n                    labels: options.labels\n                },\n                createVisual: function () {\n                    this$1$1.createVisual();\n                    this$1$1.renderChildren();\n                    this$1$1.renderComplete();\n\n                    var defaultVisual = this$1$1.visual;\n\n                    delete this$1$1.visual;\n\n                    return defaultVisual;\n                }\n            });\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    }\n});\n\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = {}; }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainers();\n\n        this.createLegendTitle(options.title);\n\n        this.createItems();\n    },\n\n    createContainers: function() {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === \"start\") {\n                align = LEFT;\n            } else if (userAlign === \"end\") {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === \"start\") {\n                vAlign = TOP;\n            } else if (userAlign === \"end\") {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        if (this.hasTitle()) {\n            this.itemsContainer = new BoxElement({\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n        } else {\n            this.itemsContainer = this.container;\n        }\n\n        this.append(this.container);\n    },\n\n    createItems: function() {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var items = options.items;\n\n        if (options.reverse) {\n            items = items.slice(0).reverse();\n        }\n\n        var count = items.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = items[i];\n\n            innerElement.append(new LegendItem(deepExtend({}, {\n                markers: options.markers,\n                labels: options.labels,\n                rtl: chartService.rtl\n            }, options.item, item)));\n        }\n\n        innerElement.render();\n        this.itemsContainer.append(innerElement);\n    },\n\n    isVertical: function() {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n               (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    },\n\n    hasItems: function() {\n        return this.container.children[0].children.length > 0;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n\n        if (this.hasTitle()) {\n            this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n        }\n    },\n\n    containerReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    },\n\n    containerCustomReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    },\n\n    renderVisual: function() {\n        if (this.hasItems()) {\n            ChartElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLegendTitle: function(title) {\n        var titleOptions = deepExtend({}, {\n            color: BLACK,\n            position: TOP,\n            align: CENTER\n        }, title);\n        var text = titleOptions.text;\n\n        if (!title || title.visible === false) {\n            return;\n        }\n\n        if (defined(titleOptions) && titleOptions.visible) {\n            var labelTemplate = getTemplate(titleOptions);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text });\n            } else if (titleOptions.format) {\n                text = this.chartService.format.auto(titleOptions.format, text);\n            }\n        }\n\n        this.title = new TextBox(text, titleOptions);\n\n        this.createTitleLayout();\n\n        this.appendTitleLayoutContent();\n    },\n\n    createTitleLayout: function() {\n        this.layout = new dataviz.FloatElement({\n            vertical: true,\n            wrap: false\n        });\n\n        this.container.append(this.layout);\n    },\n\n    hasTitle: function() {\n        return Boolean(this.options.title && this.options.title.visible !== false);\n    },\n\n    appendTitleLayoutContent: function() {\n        var options = this.options;\n\n        if (options.title.position === BOTTOM) {\n            this.layout.append(this.itemsContainer);\n            this.layout.append(this.title);\n        } else {\n            this.layout.append(this.title);\n            this.layout.append(this.itemsContainer);\n        }\n    }\n});\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    items: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(5),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {\n        border: {\n            width: 0\n        },\n        width: 15,\n        height: 3,\n        type: \"rect\",\n        align: LEFT,\n        vAlign: CENTER\n    }\n});\n\nvar PlotAreaFactory = Class.extend({\n    init: function() {\n\n        this._registry = [];\n    },\n\n    register: function(type, seriesTypes) {\n        this._registry.push({\n            type: type,\n            seriesTypes: seriesTypes\n        });\n    },\n\n    create: function(srcSeries, options, chartService) {\n        var registry = this._registry;\n        var match = registry[0];\n        var series;\n\n        for (var idx = 0; idx < registry.length; idx++) {\n            var entry = registry[idx];\n            series = filterSeriesByType(srcSeries, entry.seriesTypes);\n\n            if (series.length > 0) {\n                match = entry;\n                break;\n            }\n        }\n\n        return new match.type(series, options, chartService);\n    }\n});\n\nPlotAreaFactory.current = new PlotAreaFactory();\n\nvar ZOOM_ACCELERATION = 3;\nvar SELECTOR_HEIGHT_ADJUST = 0.1;\n\nfunction createDiv(classNames) {\n    var element = document.createElement(\"div\");\n    if (classNames) {\n        element.className = classNames;\n    }\n\n    return element;\n}\n\nfunction closestHandle(element) {\n    var current = element;\n    while (current && !dataviz.hasClasses(current, \"k-handle\")) {\n        current = current.parentNode;\n    }\n\n    return current;\n}\n\nvar Selection = Class.extend({\n    init: function(chart, categoryAxis, options, observer) {\n\n        var chartElement = chart.element;\n\n        this.options = deepExtend({}, this.options, options);\n        this.chart = chart;\n        this.observer = observer;\n        this.chartElement = chartElement;\n        this.categoryAxis = categoryAxis;\n        this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n        this.initOptions();\n\n        this.visible = this.options.visible && chartElement.offsetHeight;\n\n        if (this.visible) {\n            this.createElements();\n\n            this.set(this._index(this.options.from), this._index(this.options.to));\n\n            this.bindEvents();\n        }\n    },\n\n    onPane: function(pane) {\n        return this.categoryAxis.pane === pane;\n    },\n\n    createElements: function() {\n        var options = this.options;\n        var wrapper = this.wrapper = createDiv(\"k-selector k-pointer-events-none\");\n        elementStyles(wrapper, {\n            top: options.offset.top,\n            left: options.offset.left,\n            width: options.width,\n            height: options.height,\n            direction: 'ltr'\n        });\n\n        var selection = this.selection = createDiv(\"k-selection k-pointer-events-none\");\n\n        this.leftMask = createDiv(\"k-mask k-pointer-events-none\");\n        this.rightMask = createDiv(\"k-mask k-pointer-events-none\");\n\n        wrapper.appendChild(this.leftMask);\n        wrapper.appendChild(this.rightMask);\n        wrapper.appendChild(selection);\n\n        var body = this.body = createDiv(\"k-selection-bg k-pointer-events-none\");\n        selection.appendChild(body);\n\n        var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle k-pointer-events-auto\");\n        var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle k-pointer-events-auto\");\n        leftHandle.appendChild(createDiv());\n        rightHandle.appendChild(createDiv());\n\n        selection.appendChild(leftHandle);\n        selection.appendChild(rightHandle);\n\n        this.chartElement.appendChild(wrapper);\n        var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n        var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n        var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n        options.selection = {\n            border: {\n                left: selectionStyles.borderLeftWidth,\n                right: selectionStyles.borderRightWidth\n            }\n        };\n\n        elementStyles(leftHandle, {\n            top: (selectionStyles.height - leftHandleHeight) / 2\n        });\n\n        elementStyles(rightHandle, {\n            top: (selectionStyles.height - rightHandleHeight) / 2\n        });\n\n        wrapper.style.cssText = wrapper.style.cssText;\n    },\n\n    bindEvents: function() {\n        if (this.options.mousewheel !== false) {\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            var obj;\n            bindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n        }\n\n        this._domEvents = services.DomEventsBuilder.create(this.chartElement, {\n            stopPropagation: true, // applicable for the jQuery UserEvents\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            press: this._press.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n    },\n\n    initOptions: function() {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var box = categoryAxis.pane.chartsBox();\n        var intlService = this.chart.chartService.intl;\n\n        if (this._dateAxis) {\n            deepExtend(options, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                from: parseDate(intlService, options.from),\n                to: parseDate(intlService, options.to)\n            });\n        }\n\n        var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref$1.paddingLeft;\n        var paddingTop = ref$1.paddingTop;\n\n        this.options = deepExtend({}, {\n            width: box.width(),\n            height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n            padding: {\n                left: paddingLeft,\n                top: paddingTop\n            },\n            offset: {\n                left: box.x1 + paddingLeft,\n                top: box.y1 + paddingTop\n            },\n            from: options.min,\n            to: options.max\n        }, options);\n    },\n\n    destroy: function() {\n        if (this._domEvents) {\n            this._domEvents.destroy();\n            delete this._domEvents;\n        }\n\n        clearTimeout(this._mwTimeout);\n        this._state = null;\n\n        if (this.wrapper) {\n            if (this._mousewheelHandler) {\n                var obj;\n                unbindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                this._mousewheelHandler = null;\n            }\n\n            this.chartElement.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    },\n\n    _rangeEventArgs: function(range) {\n\n        return {\n            axis: this.categoryAxis.options,\n            from: this._value(range.from),\n            to: this._value(range.to)\n        };\n    },\n\n    _pointInPane: function(x, y) {\n        var paneBox = this.categoryAxis.pane.box;\n        var modelCoords = this.chart._toModelCoordinates(x, y);\n        return paneBox.containsPoint(modelCoords);\n    },\n\n    _start: function(e) {\n        var options = this.options;\n        var target = eventElement(e);\n        if (this._state || !target) {\n            return;\n        }\n\n        var coords = dataviz.eventCoordinates(e);\n        var inPane = this._pointInPane(coords.x, coords.y);\n        if (!inPane) {\n            return;\n        }\n\n        var handle = closestHandle(target);\n        var bodyRect = this.body.getBoundingClientRect();\n        var inBody = !handle && coords.x >= bodyRect.x && coords.x <= bodyRect.x + bodyRect.width &&\n                       coords.y >= bodyRect.y && coords.y <= bodyRect.y + bodyRect.height;\n\n        this.chart._unsetActivePoint();\n        this._state = {\n            moveTarget: handle,\n            startLocation: e.x ? e.x.location : 0,\n            inBody: inBody,\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n\n        var args = this._rangeEventArgs({\n            from: this._index(options.from),\n            to: this._index(options.to)\n        });\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        }\n    },\n\n    _press: function(e) {\n        var handle;\n        if (this._state) {\n            handle = this._state.moveTarget;\n        } else {\n            handle = closestHandle(eventElement(e));\n        }\n        if (handle) {\n            dataviz.addClass(handle, \"k-handle-active\");\n        }\n    },\n\n    _move: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var target = state.moveTarget;\n        var reverse = categoryAxis.options.reverse;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var delta = state.startLocation - e.x.location;\n        var oldRange = { from: range.from, to: range.to };\n        var span = range.to - range.from;\n        var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n        var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n        if (!target && !state.inBody) {\n            return;\n        }\n\n        var leftHandle = target && dataviz.hasClasses(target, \"k-left-handle\");\n        var rightHandle = target && dataviz.hasClasses(target, \"k-right-handle\");\n\n        if (state.inBody) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n            range.to = Math.min(\n                range.from + span,\n                max\n            );\n        } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - 1\n            );\n            range.to = Math.max(range.from + 1, range.to);\n        } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n            range.to = Math.min(\n                Math.max(min + 1, to - offset),\n                max\n            );\n            range.from = Math.min(range.to - 1, range.from);\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.move(range.from, range.to);\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        }\n    },\n\n    _end: function() {\n        if (this._state) {\n            var moveTarget = this._state.moveTarget;\n            if (moveTarget) {\n                dataviz.removeClass(moveTarget, \"k-handle-active\");\n            }\n\n            var range = this._state.range;\n            this.set(range.from, range.to);\n            this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n            delete this._state;\n        }\n    },\n\n    _tap: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var coords = this.chart._eventCoordinates(e);\n        var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var span = to - from;\n        var mid = from + span / 2;\n        var range = {};\n        var rightClick = e.event.which === 3;\n        var offset = Math.round(mid - categoryIx);\n\n        if (this._state || rightClick) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n\n        if (!categoryAxis.options.justified) {\n            offset--;\n        }\n\n        range.from = Math.min(\n            Math.max(min, from - offset),\n            max - span\n        );\n\n        range.to = Math.min(range.from + span, max);\n\n        this._start(e);\n\n        if (this._state) {\n            this._state.range = range;\n            this.trigger(SELECT, this._rangeEventArgs(range));\n            this._end();\n        }\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n\n        this._start(e);\n\n        if (this._state) {\n            var range = this._state.range;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (Math.abs(delta) > 1) {\n                delta *= ZOOM_ACCELERATION;\n            }\n\n            if (this.options.mousewheel.reverse) {\n                delta *= -1;\n            }\n\n            if (this.expand(delta)) {\n                this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                });\n            }\n\n            if (this._mwTimeout) {\n                clearTimeout(this._mwTimeout);\n            }\n\n            this._mwTimeout = setTimeout(function () {\n                this$1$1._end();\n            }, MOUSEWHEEL_DELAY);\n        }\n    },\n\n    _gesturestart: function(e) {\n        var options = this.options;\n        var touch = e.touches[0];\n        var inPane = this._pointInPane(touch.pageX, touch.pageY);\n\n        if (!inPane) {\n            return;\n        }\n\n        this._state = {\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n        var args = this._rangeEventArgs(this._state.range);\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        } else {\n            e.preventDefault();\n        }\n    },\n\n    _gestureend: function() {\n        if (this._state) {\n            this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n            delete this._state;\n        }\n    },\n\n    _gesturechange: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var chart = ref.chart;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n        var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n        var left = Math.min(p0, p1);\n        var right = Math.max(p0, p1);\n\n        e.preventDefault();\n\n        range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n        range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n        this.move(range.from, range.to);\n\n        this.trigger(SELECT, this._rangeEventArgs(range));\n    },\n\n    _index: function(value) {\n        var index = value;\n\n        if (value instanceof Date) {\n            index = this.categoryAxis.categoryIndex(value);\n        }\n\n        return index;\n    },\n\n    _value: function(index) {\n        var value = index;\n        if (this._dateAxis) {\n            value = this.categoryAxis.categoryAt(index);\n            if (value > this.options.max) {\n                value = this.options.max;\n            }\n        }\n\n        return value;\n    },\n\n    _slot: function(value) {\n        var categoryAxis = this.categoryAxis;\n        var index = this._index(value);\n\n        return categoryAxis.getSlot(index, index, true);\n    },\n\n    move: function(from, to) {\n        var options = this.options;\n        var reverse = this.categoryAxis.options.reverse;\n        var offset = options.offset;\n        var padding = options.padding;\n        var border = options.selection.border;\n        var left = reverse ? to : from;\n        var right = reverse ? from : to;\n        var edge = 'x' + (reverse ? 2 : 1);\n\n        var box = this._slot(left);\n        var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n        elementStyles(this.leftMask, {\n            width: leftMaskWidth\n        });\n        elementStyles(this.selection, {\n            left: leftMaskWidth\n        });\n\n        box = this._slot(right);\n\n        var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n        elementStyles(this.rightMask, {\n            width: rightMaskWidth\n        });\n\n        var distance = options.width - rightMaskWidth;\n        if (distance !== options.width) {\n            distance += border.right;\n        }\n\n        elementStyles(this.rightMask, {\n            left: distance\n        });\n        elementStyles(this.selection, {\n            width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n        });\n    },\n\n    set: function(from, to) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var fromValue = limitValue(this._index(from), min, max);\n        var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n        if (options.visible) {\n            this.move(fromValue, toValue);\n        }\n\n        options.from = this._value(fromValue);\n        options.to = this._value(toValue);\n    },\n\n    expand: function(delta) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var zDir = options.mousewheel.zoom;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        if (zDir !== RIGHT) {\n            range.from = limitValue(\n                limitValue(from - delta, 0, to - 1),\n                min, max\n            );\n        }\n\n        if (zDir !== LEFT) {\n            range.to = limitValue(\n                limitValue(to + delta, range.from + 1, max),\n                min,\n                max\n             );\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    zoom: function(delta, coords) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        var ref = this.categoryAxis.options;\n        var reverse = ref.reverse;\n        var origin = X + (reverse ? '2' : '1');\n        var lineBox = this.categoryAxis.lineBox();\n        var relative = Math.abs(lineBox[origin] - coords[X]);\n        var size = lineBox.width();\n        var position = round(relative / size, 2);\n        var minDelta = round(position * delta);\n        var maxDelta = round((1 - position) * delta);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        range.from = limitValue(\n            limitValue(from - minDelta, 0, to - 1),\n            min, max\n        );\n\n        range.to = limitValue(\n            limitValue(to + maxDelta, range.from + 1, max),\n            min,\n            max\n        );\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    trigger: function(name, args) {\n        return (this.observer || this.chart).trigger(name, args);\n    }\n});\n\nsetDefaultOptions(Selection, {\n    visible: true,\n    mousewheel: {\n        zoom: \"both\"\n    },\n    min: MIN_VALUE,\n    max: MAX_VALUE\n});\n\nvar Tooltip = BaseTooltip.extend({\n    show: function(point) {\n        if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n            return;\n        }\n\n        var options = deepExtend({}, this.options, point.options.tooltip);\n        var anchor = point.tooltipAnchor();\n\n        if (anchor) {\n            this._current = point;\n            BaseTooltip.fn.show.call(this, {\n                point: point,\n                anchor: anchor\n            }, options, point);\n        } else {\n            this.hide();\n        }\n    },\n\n    hide: function() {\n        delete this._current;\n        BaseTooltip.fn.hide.call(this);\n    }\n});\n\nvar SharedTooltip = BaseTooltip.extend({\n    init: function(plotArea, options) {\n        BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n        this.plotArea = plotArea;\n        this.formatService = plotArea.chartService.format;\n    },\n\n    showAt: function(points, coords) {\n        var tooltipPoints = grep(points, function(point) {\n            var tooltip = point.series.tooltip;\n            var excluded = tooltip && tooltip.visible === false;\n\n            return !excluded;\n        });\n\n        if (tooltipPoints.length > 0) {\n            var point = tooltipPoints[0];\n            var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n            var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n            this.show({\n                anchor: anchor,\n                shared: true,\n                points: points,\n                category: point.category,\n                categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                series: this.plotArea.series\n            }, this.options);\n        }\n    },\n\n    _slotAnchor: function(point, slot) {\n        var axis = this.plotArea.categoryAxis;\n        var align = {\n            horizontal: \"left\",\n            vertical: \"center\"\n        };\n\n        if (!axis.options.vertical) {\n            point.x = slot.center().x;\n        }\n\n        return {\n            point: point,\n            align: align\n        };\n    },\n\n    _defaultAnchor: function(point, slot) {\n        var box = point.owner.pane.chartsBox();\n        var vertical = this.plotArea.categoryAxis.options.vertical;\n        var center = box.center();\n        var slotCenter = slot.center();\n        var align = {\n            horizontal: \"center\",\n            vertical: \"center\"\n        };\n\n        var centerPoint;\n        if (vertical) {\n            centerPoint = new Point(center.x, slotCenter.y);\n        } else {\n            centerPoint = new Point(slotCenter.x, center.y);\n        }\n\n        return {\n            point: centerPoint,\n            align: align\n        };\n    }\n});\n\nsetDefaultOptions(SharedTooltip, {\n    categoryFormat: '{0:d}'\n});\n\nvar BarChartAnimation = Animation.extend({\n    setup: function() {\n        var ref = this;\n        var element = ref.element;\n        var options = ref.options;\n        var bbox = element.bbox();\n\n        if (bbox) {\n            this.origin = options.origin;\n            var axis = options.vertical ? Y : X;\n\n            var fromScale = this.fromScale = new GeometryPoint(1, 1);\n            fromScale[axis] = START_SCALE;\n\n            element.transform(transform()\n                .scale(fromScale.x, fromScale.y)\n            );\n        } else {\n            this.abort();\n        }\n    },\n\n    step: function(pos) {\n        var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n        var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n        this.element.transform(transform()\n            .scale(scaleX, scaleY, this.origin)\n        );\n    },\n\n    abort: function() {\n        Animation.fn.abort.call(this);\n        this.element.transform(null);\n    }\n});\n\nsetDefaultOptions(BarChartAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(BAR, BarChartAnimation);\n\nvar BubbleAnimation = Animation.extend({\n    setup: function() {\n        var center = this.center = this.element.bbox().center();\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.center)\n        );\n    }\n});\n\nsetDefaultOptions(BubbleAnimation, {\n    easing: \"easeOutElastic\"\n});\n\nAnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\nvar FadeInAnimation = Animation.extend({\n    setup: function() {\n        this.fadeTo = this.element.opacity();\n        this.element.opacity(0);\n    },\n\n    step: function(pos) {\n        this.element.opacity(pos * this.fadeTo);\n    }\n});\n\nsetDefaultOptions(FadeInAnimation, {\n    duration: 200,\n    easing: \"linear\"\n});\n\nAnimationFactory.current.register(FADEIN, FadeInAnimation);\n\nvar PieAnimation = Animation.extend({\n    setup: function() {\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, this.options.center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.options.center)\n        );\n    }\n});\n\nsetDefaultOptions(PieAnimation, {\n    easing: \"easeOutElastic\",\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(PIE, PieAnimation);\n\nvar ScatterLineChart = ScatterChart.extend({\n    render: function() {\n        ScatterChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = ScatterChart.fn.animationPoints.call(this);\n        return points.concat(this._segments);\n    },\n\n    createMissingValue: function(value, missingValues) {\n        if (missingValues === ZERO) {\n            var missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (!hasValue(missingValue.x)) {\n                missingValue.x = 0;\n            }\n            if (!hasValue(missingValue.y)) {\n                missingValue.y = 0;\n            }\n            return missingValue;\n        }\n    }\n});\n\ndeepExtend(ScatterLineChart.prototype, LineChartMixin);\n\nvar XYPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n\n        this.xAxisRangeTracker = new AxisGroupRangeTracker();\n        this.yAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createScatterChart(\n                filterSeriesByType(filteredSeries, SCATTER),\n                pane\n            );\n\n            this$1$1.createScatterLineChart(\n                filterSeriesByType(filteredSeries, SCATTER_LINE),\n                pane\n            );\n\n            this$1$1.createBubbleChart(\n                filterSeriesByType(filteredSeries, BUBBLE),\n                pane\n            );\n        }\n\n        this.createAxes(panes);\n    },\n\n    appendChart: function(chart, pane) {\n        this.xAxisRangeTracker.update(chart.xAxisRanges);\n        this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            this.yAxisRangeTracker.reset(axisName);\n            delete this.namedYAxes[axisName];\n        } else {\n            this.xAxisRangeTracker.reset(axisName);\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createScatterLineChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createBubbleChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n        var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n        var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n        var defaultRange = tracker.query();\n        var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n        var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n        var typeSamples = [ axisOptions.min, axisOptions.max ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        if (axisIndex === 0 && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateValueAxis;\n        } else if (isLog) {\n            axisType = dataviz.LogarithmicAxis;\n        } else {\n            axisType = dataviz.NumericAxis;\n        }\n\n        var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            var currentValue = axis.getValue(point);\n            if (currentValue !== null) {\n                values.push(currentValue);\n            }\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$1(this.options, index, vertical, options);\n        updateAxisOptions$1(this.originalOptions, index, vertical, options);\n    }\n});\n\nfunction updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(XYPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\nvar PieSegment = ChartElement.extend({\n    init: function(value, sector, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.sector = sector;\n    },\n\n    render: function() {\n        var labels = this.options.labels;\n        var chartService = this.owner.chartService;\n        var labelText = this.value;\n\n        if (this._rendered || this.visible === false) {\n            return;\n        }\n        this._rendered = true;\n\n        var labelTemplate = getTemplate(labels);\n        var pointData = this.pointData();\n\n        if (labelTemplate) {\n            labelText = labelTemplate(pointData);\n        } else if (labels.format) {\n            labelText = chartService.format.auto(labels.format, labelText);\n        }\n\n        if (labels.visible && (labelText || labelText === 0)) {\n            if (labels.position === CENTER || labels.position === INSIDE_END) {\n                if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(this.options.color);\n                }\n                if (!labels.background) {\n                    labels.background = this.options.color;\n                }\n            } else {\n                var themeLabels = chartService.theme.seriesDefaults.labels;\n                labels.color = labels.color || themeLabels.color;\n                labels.background = labels.background || themeLabels.background;\n            }\n\n            this.label = new TextBox(labelText, deepExtend({}, labels, {\n                align: CENTER,\n                vAlign: \"\",\n                animation: {\n                    type: FADEIN,\n                    delay: this.animationDelay\n                }\n            }), pointData);\n\n            this.append(this.label);\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n        this.box = targetBox;\n        this.reflowLabel();\n    },\n\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var labelsDistance = labelsOptions.distance;\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            var labelWidth = label.box.width();\n            var lp;\n\n            if (labelsOptions.position === CENTER) {\n                sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else if (labelsOptions.position === INSIDE_END) {\n                sector.radius = sector.radius - labelHeight / 2;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                var x1;\n                lp = sector.clone().expand(labelsDistance).point(angle);\n                if (lp.x >= sector.center.x) {\n                    x1 = lp.x + labelWidth;\n                    label.orientation = RIGHT;\n                } else {\n                    x1 = lp.x - labelWidth;\n                    label.orientation = LEFT;\n                }\n                label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (this.value) {\n            if (options.visual) {\n                var startAngle = (sector.startAngle + 180) % 360;\n                var visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    center: new GeometryPoint(sector.center.x, sector.center.y),\n                    radius: sector.radius,\n                    innerRadius: sector.innerRadius,\n                    startAngle: startAngle,\n                    endAngle: startAngle + sector.angle,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createSegmentVisual(group);\n\n                        return group;\n                    }\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else {\n                this.createSegmentVisual(this.visual);\n            }\n        }\n    },\n\n    createSegmentVisual: function(group) {\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n        var borderOptions = options.border || {};\n        var border = borderOptions.width > 0 ? {\n            stroke: {\n                color: borderOptions.color,\n                width: borderOptions.width,\n                opacity: borderOptions.opacity,\n                dashType: borderOptions.dashType\n            }\n        } : {};\n        var color = options.color;\n        var fill = {\n            color: color,\n            opacity: options.opacity\n        };\n        var visual = this.createSegment(sector, deepExtend({\n            fill: fill,\n            stroke: {\n                opacity: options.opacity\n            },\n            zIndex: options.zIndex\n        }, border));\n\n        group.append(visual);\n\n        if (hasGradientOverlay(options)) {\n            group.append(this.createGradientOverlay(visual, {\n                baseColor: color,\n                fallbackFill: fill\n            }, deepExtend({\n                center: [ sector.center.x, sector.center.y ],\n                innerRadius: sector.innerRadius,\n                radius: sector.radius,\n                userSpace: true\n            }, options.overlay)));\n        }\n    },\n\n    createSegment: function(sector, options) {\n        if (options.singleSegment) {\n            return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n        }\n\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    },\n\n    createAnimation: function() {\n        var ref = this;\n        var options = ref.options;\n        var center = ref.sector.center;\n\n        deepExtend(options, {\n            animation: {\n                center: [ center.x, center.y ],\n                delay: this.animationDelay\n            }\n        });\n\n        ChartElement.fn.createAnimation.call(this);\n    },\n\n    createHighlight: function(options) {\n        var highlight = this.options.highlight || {};\n        var border = highlight.border || {};\n\n        return this.createSegment(this.sector, deepExtend({}, options, {\n            fill: {\n                color: highlight.color,\n                opacity: highlight.opacity\n            },\n            stroke: {\n                opacity: border.opacity,\n                width: border.width,\n                color: border.color\n            }\n        }));\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var sector = this.sector;\n\n        return {\n            options: this.options,\n            radius: sector.radius,\n            innerRadius: sector.innerRadius,\n            center: new GeometryPoint(sector.center.x, sector.center.y),\n            startAngle: sector.startAngle,\n            endAngle: sector.angle + sector.startAngle,\n            visual: this.visual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n\n        return {\n            point: midPoint,\n            align: tooltipAlignment(midAndle + 180)\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series,\n            percentage: this.percentage\n        };\n    }\n});\n\nvar RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\nvar RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\nfunction tooltipAlignment(angle) {\n    var radians = dataviz.rad(angle);\n    var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n    var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n    var horizontal;\n    if (Math.abs(sine) > RAD_60) {\n        horizontal = CENTER;\n    } else if (cosine < 0) {\n        horizontal = RIGHT;\n    } else {\n        horizontal = LEFT;\n    }\n\n    var vertical;\n    if (Math.abs(sine) < RAD_30) {\n        vertical = CENTER;\n    } else if (sine < 0) {\n        vertical = BOTTOM;\n    } else {\n        vertical = TOP;\n    }\n\n    return {\n        horizontal: horizontal,\n        vertical: vertical\n    };\n}\n\nsetDefaultOptions(PieSegment, {\n    color: WHITE,\n    overlay: {\n        gradient: \"roundedBevel\"\n    },\n    border: {\n        width: 0.5\n    },\n    labels: {\n        visible: false,\n        distance: 35,\n        font: datavizConstants.DEFAULT_FONT,\n        margin: getSpacing(0.5),\n        align: CIRCLE,\n        zIndex: 1,\n        position: OUTSIDE_END\n    },\n    animation: {\n        type: PIE\n    },\n    highlight: {\n        visible: true,\n        border: {\n            width: 1\n        }\n    },\n    visible: true\n});\n\ndeepExtend(PieSegment.prototype, PointEventsMixin);\n\nvar PieChartMixin = {\n    createLegendItem: function(value, point, options) {\n        var legendOptions = this.options.legend || {};\n        var labelsOptions = legendOptions.labels || {};\n        var inactiveItems = legendOptions.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n\n        if (options && options.visibleInLegend !== false) {\n            var pointVisible = options.visible !== false;\n            var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n            var text = options.category;\n\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: text,\n                    series: options.series,\n                    dataItem: options.dataItem,\n                    percentage: options.percentage,\n                    value: value\n                });\n            }\n\n            var itemLabelOptions, markerColor;\n            if (pointVisible) {\n                itemLabelOptions = {};\n                markerColor = point.color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = (inactiveItems.markers || {}).color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                this.legendItems.push({\n                    active: pointVisible,\n                    pointIndex: options.index,\n                    text: text,\n                    series: options.series,\n                    markerColor: markerColor,\n                    labels: itemLabelOptions\n                });\n            }\n        }\n    }\n};\n\nvar PIE_SECTOR_ANIM_DELAY = 70;\n\nvar PieChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.points = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var colorsCount = seriesColors.length;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var data = currentSeries.data;\n            var ref$1 = bindSegments(currentSeries);\n            var total = ref$1.total;\n            var points = ref$1.points;\n            var count = ref$1.count;\n            var anglePerValue = 360 / total;\n            var constantAngle = (void 0);\n            if (!isFinite(anglePerValue)) {\n                constantAngle = 360 / count;\n            }\n            var currentAngle = (void 0);\n\n            if (defined(currentSeries.startAngle)) {\n                currentAngle = currentSeries.startAngle;\n            } else {\n                currentAngle = options.startAngle;\n            }\n\n            if (seriesIx !== seriesCount - 1) {\n                if (currentSeries.labels.position === OUTSIDE_END) {\n                    currentSeries.labels.position = CENTER;\n                }\n            }\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n                var value = pointData.value;\n                var visible = pointData.visible;\n                var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                var explode = data.length !== 1 && Boolean(fields.explode);\n\n                if (!isFunction(currentSeries.color)) {\n                    currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                }\n\n                callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                    owner: this$1$1,\n                    category: defined(fields.category) ? fields.category : \"\",\n                    index: i,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: data[i],\n                    percentage: total !== 0 ? value / total : 0,\n                    explode: explode,\n                    visibleInLegend: fields.visibleInLegend,\n                    visible: visible,\n                    zIndex: seriesCount - seriesIx,\n                    animationDelay: this$1$1.animationDelay(i, seriesIx, seriesCount)\n                });\n\n                if (visible !== false) {\n                    currentAngle += angle;\n                }\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            category: fields.category,\n            percentage: fields.percentage\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"visual\", \"toggle\" ] });\n    },\n\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new PieSegment(value, sector, segmentOptions);\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var points = ref.points;\n        var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n        var count = points.length;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n        var newBoxCenter = newBox.center();\n        var boxCenter = box.center();\n        var seriesCount = options.series.length;\n        var leftSideLabels = [];\n        var rightSideLabels = [];\n        var padding = valueOrDefault(options.padding, defaultPadding);\n\n        this.targetBox = targetBox;\n\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n        newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n        var radius = halfMinWidth - padding;\n        var center = new Point(\n            radius + newBox.x1 + padding,\n            radius + newBox.y1 + padding\n        );\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var seriesIndex = segment.seriesIx;\n            sector.radius = radius;\n            sector.center = center;\n\n            if (seriesConfigs.length) {\n                var seriesConfig = seriesConfigs[seriesIndex];\n                sector.innerRadius = seriesConfig.innerRadius;\n                sector.radius = seriesConfig.radius;\n            }\n\n            if (seriesIndex === seriesCount - 1 && segment.explode) {\n                sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n            }\n\n            segment.reflow(newBox);\n\n            var label = segment.label;\n            if (label) {\n                if (label.options.position === OUTSIDE_END) {\n                    if (seriesIndex === seriesCount - 1) {\n                        if (label.orientation === RIGHT) {\n                            rightSideLabels.push(label);\n                        } else {\n                            leftSideLabels.push(label);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (leftSideLabels.length > 0) {\n            leftSideLabels.sort(this.labelComparator(true));\n            this.leftLabelsReflow(leftSideLabels);\n        }\n\n        if (rightSideLabels.length > 0) {\n            rightSideLabels.sort(this.labelComparator(false));\n            this.rightLabelsReflow(rightSideLabels);\n        }\n\n        this.box = newBox;\n    },\n\n    leftLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    rightLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    distanceBetweenLabels: function(labels) {\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var count = labels.length - 1;\n        var lr = sector.radius + segment.options.labels.distance;\n        var distances = [];\n        var firstBox = labels[0].box;\n        var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n        distances.push(distance);\n\n        for (var i = 0; i < count; i++) {\n            var secondBox = labels[i + 1].box;\n\n            firstBox = labels[i].box;\n            distance = round(secondBox.y1 - firstBox.y2);\n            distances.push(distance);\n        }\n        distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n        distances.push(distance);\n\n        return distances;\n    },\n\n    distributeLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var count = distances.length;\n        var left, right, remaining;\n\n        for (var i = 0; i < count; i++) {\n            remaining = -distances[i];\n            left = right = i;\n\n            while (remaining > 0 && (left >= 0 || right < count)) {\n                remaining = this$1$1._takeDistance(distances, i, --left, remaining);\n                remaining = this$1$1._takeDistance(distances, i, ++right, remaining);\n            }\n        }\n\n        this.reflowLabels(distances, labels);\n    },\n\n    _takeDistance: function(distances, anchor, position, amount) {\n        var result = amount;\n        if (distances[position] > 0) {\n            var available = Math.min(distances[position], result);\n            result -= available;\n            distances[position] -= available;\n            distances[anchor] += available;\n        }\n\n        return result;\n    },\n\n    reflowLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var labelOptions = segment.options.labels;\n        var labelsCount = labels.length;\n        var labelDistance = labelOptions.distance;\n        var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n        var boxX;\n\n        distances[0] += 2;\n        for (var i = 0; i < labelsCount; i++) {\n            var label = labels[i];\n            var box = label.box;\n\n            boxY += distances[i];\n            boxX = this$1$1.hAlignLabel(\n                box.x2,\n                sector.clone().expand(labelDistance),\n                boxY,\n                boxY + box.height(),\n                label.orientation === RIGHT);\n\n            if (label.orientation === RIGHT) {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.radius + sector.center.x + labelDistance;\n                }\n                label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n            } else {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.center.x - sector.radius - labelDistance;\n                }\n                label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n            }\n\n            boxY += box.height();\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var connectors = ref.options.connectors;\n        var points = ref.points;\n        var count = points.length;\n        var space = 4;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this._connectorLines = [];\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var label = segment.label;\n            var angle = sector.middle();\n            var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n            if (label) {\n                var connectorLine = new Path({\n                    stroke: {\n                        color: connectorsColor,\n                        width: connectors.width\n                    },\n                    animation: {\n                        type: FADEIN,\n                        delay: segment.animationDelay\n                    }\n                });\n\n                if (label.options.position === OUTSIDE_END) {\n                    var box = label.box;\n                    var centerPoint = sector.center;\n                    var start = sector.point(angle);\n                    var middle = new Point(box.x1, box.center().y);\n                    var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                    start = sector.clone().expand(connectors.padding).point(angle);\n                    connectorLine.moveTo(start.x, start.y);\n                    // TODO: Extract into a method to remove duplication\n                    if (label.orientation === RIGHT) {\n                        end = new Point(box.x1 - connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x - space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.min(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x < sector.center.x) {\n                            sr = sector.center.x + sector.radius + space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr < middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x + space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    } else {\n                        end = new Point(box.x2 + connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x + space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.max(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x > sector.center.x) {\n                            sr = sector.center.x - sector.radius - space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr > middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x - space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    }\n\n                    connectorLine.lineTo(end.x, end.y);\n\n                    this$1$1._connectorLines.push(connectorLine);\n                    this$1$1.visual.append(connectorLine);\n                }\n            }\n        }\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n            var targetBox = this.targetBox;\n            var pieCenter = this.box.center();\n            var bbox = this.visual.bbox();\n            if (!bbox) {\n                return;\n            }\n\n            var bboxBottom = bbox.bottomRight();\n\n            var scale = Math.min(\n                (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n            );\n\n            if (scale < 1) {\n                this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n            }\n        }\n    },\n\n    labelComparator: function(reverse) {\n        var reverseValue = reverse ? -1 : 1;\n\n        return function(a, b) {\n            var first = (a.parent.sector.middle() + 270) % 360;\n            var second = (b.parent.sector.middle() + 270) % 360;\n            return (first - second) * reverseValue;\n        };\n    },\n\n    hAlignLabel: function(originalX, sector, y1, y2, direction) {\n        var radius = sector.radius;\n        var sector_center = sector.center;\n        var cx = sector_center.x;\n        var cy = sector_center.y;\n        var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n        if (t > radius) {\n            return originalX;\n        }\n\n        return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n    },\n\n    pointInCircle: function(point, center, radius) {\n        return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    animationDelay: function(categoryIndex) {\n        return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n    },\n\n    stackRoot: function() {\n        return this;\n    }\n});\n\nfunction intersection(a1, a2, b1, b2) {\n    var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    var result;\n    if (ub !== 0) {\n        var ua = (uat / ub);\n\n        result = new Point(\n            a1.x + ua * (a2.x - a1.x),\n            a1.y + ua * (a2.y - a1.y)\n        );\n    }\n\n    return result;\n}\n\nsetDefaultOptions(PieChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    },\n    inactiveItems: {\n        markers: {},\n        labels: {}\n    }\n});\n\ndeepExtend(PieChart.prototype, PieChartMixin);\n\nPieChart.prototype.isStackRoot = true;\n\nvar PiePlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createPieChart(this.series);\n    },\n\n    createPieChart: function(series) {\n        var firstSeries = series[0];\n        var pieChart = new PieChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            startAngle: firstSeries.startAngle,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(pieChart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\nvar DonutSegment = PieSegment.extend({\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            if (labelsOptions.position === CENTER) {\n                sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                var lp = sector.point(angle);\n\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                PieSegment.fn.reflowLabel.call(this);\n            }\n        }\n    },\n\n    createSegment: function(sector, options) {\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    }\n});\n\nsetDefaultOptions(DonutSegment, {\n    overlay: {\n        gradient: \"roundedGlass\"\n    },\n    labels: {\n        position: CENTER\n    },\n    animation: {\n        type: PIE\n    }\n});\n\ndeepExtend(DonutSegment.prototype, PointEventsMixin);\n\nvar DONUT_SECTOR_ANIM_DELAY = 50;\n\nvar DonutChart = PieChart.extend({\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new DonutSegment(value, sector, segmentOptions);\n\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        var padding = valueOrDefault(options.padding, defaultPadding);\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n        var totalSize = halfMinWidth - padding;\n        var seriesWithoutSize = 0;\n        var holeSize;\n\n        for (var i = 0; i < seriesCount; i++) {\n            var currentSeries = series[i];\n            if (i === 0) {\n                if (defined(currentSeries.holeSize)) {\n                    holeSize = currentSeries.holeSize;\n                    totalSize -= currentSeries.holeSize;\n                }\n            }\n\n            if (defined(currentSeries.size)) {\n                totalSize -= currentSeries.size;\n            } else {\n                seriesWithoutSize++;\n            }\n\n            if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                totalSize -= currentSeries.margin;\n            }\n        }\n\n        if (!defined(holeSize)) {\n            var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n            holeSize = currentSize * 0.75;\n            totalSize -= holeSize;\n        }\n\n        var innerRadius = holeSize;\n        var margin = 0;\n        var size, radius;\n\n        this.seriesConfigs = [];\n\n        for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n            var currentSeries$1 = series[i$1];\n            size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n            innerRadius += margin;\n            radius = innerRadius + size;\n            this$1$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n            margin = currentSeries$1.margin || 0;\n            innerRadius = radius;\n        }\n\n        PieChart.fn.reflow.call(this, targetBox);\n    },\n\n    animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n        return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n            (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n    }\n});\n\nsetDefaultOptions(DonutChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    }\n});\n\nvar DonutPlotArea = PiePlotArea.extend({\n    render: function() {\n        this.createDonutChart(this.series);\n    },\n\n    createDonutChart: function(series) {\n        var firstSeries = series[0];\n        var donutChart = new DonutChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(donutChart);\n    }\n});\n\nvar DEFAULT_PADDING = 0.15;\n\nvar PolarPlotAreaBase = PlotAreaBase.extend({\n    initFields: function() {\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function() {\n        this.addToLegend(this.series);\n        this.createPolarAxis();\n        this.createCharts();\n        this.createValueAxis();\n    },\n\n    alignAxes: function() {\n        var axis = this.valueAxis;\n        var range = axis.range();\n        var crossingValue = axis.options.reverse ? range.max : range.min;\n        var slot = axis.getSlot(crossingValue);\n        var center = this.polarAxis.getSlot(0).center;\n        var axisBox = axis.box.translate(\n            center.x - slot.x1,\n            center.y - slot.y1\n        );\n\n        axis.reflow(axisBox);\n    },\n\n    createValueAxis: function() {\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var axisOptions = this.valueAxisOptions({\n            roundToMajorUnit: false,\n            zIndex: -1\n        });\n        var axisType, axisDefaultRange;\n\n        if (axisOptions.type === LOGARITHMIC) {\n            axisType = dataviz.RadarLogarithmicAxis;\n            axisDefaultRange = { min: 0.1, max: 1 };\n        } else {\n            axisType = dataviz.RadarNumericAxis;\n            axisDefaultRange = { min: 0, max: 1 };\n        }\n\n        var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n        if (range && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var valueAxis = new axisType(\n            range.min, range.max,\n            axisOptions,\n            this.chartService\n        );\n\n        this.valueAxis = valueAxis;\n        this.appendAxis(valueAxis);\n    },\n\n    reflowAxes: function() {\n        var ref = this;\n        var options = ref.options.plotArea;\n        var valueAxis = ref.valueAxis;\n        var polarAxis = ref.polarAxis;\n        var box = ref.box;\n        var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n        var padding = getSpacing(options.padding || {}, defaultPadding);\n        var paddingBox = box.clone().unpad(padding);\n        var axisBox = paddingBox.clone();\n\n        axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n        axisBox.align(paddingBox, Y, CENTER);\n\n        var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n        polarAxis.reflow(axisBox);\n        valueAxis.reflow(valueAxisBox);\n        var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n        valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n        this.axisBox = axisBox;\n        this.alignAxes(axisBox);\n    },\n\n    backgroundBox: function() {\n        return this.box;\n    },\n\n    detachLabels: function() {}\n});\n\nvar PolarScatterChart = ScatterChart.extend({\n    pointSlot: function(slotX, slotY) {\n        var valueRadius = slotX.center.y - slotY.y1;\n        var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    }\n});\n\nsetDefaultOptions(PolarScatterChart, {\n    clip: false\n});\n\nvar PolarLineChart = ScatterLineChart.extend({\n\n});\n\nPolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\nsetDefaultOptions(PolarLineChart, {\n    clip: false\n});\n\nvar SplinePolarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var center = this._polarAxisCenter();\n        fillPath.lineTo(center.x, center.y);\n    },\n\n    _polarAxisCenter: function() {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        return center;\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            var center = this._polarAxisCenter();\n            var curveProcessor = new CurveProcessor(false);\n            var linePoints = this.points();\n\n            linePoints.push(center);\n            segments = this._strokeSegments = curveProcessor.process(linePoints);\n            segments.pop();\n        }\n\n        return segments;\n    }\n});\n\nvar PolarAreaSegment = AreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n        fillPath.segments.unshift(centerSegment);\n        fillPath.segments.push(centerSegment);\n    }\n});\n\nvar PolarAreaChart = PolarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segment;\n\n        if (style === SMOOTH) {\n            segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n        } else {\n            segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n        }\n        return segment;\n    },\n\n    createMissingValue: function(value, missingValues) {\n        var missingValue;\n\n        if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n            missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (missingValues === ZERO) {\n                missingValue.y = 0;\n            }\n        }\n\n        return missingValue;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    _hasMissingValuesGap: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n\n        for (var idx = 0; idx < series.length; idx++) {\n            if (this$1$1.seriesMissingValues(series[idx]) === GAP) {\n                return true;\n            }\n        }\n    },\n\n    sortPoints: function(points) {\n        var this$1$1 = this;\n\n        points.sort(xComparer);\n\n        if (this._hasMissingValuesGap()) {\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    var value = point.value;\n                    if (!hasValue(value.y) && this$1$1.seriesMissingValues(point.series) === GAP) {\n                        delete points[idx];\n                    }\n                }\n            }\n        }\n\n        return points;\n    }\n});\n\nfunction xComparer(a, b) {\n    return a.value.x - b.value.x;\n}\n\nvar PolarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n        this.polarAxis = polarAxis;\n        this.axisX = polarAxis;\n        this.appendAxis(polarAxis);\n    },\n\n    valueAxisOptions: function(defaults) {\n        return deepExtend(defaults, {\n            majorGridLines: { type: ARC },\n            minorGridLines: { type: ARC }\n        }, this.options.yAxis);\n    },\n\n    createValueAxis: function() {\n        PolarPlotAreaBase.fn.createValueAxis.call(this);\n        this.axisY = this.valueAxis;\n    },\n\n    appendChart: function(chart, pane) {\n        this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createLineChart(\n            filterSeriesByType(series, [ POLAR_LINE ]),\n            pane\n        );\n\n        this.createScatterChart(\n            filterSeriesByType(series, [ POLAR_SCATTER ]),\n            pane\n        );\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ POLAR_AREA ]),\n            pane\n        );\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new PolarLineChart(this, { series: series });\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var scatterChart = new PolarScatterChart(this, { series: series });\n\n        this.appendChart(scatterChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new PolarAreaChart(this, { series: series });\n\n        this.appendChart(areaChart, pane);\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var xValue = this.axisX.getValue(point);\n        var yValue = this.axisY.getValue(point);\n\n        if (xValue !== null && yValue !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                x: xValue,\n                y: yValue\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\nsetDefaultOptions(PolarPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin);\n\nfunction groupBySeriesIx(segments) {\n    var seriesSegments = [];\n    for (var idx = 0; idx < segments.length; idx++) {\n        var segment = segments[idx];\n        seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n        seriesSegments[segment.seriesIx].push(segment);\n    }\n\n    return seriesSegments;\n}\n\nvar RadarLineChart = LineChart.extend({\n    pointSlot: function(categorySlot, valueSlot) {\n        var valueRadius = categorySlot.center.y - valueSlot.y1;\n        var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    },\n\n    renderSegments: function() {\n        LineChart.fn.renderSegments.call(this);\n\n        if (this._segments && this._segments.length > 1) {\n            var seriesSegments = groupBySeriesIx(this._segments);\n\n            for (var idx = 0; idx < seriesSegments.length; idx++) {\n                var segments = seriesSegments[idx];\n                if (segments && segments.length > 1) {\n                    var firstPoint = segments[0].linePoints[0];\n                    var lastSegment = last(segments);\n                    var lastPoint = last(lastSegment.linePoints);\n                    var isFirstDataPoint = firstPoint.categoryIx === 0;\n                    var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                    if (isFirstDataPoint && isLastDataPoint) {\n                        last(segments).linePoints.push(firstPoint);\n                    }\n                }\n            }\n        }\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        var segment = new pointType(linePoints, currentSeries, seriesIx);\n        var missingValues = this.seriesMissingValues(currentSeries);\n\n        if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n            segment.options.closed = true;\n        }\n\n        return segment;\n    }\n});\n\nsetDefaultOptions(RadarLineChart, {\n    clip: false,\n    limitPoints: false\n});\n\nvar SplineRadarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaSegment = AreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaChart = RadarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n        var stackPoints;\n        var segment;\n\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            stackPoints = prevSegment.linePoints.slice(0);\n            previousSegment = prevSegment;\n        }\n\n        if (style === SMOOTH) {\n            segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            segment.options.closed = true;\n        } else {\n            linePoints.push(linePoints[0]);\n            segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        }\n\n        return segment;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    }\n});\n\nvar RadarSegment = DonutSegment.extend({\n    init: function(value, options) {\n        DonutSegment.fn.init.call(this, value, null, options);\n    }\n});\n\nsetDefaultOptions(RadarSegment, {\n    overlay: {\n        gradient: \"none\"\n    },\n    labels: {\n        distance: 10\n    }\n});\n\nvar RadarClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(sector) {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var gap = options.gap;\n        var spacing = options.spacing;\n        var count = children.length;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotAngle = sector.angle / slots;\n        var angle = sector.startAngle + slotAngle * (gap / 2);\n\n        this.forEach(children, function (child) {\n            var slotSector = sector.clone();\n            slotSector.startAngle = angle;\n            slotSector.angle = slotAngle;\n\n            if (child.sector) {\n                slotSector.radius = child.sector.radius;\n            }\n\n            child.reflow(slotSector);\n            child.sector = slotSector;\n\n            angle += slotAngle + (slotAngle * spacing);\n        });\n    }\n});\n\nsetDefaultOptions(RadarClusterLayout, {\n    gap: 1,\n    spacing: 0\n});\n\nvar RadarStackLayout = ChartElement.extend({\n    reflow: function(sector) {\n        var ref = this;\n        var reverse = ref.options.reverse;\n        var children = ref.children;\n        var childrenCount = children.length;\n        var first = reverse ? childrenCount - 1 : 0;\n        var step = reverse ? -1 : 1;\n\n        this.box = new Box();\n\n        for (var i = first; i >= 0 && i < childrenCount; i += step) {\n            var childSector = children[i].sector;\n            childSector.startAngle = sector.startAngle;\n            childSector.angle = sector.angle;\n        }\n    }\n});\n\nvar RadarBarChart = BarChart.extend({\n    pointType: function() {\n        return RadarSegment;\n    },\n\n    clusterType: function() {\n        return RadarClusterLayout;\n    },\n\n    stackType: function() {\n        return RadarStackLayout;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var slot = categorySlot.clone();\n        var y = categorySlot.center.y;\n\n        slot.radius = y - valueSlot.y1;\n        slot.innerRadius = y - valueSlot.y2;\n\n        return slot;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.sector = pointSlot;\n        point.reflow();\n    },\n\n    createAnimation: function() {\n        this.options.animation.center = this.box.toRect().center();\n        BarChart.fn.createAnimation.call(this);\n    }\n});\n\nRadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\nsetDefaultOptions(RadarBarChart, {\n    clip: false,\n    limitPoints: false,\n    animation: {\n        type: \"pie\"\n    }\n});\n\nvar RadarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n        this.polarAxis = categoryAxis;\n        this.categoryAxis = categoryAxis;\n        this.appendAxis(categoryAxis);\n        this.aggregateCategories();\n        this.createCategoryAxesLabels();\n    },\n\n    valueAxisOptions: function(defaults) {\n        if (this._hasBarCharts) {\n            deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            });\n        }\n\n        if (this._isStacked100) {\n            deepExtend(defaults, {\n                roundToMajorUnit: false,\n                labels: { format: \"P0\" }\n            });\n        }\n\n        return deepExtend(defaults, this.options.valueAxis);\n    },\n\n    aggregateCategories: function() {\n        // No separate panes in radar charts\n        CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n    },\n\n    createCategoryAxesLabels: function() {\n        CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n    },\n\n    filterSeries: function(currentSeries) {\n        // Not supported for radar charts\n        return currentSeries;\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ RADAR_AREA ]),\n            pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ RADAR_LINE ]),\n            pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ RADAR_COLUMN ]),\n            pane\n        );\n    },\n\n    chartOptions: function(series) {\n        var options = { series: series };\n        var firstSeries = series[0];\n        if (firstSeries) {\n            var filteredSeries = this.filterVisibleSeries(series);\n            var stack = firstSeries.stack;\n            options.isStacked = stack && filteredSeries.length > 1;\n            options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n            if (options.isStacked100) {\n                this._isStacked100 = true;\n            }\n        }\n\n        return options;\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n        this.appendChart(areaChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new RadarLineChart(this, this.chartOptions(series));\n        this.appendChart(lineChart, pane);\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var options = this.chartOptions(series);\n        options.gap = firstSeries.gap;\n        options.spacing = firstSeries.spacing;\n\n        var barChart = new RadarBarChart(this, options);\n        this.appendChart(barChart, pane);\n\n        this._hasBarCharts = true;\n    },\n\n    seriesCategoryAxis: function() {\n        return this.categoryAxis;\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var category = this.categoryAxis.getCategory(point);\n        var value = this.valueAxis.getValue(point);\n\n        if (category !== null && value !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                category: category,\n                value: value\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\ndeepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n    appendChart: CategoricalPlotArea.prototype.appendChart,\n    aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n    seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints\n});\n\nsetDefaultOptions(RadarPlotArea, {\n    categoryAxis: {\n        categories: []\n    },\n    valueAxis: {}\n});\n\nvar FunnelSegment = ChartElement.extend({\n    init: function(value, options, segmentOptions) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.options.index = segmentOptions.index;\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var label = this.children[0];\n\n        this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n        if (label) {\n            label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual;\n\n        ChartElement.fn.createVisual.call(this);\n\n        if (options.visual) {\n            visual = options.visual({\n                category: this.category,\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage,\n                points: this.points,\n                options: options,\n                sender: this.getSender(),\n                createVisual: function () { return this$1$1.createPath(); }\n            });\n        } else {\n            visual = this.createPath();\n        }\n\n        if (visual) {\n            this.visual.append(visual);\n        }\n    },\n\n    createPath: function() {\n        var options = this.options;\n        var border = options.border;\n        var path = Path.fromPoints(this.points, {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: border.color,\n                opacity: border.opacity,\n                width: border.width\n            }\n        }).close();\n\n        return path;\n    },\n\n    createHighlight: function(style) {\n        return Path.fromPoints(this.points, style);\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var path = Path.fromPoints(this.points).close();\n\n        return {\n            options: this.options,\n            path: path\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        return {\n            point: new Point(box.center().x, box.y1),\n            align: {\n                horizontal: \"center\",\n                vertical: \"top\"\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        var point = this;\n        return point.owner.formatPointValue(point, format);\n    }\n});\n\nsetDefaultOptions(FunnelSegment, {\n    color: WHITE,\n    border: {\n        width: 1\n    }\n});\n\ndeepExtend(FunnelSegment.prototype, PointEventsMixin);\n\nvar FunnelChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.points = [];\n        this.labels = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format,point.value);\n    },\n\n    render: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var series = options.series[0];\n        var data = series.data;\n\n        if (!data) {\n            return;\n        }\n\n        var ref$1 = bindSegments(series);\n        var total = ref$1.total;\n        var points = ref$1.points;\n\n        for (var i = 0; i < points.length; i++) {\n            var pointData = points[i];\n\n            if (!pointData) {\n                continue;\n            }\n\n            var fields = pointData.fields;\n\n            if (!isFunction(series.color)) {\n                series.color = fields.color || seriesColors[i % seriesColors.length];\n            }\n\n            fields = deepExtend({\n                index: i,\n                owner: this$1$1,\n                series: series,\n                dataItem: data[i],\n                percentage: pointData.value / total\n            }, fields, { visible: pointData.visible });\n\n            var value = pointData.valueFields.value;\n            var segment = this$1$1.createSegment(value, fields);\n            var label = this$1$1.createLabel(value, fields);\n\n            if (segment && label) {\n                segment.append(label);\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            index: fields.index\n        }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"toggle\", \"visual\" ] });\n    },\n\n    createSegment: function(value, fields) {\n        var seriesOptions = deepExtend({}, fields.series);\n        this.evalSegmentOptions(seriesOptions, value, fields);\n\n        this.createLegendItem(value, seriesOptions, fields);\n\n        if (fields.visible !== false) {\n\n            var segment = new FunnelSegment(value, seriesOptions, fields);\n            $.extend(segment, fields);\n\n            this.append(segment);\n            this.points.push(segment);\n\n            return segment;\n        }\n    },\n\n    createLabel: function(value, fields) {\n        var series = fields.series;\n        var dataItem = fields.dataItem;\n        var labels = deepExtend({}, this.options.labels, series.labels);\n        var text = value;\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var data = {\n                dataItem: dataItem,\n                value: value,\n                percentage: fields.percentage,\n                category: fields.category,\n                series: series\n            };\n            if (labelTemplate) {\n                text = labelTemplate(data);\n            } else if (labels.format) {\n                text = this.plotArea.chartService.format.auto(labels.format, text);\n            }\n\n            if (!labels.color) {\n                labels.color = dataviz.autoTextColor(series.color);\n                if (!labels.background) {\n                    labels.background = series.color;\n                }\n            }\n\n            this.evalSegmentOptions(labels, value, fields);\n            var textBox = new TextBox(text, deepExtend({\n                vAlign: labels.position\n            }, labels), data);\n\n            this.labels.push(textBox);\n\n            return textBox;\n        }\n    },\n\n    labelPadding: function() {\n        var labels = this.labels;\n        var padding = { left: 0, right: 0 };\n\n        for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            var align = label.options.align;\n            if (align !== CENTER) {\n                var width = labels[i].box.width();\n\n                if (align === LEFT) {\n                    padding.left = Math.max(padding.left, width);\n                } else {\n                    padding.right = Math.max(padding.right, width);\n                }\n            }\n        }\n\n        return padding;\n    },\n\n    dynamicSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var firstSegment = segments[0];\n        var maxSegment = firstSegment;\n\n        for (var idx = 0; idx < segments.length; idx++) {\n            if (segments[idx].percentage > maxSegment.percentage) {\n                maxSegment = segments[idx];\n            }\n        }\n\n        var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n        var previousOffset = (width - lastUpperSide) / 2;\n        var previousHeight = 0;\n\n        for (var idx$1 = 0; idx$1 < count; idx$1++) {\n            var percentage = segments[idx$1].percentage;\n            var nextSegment = segments[idx$1 + 1];\n            var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n            var points = segments[idx$1].points = [];\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n            var offset = (void 0);\n\n            if (!percentage) {\n                offset = nextPercentage ? 0 : width / 2;\n            } else {\n                offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n            }\n\n            offset = limitValue(offset, 0, width);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n            previousOffset = offset;\n            previousHeight += height + options.segmentSpacing;\n            lastUpperSide = limitValue(width - 2 * offset, 0, width);\n        }\n    },\n\n    constantSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var decreasingWidth = options.neckRatio <= 1;\n        var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n        var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n        var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n        var finalNarrow = (topMostWidth - neckRatio) / 2;\n        var previousHeight = 0;\n\n        for (var idx = 0; idx < count; idx++) {\n            var points = segments[idx].points = [];\n            var percentage = segments[idx].percentage;\n            var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n            previousOffset += offset;\n            previousHeight += height + options.segmentSpacing;\n        }\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var count = points.length;\n\n        if (!count) {\n            return;\n        }\n\n        var options = this.options;\n        var box = chartBox.clone().unpad(this.labelPadding());\n        var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n        var width = box.width();\n\n        if (options.dynamicSlope) {\n            this.dynamicSlopeReflow(box, width, totalHeight);\n        } else {\n            this.constantSlopeReflow(box, width, totalHeight);\n        }\n\n        for (var idx = 0; idx < count; idx++) {\n            points[idx].reflow(chartBox);\n        }\n    }\n});\n\nsetDefaultOptions(FunnelChart, {\n    neckRatio: 0.3,\n    width: 300,\n    dynamicSlope: false,\n    dynamicHeight: true,\n    segmentSpacing: 0,\n    labels: {\n        visible: false,\n        align: CENTER,\n        position: CENTER,\n        zIndex: 1\n    }\n});\n\ndeepExtend(FunnelChart.prototype, PieChartMixin);\n\nvar MAX_NECK_RATIO = 1e6;\n\nvar PyramidChart = FunnelChart.extend({\n    init: function(plotArea, options) {\n        options.dynamicSlope = false;\n        options.neckRatio = MAX_NECK_RATIO;\n\n        FunnelChart.fn.init.call(this, plotArea, options);\n    }\n});\n\nvar FunnelPlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createChart(FunnelChart, filterSeriesByType(this.series, [ FUNNEL ]));\n        this.createChart(PyramidChart, filterSeriesByType(this.series, [ PYRAMID ]));\n    },\n\n    createChart: function(chartType, series) {\n        var firstSeries = series[0];\n        if (!firstSeries) {\n            return;\n        }\n\n        var chart = new chartType(this, {\n            series: series,\n            legend: this.options.legend,\n            neckRatio: firstSeries.neckRatio,\n            dynamicHeight: firstSeries.dynamicHeight,\n            dynamicSlope: firstSeries.dynamicSlope,\n            segmentSpacing: firstSeries.segmentSpacing,\n            highlight: firstSeries.highlight\n        });\n\n        this.appendChart(chart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.items, chart.legendItems);\n    }\n});\n\n// Linear color scale from the given color to white minus minimum lightness offset.\nvar colorScale = function (color, minLightnessOffset) {\n    if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n    var baseColor = kendo.parseColor(color);\n    var offset = 1 - minLightnessOffset;\n\n    return function (value) {\n        var hsl = baseColor.toHSL();\n        var range = 100 - hsl.l;\n        var point = offset - value;\n        hsl.l += Math.min(point * range, range);\n\n        return hsl.toCss();\n    };\n};\n\nvar HeatmapPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createMarker();\n        this.createLabel();\n        this.createNote();\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            var pointData = this.pointData();\n            var labelTemplate = getTemplate(labels);\n            var labelText;\n            var labelColor = labels.color;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(labels.format);\n            }\n\n            if (!labelColor) {\n                labelColor = dataviz.autoTextColor(this.color);\n            }\n\n            this.label = new TextBox(labelText,\n                deepExtend({\n                    align: CENTER,\n                    vAlign: CENTER,\n                    margin: {\n                        left: 5,\n                        right: 5\n                    },\n                    zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                },\n                labels, {\n                    color: labelColor\n                }),\n                pointData\n            );\n            this.append(this.label);\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.reflow(this.markerBox());\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        this.marker.reflow(this.markerBox());\n    },\n\n    markerBox: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var rect = this.box.toRect();\n        var type = valueOrDefault(markers.type, 'rect');\n        var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n        var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n        var halfBorderWidth = Math.round(borderWidth / 2);\n\n        if (markers.size) {\n            var center = rect.center();\n            rect.size.width = rect.size.height = markers.size;\n            rect.origin.x = Math.round(center.x - rect.size.width / 2);\n            rect.origin.y = Math.round(center.y - rect.size.height / 2);\n        }\n\n        rect.size.width -= borderWidth;\n        rect.size.height -= borderWidth;\n        rect.origin.y += halfBorderWidth + 0.5;\n        rect.origin.x += halfBorderWidth + 0.5;\n\n        return dataviz.rectToBox(rect);\n    },\n\n    markerBorder: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var opacity = valueOrDefault(border.opacity, options.opacity);\n\n        return {\n            color: border.color || this.color,\n            width: border.width,\n            opacity: opacity,\n            dashType: border.dashType\n        };\n    },\n\n    createMarker: function() {\n        var options = this.options;\n        var markerOptions = options.markers;\n        var marker = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        this.marker = marker;\n        this.append(marker);\n    },\n\n    createHighlight: function(style) {\n        var options = this.options;\n        var markerOptions = this.options.highlight.markers || this.options.markers;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: markerOptions.color || this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n        });\n\n        highlight.reflow(this.markerBox());\n        var visual = highlight.getElement();\n\n        visual.options.fill = style.fill;\n        visual.options.stroke = style.stroke;\n\n        return visual;\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var left = this.box.center().x;\n        var top = this.box.y1 - TOOLTIP_OFFSET;\n\n        return {\n            point: new Point(left, top),\n            align: {\n                horizontal: CENTER,\n                vertical: BOTTOM\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        /* noop, clip labels */\n    },\n\n    pointData: function() {\n        return {\n            x: this.value.x,\n            y: this.value.y,\n            value: this.value.value,\n            dataItem: this.dataItem,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\n\nHeatmapPoint.prototype.defaults = {\n    markers: {\n        type: 'rect',\n        borderRadius: 4,\n        border: {\n            color: 'transparent'\n        }\n    },\n    padding: { top: 1 },\n    labels: {\n        visible: false,\n        padding: 3\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    }\n};\n\nvar HeatmapChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        this.points = [];\n        this.seriesOptions = [];\n        this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.setRange();\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    setRange: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var valueFields = ref$1.valueFields;\n                if (defined(valueFields.value) && valueFields.value !== null) {\n                    this$1$1.valueRange.min = Math.min(this$1$1.valueRange.min, valueFields.value);\n                    this$1$1.valueRange.max = Math.max(this$1$1.valueRange.max, valueFields.value);\n                }\n            }\n        }\n    },\n\n    addValue: function(value, fields) {\n        var point;\n        if (value && defined(value.value) && value.value !== null) {\n            point = this.createPoint(value, fields);\n            if (point) {\n                $.extend(point, fields);\n            }\n        }\n\n        this.points.push(point);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"drilldownSeriesFactory\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                min: this.valueRange.min,\n                max: this.valueRange.max\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return HeatmapPoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        } else if (this.valueRange.max !== 0) {\n            var scale = colorScale(color);\n            color = scale(value.value / this.valueRange.max);\n        }\n\n        var point = new HeatmapPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var ref = this$1$1.seriesAxes(fields.series);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n            var indexX = xAxis.categoryIndex(value.x);\n            var indexY = yAxis.categoryIndex(value.y);\n            var slotX = xAxis.getSlot(indexX, indexX, limit);\n            var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var ref$1 = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref$1.xAxis;\n            var yAxis = ref$1.yAxis;\n            var xRange = xAxis.currentRangeIndices();\n            var yRange = yAxis.currentRangeIndices();\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$2 = this$1$1._bindPoint(currentSeries, seriesIx, pointIx);\n                var value = ref$2.valueFields;\n                var fields = ref$2.fields;\n                var xIndex = xAxis.totalIndex(value.x);\n                var yIndex = yAxis.totalIndex(value.y);\n                var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                if (xIn && yIn) {\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1$1\n                    }, fields));\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.value);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(HeatmapChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}: {2}\"\n    },\n    labels: {\n        format: \"{2}\"\n    },\n    clip: true\n});\ndeepExtend(HeatmapChart.prototype, {\n    _bindPoint: CategoricalChart.prototype._bindPoint\n});\n\nvar HeatmapPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.bindCategories();\n        this.createAxes(panes);\n        this.createCharts(panes);\n        this.createAxisLabels();\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var series = this.srcSeries || this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var data = currentSeries.data || [];\n            var ref = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n\n            var xCategories = dataviz.createHashSet(xAxis.categories || []);\n            var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n            for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                var x = ref$1.x;\n                var y = ref$1.y;\n\n                if (!xCategories.has(x)) {\n                    xCategories.add(x);\n                }\n\n                if (!yCategories.has(y)) {\n                    yCategories.add(y);\n                }\n            }\n\n            xAxis.categories = xCategories.values();\n            yAxis.categories = yCategories.values();\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createHeatmapChart(\n                filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                pane\n            );\n        }\n    },\n\n    createHeatmapChart: function(series, pane) {\n        var chart = new HeatmapChart(this, {\n            series: series\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesAxes: function(series) {\n        var xAxis;\n        var yAxis;\n\n        var options = this.options;\n\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxisName = series.xAxis;\n        if (xAxisName) {\n            xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n        } else {\n            xAxis = xAxisOptions[0];\n        }\n\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxisName = series.yAxis;\n        if (yAxisName) {\n            yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n        } else {\n            yAxis = yAxisOptions[0];\n        }\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    createAxisLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            axes[i].createLabels();\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var axisOptions = $.extend({\n            axisCrossingValue: 0\n        }, options, {\n            vertical: vertical,\n            reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n            justified: false\n        });\n        var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n        var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateCategoryAxis;\n        } else {\n            axisType = CategoryAxis;\n        }\n\n        var axis = new axisType(axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n        axis.mapCategories();\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            delete this.namedYAxes[axisName];\n        } else {\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            appendIfNotNull(values, axis.getCategory(point));\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$2(this.options, index, vertical, options);\n        updateAxisOptions$2(this.originalOptions, index, vertical, options);\n    },\n\n    crosshairOptions: function(axis) {\n        // Stack the crosshair above the series points.\n        return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n    }\n});\n\nfunction updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(HeatmapPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\nvar COLOR = \"color\";\nvar FIRST = \"first\";\nvar FROM = \"from\";\nvar MAX = \"max\";\nvar MIN = \"min\";\nvar NOTE_TEXT = \"noteText\";\nvar SUMMARY_FIELD = \"summary\";\nvar TO = \"to\";\n\nPlotAreaFactory.current.register(CategoricalPlotArea, [\n    BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n    CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n    RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA\n]);\n\nPlotAreaFactory.current.register(XYPlotArea, [\n    SCATTER, SCATTER_LINE, BUBBLE\n]);\n\nPlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\nPlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\nPlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL, PYRAMID ]);\n\nPlotAreaFactory.current.register(PolarPlotArea, [ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ]);\nPlotAreaFactory.current.register(RadarPlotArea, [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ]);\n\nPlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\nSeriesBinder.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ WATERFALL, HORIZONTAL_WATERFALL ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR, DRILLDOWN_FIELD ]);\nSeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ COLOR, DRILLDOWN_FIELD ]);\n\nSeriesBinder.current.register(\n    [ FUNNEL, PYRAMID ],\n    [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n    { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n);\n\nDefaultAggregates.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n);\n\nDefaultAggregates.current.register(\n    [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n    { value: MAX, color: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ SCATTER, SCATTER_LINE, BUBBLE ],\n    [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ HEATMAP ],\n    [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ CANDLESTICK, OHLC ],\n    [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ CANDLESTICK, OHLC ],\n    { open: MAX, high: MAX, low: MIN, close: MAX,\n      color: FIRST, downColor: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n      color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ PIE, DONUT ],\n    [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = Class.extend({\n    init: function(element, userOptions, themeOptions, context) {\n        var this$1$1 = this;\n        if (context === void 0) { context = {}; }\n\n        this.observers = [];\n        this.addObserver(context.observer);\n        this.chartService = new services.ChartService(this, context);\n        this.chartService.theme = themeOptions;\n\n        this._initElement(element);\n\n        var options = deepExtend({}, this.options, userOptions);\n        this._originalOptions = deepExtend({}, options);\n        this._theme = themeOptions;\n        this._initTheme(options, themeOptions);\n\n        this._initHandlers();\n        this._initSurface();\n\n        this.bindCategories();\n        dataviz.FontLoader.preloadFonts(userOptions, function () {\n            this$1$1.fontLoaded = true;\n            if (!this$1$1._destroyed) {\n                this$1$1.trigger('init');\n                this$1$1._redraw();\n                this$1$1._attachEvents();\n            }\n        });\n    },\n\n    _initElement: function(element) {\n        this._setElementClass(element);\n        element.style.position = \"relative\";\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n        this.element = element;\n    },\n\n    _setElementClass: function(element) {\n        dataviz.addClass(element, \"k-chart\");\n    },\n\n    _initTheme: function(options, themeOptions) {\n        var seriesCopies = [];\n        var series = options.series || [];\n\n        for (var i = 0; i < series.length; i++) {\n            seriesCopies.push($.extend({}, series[i]));\n        }\n        options.series = seriesCopies;\n\n        resolveAxisAliases(options);\n        this.applyDefaults(options, themeOptions);\n\n        // Clean up default if not overriden by data attributes\n        if (options.seriesColors === null) {\n            delete options.seriesColors;\n        }\n\n        this.options = deepExtend({}, themeOptions, options);\n        this.applySeriesColors();\n    },\n\n    getSize: function() {\n        var chartArea = this.options.chartArea || {};\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n        return {\n            width: width,\n            height: height\n        };\n    },\n\n    resize: function(force) {\n        var size = this.getSize();\n        var currentSize = this._size;\n        var hasSize = size.width > 0 || size.height > 0;\n\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this._size = size;\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n            this._destroySelections();\n            this._setupSelection();\n        }\n    },\n\n    _resize: function() {\n        this._noTransitionsRedraw();\n    },\n\n    redraw: function(paneName) {\n        this.applyDefaults(this.options);\n        this.applySeriesColors();\n\n        if (paneName) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPane(paneName);\n            plotArea.redraw(pane);\n        } else {\n            this._redraw();\n        }\n    },\n\n    getAxis: function(name) {\n        return findAxisByName(name, this._plotArea.axes);\n    },\n\n    findAxisByName: function(name) {\n        return this.getAxis(name);\n    },\n\n    findPaneByName: function(name) {\n        var panes = this._plotArea.panes;\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            if (panes[idx].options.name === name) {\n                return new ChartPane(panes[idx]);\n            }\n        }\n    },\n\n    findPaneByIndex: function(idx) {\n        var panes = this._plotArea.panes;\n        if (panes[idx]) {\n            return new ChartPane(panes[idx]);\n        }\n    },\n\n    plotArea: function() {\n        return new ChartPlotArea(this._plotArea);\n    },\n\n    toggleHighlight: function(show, filter) {\n        var plotArea = this._plotArea;\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n        var points;\n\n        if (isFunction(filter)) {\n            points = plotArea.filterPoints(filter);\n        } else {\n            var seriesName, categoryName;\n            if (isObject(filter)) {\n                seriesName = filter.series;\n                categoryName = filter.category;\n            } else {\n                seriesName = categoryName = filter;\n            }\n\n            if (firstSeries.type === DONUT) {\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n            } else if (inArray(firstSeries.type, [ PIE, FUNNEL, PYRAMID ])) {\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n            } else {\n                points = plotArea.pointsBySeriesName(seriesName);\n            }\n        }\n\n        if (points) {\n            this.togglePointsHighlight(show, points);\n        }\n    },\n\n    togglePointsHighlight: function(show, points) {\n        var highlight = this._highlight;\n        for (var idx = 0; idx < points.length; idx++) {\n            highlight.togglePointHighlight(points[idx], show);\n        }\n    },\n\n    showTooltip: function(filter) {\n        var shared = this._sharedTooltip();\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var plotArea = ref._plotArea;\n        var point, categoryIndex;\n\n        if (isFunction(filter)) {\n            point = plotArea.findPoint(filter);\n            if (point && shared) {\n                categoryIndex = point.categoryIx;\n            }\n        } else if (shared && defined(filter)) {\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n        }\n\n        if (shared) {\n            if (categoryIndex >= 0) {\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                tooltip.showAt(points);\n            }\n        } else if (point) {\n            tooltip.show(point);\n        }\n    },\n\n    hideTooltip: function() {\n        this._tooltip.hide();\n    },\n\n    _initSurface: function() {\n        var surface = this.surface;\n        var wrap = this._surfaceWrap();\n\n        var chartArea = this.options.chartArea || {};\n        if (chartArea.width) {\n            dataviz.elementSize(wrap, { width: chartArea.width });\n        }\n        if (chartArea.height) {\n            dataviz.elementSize(wrap, { height: chartArea.height });\n        }\n\n        if (!surface || surface.options.type !== this.options.renderAs) {\n            this._destroySurface();\n\n            this.surface = drawing.Surface.create(wrap, {\n                type: this.options.renderAs\n            });\n\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n        } else {\n            this.surface.clear();\n            this.surface.resize();\n        }\n    },\n\n    _surfaceWrap: function() {\n        return this.element;\n    },\n\n    _redraw: function() {\n        var model = this._getModel();\n        this._size = {\n            width: model.options.width,\n            height: model.options.height\n        };\n\n        this._destroyView();\n\n        this._model = model;\n        this._plotArea = model._plotArea;\n\n        model.renderVisual();\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.setup();\n                }\n            });\n        }\n\n        this._initSurface();\n        this.surface.draw(model.visual);\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.play();\n                }\n            });\n        }\n\n        this._tooltip = this._createTooltip();\n        this._highlight = new Highlight();\n        this._setupSelection();\n        this._createPannable();\n        this._createZoomSelection();\n        this._createMousewheelZoom();\n\n        this.trigger(RENDER);\n        triggerPaneRender(this._plotArea.panes);\n\n        if (!this._navState) {\n            this._cancelDomEvents();\n        }\n    },\n\n    exportVisual: function(exportOptions) {\n        var visual;\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n            var currentOptions = this.options;\n            var options = deepExtend({}, exportOptions.options, {\n                chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                }\n            });\n\n            clearMissingValues(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions, options);\n            this._initTheme(this.options, this._theme);\n            this.bindCategories();\n\n            var model = this._getModel();\n\n            model.renderVisual();\n            triggerPaneRender(model._plotArea.panes);\n\n            visual = model.visual;\n\n            this.options = currentOptions;\n        } else {\n            visual = this.surface.exportVisual();\n        }\n\n        return visual;\n    },\n\n    _sharedTooltip: function() {\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n    },\n\n    _createPannable: function() {\n        var options = this.options;\n        if (options.pannable !== false) {\n            this._pannable = new Pannable(this._plotArea, options.pannable);\n        }\n    },\n\n    _createZoomSelection: function() {\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        if (zoomable !== false && selection !== false) {\n            this._zoomSelection = new ZoomSelection(this, selection);\n        }\n    },\n\n    _createMousewheelZoom: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel;\n        if (zoomable !== false && mousewheel !== false) {\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n        }\n    },\n\n    _toggleDragZoomEvents: function() {\n        var pannable = this.options.pannable;\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        var mousewheel = (zoomable || {}).mousewheel;\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n        var element = this.element;\n\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\n            element.style.touchAction = this._touchAction || '';\n            this._dragZoomEnabled = false;\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n            element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n\n        this._toggleDomEvents(!allowDrag, !allowZoom);\n    },\n\n    _toggleDomEvents: function(drag, zoom) {\n        var domEvents = this.domEvents;\n        if (!domEvents) {\n            return;\n        }\n\n        if (domEvents.toggleDrag) {\n            domEvents.toggleDrag(drag);\n        }\n\n        if (domEvents.toggleZoom) {\n            domEvents.toggleZoom(zoom);\n        }\n    },\n\n    _createTooltip: function() {\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var tooltip;\n\n        if (this._sharedTooltip()) {\n            tooltip = this._createSharedTooltip(tooltipOptions);\n        } else {\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\n        }\n\n        return tooltip;\n    },\n\n    _createSharedTooltip: function(options) {\n        return new SharedTooltip(this._plotArea, options);\n    },\n\n    applyDefaults: function(options, themeOptions) {\n        applyAxisDefaults(options, themeOptions);\n        applySeriesDefaults(options, themeOptions);\n    },\n\n    applySeriesColors: function() {\n        var options = this.options;\n        var series = options.series;\n        var colors = options.seriesColors || [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var seriesColor = colors[i % colors.length];\n            var defaults = currentSeries._defaults;\n\n            currentSeries.color = currentSeries.color || seriesColor;\n            if (defaults) {\n                defaults.color = defaults.color || seriesColor;\n            }\n        }\n    },\n\n    _getModel: function() {\n        var options = this.options;\n        var plotArea = this._createPlotArea();\n        var model = new dataviz.RootElement(this._modelOptions());\n        model.chart = this;\n        model._plotArea = plotArea;\n\n        var title = Title.buildTitle(options.title);\n        var subtitle = Title.buildTitle(options.subtitle, {\n            align: options.title.align,\n            position: options.title.position\n        });\n        model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n        if (options.legend && options.legend.visible) {\n            model.append(new Legend(plotArea.options.legend, this.chartService));\n        }\n        model.append(plotArea);\n        model.reflow();\n\n        return model;\n    },\n\n    _modelOptions: function() {\n        var options = this.options;\n        var size = this.getSize();\n\n        return deepExtend({\n            transitions: options.transitions,\n            width: size.width || datavizConstants.DEFAULT_WIDTH,\n            height: size.height || datavizConstants.DEFAULT_HEIGHT\n        }, options.chartArea);\n    },\n\n    _createPlotArea: function(skipSeries) {\n        var options = this.options;\n\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n        return plotArea;\n    },\n\n    _setupSelection: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var axes = ref._plotArea.axes;\n        var selections = this._selections = [];\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var options = axis.options;\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                var range = axis.range();\n\n                var selection = new Selection(this$1$1, axis,\n                    deepExtend({ min: range.min, max: range.max }, options.select)\n                );\n\n                selections.push(selection);\n            }\n        }\n    },\n\n    _selectStart: function(e) {\n        return this.trigger(SELECT_START, e);\n    },\n\n    _select: function(e) {\n        return this.trigger(SELECT, e);\n    },\n\n    _selectEnd: function(e) {\n        return this.trigger(SELECT_END, e);\n    },\n\n    _initHandlers: function() {\n        this._clickHandler = this._click.bind(this);\n        this._mousewheelHandler = this._mousewheel.bind(this);\n        this._mouseleaveHandler = this._mouseleave.bind(this);\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n        this._mousemove = kendo.throttle(\n            this._mousemove.bind(this),\n            MOUSEMOVE_DELAY\n        );\n    },\n\n    addObserver: function(observer) {\n        if (observer) {\n            this.observers.push(observer);\n        }\n    },\n\n    removeObserver: function(observer) {\n        var index = this.observers.indexOf(observer);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n        }\n    },\n\n    requiresHandlers: function(eventNames) {\n        var observers = this.observers;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].requiresHandlers(eventNames)) {\n                return true;\n            }\n        }\n    },\n\n    trigger: function(name, args) {\n        if (args === void 0) { args = {}; }\n\n        args.sender = this;\n\n        if (name === SHOW_TOOLTIP) {\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n        } else if (name === SERIES_OVER) {\n            this._updateDrilldownPoint(args.point);\n        } else if (name === SERIES_LEAVE) {\n            this._resetDrilldownPoint();\n        } else if (name === SERIES_CLICK) {\n            this._startDrilldown(args.point);\n        }\n\n        var observers = this.observers;\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, args)) {\n                isDefaultPrevented = true;\n            }\n        }\n\n        return isDefaultPrevented;\n    },\n\n    _attachEvents: function() {\n        var element = this.element;\n\n        this._touchAction = element.style.touchAction;\n\n        var obj;\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n\n        this.domEvents = services.DomEventsBuilder.create(this.element, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n\n        this._toggleDragZoomEvents();\n    },\n\n    _mouseleave: function(e) {\n        if (this._hoveredPoint) {\n            this._hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (this._plotAreaHovered) {\n            this._plotAreaHovered = false;\n            this.trigger(PLOT_AREA_LEAVE);\n        }\n    },\n\n    _cancelDomEvents: function() {\n        if (this.domEvents && this.domEvents.cancel) {\n            this.domEvents.cancel();\n        }\n    },\n\n    _gesturestart: function(e) {\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n            this._gestureDistance = e.distance;\n            this._unsetActivePoint();\n            this.surface.suspendTracking();\n        }\n    },\n\n    _gestureend: function(e) {\n        if (this._zooming && !this._stopChartHandlers(e)) {\n            if (this.surface) {\n                this.surface.resumeTracking();\n            }\n            this._zooming = false;\n            this.trigger(ZOOM_END, {});\n        }\n    },\n\n    _gesturechange: function(e) {\n        var mousewheelZoom = this._mousewheelZoom;\n\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\n            e.preventDefault();\n            var previousGestureDistance = this._gestureDistance;\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n            if (Math.abs(scaleDelta) >= 0.1) {\n                scaleDelta = Math.round(scaleDelta * 10);\n\n                this._gestureDistance = e.distance;\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                        this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n                }\n            }\n        }\n    },\n\n    _mouseout: function(e) {\n        if (e.element) {\n            var element = this._drawingChartElement(e.element, e);\n\n            if (element && element.leave) {\n                element.leave(this, e.originalEvent);\n            }\n        }\n    },\n\n    _start: function(e) {\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n            this._startNavigation(e, coords, DRAG_START);\n        }\n\n        if (this._pannable && this._pannable.start(e)) {\n            this.surface.suspendTracking();\n            this._unsetActivePoint();\n            this._suppressHover = true;\n            this.chartService.panning = true;\n        }\n\n        if (this._zoomSelection) {\n            if (this._zoomSelection.start(e)) {\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n            }\n        }\n    },\n\n    _move: function(e) {\n        var ref = this;\n        var state = ref._navState;\n        var pannable = ref._pannable;\n\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        if (pannable) {\n            var ranges = pannable.move(e);\n\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                pannable.pan();\n            }\n        } else if (state) {\n            var ranges$1 = {};\n            var axes = state.axes;\n\n            for (var i = 0; i < axes.length; i++) {\n                var currentAxis = axes[i];\n                var axisName = currentAxis.options.name;\n                if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                }\n            }\n\n            state.axisRanges = ranges$1;\n            this.trigger(DRAG, {\n                axisRanges: ranges$1,\n                originalEvent: e\n            });\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.move(e);\n        }\n    },\n\n    _end: function(e) {\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        var pannable = this._pannable;\n        if (pannable && pannable.end(e)) {\n            this.surface.resumeTracking();\n            this.trigger(DRAG_END, {\n                axisRanges: axisRanges(this._plotArea.axes),\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this.chartService.panning = false;\n        } else {\n            this._endNavigation(e, DRAG_END);\n        }\n\n        if (this._zoomSelection) {\n            var ranges = this._zoomSelection.end(e);\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                this._zoomSelection.zoom();\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n            }\n        }\n    },\n\n    _stopChartHandlers: function(e) {\n        var selections = this._selections || [];\n        if (!selections.length) {\n            return false;\n        }\n\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n        if (pane) {\n            for (var idx = 0; idx < selections.length; idx++) {\n                if (selections[idx].onPane(pane)) {\n                    return true;\n                }\n            }\n        }\n    },\n\n    _mousewheelZoomRate: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel || {};\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n        var mousewheelZoom = this._mousewheelZoom;\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (mousewheelZoom) {\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                e.preventDefault();\n\n                if (!this._zooming) {\n                    this._unsetActivePoint();\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1.trigger(ZOOM_END, args);\n                    this$1$1._zooming = false;\n                    if (this$1$1.surface) {\n                        this$1$1.surface.resumeTracking();\n                    }\n                }, MOUSEWHEEL_DELAY);\n            }\n        } else {\n            var state = this._navState;\n            if (!state) {\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\n                if (!prevented) {\n                    state = this._navState;\n                }\n            }\n\n            if (state) {\n                var totalDelta = state.totalDelta || delta;\n                state.totalDelta = totalDelta + delta;\n\n                var axes = this._navState.axes;\n                var ranges = {};\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1$1._mousewheelZoomRate(), coords);\n                    }\n                }\n\n                this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                });\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1._endNavigation(e, ZOOM_END);\n                }, MOUSEWHEEL_DELAY);\n            }\n        }\n    },\n\n    _startNavigation: function(e, coords, chartEvent) {\n        var plotArea = this._model._plotArea;\n        var pane = plotArea.findPointPane(coords);\n        var axes = plotArea.axes.slice(0);\n\n        if (!pane) {\n            return;\n        }\n\n        var ranges = axisRanges(axes);\n\n        var prevented = this.trigger(chartEvent, {\n            axisRanges: ranges,\n            originalEvent: e\n        });\n\n        if (prevented) {\n            this._cancelDomEvents();\n        } else {\n            this._suppressHover = true;\n            this._unsetActivePoint();\n            this._navState = {\n                axisRanges: ranges,\n                pane: pane,\n                axes: axes\n            };\n        }\n    },\n\n    _endNavigation: function(e, chartEvent) {\n        if (this._navState) {\n            this.trigger(chartEvent, {\n                axisRanges: this._navState.axisRanges,\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this._navState = null;\n        }\n    },\n\n    _getChartElement: function(e, match) {\n        var element = this.surface.eventTarget(e);\n        if (element) {\n            return this._drawingChartElement(element, e, match);\n        }\n    },\n\n    _drawingChartElement: function(element, e, match) {\n        var current = element;\n        var chartElement;\n        while (current && !chartElement) {\n            chartElement = current.chartElement;\n            current = current.parent;\n        }\n\n        if (chartElement) {\n            if (chartElement.aliasFor) {\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n            }\n\n            if (match) {\n                chartElement = chartElement.closest(match);\n                if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                }\n            }\n\n            return chartElement;\n        }\n    },\n\n    _eventCoordinates: function(e) {\n        var coordinates = dataviz.eventCoordinates(e);\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\n    },\n\n    _elementPadding: function() {\n        if (!this._padding) {\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            this._padding = {\n                top: paddingTop,\n                left: paddingLeft\n            };\n        }\n\n        return this._padding;\n    },\n\n    _toDocumentCoordinates: function(point) {\n        var padding = this._elementPadding();\n        var offset = dataviz.elementOffset(this.element);\n\n        return {\n            left: round(point.x + padding.left + offset.left),\n            top: round(point.y + padding.top + offset.top)\n        };\n    },\n\n    _toModelCoordinates: function(clientX, clientY) {\n        var element = this.element;\n        var offset = dataviz.elementOffset(element);\n        var padding = this._elementPadding();\n        var inverseTransform = dataviz.elementScale(element).invert();\n        var point = new GeometryPoint(\n            clientX - offset.left - padding.left,\n            clientY - offset.top - padding.top\n        ).transform(inverseTransform);\n\n        return new Point(point.x, point.y);\n    },\n\n    _tap: function(e) {\n        var this$1$1 = this;\n\n        var drawingElement = this.surface.eventTarget(e);\n        var element = this._drawingChartElement(drawingElement, e);\n        var sharedTooltip = this._sharedTooltip();\n\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n            this._unsetActivePoint();\n        }\n\n        if (sharedTooltip) {\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n        }\n\n        this._propagateClick(element, e);\n\n        //part of fix for hover issue on windows touch\n        this.handlingTap = true;\n        setTimeout(function () {\n            this$1$1.handlingTap = false;\n        }, 0);\n    },\n\n    _click: function(e) {\n        var element = this._getChartElement(e);\n        this._propagateClick(element, e);\n    },\n\n    _propagateClick: function(element, e) {\n        var this$1$1 = this;\n\n        var current = element;\n        while (current) {\n            if (current.click) {\n                current.click(this$1$1, e);\n            }\n\n            current = current.parent;\n        }\n    },\n\n    _startHover: function(element, e) {\n        if (this._suppressHover) {\n            return false;\n        }\n\n        var point = this._drawingChartElement(element, e, function(element) {\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n        });\n\n        this._showInactiveOpacity(point, e);\n\n        return point;\n    },\n\n    _displayTooltip: function(point) {\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n        if (tooltipOptions.visible) {\n            this._tooltip.show(point);\n        }\n    },\n\n    _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n        if (!chartInstance) {\n            return;\n        }\n\n        if (multipleSeries) {\n            this._updateSeriesOpacity(activePoint);\n            this._applySeriesOpacity(chartInstance.children, null, true);\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\n            this._highlight.show(highlightPoints || activePoint);\n        } else {\n            var inactivePoints;\n\n            if (!chartInstance.supportsPointInactiveOpacity()) {\n                this._highlight.show(activePoint);\n                return;\n            }\n\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n            if (inactivePoints && inactivePoints.length) {\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n            }\n        }\n    },\n\n    _getInactivePoints: function(activePoint, chartInstance) {\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n        return allPoints.filter(function (point) { return point !== activePoint; });\n    },\n\n    _getAllPointsOfType: function(container, type) {\n        var this$1$1 = this;\n\n        var points = [];\n\n        for (var i = 0; i < container.children.length; i++) {\n            var element = container.children[i];\n\n            if (element.constructor === type) {\n                points.push(element);\n            } else if (element.children && element.children.length) {\n                points = points.concat(this$1$1._getAllPointsOfType(element, type));\n            }\n        }\n\n        return points;\n    },\n\n    _updateHoveredPoint: function(point, e) {\n        var hoveredPoint = this._hoveredPoint;\n\n        if (hoveredPoint && hoveredPoint !== point) {\n            hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (point && hoveredPoint !== point && point.over) {\n            this._hoveredPoint = point;\n            point.over(this, e);\n        }\n    },\n\n    _updateDrilldownPoint: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var ref = SeriesBinder.current.bindPoint(point.series, null, point.dataItem);\n        var fields = ref.fields;\n        if (fields.drilldown) {\n            this._drilldownState = { cursor: this.element.style.cursor };\n            this.element.style.cursor = 'pointer';\n        }\n    },\n\n    _resetDrilldownPoint: function() {\n        if (this._drilldownState) {\n            this.element.style.cursor = this._drilldownState.cursor;\n            this._drilldownState = null;\n        }\n    },\n\n    _startDrilldown: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var series = point.series;\n        var ref = SeriesBinder.current.bindPoint(series, null, point.dataItem);\n        var fields = ref.fields;\n        var value = fields.drilldown;\n        if (value) {\n            var args = { series: series, point: point, value: value, sender: this };\n            this.trigger(DRILLDOWN, args);\n        }\n    },\n\n    _updateSeriesOpacity: function(point, resetOpacity) {\n        var this$1$1 = this;\n\n        var plotArea = this._plotArea;\n        var length = plotArea.series.length;\n\n        for (var i = 0; i < length; i++) {\n            var currSeries = plotArea.series[i];\n            var defaultOpacity = this$1$1._getDefaultOpacityForSeries(currSeries);\n            var inactiveOpacity = this$1$1._getInactiveOpacityForSeries(currSeries);\n\n            if (!resetOpacity && currSeries !== point.series) {\n                currSeries.defaultOpacity = defaultOpacity;\n                currSeries.opacity = inactiveOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                }\n            } else {\n                currSeries.opacity = defaultOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                }\n            }\n        }\n    },\n\n    _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var currSeries = element.series || series;\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n            if (shouldHighlight && element.visual) {\n                var opacity = series ? series.opacity : element.series.opacity;\n                if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                }\n            }\n\n            if (element.children && element.children.length) {\n                this$1$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n            }\n        }\n    },\n\n    _chartInstanceFromPoint: function(point) {\n        var chartInstance = point.parent;\n\n        while (chartInstance && !chartInstance.plotArea) {\n            chartInstance = chartInstance.parent;\n        }\n\n        return chartInstance;\n    },\n\n    _showInactiveOpacity: function(point, e) {\n        var activePoint = this._activePoint;\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n\n        this._updateHoveredPoint(point, e);\n\n        if (point && activePoint !== point && point.hover) {\n            this._activePoint = point;\n\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\n                this._displayTooltip(point);\n\n                if (hasInactiveOpacity) {\n                    this._displayInactiveOpacity(point, multipleSeries);\n                } else {\n                    this._highlight.show(point);\n                }\n            }\n        }\n\n        return point;\n    },\n\n    _hideInactiveOpacity: function(point) {\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n        if (hasInactiveOpacity) {\n            if (multipleSeries && this._activeChartInstance) {\n                this._updateSeriesOpacity(point, true);\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._activeChartInstance = null;\n            }\n            this._highlight && this._highlight.hide();\n            this._activePoint = null;\n        }\n    },\n\n    _hasInactiveOpacity: function() {\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\n    },\n\n    _getInactiveOpacityForSeries: function(series) {\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _getDefaultOpacityForSeries: function(series) {\n        return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _mouseover: function(e) {\n        var point = this._startHover(e.element, e.originalEvent);\n\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n            var obj;\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n        }\n    },\n\n    _mouseMoveTracking: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n        var point = ref._activePoint;\n        var coords = this._eventCoordinates(e);\n\n        if (this._plotArea.box.containsPoint(coords)) {\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                        if (tooltipOptions.visible) {\n                            tooltip.show(seriesPoint);\n                        }\n\n                        highlight.show(seriesPoint);\n                    }\n                }\n            }\n        } else {\n            var obj;\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            this._unsetActivePoint();\n            this._mouseMoveTrackHandler = null;\n\n            this._hideInactiveOpacity(point);\n        }\n    },\n\n    _mousemove: function(e) {\n        var coords = this._eventCoordinates(e);\n        var plotArea = this._plotArea;\n\n        this._trackCrosshairs(coords);\n\n        if (plotArea.hover) {\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\n            if (overPlotArea) {\n                this._plotAreaHovered = true;\n                this._plotArea.hover(this, e);\n            } else if (this._plotAreaHovered && !overPlotArea) {\n                this._plotAreaHovered = false;\n                this.trigger(PLOT_AREA_LEAVE);\n            }\n        }\n\n        if (this._sharedTooltip()) {\n            this._trackSharedTooltip(coords, e);\n        }\n    },\n\n    _trackCrosshairs: function(coords) {\n        var crosshairs = this._plotArea.crosshairs;\n\n        for (var i = 0; i < crosshairs.length; i++) {\n            var current = crosshairs[i];\n\n            if (current.box.containsPoint(coords)) {\n                current.showAt(coords);\n            } else {\n                current.hide();\n            }\n        }\n    },\n\n    _trackSharedTooltip: function(coords, e, toggle) {\n        if (this._suppressHover) {\n            return;\n        }\n\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var plotArea = ref._plotArea;\n        var categoryAxis = ref._plotArea.categoryAxis;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        if (plotArea.backgroundContainsPoint(coords)) {\n            var index = categoryAxis.pointCategoryIndex(coords);\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                var points = plotArea.pointsByCategoryIndex(index);\n                var pointArgs = points.map(function(point) {\n                    return point.eventArgs(e);\n                });\n                var hoverArgs = pointArgs[0] || {};\n                hoverArgs.categoryPoints = pointArgs;\n\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                        tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n\n                    this._sharedHighlight = true;\n                } else {\n                    tooltip.hide();\n                }\n\n                this._tooltipCategoryIx = index;\n            } else if (toggle && this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._sharedHighlight = false;\n            }\n        } else if (this._sharedHighlight) {\n            highlight.hide();\n            tooltip.hide();\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n        }\n    },\n\n    hideElements: function(options) {\n        var plotArea = this._plotArea;\n        this._mousemove.cancel();\n\n        plotArea.hideCrosshairs();\n\n        this._unsetActivePoint(options);\n    },\n\n    _unsetActivePoint: function(options) {\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        this._activePoint = null;\n        this._hoveredPoint = null;\n\n        if (tooltip && !(options && options.keepTooltipOpen)) {\n            tooltip.hide();\n        }\n\n        this._tooltipCategoryIx = null;\n        this._sharedHighlight = false;\n\n        if (highlight) {\n            highlight.hide();\n        }\n    },\n\n    _deferRedraw: function() {\n        this._redraw();\n    },\n\n    _clearRedrawTimeout: function() {\n        if (this._redrawTimeout) {\n            clearInterval(this._redrawTimeout);\n            this._redrawTimeout = null;\n        }\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var definitions = [].concat(options.categoryAxis);\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.autoBind !== false) {\n                this$1$1.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        }\n    },\n\n    bindCategoryAxisFromSeries: function(axis, axisIx) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var seriesLength = series.length;\n        var uniqueCategories = new dataviz.HashMap();//perf improvement in case type category with dates\n        var items = [];\n        var bindable = false;\n        var dateAxis;\n\n        for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n            var s = series[seriesIx];\n            var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n            var data = s.data;\n            var dataLength = data.length;\n            var bind = s.categoryField && onAxis;\n            bindable = bind || bindable;\n\n            if (bind && dataLength > 0) {\n                dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                var getFn = dateAxis ? getDateField : getField;\n\n                for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                    var dataRow = data[dataIx];\n                    var category = getFn(s.categoryField, dataRow, this$1$1.chartService.intl);\n\n                    if (dateAxis || !uniqueCategories.get(category)) {\n                        items.push([ category, dataRow ]);\n\n                        if (!dateAxis) {\n                            uniqueCategories.set(category, true);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (items.length > 0) {\n            if (dateAxis) {\n                items = uniqueDates(items, function(a, b) {\n                    return dataviz.dateComparer(a[0], b[0]);\n                });\n            }\n\n            var result = transpose(items);\n            axis.categories = result[0];\n        } else if (bindable) {\n            axis.categories = [];\n        }\n    },\n\n    _isBindable: function(series) {\n        var valueFields = SeriesBinder.current.valueFields(series);\n        var result = true;\n\n        for (var i = 0; i < valueFields.length; i++) {\n            var field = valueFields[i];\n            if (field === VALUE) {\n                field = \"field\";\n            } else {\n                field = field + \"Field\";\n            }\n\n            if (!defined(series[field])) {\n                result = false;\n                break;\n            }\n        }\n\n        return result;\n    },\n\n    _noTransitionsRedraw: function() {\n        var options = this.options;\n        var transitionsState;\n\n        if (options.transitions !== false) {\n            options.transitions = false;\n            transitionsState = true;\n        }\n\n        this._redraw();\n\n        if (transitionsState) {\n            options.transitions = true;\n        }\n    },\n\n    _legendItemHover: function(seriesIndex, pointIndex) {\n        var ref = this;\n        var plotArea = ref._plotArea;\n        var highlight = ref._highlight;\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n        var items;\n\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL, PYRAMID ])) {\n            items = plotArea.findPoint(function(point) {\n                return point.series.index === seriesIndex && point.index === pointIndex;\n            });\n        } else {\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\n        }\n\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n            var multipleSeries = plotArea.series.length > 1;\n            var point = items.length ? items[0] : items;\n\n            this._displayInactiveOpacity(point, multipleSeries, items);\n        } else {\n            highlight.show(items);\n        }\n    },\n\n    _shouldAttachMouseMove: function() {\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n    },\n\n    updateMouseMoveHandler: function() {\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n    },\n\n    applyOptions: function(options, theme) {\n        clearMissingValues(this._originalOptions, options);\n        this._originalOptions = deepExtend(this._originalOptions, options);\n        this.options = deepExtend({}, this._originalOptions);\n\n        if (theme) {\n            this._theme = theme;\n            this.chartService.theme = theme;\n        }\n        this._initTheme(this.options, this._theme);\n\n        this._toggleDragZoomEvents();\n    },\n\n    setOptions: function(options, theme) {\n        this.applyOptions(options, theme);\n        this.bindCategories();\n        this.redraw();\n        this.updateMouseMoveHandler();\n    },\n\n    setDirection: function(rtl) {\n        this.chartService.rtl = Boolean(rtl);\n        if (this.surface && this.surface.type === 'svg') {\n            this._destroySurface();\n        }\n    },\n\n    setIntlService: function(intl) {\n        this.chartService.intl = intl;\n    },\n\n    noTransitionsRedraw: function() {\n        this._noTransitionsRedraw();\n    },\n\n    destroy: function() {\n        this._destroyed = true;\n\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n        if (this.domEvents) {\n            this.domEvents.destroy();\n            delete this.domEvents;\n        }\n\n        if (this._mouseMoveTrackHandler) {\n            var obj$1;\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n        }\n\n        this._destroyView();\n\n        this._destroySurface();\n\n        this._clearRedrawTimeout();\n    },\n\n    _destroySurface: function() {\n        var surface = this.surface;\n        if (surface) {\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n            surface.destroy();\n\n            this.surface = null;\n        }\n    },\n\n    _destroySelections: function() {\n        var selections = this._selections;\n\n        if (selections) {\n            while (selections.length > 0) {\n                selections.shift().destroy();\n            }\n        }\n    },\n\n    _destroyView: function() {\n        var model = this._model;\n\n        if (model) {\n            model.destroy();\n            this._model = null;\n        }\n\n        this._unsetActivePoint();\n        this._resetDrilldownPoint();\n        this._destroySelections();\n\n        if (this._tooltip) {\n            this._tooltip.destroy();\n        }\n\n        if (this._highlight) {\n            this._highlight.destroy();\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.destroy();\n            delete this._zoomSelection;\n        }\n\n        if (this._pannable) {\n            this._pannable.destroy();\n            delete this._pannable;\n        }\n\n        if (this._mousewheelZoom) {\n            this._mousewheelZoom.destroy();\n            delete this._mousewheelZoom;\n        }\n    }\n});\n\nfunction resolveAxisAliases(options) {\n    var aliases = AXIS_NAMES;\n\n    for (var idx = 0; idx < aliases.length; idx++) {\n        var alias = aliases[idx] + \"Axes\";\n        if (options[alias]) {\n            options[aliases[idx] + \"Axis\"] = options[alias];\n            delete options[alias];\n        }\n    }\n}\n\nfunction pointByCategoryName(points, name) {\n    if (points) {\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx].category === name) {\n                return [ points[idx] ];\n            }\n        }\n    }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n    var axisName, axisDefaults, axes;\n\n    function mapAxisOptions(axisOptions) {\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\n        var result = deepExtend({},\n            themeAxisDefaults,\n            themeAxisDefaults[axisName],\n            axisDefaults,\n            axisDefaults[axisName], {\n                line: { color: axisColor },\n                labels: { color: axisColor },\n                title: { color: axisColor }\n            },\n            axisOptions\n        );\n\n        delete result[axisName];\n\n        return result;\n    }\n\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n        axisName = AXIS_NAMES[idx] + \"Axis\";\n        axisDefaults = options.axisDefaults || {};\n        axes = [].concat(options[axisName]);\n\n        axes = axes.map(mapAxisOptions);\n\n        options[axisName] = axes.length > 1 ? axes : axes[0];\n    }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n    var series = options.series;\n    var seriesLength = series.length;\n    var seriesDefaults = options.seriesDefaults;\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n    cleanupNestedSeriesDefaults(commonDefaults);\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n    for (var i = 0; i < seriesLength; i++) {\n        var seriesType = series[i].type || options.seriesDefaults.type;\n\n        var baseOptions = deepExtend(\n            { data: [] },\n            commonThemeDefaults,\n            themeSeriesDefaults[seriesType],\n            { tooltip: options.tooltip },\n            commonDefaults,\n            seriesDefaults[seriesType]\n        );\n\n        series[i]._defaults = baseOptions;\n        series[i] = deepExtend({}, baseOptions, series[i]);\n        series[i].data = series[i].data || [];\n    }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n    delete seriesDefaults.bar;\n    delete seriesDefaults.column;\n    delete seriesDefaults.rangeColumn;\n    delete seriesDefaults.line;\n    delete seriesDefaults.verticalLine;\n    delete seriesDefaults.pie;\n    delete seriesDefaults.donut;\n    delete seriesDefaults.area;\n    delete seriesDefaults.verticalArea;\n    delete seriesDefaults.scatter;\n    delete seriesDefaults.scatterLine;\n    delete seriesDefaults.bubble;\n    delete seriesDefaults.candlestick;\n    delete seriesDefaults.ohlc;\n    delete seriesDefaults.boxPlot;\n    delete seriesDefaults.bullet;\n    delete seriesDefaults.verticalBullet;\n    delete seriesDefaults.polarArea;\n    delete seriesDefaults.polarLine;\n    delete seriesDefaults.radarArea;\n    delete seriesDefaults.radarLine;\n    delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n    var ranges = {};\n\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var axisName = axis.options.name;\n        if (axisName) {\n            ranges[axisName] = axis.range();\n        }\n    }\n\n    return ranges;\n}\n\nfunction sortDates(dates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    for (var i = 1, length = dates.length; i < length; i++) {\n        if (comparer(dates[i], dates[i - 1]) < 0) {\n            dates.sort(comparer);\n            break;\n        }\n    }\n\n    return dates;\n}\n\nfunction uniqueDates(srcDates, comparer) {\n    if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n    var dates = sortDates(srcDates, comparer);\n    var length = dates.length;\n    var result = length > 0 ? [ dates[0] ] : [];\n\n    for (var i = 1; i < length; i++) {\n        if (comparer(dates[i], last(result)) !== 0) {\n            result.push(dates[i]);\n        }\n    }\n\n    return result;\n}\n\nfunction transpose(rows) {\n    var rowCount = rows.length;\n    var result = [];\n\n    for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n        var row = rows[rowIx];\n        var colCount = row.length;\n\n        for (var colIx = 0; colIx < colCount; colIx++) {\n            result[colIx] = result[colIx] || [];\n            result[colIx].push(row[colIx]);\n        }\n    }\n\n    return result;\n}\n\nvar DATA_FIELDS = [ 'data', 'categories' ];\n\nfunction clearMissingValues(originalOptions, options) {\n    for (var field in options) {\n        if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n            var fieldValue = options[field];\n            var originalValue = originalOptions[field];\n            if (defined(originalValue)) {\n                var nullValue = fieldValue === null;\n                if ((nullValue || !defined(fieldValue))) {\n                    delete originalOptions[field];\n                    if (nullValue) {\n                        delete options[field];\n                    }\n                } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                        clearMissingValues(originalValue, fieldValue);\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction triggerPaneRender(panes) {\n    for (var idx = 0; idx < panes.length; idx++) {\n        panes[idx].notifyRender();\n    }\n}\n\nsetDefaultOptions(Chart, {\n    renderAs: \"\",\n    chartArea: {},\n    legend: {\n        visible: true,\n        labels: {}\n    },\n    categoryAxis: {},\n    seriesDefaults: {\n        type: COLUMN,\n        data: [],\n        highlight: {\n            visible: true\n        },\n        labels: {},\n        negativeValues: {\n            visible: false\n        }\n    },\n    series: [],\n    seriesColors: null,\n    tooltip: {\n        visible: false\n    },\n    transitions: true,\n    valueAxis: {},\n    plotArea: {},\n    title: {},\n    xAxis: {},\n    yAxis: {},\n    panes: [ {} ],\n    pannable: false,\n    zoomable: false\n});\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    Aggregates: Aggregates,\n    AreaChart: AreaChart,\n    AreaSegment: AreaSegment,\n    AxisGroupRangeTracker: AxisGroupRangeTracker,\n    Bar: Bar,\n    BarChart: BarChart,\n    BarLabel: BarLabel,\n    BoxPlotChart: BoxPlotChart,\n    BoxPlot: BoxPlot,\n    BubbleChart: BubbleChart,\n    Bullet: Bullet,\n    BulletChart: BulletChart,\n    CandlestickChart: CandlestickChart,\n    Candlestick: Candlestick,\n    CategoricalChart: CategoricalChart,\n    CategoricalErrorBar: CategoricalErrorBar,\n    CategoricalPlotArea: CategoricalPlotArea,\n    Chart: Chart,\n    ChartContainer: ChartContainer,\n    ClipAnimation: ClipAnimation,\n    ClusterLayout: ClusterLayout,\n    Crosshair: Crosshair,\n    CrosshairTooltip: CrosshairTooltip,\n    DefaultAggregates: DefaultAggregates,\n    DonutChart: DonutChart,\n    DonutPlotArea: DonutPlotArea,\n    DonutSegment: DonutSegment,\n    ErrorBarBase: ErrorBarBase,\n    ErrorRangeCalculator: ErrorRangeCalculator,\n    Highlight: Highlight,\n    SharedTooltip: SharedTooltip,\n    Legend: Legend,\n    LegendItem: LegendItem,\n    LegendLayout: LegendLayout,\n    LineChart: LineChart,\n    LinePoint: LinePoint,\n    LineSegment: LineSegment,\n    Pane: Pane,\n    PieAnimation: PieAnimation,\n    PieChart: PieChart,\n    PieChartMixin: PieChartMixin,\n    PiePlotArea: PiePlotArea,\n    PieSegment: PieSegment,\n    PlotAreaBase: PlotAreaBase,\n    PlotAreaEventsMixin: PlotAreaEventsMixin,\n    PlotAreaFactory: PlotAreaFactory,\n    PointEventsMixin: PointEventsMixin,\n    RangeBar: RangeBar,\n    RangeBarChart: RangeBarChart,\n    RangeAreaPoint: RangeAreaPoint,\n    RangeAreaChart: RangeAreaChart,\n    ScatterChart: ScatterChart,\n    ScatterErrorBar: ScatterErrorBar,\n    ScatterLineChart: ScatterLineChart,\n    Selection: Selection,\n    SeriesAggregator: SeriesAggregator,\n    SeriesBinder: SeriesBinder,\n    SplineSegment: SplineSegment,\n    SplineAreaSegment: SplineAreaSegment,\n    StackWrap: StackWrap,\n    Tooltip: Tooltip,\n    OHLCChart: OHLCChart,\n    OHLCPoint: OHLCPoint,\n    WaterfallChart: WaterfallChart,\n    WaterfallSegment: WaterfallSegment,\n    XYPlotArea: XYPlotArea,\n    MousewheelZoom: MousewheelZoom,\n    ZoomSelection: ZoomSelection,\n    Pannable: Pannable,\n    ChartAxis: ChartAxis,\n    ChartPane: ChartPane,\n    ChartPlotArea: ChartPlotArea,\n    findAxisByName: findAxisByName,\n    anyHasZIndex: anyHasZIndex,\n    appendIfNotNull: appendIfNotNull,\n    areNumbers: areNumbers,\n    bindSegments: bindSegments,\n    categoriesCount: categoriesCount,\n    countNumbers: countNumbers,\n    equalsIgnoreCase: equalsIgnoreCase,\n    evalOptions: evalOptions,\n    filterSeriesByType: filterSeriesByType,\n    getDateField: getDateField,\n    getField: getField,\n    hasGradientOverlay: hasGradientOverlay,\n    hasValue: hasValue,\n    isDateAxis: isDateAxis,\n    segmentVisible: segmentVisible,\n    singleItemOrArray: singleItemOrArray,\n    createOutOfRangePoints: createOutOfRangePoints\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    const kendo = window.kendo;\n    const dataviz = kendo.dataviz;\n    const Widget = kendo.ui.Widget;\n\n    const ChartBreadcrumb = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            if (!options.chart) {\n                throw new Error('ChartBreadcrumb: No Chart instance supplied as `options.chart`');\n            }\n\n            this._attachChartEvents();\n            this._renderBreadcrumb();\n\n            kendo.notify(this, dataviz.ui);\n        },\n\n        events: [],\n\n        options: {\n            name: \"ChartBreadcrumb\",\n            rootItem: {\n                type: 'rootitem',\n                icon: 'home',\n                text: 'Home',\n                showIcon: true\n            }\n        },\n\n        destroy: function() {\n            if (this.breadcrumb) {\n                this.breadcrumb.destroy();\n                this.breadcrumb = null;\n            }\n\n            if (this.chart) {\n                this.chart.unbind('drilldown', this._onChartDrilldown);\n                this.chart.unbind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n                this.chart = null;\n            }\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _attachChartEvents(deferred) {\n            const options = this.options;\n\n            if (typeof options.chart.resetDrilldownLevel === 'function') {\n                this.chart = options.chart;\n            } else if (typeof options.chart === 'string') {\n                this.chart = $(options.chart).getKendoChart() || $('#' + options.chart).getKendoChart();\n\n                if (!this.chart && !deferred) {\n                    setTimeout(() => this._attachChartEvents(true));\n                    return;\n                }\n            } else {\n                throw new Error('ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector');\n            }\n\n            this._onChartDrilldown = this._onChartDrilldown.bind(this);\n            this.chart.bind('drilldown', this._onChartDrilldown);\n\n            this._onChartDrilldownLevelChange = this._onChartDrilldownLevelChange.bind(this);\n            this.chart.bind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n        },\n\n        _renderBreadcrumb: function() {\n            const breadcrumbElement = $('<nav />');\n            this.element.append(breadcrumbElement);\n            this.breadcrumb = new kendo.ui.Breadcrumb(breadcrumbElement, {\n                items: [this.options.rootItem]\n            });\n\n            this.breadcrumb.bind('click', e => this._onBreadcrumbClick(e));\n        },\n\n        _onBreadcrumbClick: function(e) {\n            if (!this.breadcrumb || !this.chart) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            const level = items.findIndex((item) => item === e.item);\n\n            const chart = this.chart;\n            chart.resetDrilldownLevel(level);\n        },\n\n        _onChartDrilldown: function(e) {\n            if (!this.breadcrumb || e.isDefaultPrevented()) {\n                return;\n            }\n\n            this.breadcrumb.items([\n                ...this.breadcrumb.items(),\n                { type: 'item', text: e.point.category }\n            ]);\n        },\n\n        _onChartDrilldownLevelChange: function(e) {\n            if (!this.breadcrumb) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            items = items.slice(0, e.level + 1);\n            this.breadcrumb.items(items);\n        }\n    });\n\n    dataviz.ui.plugin(ChartBreadcrumb);\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    var NS = \".kendoChart\";\n    var kendo = window.kendo;\n    var Class = kendo.Class;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var dataviz = kendo.dataviz;\n    var constants = dataviz.constants;\n    var KendoChart = dataviz.Chart;\n    var SeriesBinder = dataviz.SeriesBinder;\n    var Widget = kendo.ui.Widget;\n    var DataSource = kendo.data.DataSource;\n    var deepExtend = kendo.deepExtend;\n    var defined = dataviz.defined;\n    var getField = dataviz.getField;\n    var InstanceObserver = dataviz.InstanceObserver;\n    var inArray = dataviz.inArray;\n    var services = dataviz.services;\n    var isArray = Array.isArray;\n    var extend = $.extend;\n    var template = kendo.template;\n    var encode = kendo.htmlEncode;\n\n    var MOUSELEAVE_NS = \"mouseleave\" + NS;\n    var AXIS_LABEL_CLICK = constants.AXIS_LABEL_CLICK;\n    var LEGEND_ITEM_CLICK = constants.LEGEND_ITEM_CLICK;\n    var LEGEND_ITEM_HOVER = constants.LEGEND_ITEM_HOVER;\n    var LEGEND_ITEM_LEAVE = constants.LEGEND_ITEM_LEAVE;\n    var SERIES_CLICK = constants.SERIES_CLICK;\n    var SERIES_HOVER = constants.SERIES_HOVER;\n    var SERIES_OVER = constants.SERIES_OVER;\n    var SERIES_LEAVE = constants.SERIES_LEAVE;\n    var PANE_RENDER = constants.PANE_RENDER;\n    var PLOT_AREA_CLICK = constants.PLOT_AREA_CLICK;\n    var PLOT_AREA_HOVER = constants.PLOT_AREA_HOVER;\n    var PLOT_AREA_LEAVE = constants.PLOT_AREA_LEAVE;\n    var DRAG = constants.DRAG;\n    var DRAG_END = constants.DRAG_END;\n    var DRAG_START = constants.DRAG_START;\n    var DRILLDOWN = constants.DRILLDOWN;\n    var DRILLDOWN_LEVEL_CHANGE = \"drilldownLevelChange\";\n    var ZOOM_START = constants.ZOOM_START;\n    var ZOOM = constants.ZOOM;\n    var ZOOM_END = constants.ZOOM_END;\n    var SELECT_START = constants.SELECT_START;\n    var SELECT = constants.SELECT;\n    var SELECT_END = constants.SELECT_END;\n    var RENDER = constants.RENDER;\n    var NOTE_CLICK = constants.NOTE_CLICK;\n    var NOTE_HOVER = constants.NOTE_HOVER;\n    var NOTE_LEAVE = constants.NOTE_LEAVE;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n\n    var CHANGE = \"change\";\n    var DATABOUND = \"dataBound\";\n    var LEAVE = \"leave\";\n    var MOUSEDOWN = \"down\";\n\n    var VALUE = constants.VALUE;\n    var PIE = constants.PIE;\n    var DONUT = constants.DONUT;\n    var FUNNEL = constants.FUNNEL;\n\n    var Observable = kendo.Observable;\n    var TOOLTIP_ANIMATION_DURATION = 150;\n    var TOOLTIP_SHOW_DELAY = 100;\n    var TOOLTIP_INVERSE = \"k-chart-tooltip-inverse\";\n    var SHARED_TOOLTIP_CLASS = \"k-chart-shared-tooltip\";\n    var RTL = \"rtl\";\n\n    services.DomEventsBuilder.register({\n        create: function(element, events) {\n             return new kendo.UserEvents(element, deepExtend({\n                 global: true,\n                 multiTouch: true,\n                 fastTap: true\n             }, events));\n        }\n    });\n\n    var ChartInstanceObserver = InstanceObserver.extend({\n        handlerMap: {\n            showTooltip: '_showTooltip',\n            hideTooltip: '_hideTooltip',\n            legendItemClick: '_onLegendItemClick',\n            render: '_onRender',\n            init: '_onInit',\n            drilldown: '_onDrilldown'\n        }\n    });\n\n    var Chart = Widget.extend({\n        init: function(element, userOptions) {\n            var dataSource;\n\n            kendo.destroy(element);\n\n            Widget.fn.init.call(this, element);\n\n            if (userOptions) {\n                dataSource = userOptions.dataSource;\n                delete userOptions.dataSource;\n            }\n\n            this.options = deepExtend({}, this.options, userOptions);\n\n            this.wrapper = this.element;\n            this._attachEvents();\n\n            if (userOptions) {\n                userOptions.dataSource = dataSource;\n            }\n\n            this._seriesVisibility = new SeriesVisibilityState();\n\n            this.bind(this.events, this.options);\n            this._initDataSource(userOptions);\n\n            this._drilldownState = [];\n\n            kendo.notify(this, dataviz.ui);\n        },\n\n        events: [\n            DATABOUND,\n            DRILLDOWN,\n            DRILLDOWN_LEVEL_CHANGE,\n            SERIES_CLICK,\n            SERIES_HOVER,\n            SERIES_OVER,\n            SERIES_LEAVE,\n            AXIS_LABEL_CLICK,\n            LEGEND_ITEM_CLICK,\n            LEGEND_ITEM_HOVER,\n            LEGEND_ITEM_LEAVE,\n            PANE_RENDER,\n            PLOT_AREA_CLICK,\n            PLOT_AREA_HOVER,\n            PLOT_AREA_LEAVE,\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            ZOOM_START,\n            ZOOM,\n            ZOOM_END,\n            SELECT_START,\n            SELECT,\n            SELECT_END,\n            NOTE_CLICK,\n            NOTE_HOVER,\n            NOTE_LEAVE,\n            RENDER\n        ],\n\n        options: {\n            name: \"Chart\",\n            renderAs: \"\",\n            theme: \"default\",\n            axisDefaults: {},\n            chartArea: {},\n            legend: {},\n            categoryAxis: {},\n            autoBind: true,\n            seriesDefaults: {},\n            series: [],\n            seriesColors: null,\n            tooltip: {},\n            transitions: true,\n            valueAxis: {},\n            plotArea: {},\n            title: {},\n            xAxis: {},\n            yAxis: {},\n            panes: [{}],\n            pannable: false,\n            zoomable: false\n        },\n\n        items: function() {\n            return $();\n        },\n\n        refresh: function() {\n            var chart = this;\n            var instance = chart._instance;\n            instance.applyDefaults(chart.options);\n            instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            chart.trigger(DATABOUND);\n            chart._redraw();\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.element);\n        },\n\n        redraw: function(paneName) {\n            this._size = null;\n            this._instance.redraw(paneName);\n        },\n\n        setOptions: function(options) {\n            var chart = this,\n                dataSource = options.dataSource;\n\n            delete options.dataSource;\n\n            Widget.fn._setEvents.call(chart, options);\n\n            this._instance.applyOptions(options, this._getThemeOptions(options));\n            this.options = this._instance.options;\n            this._tooltip.setOptions(this.options.tooltip);\n            this._seriesVisibility.setOptions(this.options);\n            this._sourceSeries = null;\n\n            if (dataSource) {\n                chart.setDataSource(dataSource);\n            }\n\n            if (chart._hasDataSource) {\n                chart._onDataChanged();\n            } else {\n                chart._bindCategories();\n                chart.redraw();\n            }\n\n            chart._instance.updateMouseMoveHandler();\n\n        },\n\n        setDataSource: function(dataSource) {\n            var chart = this;\n\n            chart.dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            chart.dataSource = dataSource = DataSource.create(dataSource);\n            chart._hasDataSource = true;\n            chart._hasData = false;\n\n            dataSource.bind(CHANGE, chart._dataChangeHandler);\n\n            if (chart.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        destroy: function() {\n            var chart = this,\n                dataSource = chart.dataSource;\n\n            chart.element.off(NS);\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            }\n\n            if (chart._instance) {\n                chart._instance.destroy();\n                delete this._instance;\n            }\n\n            if (this._tooltip) {\n                this._tooltip.destroy();\n                delete this._tooltip;\n            }\n\n            this._destroyCrosshairTooltips();\n\n            Widget.fn.destroy.call(chart);\n        },\n\n        findPaneByName: function(name) {\n            var panes = this._plotArea.panes;\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                    return new ChartPane(this, panes[idx]);\n                }\n            }\n        },\n\n        findPaneByIndex: function(idx) {\n            var panes = this._plotArea.panes;\n            if (panes[idx]) {\n                return new ChartPane(this, panes[idx]);\n            }\n        },\n\n        findSeries: function(callback) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            for (var idx = 0; idx < series.length; idx++) {\n                if (callback(series[idx])) {\n                    return new ChartSeries(this, series[idx]);\n                }\n            }\n        },\n\n        findSeriesByName: function(name) {\n            return this._createSeries({ name: name });\n        },\n\n        findSeriesByIndex: function(index) {\n            return this._createSeries({ index: index });\n        },\n\n        exportVisual: function(options) {\n            var instance = this._instance;\n            if (!instance) {\n                return;\n            }\n\n            var visual;\n\n            //TO DO: support for setting any options. already available in kendo-charts\n            if (options && (options.width || options.height)) {\n                var chartArea = instance.options.chartArea;\n                var originalChartArea = instance._originalOptions.chartArea;\n\n                deepExtend(chartArea, options);\n\n                var model = instance._getModel();\n\n                chartArea.width = originalChartArea.width;\n                chartArea.height = originalChartArea.height;\n\n                model.renderVisual();\n\n                triggerPaneRender(model._plotArea.panes);\n\n                visual = model.visual;\n            } else {\n                visual = instance.exportVisual();\n            }\n\n            return visual;\n        },\n\n        resetDrilldownLevel(level) {\n            level = level || 0;\n            const state = this._drilldownState;\n            if (!state || level < 0 || level > state.length - 1) {\n                return;\n            }\n\n            const args = {\n                level,\n                sender: this\n            };\n            this.trigger(DRILLDOWN_LEVEL_CHANGE, args);\n\n            this.options.series = this._drilldownState[level];\n            this._drilldownState = this._drilldownState.slice(0, level);\n\n            this._bindCategories();\n            this._redraw();\n        },\n\n        _createSeries: function(options) {\n            var seriesOptions = this._seriesOptions(options);\n            if (seriesOptions) {\n                return new ChartSeries(this, seriesOptions);\n            }\n        },\n\n        _seriesOptions: function(options) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            var seriesOptions;\n\n            if (defined(options.index)) {\n                seriesOptions = series[options.index];\n            } else if (defined(options.name)) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (series[idx].name === options.name) {\n                        seriesOptions = series[idx];\n                        break;\n                    }\n                }\n            }\n\n            return seriesOptions;\n        },\n\n        _attachEvents: function() {\n             this.element.on(MOUSELEAVE_NS, this._mouseleave.bind(this));\n        },\n\n        _mouseleave: function(e) {\n            var instance = this._instance;\n            var tooltip = this._tooltip;\n            var target = e.relatedTarget;\n\n            if (!(target && $(target).closest(tooltip.element).length) && instance && !instance.handlingTap) {\n                instance.hideElements({\n                    keepTooltipOpen: !tooltip.options.autoHide\n                });\n            }\n        },\n\n        _getThemeOptions: function(userOptions) {\n            var themeName = (userOptions || {}).theme;\n\n            if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                return dataviz.autoTheme().chart;\n            }\n\n            if (defined(themeName)) {\n                var themes = dataviz.ui.themes || {};\n                var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                return theme.chart || {};\n            }\n        },\n\n        _initChart: function() {\n            this._createChart(this.options, this._getThemeOptions(this.options));\n            this.options = this._instance.options;\n            this._seriesVisibility.setOptions(this.options);\n        },\n\n        _createChart: function(options, themeOptions) {\n            this._instance = new KendoChart(this.element[0], options, themeOptions, {\n                observer: new ChartInstanceObserver(this),\n                sender: this,\n                rtl: this._isRtl()\n            });\n        },\n\n        _onInit: function(e) {\n            this._instance = e.sender;\n        },\n\n        _initDataSource: function(userOptions) {\n            var chart = this,\n                dataSource = (userOptions || {}).dataSource;\n\n            chart._dataChangeHandler = chart._onDataChanged.bind(chart);\n\n            chart.dataSource = DataSource\n                .create(dataSource)\n                .bind(\"change\", chart._dataChangeHandler);\n\n            chart._bindCategories();\n\n            if (dataSource) {\n                chart._hasDataSource = true;\n            }\n\n            this._initChart();\n            this._initTooltip();\n\n            if (dataSource) {\n                if (chart.options.autoBind) {\n                    chart.dataSource.fetch();\n                }\n            }\n        },\n\n        _destroyCrosshairTooltips: function() {\n            var tooltips = this._crosshairTooltips;\n            if (tooltips) {\n                for (var key in tooltips) {\n                    tooltips[key].destroy();\n                }\n            }\n            this._crosshairTooltips = {};\n        },\n\n        _getCrosshairTooltip: function(name, index) {\n            var tooltips = this._crosshairTooltips = this._crosshairTooltips || {};\n            var key = name + index;\n            var tooltip = tooltips[key];\n            if (!tooltip) {\n                tooltip = tooltips[key] = new CrosshairTooltip(this.element);\n            }\n            return tooltip;\n        },\n\n        _showTooltip: function(e) {\n            if (e.crosshair) {\n                var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                tooltip.show(e);\n            } else if (this._tooltip) {\n                this._tooltip.show(e);\n            }\n        },\n\n        _hideTooltip: function(e) {\n            if (e.crosshair) {\n                 var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                 tooltip.hide();\n            } else if (this._tooltip) {\n                this._tooltip.hide();\n            }\n        },\n\n        _onRender: function(e) {\n            this._destroyCrosshairTooltips();\n            this._copyMembers(e.sender);\n            if (!this._hasDataSource || this._hasData || !this.options.autoBind) {\n                this.trigger(RENDER);\n            }\n        },\n\n        _copyMembers: function(instance) {\n            this.options = instance.options;\n            this._originalOptions = instance._originalOptions;\n            this.surface = instance.surface;\n            this._plotArea = instance._plotArea;\n            this._model = instance._model;\n            this._highlight = instance._highlight;\n            this._selections = instance._selections;\n            this._pannable = instance._pannable;\n            this._zoomSelection = instance._zoomSelection;\n            this._mousewheelZoom = instance._mousewheelZoom;\n        },\n\n        requiresHandlers: function(names) {\n           var events = this._events;\n           for (var idx = 0; idx < names.length; idx++) {\n               if (defined(events[names[idx]])) {\n                   return true;\n               }\n           }\n        },\n\n        _initTooltip: function() {\n            this._tooltip = this._createTooltip();\n\n            this._tooltip.bind(LEAVE, this._tooltipleave.bind(this));\n        },\n\n        _onLegendItemClick: function(e) {\n            if (!this.trigger(LEGEND_ITEM_CLICK, e)) {\n                this._legendItemClick(e.seriesIndex, e.pointIndex);\n            }\n        },\n\n        _legendItemClick: function(seriesIndex, pointIndex) {\n            var chart = this._instance,\n                plotArea = chart._plotArea,\n                currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n\n            if (chart._hasInactiveOpacity() && chart._activeChartInstance) {\n                chart._updateSeriesOpacity(null, true);\n                chart._applySeriesOpacity(chart._activeChartInstance.children, null, true);\n                chart._activeChartInstance = null;\n            }\n\n            if ($.inArray(currentSeries.type, [PIE, DONUT, FUNNEL]) >= 0) {\n                var point = currentSeries.data[pointIndex];\n                if (point && defined(point.visible)) {\n                    point.visible = !point.visible;\n                } else {\n                    var pointVisibility = currentSeries.pointVisibility = currentSeries.pointVisibility || {};\n                    var visible = pointVisibility[pointIndex];\n                    pointVisibility[pointIndex] = defined(visible) ? !visible : false;\n                }\n            } else {\n                currentSeries.visible = !currentSeries.visible;\n                this._seriesVisibility.save(currentSeries);\n            }\n\n            chart._noTransitionsRedraw();\n        },\n\n        _createTooltip: function() {\n            return new Tooltip(this.element, extend({}, this.options.tooltip, {\n                rtl: this._isRtl()\n            }));\n        },\n\n        _tooltipleave: function() {\n            if (this._instance) {\n                this._instance.hideElements();\n            }\n        },\n\n        _onDrilldown: function(e) {\n            const { series, value } = e;\n\n            if (series.drilldownSeriesFactory) {\n                const result = series.drilldownSeriesFactory(value);\n\n                if (!result) {\n                    return;\n                } else if (result instanceof Promise) {\n                    result.then((resolved) => this._onDrilldownData(e, resolved));\n                } else {\n                    this._onDrilldownData(e, result);\n                }\n            } else if (typeof value === 'object') {\n                this._onDrilldownData(e, value);\n            }\n        },\n\n        _onDrilldownData: function(e, data) {\n            const drilldownSeries = Object.assign({}, e.series, data);\n            const args = {\n                point: e.point,\n                series: e.series,\n                drilldownSeries,\n                sender: this\n            };\n\n            const prevented = this.trigger(DRILLDOWN, args);\n            if (!prevented) {\n                this._drilldownState.push(this.options.series);\n\n                this.options.series = [drilldownSeries];\n                this._bindCategories();\n                this._redraw();\n            }\n        },\n\n        _bindData: function(e) {\n            var chart = this,\n                options = chart.options,\n                series = chart._sourceSeries || options.series,\n                seriesIx,\n                seriesLength = series.length,\n                data = chart.dataSource.view(),\n                grouped = (chart.dataSource.group() || []).length > 0,\n                processedSeries = [],\n                seriesVisibility = this._seriesVisibility,\n                currentSeries,\n                groupedSeries;\n\n            seriesVisibility.read();\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries) && grouped) {\n                    groupedSeries = groupSeries(currentSeries, data);\n                    processedSeries = processedSeries.concat(groupedSeries);\n\n                    seriesVisibility.applyByGroup(groupedSeries, e);\n                } else {\n                    currentSeries = extend({}, currentSeries);\n                    processedSeries.push(currentSeries);\n\n                    seriesVisibility.applyByIndex(currentSeries, e);\n                }\n            }\n\n            chart._sourceSeries = series;\n            options.series = processedSeries;\n            this._instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            this._hasData = true;\n        },\n\n        _onDataChanged: function(e) {\n            this._bindData(e);\n\n            this.trigger(DATABOUND);\n            if (this._instance && this._instance.fontLoaded) {\n                this._redraw();\n            }\n        },\n\n        _bindSeries: function() {\n            var chart = this,\n                data = chart.dataSource.view(),\n                series = chart.options.series,\n                seriesIx,\n                seriesLength = series.length,\n                currentSeries,\n                groupIx,\n                seriesData;\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries)) {\n                    groupIx = currentSeries._groupIx;\n                    seriesData = defined(groupIx) ? (data[groupIx] || {}).items : data;\n\n                    if (currentSeries.autoBind !== false) {\n                        currentSeries.data = seriesData;\n                    }\n                }\n            }\n        },\n\n        _bindCategories: function() {\n            var chart = this,\n                data = chart.dataSource.view() || [],\n                grouped = (chart.dataSource.group() || []).length > 0,\n                categoriesData = data,\n                options = chart.options,\n                definitions = [].concat(options.categoryAxis),\n                axisIx,\n                axis;\n\n            if (grouped) {\n                if (data.length) {\n                    categoriesData = data[0].items;\n                }\n            }\n\n            for (axisIx = 0; axisIx < definitions.length; axisIx++) {\n                axis = definitions[axisIx];\n                if (axis.autoBind !== false) {\n                    chart._bindCategoryAxis(axis, categoriesData, axisIx);\n                }\n            }\n        },\n\n        _bindCategoryAxis: function(axis, data, axisIx) {\n            var count = (data || []).length,\n                categoryIx,\n                category,\n                row;\n\n            if (axis.field) {\n                axis.categories = [];\n                for (categoryIx = 0; categoryIx < count; categoryIx++) {\n                    row = data[categoryIx];\n\n                    category = getField(axis.field, row);\n                    if (categoryIx === 0) {\n                        axis.categories = [category];\n                        axis.dataItems = [row];\n                    } else {\n                        axis.categories.push(category);\n                        axis.dataItems.push(row);\n                    }\n                }\n            } else if (this._instance) {\n                this._instance.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        },\n\n        _isBindable: function(series) {\n            var valueFields = SeriesBinder.current.valueFields(series),\n                result = true,\n                field, i;\n\n            for (i = 0; i < valueFields.length; i++) {\n                field = valueFields[i];\n                if (field === VALUE) {\n                    field = \"field\";\n                } else {\n                    field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                    result = false;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _isRtl: function() {\n            return kendo.support.isRtl(this.element) && this.element.css(\"direction\") === RTL;\n        }\n    });\n\n    var proxyMembers = [\"getAxis\", \"findAxisByName\", \"plotArea\", \"toggleHighlight\", \"showTooltip\",\n        \"hideTooltip\", \"_resize\", \"_redraw\", \"_noTransitionsRedraw\", \"_legendItemHover\", \"_eventCoordinates\"];\n\n    function createProxyMember(name) {\n        Chart.fn[name] = function() {\n            var instance = this._instance;\n            if (instance) {\n                return instance[name].apply(instance, arguments);\n            }\n        };\n    }\n\n    for (var idx = 0; idx < proxyMembers.length; idx++) {\n        createProxyMember(proxyMembers[idx]);\n    }\n\n    function groupSeries(series, data) {\n        var result = [],\n            nameTemplate,\n            legacyTemplate = series.groupNameTemplate,\n            groupIx,\n            dataLength = data.length,\n            seriesClone,\n            defaultNameTemplate = ({ group }) => `${defined(series.name) ? group.value + \": \" + series.name : group.value}`;\n\n        if (dataLength === 0) {\n            seriesClone = deepExtend({}, series);\n            seriesClone.visibleInLegend = false;\n            return [seriesClone];\n        }\n\n        if (defined(legacyTemplate)) {\n            kendo.logToConsole(\n                \"'groupNameTemplate' is obsolete and will be removed in future versions. \" +\n                \"Specify the group name template as 'series.name'\"\n            );\n\n            if (legacyTemplate) {\n                nameTemplate = template(legacyTemplate);\n            }\n        } else {\n            nameTemplate = template(series.name || defaultNameTemplate);\n        }\n\n        for (groupIx = 0; groupIx < dataLength; groupIx++) {\n            seriesClone = deepExtend({}, series);\n\n            if (!kendo.isFunction(seriesClone.color)) {\n                seriesClone.color = undefined$1;\n            }\n\n            seriesClone._groupIx = groupIx;\n            seriesClone._groupValue = data[groupIx].value;\n            result.push(seriesClone);\n\n            if (nameTemplate) {\n                seriesClone.name = nameTemplate({\n                    series: seriesClone, group: data[groupIx]\n                });\n            }\n        }\n\n        return result;\n    }\n\n    dataviz.ExportMixin.extend(Chart.fn);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Chart.fn);\n    }\n\n    dataviz.ui.plugin(Chart);\n\n    var SeriesVisibilityState = Class.extend({\n        init: function() {\n            this.groups = {};\n            this.index = {};\n            this.options = {};\n        },\n\n        applyByGroup: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (this.groups[series[idx]._groupValue] === false) {\n                        series[idx].visible = false;\n                    }\n                }\n            } else {\n                this.groups = {};\n            }\n        },\n\n        applyByIndex: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                if (this.index[series.index] === false) {\n                    series.visible = false;\n                }\n            } else {\n                this.index = {};\n            }\n        },\n\n        save: function(series) {\n            if (!series) {\n                return;\n            }\n\n            if (this.options.persistSeriesVisibility) {\n                this.options.series[series.index].visible = series.visible;\n            } else {\n                this.saveState(series);\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = options;\n            this.groups = {};\n            this.index = {};\n        },\n\n        read: function() {\n            var options = this.options;\n            if (options.persistSeriesVisibility) {\n                var series = options.series;\n                for (var idx = 0; idx < series.length; idx++) {\n                    this.saveState(series[idx]);\n                }\n            }\n        },\n\n        saveState: function(series) {\n            if (defined(series._groupValue)) {\n                this.groups[series._groupValue] = series.visible;\n            } else {\n                this.index[series.index] = series.visible;\n            }\n        }\n    });\n\n    var geom = kendo.geometry;\n\n    function normalizeStyle(style) {\n        for (var field in style) {\n            if (style[field] === undefined$1) {\n                style[field] = '';\n            }\n        }\n\n        return style;\n    }\n\n    var Tooltip = Observable.extend({\n        init: function(chartElement, options) {\n            var tooltip = this;\n\n            Observable.fn.init.call(tooltip);\n\n            this.setOptions(options);\n\n            tooltip.chartElement = chartElement;\n\n            tooltip.template = Tooltip.template;\n            if (!tooltip.template) {\n                tooltip.template = Tooltip.template = ({ autoHide, rtl, font, border, opacity }) =>\n                    `<div class='k-tooltip ${autoHide ? \"k-tooltip-closable\" : \"\"} k-chart-tooltip ${rtl ? \"k-rtl\" : \"\"}' ` +\n                    `${kendo.attr(\"style-display\")}=\"none\" ${kendo.attr(\"style-position\")}=\"absolute\" ` +\n                    `${kendo.attr(\"style-font\")}=\"${font}\" ${kendo.attr(\"style-opacity\")}=\"${opacity}\" ` +\n                    `${border ? `${kendo.attr(\"style-border\")}=\"${border.width}px solid\" ` : \"\"}` +\n                    `>` +\n                    '<div class=\"k-tooltip-content\"></div>' +\n                    `${autoHide ? '' : '<div class=\"k-tooltip-button\">' + kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" }) + '</div>'}` +\n                    \"</div>\";\n            }\n\n            tooltip.element = $(tooltip.template(tooltip.options));\n            kendo.applyStylesFromKendoAttributes(tooltip.element, [\"display\", \"position\", \"font\", \"border\", \"opacity\"]);\n\n            tooltip.move = tooltip.move.bind(tooltip);\n            tooltip._mouseleave = tooltip._mouseleave.bind(tooltip);\n\n            var mobileScrollerSelector = kendo.format(\"[{0}='content'],[{0}='scroller']\", kendo.attr(\"role\"));\n            tooltip._mobileScroller = chartElement.closest(mobileScrollerSelector).data(\"kendoMobileScroller\");\n            tooltip.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            tooltip._closeTooltipHandler = tooltip._closeTooltip.bind(tooltip);\n        },\n\n        destroy: function() {\n            var tooltip = this;\n\n            this._clearShowTimeout();\n            DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            if (this.element) {\n                this.element.off(MOUSELEAVE_NS).remove();\n                this.element = null;\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        options: {\n            opacity: 1,\n            animation: {\n                duration: TOOLTIP_ANIMATION_DURATION\n            },\n            sharedTemplate: ({ colspan, categoryText, points, content, colorMarker, nameColumn }) =>\n                \"<table>\" +\n                `<th colspan='${colspan}'>${categoryText}</th>` +\n                    sharedTemplateIterator(points, colorMarker, nameColumn, content) +\n                \"</table>\",\n            categoryFormat: \"{0:d}\",\n            autoHide: true\n        },\n\n        move: function() {\n            var tooltip = this,\n                options = tooltip.options,\n                element = tooltip.element,\n                offset;\n\n            if (!tooltip.anchor || !tooltip.element) {\n                return;\n            }\n\n            offset = tooltip._offset();\n            if (!tooltip.visible) {\n                element.css({ top: offset.top, left: offset.left });\n            }\n\n            tooltip.visible = true;\n            tooltip._ensureElement(document.body);\n            element\n                .stop(true, true)\n                .show()\n                .animate({\n                    left: offset.left,\n                    top: offset.top\n                }, options.animation.duration);\n        },\n\n        _clearShowTimeout: function() {\n            if (this.showTimeout) {\n                clearTimeout(this.showTimeout);\n                this.showTimeout = null;\n            }\n        },\n\n        getAnchor: function(size) {\n            var anchor = this.anchor;\n            var point = anchor.point;\n            var align = anchor.align;\n            var x = point.left;\n            var y = point.top;\n            if (align.horizontal === \"center\") {\n                x -= size.width / 2;\n            } else if (align.horizontal === \"right\") {\n                x -= size.width;\n            }\n\n            if (align.vertical === \"center\") {\n                y -= size.height / 2;\n            } else if (align.vertical === \"bottom\") {\n                y -= size.height;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        _offset: function() {\n            var tooltip = this,\n                size = tooltip._measure(),\n                anchor = tooltip.getAnchor(size),\n                top = anchor.y,\n                left = anchor.x,\n                zoomLevel = kendo.support.zoomLevel(),\n                viewport = $(window),\n                scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0,\n                scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || 0,\n                movable = (this._mobileScroller || {}).movable;\n\n            if (!movable || movable.scale === 1) {\n                top += tooltip._fit(top - scrollTop, size.height, outerHeight(viewport) / zoomLevel);\n                left += tooltip._fit(left - scrollLeft, size.width, outerWidth(viewport) / zoomLevel);\n            } else {\n                var transform = geom.transform().scale(movable.scale, movable.scale, [movable.x, movable.y]);\n                var point = new geom.Point(left, top).transform(transform);\n                left = point.x;\n                top = point.y;\n            }\n\n            return {\n                top: top,\n                left: left\n            };\n        },\n\n        show: function(e) {\n            var tooltip = this;\n            var fakeContainer = $(\"<div></div>\");\n            this.anchor = e.anchor;\n            this.element.css(normalizeStyle(e.style));\n            this.element.toggleClass(TOOLTIP_INVERSE, !!e.className);\n            this.element.toggleClass(SHARED_TOOLTIP_CLASS, !!e.shared);\n\n            var content = e.shared ? this._sharedContent(e) : this._pointContent(e.point);\n            fakeContainer.html(content);\n            kendo.applyStylesFromKendoAttributes(fakeContainer, [\"background-color\"]);\n            this.element.find('.k-tooltip-content').empty().append(fakeContainer);\n\n            if (!tooltip.options.autoHide) {\n                tooltip.element.off(\"click\" + NS).on(\"click\" + NS, \".k-tooltip-button\", tooltip._closeTooltipHandler);\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler)\n                    .on(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n\n            this._clearShowTimeout();\n            this.showTimeout = setTimeout(this.move, TOOLTIP_SHOW_DELAY);\n        },\n\n        hide: function(forceHide) {\n            var tooltip = this;\n\n            if (!tooltip.options.autoHide && !forceHide) {\n                return;\n            }\n\n            clearTimeout(tooltip.showTimeout);\n            tooltip._hideElement();\n\n            if (tooltip.visible) {\n                tooltip.point = null;\n                tooltip.visible = false;\n                tooltip.index = null;\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n        },\n\n        _closeTooltip: function(e) {\n            var target = $(e.target);\n\n            if (!target.is(\".k-chart-tooltip, .k-tooltip-content\")) {\n                e.preventDefault();\n                this.chartElement.data(\"kendoChart\")._instance.hideElements();\n                this.hide(true);\n            }\n        },\n\n        _sharedContent: function(e) {\n            var points = e.points;\n            var that = this;\n\n            var nameColumn = dataviz.grep(points, function(point) {\n                return defined(point.series.name);\n            }).length;\n\n            var colorMarker = e.series.length > 1;\n            var colspan = 1;\n            if (nameColumn) {\n                colspan++;\n            }\n            if (colorMarker) {\n                colspan++;\n            }\n\n            var template = kendo.template(this.options.sharedTemplate);\n            var content = template({\n                points: points,\n                category: e.category,\n                categoryText: e.categoryText,\n                content: this._pointContent.bind(that),\n                colorMarker: colorMarker,\n                nameColumn: nameColumn,\n                colspan: colspan\n            });\n\n            return content;\n        },\n\n        _measure: function() {\n            this._ensureElement();\n\n            var size = {\n                width: outerWidth(this.element),\n                height: outerHeight(this.element)\n            };\n\n            return size;\n        },\n\n        _ensureElement: function() {\n            if (this.element) {\n                this.element\n                    .appendTo(document.body)\n                    .on(MOUSELEAVE_NS, this._mouseleave);\n            }\n        },\n\n        _mouseleave: function(e) {\n            var target = e.relatedTarget;\n            var chart = this.chartElement[0];\n            if (target && target !== chart && !$.contains(chart, target)) {\n                this.trigger(LEAVE);\n            }\n        },\n\n        _hideElement: function() {\n            var tooltip = this;\n            var element = this.element;\n            if (element) {\n                element.fadeOut({\n                    always: function() {\n                        if (!tooltip.visible) {\n                            element.off(MOUSELEAVE_NS).remove();\n                        }\n                    }\n                });\n            }\n        },\n\n        _pointContent: function(point) {\n            var tooltip = this,\n                options = deepExtend({}, tooltip.options, point.options.tooltip),\n                content, tooltipTemplate;\n\n            if (defined(point.value)) {\n                content = point.value.toString();\n            }\n\n            if (options.template) {\n                tooltipTemplate = template(options.template);\n                content = tooltipTemplate({\n                    value: point.value,\n                    category: point.category,\n                    series: point.series,\n                    dataItem: point.dataItem,\n                    percentage: point.percentage,\n                    runningTotal: point.runningTotal,\n                    total: point.total,\n                    low: point.low,\n                    high: point.high,\n                    xLow: point.xLow,\n                    xHigh: point.xHigh,\n                    yLow: point.yLow,\n                    yHigh: point.yHigh\n                });\n            } else if (options.format) {\n                content = point.formatValue(options.format);\n            }\n\n            return content;\n        },\n\n        _fit: function(offset, size, viewPortSize) {\n            var output = 0;\n\n            if (offset + size > viewPortSize) {\n                output = viewPortSize - (offset + size);\n            }\n\n            if (offset < 0) {\n                output = -offset;\n            }\n\n            return output;\n        }\n    });\n\n    var CrosshairTooltip = Tooltip.extend({\n        init: function(chartElement, options) {\n            Tooltip.fn.init.call(this, chartElement, options);\n            this.element.addClass(\"k-chart-crosshair-tooltip\");\n        },\n\n        show: function(e) {\n            var element = this.element;\n\n            if (element) {\n                this.anchor = e.anchor;\n                this.element.css(e.style);\n                this.element.html(this.content(e));\n\n                this.move();\n            }\n        },\n\n        move: function() {\n            var tooltip = this,\n                element = tooltip.element,\n                offset = tooltip._offset();\n\n            tooltip._ensureElement();\n            element.css({ top: offset.top, left: offset.left }).show();\n        },\n\n        content: function(e) {\n            var content = e.value,\n                options = e.crosshair.options.tooltip;\n\n            if (options.template) {\n                content = template(options.template)({\n                    value: content\n                });\n            }\n\n            return content;\n        },\n\n        hide: function() {\n            this.element.hide();\n        }\n    });\n\n    var ChartPane = Class.extend({\n        init: function(chart, pane) {\n            this._chart = chart;\n            this._pane = pane;\n            this.visual = pane.visual;\n            this.chartsVisual = pane.chartContainer.visual;\n            this.name = pane.options.name;\n        },\n\n        series: function() {\n            var chart = this._chart;\n            var seriesByPane = chart._plotArea.groupSeriesByPane();\n            var series = seriesByPane[this.name || \"default\"];\n\n            var result = [];\n            if (series) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    result.push(new ChartSeries(chart, series[idx]));\n                }\n            }\n\n            return result;\n        }\n    });\n\n    var ChartSeries = Class.extend({\n        init: function(chart, options) {\n            this._chart = chart;\n            this._options = options;\n        },\n\n        points: function(filter) {\n            var points = this._points;\n            if (!points) {\n                var series = this._seriesOptions();\n                var plotArea = this._chart._plotArea;\n                this._points = points = plotArea.pointsBySeriesIndex(series.index);\n            }\n            if (kendo.isFunction(filter)) {\n                points = this._filterPoints(points, filter);\n            }\n\n\n            return points;\n        },\n\n        data: function(data) {\n            var series = this._seriesOptions();\n            if (data) {\n                var chart = this._chart;\n                var plotArea = chart._plotArea;\n\n                series.data = data;\n\n                if (series.categoryField) {\n                    var axis = plotArea.seriesCategoryAxis(series);\n                    var options = [].concat(chart.options.categoryAxis);\n\n                    chart._instance.bindCategoryAxisFromSeries(options[axis.axisIndex], axis.axisIndex);\n                }\n\n                chart._noTransitionsRedraw();\n                this._clearFields();\n            }\n\n            return series.data;\n        },\n\n        findPoint: function(filter) {\n            var points = this.points();\n            for (var idx = 0; idx < points.length; idx++) {\n                if (filter(points[idx])) {\n                    return points[idx];\n                }\n            }\n        },\n\n        toggleHighlight: function(show, elements) {\n            if (!elements) {\n                elements = this.points();\n            } else if (kendo.isFunction(elements)) {\n                elements = this.points(elements);\n            } else {\n                elements = isArray(elements) ? elements : [elements];\n            }\n\n            this._chart._instance.togglePointsHighlight(show, elements);\n        },\n\n        toggleVisibility: function(visible, filter) {\n            var chart = this._chart;\n            var seriesOptions = this._seriesOptions();\n            var hasFilter = kendo.isFunction(filter);\n            if (!hasFilter) {\n                seriesOptions.visible = visible;\n                chart._seriesVisibility.save(seriesOptions);\n            } else {\n                if (inArray(seriesOptions.type, [PIE, DONUT, FUNNEL])) {\n                    var data = this._filterData(filter);\n                    for (var idx = 0; idx < data.length; idx++) {\n                        data[idx].visible = visible;\n                    }\n                } else {\n                    seriesOptions.visible = function(data) {\n                        return filter(data.dataItem) ? visible : true;\n                    };\n                }\n            }\n\n            chart._noTransitionsRedraw();\n\n            this._clearFields();\n        },\n\n        _filterData: function(filter) {\n            var data = this._seriesOptions().data;\n            var length = data.length;\n            var result = [];\n\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(data[idx])) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        _filterPoints: function(points, filter) {\n            var result = [];\n            var length = points.length;\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(points[idx])) {\n                    result.push(points[idx]);\n                }\n            }\n            return result;\n        },\n\n        _seriesOptions: function() {\n            var series = this._series;\n            if (!series) {\n                series = this._series = this._chart._seriesOptions(this._options);\n            }\n            return series;\n        },\n\n        _clearFields: function() {\n            delete this._points;\n            delete this._series;\n        }\n    });\n\n    function triggerPaneRender(panes) {\n        for (var idx = 0; idx < panes.length; idx++) {\n            panes[idx].notifyRender();\n        }\n    }\n\n    function sharedTemplateIterator(points, colorMarker, nameColumn, content) {\n        var result = \"\";\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            result += \"<tr>\";\n\n            if (colorMarker) {\n                result += `<td><span class='k-chart-shared-tooltip-marker' ${kendo.attr(\"style-background-color\")}=\"${encode(point.series.color)}\"></span></td>`;\n            }\n\n            if (nameColumn) {\n                result += `<td> ${point.series.name ? point.series.name + \":\" : \"&nbsp;\"}</td>`;\n            }\n\n            result += `<td>${content(point)}</td>`;\n            result += \"</tr>\";\n        }\n\n        return result;\n    }\n\n    dataviz.Tooltip = Tooltip;\n    dataviz.CrosshairTooltip = CrosshairTooltip;\n    dataviz.ChartInstanceObserver = ChartInstanceObserver;\n    dataviz.ChartPane = ChartPane;\n    dataviz.ChartSeries = ChartSeries;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"dataviz.chart\",\n    name: \"Chart\",\n    category: \"dataviz\",\n    description: \"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n    depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n    features: [{\n        id: \"dataviz.chart-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export Chart as PDF\",\n        depends: [ \"pdf\" ]\n    }]\n};\n\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}