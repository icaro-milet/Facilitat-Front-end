{"version":3,"file":"kendo.grid.js","names":["$","undefined$1","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","this","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","events","concat","ev","item","data","split","map","val","indexOf","key","reduce","acc","v","Object","assign","target","action","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","SortCommand","exec","idx","dataSource","sort","dir","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","__meta__","id","category","description","depends","features","GroupsPager","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","SORTED_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","SELECTCOLUMNTMPL","size","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","SORTHEADERTMPL","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","columns","encoded","locked","parentIds","column","hidden","isVisible","addHiddenStyle","footerAttributes","headerAttributes","headers","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","notify","scrollableContent","scrollable","leftMostPosition","groupable","virtualScrollable","navigatable","toolbar","filterable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","clickMoveClick","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","editContainer","_editContainer","_mousedownOnEditCell","tap","isLockedCell","has","end","closeCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","_isVirtualInlineEditable","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_createClickHandler","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","dragToSelect","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","_canDrag","link","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isEdited","isIE","_initMobile","head","mainOptions","_action","_buildStates","isEditable","isSelectable","isSortable","isRowReorderable","hasSelection","isSorted","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","Function","colSpanAttributes","dirty","dirtyFields","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","f","useWithBlock","fieldValue","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","outerHTML","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin","kendo$1"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.progressbar.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.menu.js';\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        ContextMenu = ui.ContextMenu,\n        extend = $.extend,\n        encode = kendo.htmlEncode;\n\n    var ACTION = \"action\";\n\n    var GridContextMenu = ContextMenu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            ContextMenu.fn.init.call(that, element, options);\n\n            that._overrideTemplates();\n            that._extendItems();\n\n            that.bind(\"select\", that._onSelect.bind(that));\n            that.bind(\"open\", that._onOpen.bind(that));\n        },\n\n        _overrideTemplates: function() {\n            this.templates.sprite = ({ icon, spriteCssClass }) => `${(icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''}`;\n        },\n\n        defaultItems: {\n            \"separator\": { name: \"separator\", separator: true },\n            \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n            \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n            \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n            \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" },\n            ] },\n            \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n            \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n            \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"arrows-no-change\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n            ] },\n            \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n            \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n            ] },\n            \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n            \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n            // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n            //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n            // ] },\n        },\n\n        events: ContextMenu.fn.events.concat([\n            ACTION\n        ]),\n\n        _onSelect: function(ev) {\n            var command = $(ev.item).data(\"command\");\n            var options = $(ev.item).data(\"options\");\n                options = options ? options.split(\",\")\n                .map(val => {\n                    if (val.indexOf(\":\") > -1) {\n                        var [key, val] = val.split(\":\");\n                        return { [key || \"_\"]: val };\n                    }\n\n                    return { [val]: true };\n                })\n                .reduce((acc, v) => Object.assign(acc, v), {}) : {};\n\n            var target = $(ev.target);\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: Object.assign(options, { target: target })\n            });\n        },\n\n        _onOpen: function(ev) {\n            var menu = ev.sender,\n                items = menu.options.items,\n                elTarget = $(ev.event ? ev.event.target : null);\n\n            if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                ev.preventDefault();\n                return;\n            }\n\n            this._toggleSeparatorVisibility();\n\n            menu.element.find(`[${kendo.attr('soft-rules')}]`).each((i, item) => {\n                var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n\n                menu.enable(item, this._validateSoftRules(rules));\n            });\n        },\n\n        _toggleSeparatorVisibility: function() {\n            var that = this,\n                items = that.element.find(\".k-item.k-separator\").filter((i, item) => {\n                    var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                    var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                    return !(prev.length && next.length);\n                });\n\n            items.hide();\n        },\n\n        _extendItems: function() {\n            var that = this,\n                items = that.options.items,\n                item, isBuiltInTool;\n\n            if (items && items.length) {\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                    if (isBuiltInTool) {\n                        item = item.name;\n                    }\n\n                    if ($.isPlainObject(item)) {\n                        that._append(item);\n                    } else if (that.defaultItems[item]) {\n                        item = that.defaultItems[item];\n                        that._append(item);\n                    } else if (typeof(item) === \"string\") {\n                        item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                        that._append(item);\n                    }\n                }\n            } else {\n                for (var key in that.defaultItems) {\n                    item = that.defaultItems[key];\n                    that._append(item);\n                }\n            }\n        },\n\n        _extendItem: function(item) {\n            var that = this,\n                messages = that.options.messages,\n                attr = item.attr || {};\n\n            if (item.command) {\n                attr[kendo.attr(\"command\")] = item.command;\n            }\n\n            if (item.options) {\n                attr[kendo.attr(\"options\")] = item.options;\n            }\n\n            if (item.softRules) {\n                attr[kendo.attr(\"soft-rules\")] = item.softRules;\n            }\n\n            if (item.items) {\n                for (var j = 0; j < item.items.length; j++) {\n                    item.items.forEach(subItem => {\n                        that._extendItem(subItem);\n                    });\n                }\n            }\n\n            extend(item, {\n                text: messages.commands[item.name],\n                icon: item.icon || \"\",\n                spriteCssClass: item.spriteCssClass || \"\",\n                attr: attr,\n                uid: kendo.guid()\n            });\n        },\n\n        _validateSoftRules: function(rules) {\n            var that = this;\n\n            if (!rules || !(rules && rules.length)) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _validateRules: function(tool) {\n            var that = this,\n                rules = tool.rules ? tool.rules.split(\";\") : [];\n\n            if (!rules.length) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _readState: function(state) {\n            var that = this,\n                states = that.options.states;\n\n            if (kendo.isFunction(states[state])) {\n                return states[state]();\n            } else {\n                return states[state];\n            }\n        },\n\n        _append: function(item) {\n            var that = this;\n\n            that._extendItem(item);\n\n            if (that._validateRules(item)) {\n                that.append(item);\n            }\n        },\n\n        action: function(args) {\n            this.trigger(ACTION, args);\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        ContextMenu: GridContextMenu\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.grid = options.grid;\n        }\n    });\n\n    var SortCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dataSource = grid.dataSource,\n                sort = dataSource.sort() || [],\n                options = that.options,\n                dir = options.dir,\n                field = grid._getCellField(options.target),\n                multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                compare = grid.options.compare,\n                length, idx;\n\n            if (multipleMode) {\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    if (sort[idx].field === field) {\n                        sort.splice(idx, 1);\n                        break;\n                    }\n                }\n                sort.push({ field: field, dir: dir, compare: compare });\n            } else {\n                sort = [{ field: field, dir: dir, compare: compare }];\n            }\n\n            dataSource.sort(sort);\n        },\n    });\n\n    var AddCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.addRow();\n        }\n    });\n\n    var EditCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                inCellMode = grid._editMode() === \"incell\",\n                target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n            if (inCellMode) {\n                grid.editCell(target);\n            } else {\n                grid.editRow(target);\n            }\n        }\n    });\n\n    var DeleteCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                target = that.options.target.closest(\"tr\");\n\n            grid.removeRow(target);\n        }\n    });\n\n    var CopySelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                withHeaders = that.options.withHeaders;\n\n            grid.copySelectionToClipboard(withHeaders);\n        }\n    });\n\n    var SelectRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                target = that.options.target.closest(\"tr\");\n\n            grid.select(selectMode.cell ? target.find('td') : target);\n        }\n    });\n\n    var SelectAllRowsCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                rows = grid.items();\n\n            grid.select(selectMode.cell ? rows.find('td') : rows);\n        }\n    });\n\n    var ClearSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.clearSelection();\n        }\n    });\n\n    var ReorderRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dir = that.options.dir,\n                target = that.options.target.closest(\"tr\"),\n                index = target.index(),\n                newIndex;\n\n            switch (dir) {\n                case \"up\":\n                    newIndex = index - 1;\n                    break;\n                case \"down\":\n                    newIndex = index + 2;\n                    break;\n                case \"top\":\n                    newIndex = 0;\n                    break;\n                case \"bottom\":\n                    newIndex = grid.items().length;\n                    break;\n            }\n\n            grid.reorderRowTo(target, newIndex);\n        }\n    });\n\n    var ExportPDFCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.saveAsPDF();\n        }\n    });\n\n    var ExportExcelCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                selection = that.options.selection,\n                withHeaders = that.options.withHeaders,\n                grid = that.grid;\n\n            if (selection) {\n                grid.exportSelectedToExcel(withHeaders);\n            } else {\n                grid.saveAsExcel();\n            }\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        GridCommand: Command,\n        commands: {\n            SortCommand: SortCommand,\n            AddCommand: AddCommand,\n            EditCommand: EditCommand,\n            DeleteCommand: DeleteCommand,\n            CopySelectionCommand: CopySelectionCommand,\n            SelectRowCommand: SelectRowCommand,\n            SelectAllRowsCommand: SelectAllRowsCommand,\n            ClearSelectionCommand: ClearSelectionCommand,\n            ReorderRowCommand: ReorderRowCommand,\n            ExportPDFCommand: ExportPDFCommand,\n            ExportExcelCommand: ExportExcelCommand\n        }\n    });\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        encode = kendo.htmlEncode,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n        CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n        CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n        CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n        WRAPPER = \".k-grid\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        ACTIVE = \"k-active\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        SVG_ICON_CLASS = \"k-svg-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky k-table-td\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky k-header\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky k-table-td\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        ROW_RESIZER = \"k-row-resizer\",\n        ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n        GROUPING_ROW = \"k-grouping-row\",\n        RESIZE = \"resize\",\n        ROWRESIZE = \"rowResize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        MOUSEUP = \"mouseup\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEMOVE = \"mousemove\",\n        DUBLECLICK = \"dblclick\",\n        HEIGHT = \"height\",\n        WIDTH = \"width\",\n        AUTO = \"auto\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n        PX = \"px\",\n        TR = \"tr\",\n        DIV = \"div\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`,\n        SELECTCOLUMNTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">`,\n        SELECTCOLUMNHEADERTMPL = ({ size }) => `<input tabindex=\"-1\" class=\"k-select-checkbox ` + CHECKBOX + ` ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">`,\n        DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n        SORTHEADERTMPL = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    var defaultBodyContextMenu = [\n        \"copySelection\",\n        \"copySelectionNoHeaders\",\n        \"separator\",\n        \"create\",\n        \"edit\",\n        \"destroy\",\n        \"select\",\n        \"separator\",\n        \"reorderRow\",\n        \"exportPDF\",\n        \"exportExcel\",\n        \"separator\"\n    ];\n\n    var defaultHeadContextMenu = [\n        \"sortAsc\",\n        \"sortDesc\",\n        \"separator\"\n    ];\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: AUTO,\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                .css({\n                    width: \"1px\",\n                    height: `${maxHeight}px`\n                });\n\n            if (totalHeight % maxHeight) {\n                divElements = divElements.add($(\"<div></div>\").css({\n                    width: \"1px\",\n                    height: `${(totalHeight % maxHeight)}px`\n                }));\n            }\n\n            that.verticalScrollbar.empty().append(divElements);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-table-td k-group-cell\">&nbsp;</td>');\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-remove-command\",\n            iconClass: \"k-i-x\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit-command\",\n            iconClass: \"k-i-pencil\",\n            themeColor: \"primary\"\n        },\n        update: {\n            text: \"Save\",\n            className: \"k-grid-save-command\",\n            iconClass: \"k-i-save\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel-command\",\n            iconClass: \"k-i-cancel-outline\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter-menu, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE;\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE;\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(\".k-header\")\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function decorateCellWithClass(html) {\n        let element = html;\n        let classes = element.match(/class=[\"][^\"]+/g);\n        if (classes) {\n            const cssClasses = classes[0].split('\\\"').pop();\n            element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n        } else {\n            element = element.replace(\"<td\",\"<td class='k-table-td'\");\n        }\n\n        return element;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n        createColumnAttribute(column, attribute, property);\n        if (removeAttributeProperty) {\n            delete column[attribute][property];\n        } else {\n            column[attribute][property] = column[attribute][property].replace(value, \"\");\n        }\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values,\n                    title: columns[idx].title\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, empty, size) {\n        var placeholder,\n            tmp = tbody;\n\n        // necessary for AngularJS to cleanup its guts.\n        if (empty) {\n            tbody.empty();\n        }\n\n        if (tbodySupportsInnerHtml) {\n            let $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n            tbody.empty().append($html);\n        } else {\n            placeholder = document.createElement(DIV);\n            placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n            $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        let kendoStyleAttrObject = {};\n        kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n        return extend({}, attr, kendoStyleAttrObject);\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n\n        return !!attr[kendo.attr(\"style-display\")];\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        delete attr[kendo.attr(\"style-display\")];\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\"/>`, typeof width === STRING ? width : width + PX);\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n            CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._rowResizing();\n\n            that._groupable();\n\n            that._toolbar();\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._clipboard();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.options.contextMenu) {\n                that._initContextMenu();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n           CHANGE,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           ROWRESIZE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            that._rowResizing();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            contextMenu: false,\n            columnResizeHandleWidth: 3,\n            size: \"medium\",\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text,\n                    select: \"Select\",\n                    selectRow: \"Select Row\",\n                    selectAllRows: \"All rows\",\n                    clearSelection: \"Clear selection\",\n                    copySelection: \"Copy selection\",\n                    copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                    reorderRow: \"Reorder row\",\n                    reorderRowUp: \"Up\",\n                    reorderRowDown: \"Down\",\n                    reorderRowTop: \"Top\",\n                    reorderRowBottom: \"Bottom\",\n                    exportPdf: \"Export to PDF\",\n                    exportExcel: \"Export to Excel\",\n                    exportToExcelAll: \"All\",\n                    exportToExcelSelection: \"Selection\",\n                    exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                    sortAsc: \"Sort Ascending\",\n                    sortDesc: \"Sort Descending\"\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._angularItems(\"cleanup\");\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyRowResizing();\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (that.tbodyContextMenu) {\n                that.tbodyContextMenu.destroy();\n            }\n\n            if (that.theadContextMenu) {\n                that.theadContextMenu.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            result.$angular = undefined$1;\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.thead.get() };\n            });\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = table.attr(ID),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(TR).attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(TR),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(TR),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [];\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            table.addClass(\"k-grid-table k-table\");\n            table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(DIV), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(DIV), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (th && columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        // Row resizing functionality below\n        _addLockedRowResizing: function(tr) {\n            var index = tr.index();\n\n            return this.lockedTable.find(TR).eq(index)\n                .add(this.tbody.find(TR).eq(index));\n        },\n\n        _getMinRowHeight: function(row) {\n            var minHeight = 0;\n\n            row.each((i, el) => {\n                var currentMinHeight;\n\n                el.style.height = '';\n                currentMinHeight = outerHeight(el);\n\n                if (currentMinHeight > minHeight) {\n                    minHeight = currentMinHeight;\n                }\n            });\n\n            return minHeight;\n        },\n\n        _cacheRowHeight: function(rows, height) {\n            var that = this;\n\n            if (!that._cachedRowsHeight) {\n                that._cachedRowsHeight = {};\n            }\n\n            rows.each((i, el) => {\n                var uid = el.getAttribute(\"data-uid\");\n\n                that._cachedRowsHeight[uid] = height;\n            });\n        },\n\n        _clearCachedRowsHeight: function(rows) {\n            var that = this;\n\n            if (rows && that._cachedRowsHeight) {\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    delete that._cachedRowsHeight[uid];\n                });\n            } else {\n                that._cachedRowsHeight = null;\n            }\n        },\n\n        _mapCachedRowsHeight: function(method, target) {\n            var input = this._cachedRowsHeight,\n                ds = this.dataSource,\n                output = {};\n\n            Object.keys(input).forEach((key) => {\n                var item = ds[method](key);\n\n                output[item[target]] = input[key];\n            });\n\n            this._cachedRowsHeight = output;\n        },\n\n        _rowResizerDblClick: function() {\n            var that = this,\n                resizer = that.rowResizer,\n                row = resizer.data(TR),\n                oldHeight = outerHeight(row),\n                newHeight, rows;\n\n            if (row.hasClass(SELECTED)) {\n                rows = that.select();\n            } else {\n                rows = row;\n            }\n\n            if (that.lockedTable) {\n                row = that._addLockedRowResizing(row);\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.lockedTable.find(DOT + SELECTED);\n                } else {\n                    rows = that.lockedTable.find(TR).eq(row.index());\n                }\n\n                rows.each((i, el) => {\n                    var rowIndex = el.rowIndex,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                        pairMinHeight = that._getMinRowHeight(rowPair);\n\n                    rowPair.css(HEIGHT, pairMinHeight);\n                });\n            } else {\n                rows.css(HEIGHT, AUTO);\n            }\n\n            that._clearCachedRowsHeight(rows);\n\n            resizer.removeClass(HOVER);\n            resizer.removeClass(ACTIVE);\n\n            newHeight = outerHeight(row);\n\n            if (oldHeight != newHeight) {\n                that.trigger(ROWRESIZE, {\n                    row,\n                    rows,\n                    oldHeight,\n                    newHeight\n                });\n            }\n        },\n\n        _setupRowResizer(resizer, row, top) {\n            resizer\n                .data(TR, row)\n                .css({\n                    top: top\n                });\n        },\n\n        _attachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer,\n                delay = 200,\n                isIn = false;\n\n            rowResizer\n                .on(MOUSEDOWN + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(HOVER);\n                        rowResizer.addClass(ACTIVE);\n                    }\n                })\n                .on(MOUSEUP + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(ACTIVE);\n                        rowResizer.addClass(HOVER);\n                    }\n                })\n                .on(MOUSEENTER + NS, () => {\n                    isIn = true;\n\n                    setTimeout(() => {\n                        if (isIn) {\n                            rowResizer.addClass(HOVER);\n                        }\n                    }, delay);\n                })\n                .on(MOUSELEAVE + NS, () => {\n                    isIn = false;\n                    rowResizer.removeClass(HOVER);\n                });\n        },\n\n        _getResizerTop: function(tr, container) {\n            var resizer = this.rowResizer,\n                inner = resizer.find(DOT + ROW_RESIZER)[0],\n                paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n            return tr.offset().top -\n                parseFloat(tr.css(\"marginTop\")) -\n                (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                inner.clientHeight -\n                paddingTop +\n                container.scrollTop();\n        },\n\n        _getResizerContainer: function() {\n            var container = this.tbody.closest(DIV);\n\n            if (this.lockedTable) {\n                container = container.closest(DOT + \"k-grid-container\");\n            }\n\n            return container;\n        },\n\n        _createRowResizer: function(e) {\n            var that = this,\n                tr = $(e.currentTarget),\n                targetHeight = e.currentTarget.clientHeight,\n                positionIntarget = e.offsetY,\n                rowResizer = that.rowResizer,\n                previousRow = tr.prev(TR + \":visible\"),\n                container = that._getResizerContainer(),\n                top;\n\n            if (!rowResizer) {\n                rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                container.append(rowResizer);\n                that._attachRowResizerEvents();\n\n                rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n            }\n\n            top = that._getResizerTop(tr, container);\n\n            if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                if (!previousRow.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, previousRow, top);\n                }\n            } else {\n                if (!tr.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                }\n            }\n        },\n\n        _detachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer;\n\n            rowResizer\n                .off(MOUSEDOWN + NS)\n                .off(MOUSEUP + NS)\n                .off(MOUSEENTER + NS)\n                .off(MOUSELEAVE + NS);\n        },\n\n        _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n            var that = this;\n\n            rows.each((i, el) => {\n                var minHeight;\n\n                if (multiSelectionLocked) {\n                    var rowIndex = el.rowIndex,\n                        pairNew = newHeight,\n                        pairMin = 0,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                    rowPair.each((i, r) => {\n                        var currentMinHeight;\n\n                        r.style.height = '';\n                        currentMinHeight = outerHeight(r);\n\n                        if (currentMinHeight > pairMin) {\n                            pairMin = currentMinHeight;\n                        }\n                    });\n\n                    if (pairNew < pairMin) {\n                        pairNew = pairMin;\n\n                        that._clearCachedRowsHeight(rowPair.eq(0));\n                    } else {\n                        that._cacheRowHeight(rowPair.eq(0), pairNew);\n                    }\n\n                    rowPair.css(HEIGHT, pairNew);\n                } else {\n                    el.style.height = '';\n                    minHeight = outerHeight(el);\n\n                    if (newHeight > minHeight) {\n                        el.style.height = newHeight + PX;\n\n                        that._cacheRowHeight($(el), newHeight);\n                    } else {\n                        that._clearCachedRowsHeight($(el));\n                    }\n                }\n            });\n        },\n\n        _rowResizing: function() {\n            var that = this,\n                options = that.options,\n                container, rowStart, rowHeight, tr;\n\n            if (options.resizable && options.resizable.rows === true) {\n                that.tbody\n                    .parent()\n                    .add(that.lockedTable)\n                    .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                if (that.rowResizing) {\n                    that.rowResizing.destroy();\n                }\n\n                container = that._getResizerContainer();\n\n                that.rowResizing = new ui.Resizable(container, {\n                    handle: DOT + ROW_RESIZER_WRAP,\n                    start: function(e) {\n                        tr = $(e.currentTarget).data(TR);\n\n                        if (that.lockedTable) {\n                            tr = that._addLockedRowResizing(tr);\n                        }\n\n                        tr.addClass(HOVER);\n\n                        that._detachRowResizerEvents();\n\n                        rowStart = e.y.location;\n                        rowHeight = outerHeight(tr);\n                    },\n                    resize: function(e) {\n                        var newHeight = rowHeight + e.y.location - rowStart,\n                            minHeight = 0;\n\n                        if (tr.length > 1) {\n                            minHeight = that._getMinRowHeight(tr);\n                        }\n\n                        if (newHeight < minHeight) {\n                            newHeight = minHeight;\n                        }\n\n                        tr.css('height', newHeight);\n\n                        that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                    },\n                    resizeend: function() {\n                        var newHeight = outerHeight(tr),\n                            multiSelectionLocked = false,\n                            rows;\n\n                        if (tr.hasClass(SELECTED)) {\n                            rows = that.select();\n\n                            if (tr.length > 1 && rows.length > tr.length) {\n                                rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                multiSelectionLocked = true;\n                            }\n                        } else {\n                            rows = tr;\n                        }\n\n                        that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                        tr.removeClass(HOVER);\n\n                        that.rowResizer.removeClass(ACTIVE);\n                        that.rowResizer.addClass(HOVER);\n                        that._attachRowResizerEvents();\n\n                        if (multiSelectionLocked) {\n                            rows = that.select();\n                        }\n\n                        if (rowHeight != newHeight) {\n                            that.trigger(ROWRESIZE, {\n                                row: tr,\n                                rows,\n                                oldHeight: rowHeight,\n                                newHeight\n                            });\n                        }\n\n                        tr = null;\n                    }\n                });\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                            that.table.find(\">tbody>tr.k-grouping-row\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                clickMoveClick = false;\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                clickMoveClick = true;\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                },\n                clickMoveClick: clickMoveClick,\n                cursorOffset: { top: 0, left: 0 }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRowTo: function(row, index) {\n            var that = this,\n                item = that.dataItem(row),\n                oldIndex = row.index();\n\n            if (index < 0 || index === oldIndex) {\n                return;\n            }\n\n            if (!that.trigger(ROWREORDER, {\n                row: row,\n                oldIndex: row.index(),\n                newIndex: index\n            })) {\n                that.dataSource.pushMove(index, [item]);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(AUTO);\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + PX;\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(TR) && this._editMode() !== \"popup\") {\n                container = container.closest(TR);\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                };\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            tap: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-remove-command\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(TR));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(TR));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        size: that.options.size,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel-command\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-save-command\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n\n            that.angular(\"compile\", function() {\n                return {\n                    elements: cell,\n                    data: [ { dataItem: dataItem } ]\n                };\n            });\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel-command\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-save-command\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-start\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\" }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\" });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel-command\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\">' + kendo.ui.icon(\"chevron-left\") + '</a>' +\n                            encode(that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-save-command\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\">' + kendo.ui.icon(\"check\") + '</a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: () => '',\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: that._isMobile ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                size: that.options.size,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n            var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(SELECTED),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                var angularElements = newRow;\n                var angularData = [{ dataItem: model }];\n\n                if (related && related.length) {\n                    angularElements = newRow.add(related);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: angularElements.get(),\n                        data: angularData\n                    };\n                });\n\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            if (that._cachedRowsHeight) {\n                that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                that._shouldMapHights = true;\n            }\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _clickAdd: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.addRow();\n        },\n\n        _clickCancel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.cancelChanges();\n        },\n\n        _clickExcel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveAsExcel();\n        },\n\n        _clickPdf: function(e) {\n            var that = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            var promise = that.saveAsPDF();\n\n            if (promise) {\n                promise.done(function() {\n                    that._pdfInitialized = false;\n                });\n            }\n        },\n\n        _clickSave: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveChanges();\n        },\n\n        _searchInput: function(e) {\n            var that = this,\n                input = e.currentTarget;\n\n            clearTimeout(that._searchTimeOut);\n\n            that._searchTimeOut = setTimeout(function() {\n                that._searchTimeOut = null;\n\n                var options = that.options;\n                var searchFields = options.search ? options.search.fields : null;\n                var expression = { filters: [], logic: \"or\" };\n                var value = input.value;\n\n                if (!searchFields) {\n                    searchFields = getColumnsFields(options.columns);\n                }\n\n                if (that.dataSource.options.endless) {\n                    that.dataSource.options.endless = null;\n                    that._endlessPageSize = that.dataSource.options.pageSize;\n                }\n\n                if (value) {\n                    for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                    }\n                } else {\n                    expression = {};\n                }\n\n                that.dataSource.filter(expression);\n            }, 300);\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n\n                container, items;\n\n            if (toolbar) {\n                that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                that._cancelClickHandler = that._clickCancel.bind(that);\n                that._saveClickHandler = that._clickSave.bind(that);\n                that._excelClickHandler = that._clickExcel.bind(that);\n                that._pdfClickHandler = that._clickPdf.bind(that);\n                that._serachHandler = that._searchInput.bind(that);\n\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                        .prependTo(wrapper);\n\n                    if (typeof toolbar === STRING || isFunction(toolbar)) {\n                        if (typeof toolbar === STRING) {\n                            toolbar = kendo.template(toolbar).bind(that);\n                        }\n\n                        container.html(toolbar({ grid: that }));\n                        that._attachToolbarClicks();\n                    } else if (isArray(toolbar)) {\n                        items = that._processItems(toolbar);\n\n                        container.kendoToolBar({\n                            navigateOnTab: !that.options.navigatable,\n                            size: that.options.size,\n                            items: items\n                        });\n                    }\n\n                    that.angular(\"compile\", function() {\n                        return { elements: container.get() };\n                    });\n                } else {\n                    that._attachToolbarClicks();\n                }\n\n                container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n            }\n        },\n\n        _attachToolbarClicks: function() {\n            var editable = this.options.editable,\n                container = this.wrapper.find(\".k-grid-toolbar\");\n\n            if (editable && editable.create !== false) {\n                container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                    .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                    .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n            }\n\n            container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n            container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n        },\n\n        _processItems: function(tools) {\n            var that = this,\n                items = [],\n                messages = this.options.messages.commands;\n\n            tools.map(t => {\n                var command, searchText, icon, className, inputSize, template = \"\";\n\n                if (typeof t === 'string') {\n                    command = t.toLowerCase();\n                    t = {};\n                    t.text = messages[command] || command;\n                } else {\n                    command = (t.name || t.text || \"\").toLowerCase();\n                    t.text = t.text || messages[command] || command;\n                }\n\n                if (command === \"search\") {\n                    items.push({\n                        type: \"spacer\"\n                    });\n\n                    searchText = t.text || messages.search;\n                    icon = t.icon || t.iconClass || \"search\";\n\n                    inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                    template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                    template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                    template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                    template += \"</span>\";\n\n                    items.push({\n                        name: \"search\",\n                        overflow: \"never\",\n                        template: template\n                    });\n                } else {\n                    if (!command && !(isPlainObject(t) && t.template)) {\n                        throw new Error(\"Custom commands should have name specified\");\n                    }\n\n                    t = extend({ type: \"button\" }, defaultCommands[command], t);\n                    className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                    t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                    t.attributes = that._processAttr(t.attr);\n                    delete t.attr;\n\n                    if (!!className) {\n                        if (t.attributes[\"class\"] === undefined$1) {\n                            t.attributes[\"class\"] = \"\";\n                        }\n\n                        t.attributes[\"class\"] += (\" \" + className);\n                    }\n\n                    if (t.template) {\n                        delete t.type;\n                    }\n\n                    if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                        t.click = that[\"_\" + command + \"ClickHandler\"];\n                    }\n\n                    items.push(t);\n                }\n            });\n\n            return items;\n        },\n\n        _processAttr: function(attr) {\n            var attributes = {},\n                attrArray;\n\n            if (typeof attr === STRING && attr.length > 0) {\n                attrArray = attr.split(\" \");\n                attrArray.map(a => {\n                    var keyValue = a.split(\"=\");\n\n                    if (keyValue.length === 2) {\n                        attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                    }\n                });\n            } else if (isPlainObject(attr)) {\n                attributes = attr;\n            }\n\n            return attributes;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(TR);\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                    if (element.is(CARET_ALT_DOWN)) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    size: that.options.size,\n                    allowDrag: that.options.reorderable,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n            var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        if (e.event) {\n                            that.trigger(CHANGE);\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that.trigger(CHANGE);\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(SELECTED)) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that.trigger(CHANGE);\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(TR)) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(TR);\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(WIDTH);\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(WIDTH, AUTO);\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(WIDTH, currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n\n                    if (column.sticky) {\n                        if (isPlainObject(column.stickyStyle)) {\n                            th.css({\n                                left: column.stickyStyle.left || \"\",\n                                right: column.stickyStyle.right || \"\"\n                            });\n                        }\n\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        th.css({\n                            left: \"\",\n                            right: \"\"\n                        });\n\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n            }\n\n            return result;\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                handled = this._focusToolbar();\n            }\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _focusToolbar: function() {\n            var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n            if (focusable.length > 0) {\n                focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-filter-row\")) {\n                return false;\n            }\n\n            if (row.is(DOT + GROUPING_ROW)) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).first();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                return leafDataCells(container).filter(isCellVisible).eq(index);\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                } else {\n                    if (this._hasDetails()) {\n                        index--;\n                    }\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            var tmpIndex = index;\n            //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n            if (this._currentDataIndex(container, current) !== undefined$1) {\n                var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var hiddenColumns = currentRowCells.filter(\":hidden\");\n                for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                    if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                        tmpIndex--;\n                    }\n                }\n            }\n            index = tmpIndex;\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(DIV)) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, AUTO);\n            }\n\n            if (width) {\n                that.wrapper.css(WIDTH, width);\n            }\n\n            that._initMobile();\n        },\n\n        _initContextMenu: function() {\n            var that = this,\n                options = that.options,\n                tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n            var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n            tbodyContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.tbody,\n                filter: \".k-table-td\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, tbodyContextMenu);\n\n            theadContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.thead,\n                filter: \".k-table-th\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, theadContextMenu);\n\n            that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n            that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n        },\n\n        _buildStates: function() {\n            var that = this;\n\n            return {\n                isEditable: that.options.editable,\n                isSelectable: that.options.selectable,\n                isSortable: that.options.sortable,\n                isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                hasSelection: () => (this.select() ? this.select().length > 0 : false),\n                isSorted: () => !(this.dataSource.sort() ? this.dataSource.sort().length > 0 : false),\n            };\n        },\n\n        _action: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ grid: this }, args.options),\n                command = new ui.grid.commands[commandName](commandOptions);\n\n            return command.exec();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody class='k-table-tbody'/>\").appendTo(table);\n            }\n\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                that.content.wrap(\"<div class='k-grid-container' />\").parent();\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n\n                        if (that.rowResizer) {\n                            that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n            var value;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        value = active.val();\n\n                        if (active.is(\"[type='checkbox'\")) {\n                            value = active.is(\":checked\");\n                        }\n\n                        widget.value(value);\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _destroyRowResizing: function() {\n            if (this.rowResizing) {\n                this.rowResizing.destroy();\n\n                this.rowResizing = null;\n            }\n\n            if (this.rowResizer) {\n                this._detachRowResizerEvents();\n                this.rowResizer.off(DUBLECLICK + NS);\n                this.rowResizer = null;\n                this._clearCachedRowsHeight();\n            }\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    that.angular(\"cleanup\", function() {\n                        return { elements: noRecordsElement.get() };\n                    });\n\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                    kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                    noRecordsElement.insertAfter(that.table);\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: noRecordsElement.get(),\n                            data: [{}]\n                        };\n                    });\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(AUTO);\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                row.replaceWith(tmp);\n\n                tmp = that._items(tbody).eq(idx);\n\n                var angularData = [ { dataItem: model } ];\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: tmp.get(),\n                        data: angularData\n                     };\n                });\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                        cell.addClass(SELECTED);\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                size = that.options.size,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n                kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    that.angular(\"cleanup\", function() {\n                        return { elements: footer.get() };\n                    });\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                        data: map(that.columns, function(col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                table,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                table = html.find(\"table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that._appendCols(table);\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                $angular = options.$angular;\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner,\n                            reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                            groupable: that.options.groupable && column.groupable !== false\n                        };\n\n                        if ($angular) {\n                            menuOptions.$angular = $angular;\n                        }\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var $angular = that.options.$angular;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        size: that.options.size,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    if ($angular) {\n                        settings.$angular = $angular;\n                    }\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(WIDTH)\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(TR),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that.trigger(CHANGE);\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var classAttribute;\n            let rowTemplateFunc;\n\n            if (!rowTemplate) {\n                rowTemplateFunc = (data) => {\n                    var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                    var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplateResult += groupCells(groups);\n                    }\n\n                    if (hasDetails) {\n                        rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                    }\n\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n\n                        if (that._editMode() === INCELL && field) {\n                            column.attributes = column.attributes || {};\n\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n\n                            let dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                            column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                            if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                                column.attributes[\"class\"] += dirtyCellTemplate;\n                            }\n                        }\n\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            classAttribute = column.attributes[\"class\"];\n\n                            if (typeof classAttribute !== \"undefined\") {\n                                if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                    column.attributes[\"class\"] += \" k-command-cell\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-command-cell\";\n                            }\n                        }\n\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                            } else {\n                                column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                            }\n\n                            if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                            }\n\n                            if (typeof column.attributes.style !== \"undefined\") {\n                                column.attributes.style += \" cursor: move;\";\n                            } else {\n                                column.attributes.style = \"cursor: move;\";\n                            }\n                        }\n\n                        let attributes = column.attributes instanceof Function ? column.attributes(data) : column.attributes;\n                        let columnAttributes = stringifyAttributes(attributes);\n                        let colSpanAttributes = '';\n\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                            }\n                            colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                        }\n                        rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                        rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                        rowTemplateResult += \"</td>\";\n                    }\n\n                    rowTemplateResult += \"</tr>\";\n                    return rowTemplateResult;\n                };\n            }\n\n            rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? ' k-dirty-cell' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                field = column.field,\n                // html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    return (data) => {\n                        let html = \"\";\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                            } else {\n                                html += that._createButton(column.command[idx]);\n                            }\n                        }\n                        return html;\n                    };\n                }\n                return () => that._createButton(column.command);\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            return (data) => {\n                let html = that._dirtyIndicatorTemplate(field)(data);\n\n                if (type === FUNCTION) {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += template(data);\n                    state.count++;\n                } else if (type === STRING) {\n                    html += kendo.template(template, settings)(data);\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                    var v = convertToObject(columnValues);\n                    var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                    html += encode(f != null ? f : '');\n                } else {\n                    let fieldValue = '';\n                    if (field) {\n                        field = kendo.getter(field)(data);\n                        fieldValue = field == null ? '' : field;\n                    }\n\n                    if (format) {\n                        fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                    }\n\n                    html += column.encoded ? encode(fieldValue) : fieldValue;\n                }\n\n                return html;\n            };\n        },\n\n        _dirtyIndicatorTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n            if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ` ${kendo.attr(\"style-margin\")}=\"0 auto\" ${kendo.attr(\"style-position\")}=\"static\"` : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            // var html = \"\";\n            var type;\n            var tmpl;\n            let resultTemplate;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                state.count++;\n                resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n            } else if (type === \"string\") {\n                resultTemplate = this.options.noRecords.template ?\n                    kendo.format(wrapper, NORECORDSCLASS, template)\n                    : () => kendo.format(wrapper, NORECORDSCLASS, template);\n            }\n\n            tmpl = kendo.template(resultTemplate, settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                // html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            let footerTemplateFunction = (data) => {\n                let html = '<tr class=\"' + rowClass + '\">';\n\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        html += template(data);\n                        count++;\n                    } else {\n                        html += \"&nbsp;\";\n                    }\n\n                    html += \"</td>\";\n                }\n\n                html += '</tr>';\n                return html;\n            };\n\n            let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n            if (count > 0) {\n                return resultTemplate.bind(storage);\n            }\n\n            return resultTemplate;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            if (headerTemplateIndex < 0) {\n                return;\n            }\n            var groupHeaderTemplFunc = (data) => {\n                var resultHtml = '<tr class=\"' + rowClass + '\">';\n\n                if (!skipGroupCells) {\n                    for (var i = 0; i < data.groupCells; i++) {\n                        resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                    }\n                }\n\n                if (that._hasDetails()) {\n                    resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                    return resultHtml;\n                    // return kendo.template(resultHtml, settings);\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                }\n                else {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    if (column.sticky) {\n                        let stickyAttributes = '';\n                        groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                        }\n\n                        if (isPlainObject(column.stickyStyle)) {\n                            let stickyLeft = column.stickyStyle.left ? `${kendo.attr(\"style-left\")}=\"${column.stickyStyle.left}\"` : '';\n                            let stickyRight = column.stickyStyle.right ? `${kendo.attr(\"style-right\")}=\"${column.stickyStyle.right}\"` : '';\n                            stickyAttributes = `${stickyLeft} ${stickyRight}`;\n                        }\n\n                        resultHtml += `<td class=\"k-table-td ${STICKY_CELL_CLASS} ${groupHeaderColumnTemplateClass}\" ${stickyAttributes}>`;\n                    } else {\n                        resultHtml += \"<td class='k-table-td'>\";\n                    }\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        resultHtml += storage[\"tmpl\" + count](data);\n                        count++;\n                    } else {\n                        resultHtml += \"&nbsp;\";\n                    }\n\n                    resultHtml += \"</td>\";\n                }\n\n                resultHtml += '</tr>';\n\n                return resultHtml;\n            };\n\n            html = kendo.template(groupHeaderTemplFunc, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            let detailTemplateFunction = (data) => {\n                let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n\n                html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                if (type === FUNCTION) {\n                    templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                    html += template(data);\n                    templateFunctionCount++;\n                } else {\n                    html += kendo.template(template, settings)(data);\n                }\n\n                html += \"</td></tr>\";\n                return html;\n            };\n\n            let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n            if (templateFunctionCount > 0) {\n                return resultTemplate.bind(templateFunctionStorage);\n            }\n\n            return resultTemplate;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.is(CARET_ALT_RIGHT),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            if (!expanding) {\n                kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            } else {\n                kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n            }\n\n            button.attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: detailRow.get(),\n                        data: [ { dataItem: data } ]\n                    };\n                });\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                let index = inArray(th, leafs);\n                let currentTh = \"\";\n\n                if (th.selectable) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += \">\" + text + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    currentTh += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        currentTh += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        currentTh += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        currentTh += \"title='\";\n                        currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        currentTh += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += stringifyAttributes(th.headerAttributes);\n\n                    if (sortable) {\n                        text = kendo.template(SORTHEADERTMPL)({ text: text });\n                    }\n\n                    currentTh += \">\" + text + \"</th>\";\n                }\n                html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n            this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(TR));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                table.find('.k-grid-header-locked').css('width', '1px');\n\n                table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead class='k-table-thead' role='rowgroup'/>\").insertBefore(that.tbody);\n            }\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr class='k-table-row'>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                   kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row k-table-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(\"k-header\");\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            this.angular(\"cleanup\", function() {\n                return {\n                    elements: thead.find(\"th\" + NAVCELL).get()\n                };\n            });\n\n            this.angular(\"compile\", function() {\n                return {\n                    elements: thead.find(HEADERCELLS).get(),\n                    data: map(columns, function(col) { return { column: col }; })\n                };\n            });\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n\n            if (that.groupable) {\n                that._attachGroupable();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _setRowCachedHeight: function(row, uid) {\n            var cachedHeights = this._cachedRowsHeight,\n                cachedHeight = cachedHeights[uid],\n                $row;\n\n            if (cachedHeight) {\n                $row = $(row);\n                $row[0].style.height = cachedHeight + \"px\";\n                row = $row.prop(\"outerHTML\");\n            }\n\n            return row;\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                cachedHeights = that._cachedRowsHeight,\n                length, row;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        row = altRowTemplate(data[idx]);\n                    } else {\n                        row = rowTemplate(data[idx]);\n                    }\n\n                    if (cachedHeights) {\n                        row = that._setRowCachedHeight(row, data[idx].uid);\n                    }\n\n                    html += row;\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_DOWN).length) {\n                kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            }\n\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(TR);\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_RIGHT).length) {\n                kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n            }\n\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(TR);\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(TR).each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = NONE;\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + PX;\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaAddHiddenColIndex();\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaRemoveHiddenColIndex();\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr class='k-table-row'>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n            if (that._shouldMapHights) {\n                that._mapCachedRowsHeight(\"get\", \"uid\");\n                that._shouldMapHights = false;\n            }\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            that._muteAngularRebind(function() {\n                that._angularItems(\"compile\");\n            });\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n       _angularItems: function(cmd) {\n\n           kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n           if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n               this._cleanupDetailItems();\n           }\n\n           this._angularGroupItems(cmd);\n\n           this._angularGroupFooterItems(cmd);\n       },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n              that.angular(\"cleanup\", function() {\n                   return { elements: that.tbody.children(\".k-detail-row\") };\n               });\n\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _angularGroupItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n               container = that.lockedTable.find(\"tbody\");\n           }\n\n           if (that._group) {\n              that.angular(cmd, function() {\n                   return {\n                       elements: container.children(DOT + GROUPING_ROW),\n                       data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _angularGroupFooterItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n                container = that.element;\n           }\n\n           if (that._group && that.groupFooterTemplate) {\n\n               that.angular(cmd, function() {\n                   return {\n                       elements: container.find(\".k-group-footer\"),\n                       data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular, this.options.size);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n            );\n\n            kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.$angular, this.options.size);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: AUTO, width: AUTO\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n           clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + PX;\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + PX;\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + PX;\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return ({ colspan, text }) => `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n    '<p class=\"k-reset\">' +\n        kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${COLLAPSE}\"></a>`), { icon: \"caret-alt-down\" }) + text +\n    '</p></td>';\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n    '<p class=\"k-reset\">&nbsp;</p></td>';\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    '</p></td></tr>';\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n   extend(kendo.ui.grid, {\n       defaultBodyContextMenu: defaultBodyContextMenu,\n       defaultHeadContextMenu: defaultHeadContextMenu,\n   });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}